/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/crypto-js/core.js
var require_core = __commonJS({
  "node_modules/crypto-js/core.js"(exports, module2) {
    (function(root, factory) {
      if (typeof exports === "object") {
        module2.exports = exports = factory();
      } else if (typeof define === "function" && define.amd) {
        define([], factory);
      } else {
        root.CryptoJS = factory();
      }
    })(exports, function() {
      var CryptoJS = CryptoJS || function(Math2, undefined2) {
        var crypto;
        if (typeof window !== "undefined" && window.crypto) {
          crypto = window.crypto;
        }
        if (typeof self !== "undefined" && self.crypto) {
          crypto = self.crypto;
        }
        if (typeof globalThis !== "undefined" && globalThis.crypto) {
          crypto = globalThis.crypto;
        }
        if (!crypto && typeof window !== "undefined" && window.msCrypto) {
          crypto = window.msCrypto;
        }
        if (!crypto && typeof global !== "undefined" && global.crypto) {
          crypto = global.crypto;
        }
        if (!crypto && typeof require === "function") {
          try {
            crypto = require("crypto");
          } catch (err) {
          }
        }
        var cryptoSecureRandomInt = function() {
          if (crypto) {
            if (typeof crypto.getRandomValues === "function") {
              try {
                return crypto.getRandomValues(new Uint32Array(1))[0];
              } catch (err) {
              }
            }
            if (typeof crypto.randomBytes === "function") {
              try {
                return crypto.randomBytes(4).readInt32LE();
              } catch (err) {
              }
            }
          }
          throw new Error("Native crypto module could not be used to get secure random number.");
        };
        var create = Object.create || function() {
          function F() {
          }
          return function(obj) {
            var subtype;
            F.prototype = obj;
            subtype = new F();
            F.prototype = null;
            return subtype;
          };
        }();
        var C = {};
        var C_lib = C.lib = {};
        var Base = C_lib.Base = function() {
          return {
            /**
             * Creates a new object that inherits from this object.
             *
             * @param {Object} overrides Properties to copy into the new object.
             *
             * @return {Object} The new object.
             *
             * @static
             *
             * @example
             *
             *     var MyType = CryptoJS.lib.Base.extend({
             *         field: 'value',
             *
             *         method: function () {
             *         }
             *     });
             */
            extend: function(overrides) {
              var subtype = create(this);
              if (overrides) {
                subtype.mixIn(overrides);
              }
              if (!subtype.hasOwnProperty("init") || this.init === subtype.init) {
                subtype.init = function() {
                  subtype.$super.init.apply(this, arguments);
                };
              }
              subtype.init.prototype = subtype;
              subtype.$super = this;
              return subtype;
            },
            /**
             * Extends this object and runs the init method.
             * Arguments to create() will be passed to init().
             *
             * @return {Object} The new object.
             *
             * @static
             *
             * @example
             *
             *     var instance = MyType.create();
             */
            create: function() {
              var instance = this.extend();
              instance.init.apply(instance, arguments);
              return instance;
            },
            /**
             * Initializes a newly created object.
             * Override this method to add some logic when your objects are created.
             *
             * @example
             *
             *     var MyType = CryptoJS.lib.Base.extend({
             *         init: function () {
             *             // ...
             *         }
             *     });
             */
            init: function() {
            },
            /**
             * Copies properties into this object.
             *
             * @param {Object} properties The properties to mix in.
             *
             * @example
             *
             *     MyType.mixIn({
             *         field: 'value'
             *     });
             */
            mixIn: function(properties) {
              for (var propertyName in properties) {
                if (properties.hasOwnProperty(propertyName)) {
                  this[propertyName] = properties[propertyName];
                }
              }
              if (properties.hasOwnProperty("toString")) {
                this.toString = properties.toString;
              }
            },
            /**
             * Creates a copy of this object.
             *
             * @return {Object} The clone.
             *
             * @example
             *
             *     var clone = instance.clone();
             */
            clone: function() {
              return this.init.prototype.extend(this);
            }
          };
        }();
        var WordArray = C_lib.WordArray = Base.extend({
          /**
           * Initializes a newly created word array.
           *
           * @param {Array} words (Optional) An array of 32-bit words.
           * @param {number} sigBytes (Optional) The number of significant bytes in the words.
           *
           * @example
           *
           *     var wordArray = CryptoJS.lib.WordArray.create();
           *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);
           *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);
           */
          init: function(words, sigBytes) {
            words = this.words = words || [];
            if (sigBytes != undefined2) {
              this.sigBytes = sigBytes;
            } else {
              this.sigBytes = words.length * 4;
            }
          },
          /**
           * Converts this word array to a string.
           *
           * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex
           *
           * @return {string} The stringified word array.
           *
           * @example
           *
           *     var string = wordArray + '';
           *     var string = wordArray.toString();
           *     var string = wordArray.toString(CryptoJS.enc.Utf8);
           */
          toString: function(encoder) {
            return (encoder || Hex).stringify(this);
          },
          /**
           * Concatenates a word array to this word array.
           *
           * @param {WordArray} wordArray The word array to append.
           *
           * @return {WordArray} This word array.
           *
           * @example
           *
           *     wordArray1.concat(wordArray2);
           */
          concat: function(wordArray) {
            var thisWords = this.words;
            var thatWords = wordArray.words;
            var thisSigBytes = this.sigBytes;
            var thatSigBytes = wordArray.sigBytes;
            this.clamp();
            if (thisSigBytes % 4) {
              for (var i = 0; i < thatSigBytes; i++) {
                var thatByte = thatWords[i >>> 2] >>> 24 - i % 4 * 8 & 255;
                thisWords[thisSigBytes + i >>> 2] |= thatByte << 24 - (thisSigBytes + i) % 4 * 8;
              }
            } else {
              for (var j = 0; j < thatSigBytes; j += 4) {
                thisWords[thisSigBytes + j >>> 2] = thatWords[j >>> 2];
              }
            }
            this.sigBytes += thatSigBytes;
            return this;
          },
          /**
           * Removes insignificant bits.
           *
           * @example
           *
           *     wordArray.clamp();
           */
          clamp: function() {
            var words = this.words;
            var sigBytes = this.sigBytes;
            words[sigBytes >>> 2] &= 4294967295 << 32 - sigBytes % 4 * 8;
            words.length = Math2.ceil(sigBytes / 4);
          },
          /**
           * Creates a copy of this word array.
           *
           * @return {WordArray} The clone.
           *
           * @example
           *
           *     var clone = wordArray.clone();
           */
          clone: function() {
            var clone = Base.clone.call(this);
            clone.words = this.words.slice(0);
            return clone;
          },
          /**
           * Creates a word array filled with random bytes.
           *
           * @param {number} nBytes The number of random bytes to generate.
           *
           * @return {WordArray} The random word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.lib.WordArray.random(16);
           */
          random: function(nBytes) {
            var words = [];
            for (var i = 0; i < nBytes; i += 4) {
              words.push(cryptoSecureRandomInt());
            }
            return new WordArray.init(words, nBytes);
          }
        });
        var C_enc = C.enc = {};
        var Hex = C_enc.Hex = {
          /**
           * Converts a word array to a hex string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The hex string.
           *
           * @static
           *
           * @example
           *
           *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);
           */
          stringify: function(wordArray) {
            var words = wordArray.words;
            var sigBytes = wordArray.sigBytes;
            var hexChars = [];
            for (var i = 0; i < sigBytes; i++) {
              var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 255;
              hexChars.push((bite >>> 4).toString(16));
              hexChars.push((bite & 15).toString(16));
            }
            return hexChars.join("");
          },
          /**
           * Converts a hex string to a word array.
           *
           * @param {string} hexStr The hex string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Hex.parse(hexString);
           */
          parse: function(hexStr) {
            var hexStrLength = hexStr.length;
            var words = [];
            for (var i = 0; i < hexStrLength; i += 2) {
              words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << 24 - i % 8 * 4;
            }
            return new WordArray.init(words, hexStrLength / 2);
          }
        };
        var Latin1 = C_enc.Latin1 = {
          /**
           * Converts a word array to a Latin1 string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The Latin1 string.
           *
           * @static
           *
           * @example
           *
           *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);
           */
          stringify: function(wordArray) {
            var words = wordArray.words;
            var sigBytes = wordArray.sigBytes;
            var latin1Chars = [];
            for (var i = 0; i < sigBytes; i++) {
              var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 255;
              latin1Chars.push(String.fromCharCode(bite));
            }
            return latin1Chars.join("");
          },
          /**
           * Converts a Latin1 string to a word array.
           *
           * @param {string} latin1Str The Latin1 string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);
           */
          parse: function(latin1Str) {
            var latin1StrLength = latin1Str.length;
            var words = [];
            for (var i = 0; i < latin1StrLength; i++) {
              words[i >>> 2] |= (latin1Str.charCodeAt(i) & 255) << 24 - i % 4 * 8;
            }
            return new WordArray.init(words, latin1StrLength);
          }
        };
        var Utf8 = C_enc.Utf8 = {
          /**
           * Converts a word array to a UTF-8 string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The UTF-8 string.
           *
           * @static
           *
           * @example
           *
           *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);
           */
          stringify: function(wordArray) {
            try {
              return decodeURIComponent(escape(Latin1.stringify(wordArray)));
            } catch (e) {
              throw new Error("Malformed UTF-8 data");
            }
          },
          /**
           * Converts a UTF-8 string to a word array.
           *
           * @param {string} utf8Str The UTF-8 string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);
           */
          parse: function(utf8Str) {
            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));
          }
        };
        var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({
          /**
           * Resets this block algorithm's data buffer to its initial state.
           *
           * @example
           *
           *     bufferedBlockAlgorithm.reset();
           */
          reset: function() {
            this._data = new WordArray.init();
            this._nDataBytes = 0;
          },
          /**
           * Adds new data to this block algorithm's buffer.
           *
           * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.
           *
           * @example
           *
           *     bufferedBlockAlgorithm._append('data');
           *     bufferedBlockAlgorithm._append(wordArray);
           */
          _append: function(data) {
            if (typeof data == "string") {
              data = Utf8.parse(data);
            }
            this._data.concat(data);
            this._nDataBytes += data.sigBytes;
          },
          /**
           * Processes available data blocks.
           *
           * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.
           *
           * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.
           *
           * @return {WordArray} The processed data.
           *
           * @example
           *
           *     var processedData = bufferedBlockAlgorithm._process();
           *     var processedData = bufferedBlockAlgorithm._process(!!'flush');
           */
          _process: function(doFlush) {
            var processedWords;
            var data = this._data;
            var dataWords = data.words;
            var dataSigBytes = data.sigBytes;
            var blockSize = this.blockSize;
            var blockSizeBytes = blockSize * 4;
            var nBlocksReady = dataSigBytes / blockSizeBytes;
            if (doFlush) {
              nBlocksReady = Math2.ceil(nBlocksReady);
            } else {
              nBlocksReady = Math2.max((nBlocksReady | 0) - this._minBufferSize, 0);
            }
            var nWordsReady = nBlocksReady * blockSize;
            var nBytesReady = Math2.min(nWordsReady * 4, dataSigBytes);
            if (nWordsReady) {
              for (var offset = 0; offset < nWordsReady; offset += blockSize) {
                this._doProcessBlock(dataWords, offset);
              }
              processedWords = dataWords.splice(0, nWordsReady);
              data.sigBytes -= nBytesReady;
            }
            return new WordArray.init(processedWords, nBytesReady);
          },
          /**
           * Creates a copy of this object.
           *
           * @return {Object} The clone.
           *
           * @example
           *
           *     var clone = bufferedBlockAlgorithm.clone();
           */
          clone: function() {
            var clone = Base.clone.call(this);
            clone._data = this._data.clone();
            return clone;
          },
          _minBufferSize: 0
        });
        var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({
          /**
           * Configuration options.
           */
          cfg: Base.extend(),
          /**
           * Initializes a newly created hasher.
           *
           * @param {Object} cfg (Optional) The configuration options to use for this hash computation.
           *
           * @example
           *
           *     var hasher = CryptoJS.algo.SHA256.create();
           */
          init: function(cfg) {
            this.cfg = this.cfg.extend(cfg);
            this.reset();
          },
          /**
           * Resets this hasher to its initial state.
           *
           * @example
           *
           *     hasher.reset();
           */
          reset: function() {
            BufferedBlockAlgorithm.reset.call(this);
            this._doReset();
          },
          /**
           * Updates this hasher with a message.
           *
           * @param {WordArray|string} messageUpdate The message to append.
           *
           * @return {Hasher} This hasher.
           *
           * @example
           *
           *     hasher.update('message');
           *     hasher.update(wordArray);
           */
          update: function(messageUpdate) {
            this._append(messageUpdate);
            this._process();
            return this;
          },
          /**
           * Finalizes the hash computation.
           * Note that the finalize operation is effectively a destructive, read-once operation.
           *
           * @param {WordArray|string} messageUpdate (Optional) A final message update.
           *
           * @return {WordArray} The hash.
           *
           * @example
           *
           *     var hash = hasher.finalize();
           *     var hash = hasher.finalize('message');
           *     var hash = hasher.finalize(wordArray);
           */
          finalize: function(messageUpdate) {
            if (messageUpdate) {
              this._append(messageUpdate);
            }
            var hash = this._doFinalize();
            return hash;
          },
          blockSize: 512 / 32,
          /**
           * Creates a shortcut function to a hasher's object interface.
           *
           * @param {Hasher} hasher The hasher to create a helper for.
           *
           * @return {Function} The shortcut function.
           *
           * @static
           *
           * @example
           *
           *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);
           */
          _createHelper: function(hasher) {
            return function(message, cfg) {
              return new hasher.init(cfg).finalize(message);
            };
          },
          /**
           * Creates a shortcut function to the HMAC's object interface.
           *
           * @param {Hasher} hasher The hasher to use in this HMAC helper.
           *
           * @return {Function} The shortcut function.
           *
           * @static
           *
           * @example
           *
           *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);
           */
          _createHmacHelper: function(hasher) {
            return function(message, key) {
              return new C_algo.HMAC.init(hasher, key).finalize(message);
            };
          }
        });
        var C_algo = C.algo = {};
        return C;
      }(Math);
      return CryptoJS;
    });
  }
});

// node_modules/crypto-js/md5.js
var require_md5 = __commonJS({
  "node_modules/crypto-js/md5.js"(exports, module2) {
    (function(root, factory) {
      if (typeof exports === "object") {
        module2.exports = exports = factory(require_core());
      } else if (typeof define === "function" && define.amd) {
        define(["./core"], factory);
      } else {
        factory(root.CryptoJS);
      }
    })(exports, function(CryptoJS) {
      (function(Math2) {
        var C = CryptoJS;
        var C_lib = C.lib;
        var WordArray = C_lib.WordArray;
        var Hasher = C_lib.Hasher;
        var C_algo = C.algo;
        var T = [];
        (function() {
          for (var i = 0; i < 64; i++) {
            T[i] = Math2.abs(Math2.sin(i + 1)) * 4294967296 | 0;
          }
        })();
        var MD5 = C_algo.MD5 = Hasher.extend({
          _doReset: function() {
            this._hash = new WordArray.init([
              1732584193,
              4023233417,
              2562383102,
              271733878
            ]);
          },
          _doProcessBlock: function(M, offset) {
            for (var i = 0; i < 16; i++) {
              var offset_i = offset + i;
              var M_offset_i = M[offset_i];
              M[offset_i] = (M_offset_i << 8 | M_offset_i >>> 24) & 16711935 | (M_offset_i << 24 | M_offset_i >>> 8) & 4278255360;
            }
            var H = this._hash.words;
            var M_offset_0 = M[offset + 0];
            var M_offset_1 = M[offset + 1];
            var M_offset_2 = M[offset + 2];
            var M_offset_3 = M[offset + 3];
            var M_offset_4 = M[offset + 4];
            var M_offset_5 = M[offset + 5];
            var M_offset_6 = M[offset + 6];
            var M_offset_7 = M[offset + 7];
            var M_offset_8 = M[offset + 8];
            var M_offset_9 = M[offset + 9];
            var M_offset_10 = M[offset + 10];
            var M_offset_11 = M[offset + 11];
            var M_offset_12 = M[offset + 12];
            var M_offset_13 = M[offset + 13];
            var M_offset_14 = M[offset + 14];
            var M_offset_15 = M[offset + 15];
            var a = H[0];
            var b = H[1];
            var c = H[2];
            var d = H[3];
            a = FF(a, b, c, d, M_offset_0, 7, T[0]);
            d = FF(d, a, b, c, M_offset_1, 12, T[1]);
            c = FF(c, d, a, b, M_offset_2, 17, T[2]);
            b = FF(b, c, d, a, M_offset_3, 22, T[3]);
            a = FF(a, b, c, d, M_offset_4, 7, T[4]);
            d = FF(d, a, b, c, M_offset_5, 12, T[5]);
            c = FF(c, d, a, b, M_offset_6, 17, T[6]);
            b = FF(b, c, d, a, M_offset_7, 22, T[7]);
            a = FF(a, b, c, d, M_offset_8, 7, T[8]);
            d = FF(d, a, b, c, M_offset_9, 12, T[9]);
            c = FF(c, d, a, b, M_offset_10, 17, T[10]);
            b = FF(b, c, d, a, M_offset_11, 22, T[11]);
            a = FF(a, b, c, d, M_offset_12, 7, T[12]);
            d = FF(d, a, b, c, M_offset_13, 12, T[13]);
            c = FF(c, d, a, b, M_offset_14, 17, T[14]);
            b = FF(b, c, d, a, M_offset_15, 22, T[15]);
            a = GG(a, b, c, d, M_offset_1, 5, T[16]);
            d = GG(d, a, b, c, M_offset_6, 9, T[17]);
            c = GG(c, d, a, b, M_offset_11, 14, T[18]);
            b = GG(b, c, d, a, M_offset_0, 20, T[19]);
            a = GG(a, b, c, d, M_offset_5, 5, T[20]);
            d = GG(d, a, b, c, M_offset_10, 9, T[21]);
            c = GG(c, d, a, b, M_offset_15, 14, T[22]);
            b = GG(b, c, d, a, M_offset_4, 20, T[23]);
            a = GG(a, b, c, d, M_offset_9, 5, T[24]);
            d = GG(d, a, b, c, M_offset_14, 9, T[25]);
            c = GG(c, d, a, b, M_offset_3, 14, T[26]);
            b = GG(b, c, d, a, M_offset_8, 20, T[27]);
            a = GG(a, b, c, d, M_offset_13, 5, T[28]);
            d = GG(d, a, b, c, M_offset_2, 9, T[29]);
            c = GG(c, d, a, b, M_offset_7, 14, T[30]);
            b = GG(b, c, d, a, M_offset_12, 20, T[31]);
            a = HH(a, b, c, d, M_offset_5, 4, T[32]);
            d = HH(d, a, b, c, M_offset_8, 11, T[33]);
            c = HH(c, d, a, b, M_offset_11, 16, T[34]);
            b = HH(b, c, d, a, M_offset_14, 23, T[35]);
            a = HH(a, b, c, d, M_offset_1, 4, T[36]);
            d = HH(d, a, b, c, M_offset_4, 11, T[37]);
            c = HH(c, d, a, b, M_offset_7, 16, T[38]);
            b = HH(b, c, d, a, M_offset_10, 23, T[39]);
            a = HH(a, b, c, d, M_offset_13, 4, T[40]);
            d = HH(d, a, b, c, M_offset_0, 11, T[41]);
            c = HH(c, d, a, b, M_offset_3, 16, T[42]);
            b = HH(b, c, d, a, M_offset_6, 23, T[43]);
            a = HH(a, b, c, d, M_offset_9, 4, T[44]);
            d = HH(d, a, b, c, M_offset_12, 11, T[45]);
            c = HH(c, d, a, b, M_offset_15, 16, T[46]);
            b = HH(b, c, d, a, M_offset_2, 23, T[47]);
            a = II(a, b, c, d, M_offset_0, 6, T[48]);
            d = II(d, a, b, c, M_offset_7, 10, T[49]);
            c = II(c, d, a, b, M_offset_14, 15, T[50]);
            b = II(b, c, d, a, M_offset_5, 21, T[51]);
            a = II(a, b, c, d, M_offset_12, 6, T[52]);
            d = II(d, a, b, c, M_offset_3, 10, T[53]);
            c = II(c, d, a, b, M_offset_10, 15, T[54]);
            b = II(b, c, d, a, M_offset_1, 21, T[55]);
            a = II(a, b, c, d, M_offset_8, 6, T[56]);
            d = II(d, a, b, c, M_offset_15, 10, T[57]);
            c = II(c, d, a, b, M_offset_6, 15, T[58]);
            b = II(b, c, d, a, M_offset_13, 21, T[59]);
            a = II(a, b, c, d, M_offset_4, 6, T[60]);
            d = II(d, a, b, c, M_offset_11, 10, T[61]);
            c = II(c, d, a, b, M_offset_2, 15, T[62]);
            b = II(b, c, d, a, M_offset_9, 21, T[63]);
            H[0] = H[0] + a | 0;
            H[1] = H[1] + b | 0;
            H[2] = H[2] + c | 0;
            H[3] = H[3] + d | 0;
          },
          _doFinalize: function() {
            var data = this._data;
            var dataWords = data.words;
            var nBitsTotal = this._nDataBytes * 8;
            var nBitsLeft = data.sigBytes * 8;
            dataWords[nBitsLeft >>> 5] |= 128 << 24 - nBitsLeft % 32;
            var nBitsTotalH = Math2.floor(nBitsTotal / 4294967296);
            var nBitsTotalL = nBitsTotal;
            dataWords[(nBitsLeft + 64 >>> 9 << 4) + 15] = (nBitsTotalH << 8 | nBitsTotalH >>> 24) & 16711935 | (nBitsTotalH << 24 | nBitsTotalH >>> 8) & 4278255360;
            dataWords[(nBitsLeft + 64 >>> 9 << 4) + 14] = (nBitsTotalL << 8 | nBitsTotalL >>> 24) & 16711935 | (nBitsTotalL << 24 | nBitsTotalL >>> 8) & 4278255360;
            data.sigBytes = (dataWords.length + 1) * 4;
            this._process();
            var hash = this._hash;
            var H = hash.words;
            for (var i = 0; i < 4; i++) {
              var H_i = H[i];
              H[i] = (H_i << 8 | H_i >>> 24) & 16711935 | (H_i << 24 | H_i >>> 8) & 4278255360;
            }
            return hash;
          },
          clone: function() {
            var clone = Hasher.clone.call(this);
            clone._hash = this._hash.clone();
            return clone;
          }
        });
        function FF(a, b, c, d, x, s, t) {
          var n = a + (b & c | ~b & d) + x + t;
          return (n << s | n >>> 32 - s) + b;
        }
        function GG(a, b, c, d, x, s, t) {
          var n = a + (b & d | c & ~d) + x + t;
          return (n << s | n >>> 32 - s) + b;
        }
        function HH(a, b, c, d, x, s, t) {
          var n = a + (b ^ c ^ d) + x + t;
          return (n << s | n >>> 32 - s) + b;
        }
        function II(a, b, c, d, x, s, t) {
          var n = a + (c ^ (b | ~d)) + x + t;
          return (n << s | n >>> 32 - s) + b;
        }
        C.MD5 = Hasher._createHelper(MD5);
        C.HmacMD5 = Hasher._createHmacHelper(MD5);
      })(Math);
      return CryptoJS.MD5;
    });
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => Prj
});
module.exports = __toCommonJS(main_exports);
var import_obsidian16 = require("obsidian");

// src/libs/MarkdownBlockProcessor.ts
var import_obsidian13 = require("obsidian");

// node_modules/js-yaml/dist/js-yaml.mjs
function isNothing(subject) {
  return typeof subject === "undefined" || subject === null;
}
function isObject(subject) {
  return typeof subject === "object" && subject !== null;
}
function toArray(sequence) {
  if (Array.isArray(sequence))
    return sequence;
  else if (isNothing(sequence))
    return [];
  return [sequence];
}
function extend(target, source) {
  var index, length, key, sourceKeys;
  if (source) {
    sourceKeys = Object.keys(source);
    for (index = 0, length = sourceKeys.length; index < length; index += 1) {
      key = sourceKeys[index];
      target[key] = source[key];
    }
  }
  return target;
}
function repeat(string, count) {
  var result = "", cycle;
  for (cycle = 0; cycle < count; cycle += 1) {
    result += string;
  }
  return result;
}
function isNegativeZero(number) {
  return number === 0 && Number.NEGATIVE_INFINITY === 1 / number;
}
var isNothing_1 = isNothing;
var isObject_1 = isObject;
var toArray_1 = toArray;
var repeat_1 = repeat;
var isNegativeZero_1 = isNegativeZero;
var extend_1 = extend;
var common = {
  isNothing: isNothing_1,
  isObject: isObject_1,
  toArray: toArray_1,
  repeat: repeat_1,
  isNegativeZero: isNegativeZero_1,
  extend: extend_1
};
function formatError(exception2, compact) {
  var where = "", message = exception2.reason || "(unknown reason)";
  if (!exception2.mark)
    return message;
  if (exception2.mark.name) {
    where += 'in "' + exception2.mark.name + '" ';
  }
  where += "(" + (exception2.mark.line + 1) + ":" + (exception2.mark.column + 1) + ")";
  if (!compact && exception2.mark.snippet) {
    where += "\n\n" + exception2.mark.snippet;
  }
  return message + " " + where;
}
function YAMLException$1(reason, mark) {
  Error.call(this);
  this.name = "YAMLException";
  this.reason = reason;
  this.mark = mark;
  this.message = formatError(this, false);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack || "";
  }
}
YAMLException$1.prototype = Object.create(Error.prototype);
YAMLException$1.prototype.constructor = YAMLException$1;
YAMLException$1.prototype.toString = function toString(compact) {
  return this.name + ": " + formatError(this, compact);
};
var exception = YAMLException$1;
function getLine(buffer, lineStart, lineEnd, position, maxLineLength) {
  var head = "";
  var tail = "";
  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;
  if (position - lineStart > maxHalfLength) {
    head = " ... ";
    lineStart = position - maxHalfLength + head.length;
  }
  if (lineEnd - position > maxHalfLength) {
    tail = " ...";
    lineEnd = position + maxHalfLength - tail.length;
  }
  return {
    str: head + buffer.slice(lineStart, lineEnd).replace(/\t/g, "\u2192") + tail,
    pos: position - lineStart + head.length
    // relative position
  };
}
function padStart(string, max) {
  return common.repeat(" ", max - string.length) + string;
}
function makeSnippet(mark, options) {
  options = Object.create(options || null);
  if (!mark.buffer)
    return null;
  if (!options.maxLength)
    options.maxLength = 79;
  if (typeof options.indent !== "number")
    options.indent = 1;
  if (typeof options.linesBefore !== "number")
    options.linesBefore = 3;
  if (typeof options.linesAfter !== "number")
    options.linesAfter = 2;
  var re = /\r?\n|\r|\0/g;
  var lineStarts = [0];
  var lineEnds = [];
  var match;
  var foundLineNo = -1;
  while (match = re.exec(mark.buffer)) {
    lineEnds.push(match.index);
    lineStarts.push(match.index + match[0].length);
    if (mark.position <= match.index && foundLineNo < 0) {
      foundLineNo = lineStarts.length - 2;
    }
  }
  if (foundLineNo < 0)
    foundLineNo = lineStarts.length - 1;
  var result = "", i, line;
  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;
  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);
  for (i = 1; i <= options.linesBefore; i++) {
    if (foundLineNo - i < 0)
      break;
    line = getLine(
      mark.buffer,
      lineStarts[foundLineNo - i],
      lineEnds[foundLineNo - i],
      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),
      maxLineLength
    );
    result = common.repeat(" ", options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) + " | " + line.str + "\n" + result;
  }
  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);
  result += common.repeat(" ", options.indent) + padStart((mark.line + 1).toString(), lineNoLength) + " | " + line.str + "\n";
  result += common.repeat("-", options.indent + lineNoLength + 3 + line.pos) + "^\n";
  for (i = 1; i <= options.linesAfter; i++) {
    if (foundLineNo + i >= lineEnds.length)
      break;
    line = getLine(
      mark.buffer,
      lineStarts[foundLineNo + i],
      lineEnds[foundLineNo + i],
      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),
      maxLineLength
    );
    result += common.repeat(" ", options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) + " | " + line.str + "\n";
  }
  return result.replace(/\n$/, "");
}
var snippet = makeSnippet;
var TYPE_CONSTRUCTOR_OPTIONS = [
  "kind",
  "multi",
  "resolve",
  "construct",
  "instanceOf",
  "predicate",
  "represent",
  "representName",
  "defaultStyle",
  "styleAliases"
];
var YAML_NODE_KINDS = [
  "scalar",
  "sequence",
  "mapping"
];
function compileStyleAliases(map2) {
  var result = {};
  if (map2 !== null) {
    Object.keys(map2).forEach(function(style) {
      map2[style].forEach(function(alias) {
        result[String(alias)] = style;
      });
    });
  }
  return result;
}
function Type$1(tag, options) {
  options = options || {};
  Object.keys(options).forEach(function(name) {
    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {
      throw new exception('Unknown option "' + name + '" is met in definition of "' + tag + '" YAML type.');
    }
  });
  this.options = options;
  this.tag = tag;
  this.kind = options["kind"] || null;
  this.resolve = options["resolve"] || function() {
    return true;
  };
  this.construct = options["construct"] || function(data) {
    return data;
  };
  this.instanceOf = options["instanceOf"] || null;
  this.predicate = options["predicate"] || null;
  this.represent = options["represent"] || null;
  this.representName = options["representName"] || null;
  this.defaultStyle = options["defaultStyle"] || null;
  this.multi = options["multi"] || false;
  this.styleAliases = compileStyleAliases(options["styleAliases"] || null);
  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {
    throw new exception('Unknown kind "' + this.kind + '" is specified for "' + tag + '" YAML type.');
  }
}
var type = Type$1;
function compileList(schema2, name) {
  var result = [];
  schema2[name].forEach(function(currentType) {
    var newIndex = result.length;
    result.forEach(function(previousType, previousIndex) {
      if (previousType.tag === currentType.tag && previousType.kind === currentType.kind && previousType.multi === currentType.multi) {
        newIndex = previousIndex;
      }
    });
    result[newIndex] = currentType;
  });
  return result;
}
function compileMap() {
  var result = {
    scalar: {},
    sequence: {},
    mapping: {},
    fallback: {},
    multi: {
      scalar: [],
      sequence: [],
      mapping: [],
      fallback: []
    }
  }, index, length;
  function collectType(type2) {
    if (type2.multi) {
      result.multi[type2.kind].push(type2);
      result.multi["fallback"].push(type2);
    } else {
      result[type2.kind][type2.tag] = result["fallback"][type2.tag] = type2;
    }
  }
  for (index = 0, length = arguments.length; index < length; index += 1) {
    arguments[index].forEach(collectType);
  }
  return result;
}
function Schema$1(definition) {
  return this.extend(definition);
}
Schema$1.prototype.extend = function extend2(definition) {
  var implicit = [];
  var explicit = [];
  if (definition instanceof type) {
    explicit.push(definition);
  } else if (Array.isArray(definition)) {
    explicit = explicit.concat(definition);
  } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {
    if (definition.implicit)
      implicit = implicit.concat(definition.implicit);
    if (definition.explicit)
      explicit = explicit.concat(definition.explicit);
  } else {
    throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");
  }
  implicit.forEach(function(type$1) {
    if (!(type$1 instanceof type)) {
      throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");
    }
    if (type$1.loadKind && type$1.loadKind !== "scalar") {
      throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");
    }
    if (type$1.multi) {
      throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.");
    }
  });
  explicit.forEach(function(type$1) {
    if (!(type$1 instanceof type)) {
      throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");
    }
  });
  var result = Object.create(Schema$1.prototype);
  result.implicit = (this.implicit || []).concat(implicit);
  result.explicit = (this.explicit || []).concat(explicit);
  result.compiledImplicit = compileList(result, "implicit");
  result.compiledExplicit = compileList(result, "explicit");
  result.compiledTypeMap = compileMap(result.compiledImplicit, result.compiledExplicit);
  return result;
};
var schema = Schema$1;
var str = new type("tag:yaml.org,2002:str", {
  kind: "scalar",
  construct: function(data) {
    return data !== null ? data : "";
  }
});
var seq = new type("tag:yaml.org,2002:seq", {
  kind: "sequence",
  construct: function(data) {
    return data !== null ? data : [];
  }
});
var map = new type("tag:yaml.org,2002:map", {
  kind: "mapping",
  construct: function(data) {
    return data !== null ? data : {};
  }
});
var failsafe = new schema({
  explicit: [
    str,
    seq,
    map
  ]
});
function resolveYamlNull(data) {
  if (data === null)
    return true;
  var max = data.length;
  return max === 1 && data === "~" || max === 4 && (data === "null" || data === "Null" || data === "NULL");
}
function constructYamlNull() {
  return null;
}
function isNull(object) {
  return object === null;
}
var _null = new type("tag:yaml.org,2002:null", {
  kind: "scalar",
  resolve: resolveYamlNull,
  construct: constructYamlNull,
  predicate: isNull,
  represent: {
    canonical: function() {
      return "~";
    },
    lowercase: function() {
      return "null";
    },
    uppercase: function() {
      return "NULL";
    },
    camelcase: function() {
      return "Null";
    },
    empty: function() {
      return "";
    }
  },
  defaultStyle: "lowercase"
});
function resolveYamlBoolean(data) {
  if (data === null)
    return false;
  var max = data.length;
  return max === 4 && (data === "true" || data === "True" || data === "TRUE") || max === 5 && (data === "false" || data === "False" || data === "FALSE");
}
function constructYamlBoolean(data) {
  return data === "true" || data === "True" || data === "TRUE";
}
function isBoolean(object) {
  return Object.prototype.toString.call(object) === "[object Boolean]";
}
var bool = new type("tag:yaml.org,2002:bool", {
  kind: "scalar",
  resolve: resolveYamlBoolean,
  construct: constructYamlBoolean,
  predicate: isBoolean,
  represent: {
    lowercase: function(object) {
      return object ? "true" : "false";
    },
    uppercase: function(object) {
      return object ? "TRUE" : "FALSE";
    },
    camelcase: function(object) {
      return object ? "True" : "False";
    }
  },
  defaultStyle: "lowercase"
});
function isHexCode(c) {
  return 48 <= c && c <= 57 || 65 <= c && c <= 70 || 97 <= c && c <= 102;
}
function isOctCode(c) {
  return 48 <= c && c <= 55;
}
function isDecCode(c) {
  return 48 <= c && c <= 57;
}
function resolveYamlInteger(data) {
  if (data === null)
    return false;
  var max = data.length, index = 0, hasDigits = false, ch;
  if (!max)
    return false;
  ch = data[index];
  if (ch === "-" || ch === "+") {
    ch = data[++index];
  }
  if (ch === "0") {
    if (index + 1 === max)
      return true;
    ch = data[++index];
    if (ch === "b") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_")
          continue;
        if (ch !== "0" && ch !== "1")
          return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
    if (ch === "x") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_")
          continue;
        if (!isHexCode(data.charCodeAt(index)))
          return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
    if (ch === "o") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_")
          continue;
        if (!isOctCode(data.charCodeAt(index)))
          return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
  }
  if (ch === "_")
    return false;
  for (; index < max; index++) {
    ch = data[index];
    if (ch === "_")
      continue;
    if (!isDecCode(data.charCodeAt(index))) {
      return false;
    }
    hasDigits = true;
  }
  if (!hasDigits || ch === "_")
    return false;
  return true;
}
function constructYamlInteger(data) {
  var value = data, sign = 1, ch;
  if (value.indexOf("_") !== -1) {
    value = value.replace(/_/g, "");
  }
  ch = value[0];
  if (ch === "-" || ch === "+") {
    if (ch === "-")
      sign = -1;
    value = value.slice(1);
    ch = value[0];
  }
  if (value === "0")
    return 0;
  if (ch === "0") {
    if (value[1] === "b")
      return sign * parseInt(value.slice(2), 2);
    if (value[1] === "x")
      return sign * parseInt(value.slice(2), 16);
    if (value[1] === "o")
      return sign * parseInt(value.slice(2), 8);
  }
  return sign * parseInt(value, 10);
}
function isInteger(object) {
  return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 === 0 && !common.isNegativeZero(object));
}
var int = new type("tag:yaml.org,2002:int", {
  kind: "scalar",
  resolve: resolveYamlInteger,
  construct: constructYamlInteger,
  predicate: isInteger,
  represent: {
    binary: function(obj) {
      return obj >= 0 ? "0b" + obj.toString(2) : "-0b" + obj.toString(2).slice(1);
    },
    octal: function(obj) {
      return obj >= 0 ? "0o" + obj.toString(8) : "-0o" + obj.toString(8).slice(1);
    },
    decimal: function(obj) {
      return obj.toString(10);
    },
    /* eslint-disable max-len */
    hexadecimal: function(obj) {
      return obj >= 0 ? "0x" + obj.toString(16).toUpperCase() : "-0x" + obj.toString(16).toUpperCase().slice(1);
    }
  },
  defaultStyle: "decimal",
  styleAliases: {
    binary: [2, "bin"],
    octal: [8, "oct"],
    decimal: [10, "dec"],
    hexadecimal: [16, "hex"]
  }
});
var YAML_FLOAT_PATTERN = new RegExp(
  // 2.5e4, 2.5 and integers
  "^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"
);
function resolveYamlFloat(data) {
  if (data === null)
    return false;
  if (!YAML_FLOAT_PATTERN.test(data) || // Quick hack to not allow integers end with `_`
  // Probably should update regexp & check speed
  data[data.length - 1] === "_") {
    return false;
  }
  return true;
}
function constructYamlFloat(data) {
  var value, sign;
  value = data.replace(/_/g, "").toLowerCase();
  sign = value[0] === "-" ? -1 : 1;
  if ("+-".indexOf(value[0]) >= 0) {
    value = value.slice(1);
  }
  if (value === ".inf") {
    return sign === 1 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;
  } else if (value === ".nan") {
    return NaN;
  }
  return sign * parseFloat(value, 10);
}
var SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;
function representYamlFloat(object, style) {
  var res;
  if (isNaN(object)) {
    switch (style) {
      case "lowercase":
        return ".nan";
      case "uppercase":
        return ".NAN";
      case "camelcase":
        return ".NaN";
    }
  } else if (Number.POSITIVE_INFINITY === object) {
    switch (style) {
      case "lowercase":
        return ".inf";
      case "uppercase":
        return ".INF";
      case "camelcase":
        return ".Inf";
    }
  } else if (Number.NEGATIVE_INFINITY === object) {
    switch (style) {
      case "lowercase":
        return "-.inf";
      case "uppercase":
        return "-.INF";
      case "camelcase":
        return "-.Inf";
    }
  } else if (common.isNegativeZero(object)) {
    return "-0.0";
  }
  res = object.toString(10);
  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace("e", ".e") : res;
}
function isFloat(object) {
  return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 !== 0 || common.isNegativeZero(object));
}
var float = new type("tag:yaml.org,2002:float", {
  kind: "scalar",
  resolve: resolveYamlFloat,
  construct: constructYamlFloat,
  predicate: isFloat,
  represent: representYamlFloat,
  defaultStyle: "lowercase"
});
var json = failsafe.extend({
  implicit: [
    _null,
    bool,
    int,
    float
  ]
});
var core = json;
var YAML_DATE_REGEXP = new RegExp(
  "^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"
);
var YAML_TIMESTAMP_REGEXP = new RegExp(
  "^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"
);
function resolveYamlTimestamp(data) {
  if (data === null)
    return false;
  if (YAML_DATE_REGEXP.exec(data) !== null)
    return true;
  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null)
    return true;
  return false;
}
function constructYamlTimestamp(data) {
  var match, year, month, day, hour, minute, second, fraction = 0, delta = null, tz_hour, tz_minute, date;
  match = YAML_DATE_REGEXP.exec(data);
  if (match === null)
    match = YAML_TIMESTAMP_REGEXP.exec(data);
  if (match === null)
    throw new Error("Date resolve error");
  year = +match[1];
  month = +match[2] - 1;
  day = +match[3];
  if (!match[4]) {
    return new Date(Date.UTC(year, month, day));
  }
  hour = +match[4];
  minute = +match[5];
  second = +match[6];
  if (match[7]) {
    fraction = match[7].slice(0, 3);
    while (fraction.length < 3) {
      fraction += "0";
    }
    fraction = +fraction;
  }
  if (match[9]) {
    tz_hour = +match[10];
    tz_minute = +(match[11] || 0);
    delta = (tz_hour * 60 + tz_minute) * 6e4;
    if (match[9] === "-")
      delta = -delta;
  }
  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));
  if (delta)
    date.setTime(date.getTime() - delta);
  return date;
}
function representYamlTimestamp(object) {
  return object.toISOString();
}
var timestamp = new type("tag:yaml.org,2002:timestamp", {
  kind: "scalar",
  resolve: resolveYamlTimestamp,
  construct: constructYamlTimestamp,
  instanceOf: Date,
  represent: representYamlTimestamp
});
function resolveYamlMerge(data) {
  return data === "<<" || data === null;
}
var merge = new type("tag:yaml.org,2002:merge", {
  kind: "scalar",
  resolve: resolveYamlMerge
});
var BASE64_MAP = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";
function resolveYamlBinary(data) {
  if (data === null)
    return false;
  var code, idx, bitlen = 0, max = data.length, map2 = BASE64_MAP;
  for (idx = 0; idx < max; idx++) {
    code = map2.indexOf(data.charAt(idx));
    if (code > 64)
      continue;
    if (code < 0)
      return false;
    bitlen += 6;
  }
  return bitlen % 8 === 0;
}
function constructYamlBinary(data) {
  var idx, tailbits, input = data.replace(/[\r\n=]/g, ""), max = input.length, map2 = BASE64_MAP, bits = 0, result = [];
  for (idx = 0; idx < max; idx++) {
    if (idx % 4 === 0 && idx) {
      result.push(bits >> 16 & 255);
      result.push(bits >> 8 & 255);
      result.push(bits & 255);
    }
    bits = bits << 6 | map2.indexOf(input.charAt(idx));
  }
  tailbits = max % 4 * 6;
  if (tailbits === 0) {
    result.push(bits >> 16 & 255);
    result.push(bits >> 8 & 255);
    result.push(bits & 255);
  } else if (tailbits === 18) {
    result.push(bits >> 10 & 255);
    result.push(bits >> 2 & 255);
  } else if (tailbits === 12) {
    result.push(bits >> 4 & 255);
  }
  return new Uint8Array(result);
}
function representYamlBinary(object) {
  var result = "", bits = 0, idx, tail, max = object.length, map2 = BASE64_MAP;
  for (idx = 0; idx < max; idx++) {
    if (idx % 3 === 0 && idx) {
      result += map2[bits >> 18 & 63];
      result += map2[bits >> 12 & 63];
      result += map2[bits >> 6 & 63];
      result += map2[bits & 63];
    }
    bits = (bits << 8) + object[idx];
  }
  tail = max % 3;
  if (tail === 0) {
    result += map2[bits >> 18 & 63];
    result += map2[bits >> 12 & 63];
    result += map2[bits >> 6 & 63];
    result += map2[bits & 63];
  } else if (tail === 2) {
    result += map2[bits >> 10 & 63];
    result += map2[bits >> 4 & 63];
    result += map2[bits << 2 & 63];
    result += map2[64];
  } else if (tail === 1) {
    result += map2[bits >> 2 & 63];
    result += map2[bits << 4 & 63];
    result += map2[64];
    result += map2[64];
  }
  return result;
}
function isBinary(obj) {
  return Object.prototype.toString.call(obj) === "[object Uint8Array]";
}
var binary = new type("tag:yaml.org,2002:binary", {
  kind: "scalar",
  resolve: resolveYamlBinary,
  construct: constructYamlBinary,
  predicate: isBinary,
  represent: representYamlBinary
});
var _hasOwnProperty$3 = Object.prototype.hasOwnProperty;
var _toString$2 = Object.prototype.toString;
function resolveYamlOmap(data) {
  if (data === null)
    return true;
  var objectKeys = [], index, length, pair, pairKey, pairHasKey, object = data;
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    pairHasKey = false;
    if (_toString$2.call(pair) !== "[object Object]")
      return false;
    for (pairKey in pair) {
      if (_hasOwnProperty$3.call(pair, pairKey)) {
        if (!pairHasKey)
          pairHasKey = true;
        else
          return false;
      }
    }
    if (!pairHasKey)
      return false;
    if (objectKeys.indexOf(pairKey) === -1)
      objectKeys.push(pairKey);
    else
      return false;
  }
  return true;
}
function constructYamlOmap(data) {
  return data !== null ? data : [];
}
var omap = new type("tag:yaml.org,2002:omap", {
  kind: "sequence",
  resolve: resolveYamlOmap,
  construct: constructYamlOmap
});
var _toString$1 = Object.prototype.toString;
function resolveYamlPairs(data) {
  if (data === null)
    return true;
  var index, length, pair, keys, result, object = data;
  result = new Array(object.length);
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    if (_toString$1.call(pair) !== "[object Object]")
      return false;
    keys = Object.keys(pair);
    if (keys.length !== 1)
      return false;
    result[index] = [keys[0], pair[keys[0]]];
  }
  return true;
}
function constructYamlPairs(data) {
  if (data === null)
    return [];
  var index, length, pair, keys, result, object = data;
  result = new Array(object.length);
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    keys = Object.keys(pair);
    result[index] = [keys[0], pair[keys[0]]];
  }
  return result;
}
var pairs = new type("tag:yaml.org,2002:pairs", {
  kind: "sequence",
  resolve: resolveYamlPairs,
  construct: constructYamlPairs
});
var _hasOwnProperty$2 = Object.prototype.hasOwnProperty;
function resolveYamlSet(data) {
  if (data === null)
    return true;
  var key, object = data;
  for (key in object) {
    if (_hasOwnProperty$2.call(object, key)) {
      if (object[key] !== null)
        return false;
    }
  }
  return true;
}
function constructYamlSet(data) {
  return data !== null ? data : {};
}
var set = new type("tag:yaml.org,2002:set", {
  kind: "mapping",
  resolve: resolveYamlSet,
  construct: constructYamlSet
});
var _default = core.extend({
  implicit: [
    timestamp,
    merge
  ],
  explicit: [
    binary,
    omap,
    pairs,
    set
  ]
});
var _hasOwnProperty$1 = Object.prototype.hasOwnProperty;
var CONTEXT_FLOW_IN = 1;
var CONTEXT_FLOW_OUT = 2;
var CONTEXT_BLOCK_IN = 3;
var CONTEXT_BLOCK_OUT = 4;
var CHOMPING_CLIP = 1;
var CHOMPING_STRIP = 2;
var CHOMPING_KEEP = 3;
var PATTERN_NON_PRINTABLE = /[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
var PATTERN_NON_ASCII_LINE_BREAKS = /[\x85\u2028\u2029]/;
var PATTERN_FLOW_INDICATORS = /[,\[\]\{\}]/;
var PATTERN_TAG_HANDLE = /^(?:!|!!|![a-z\-]+!)$/i;
var PATTERN_TAG_URI = /^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;
function _class(obj) {
  return Object.prototype.toString.call(obj);
}
function is_EOL(c) {
  return c === 10 || c === 13;
}
function is_WHITE_SPACE(c) {
  return c === 9 || c === 32;
}
function is_WS_OR_EOL(c) {
  return c === 9 || c === 32 || c === 10 || c === 13;
}
function is_FLOW_INDICATOR(c) {
  return c === 44 || c === 91 || c === 93 || c === 123 || c === 125;
}
function fromHexCode(c) {
  var lc;
  if (48 <= c && c <= 57) {
    return c - 48;
  }
  lc = c | 32;
  if (97 <= lc && lc <= 102) {
    return lc - 97 + 10;
  }
  return -1;
}
function escapedHexLen(c) {
  if (c === 120) {
    return 2;
  }
  if (c === 117) {
    return 4;
  }
  if (c === 85) {
    return 8;
  }
  return 0;
}
function fromDecimalCode(c) {
  if (48 <= c && c <= 57) {
    return c - 48;
  }
  return -1;
}
function simpleEscapeSequence(c) {
  return c === 48 ? "\0" : c === 97 ? "\x07" : c === 98 ? "\b" : c === 116 ? "	" : c === 9 ? "	" : c === 110 ? "\n" : c === 118 ? "\v" : c === 102 ? "\f" : c === 114 ? "\r" : c === 101 ? "\x1B" : c === 32 ? " " : c === 34 ? '"' : c === 47 ? "/" : c === 92 ? "\\" : c === 78 ? "\x85" : c === 95 ? "\xA0" : c === 76 ? "\u2028" : c === 80 ? "\u2029" : "";
}
function charFromCodepoint(c) {
  if (c <= 65535) {
    return String.fromCharCode(c);
  }
  return String.fromCharCode(
    (c - 65536 >> 10) + 55296,
    (c - 65536 & 1023) + 56320
  );
}
var simpleEscapeCheck = new Array(256);
var simpleEscapeMap = new Array(256);
for (i = 0; i < 256; i++) {
  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;
  simpleEscapeMap[i] = simpleEscapeSequence(i);
}
var i;
function State$1(input, options) {
  this.input = input;
  this.filename = options["filename"] || null;
  this.schema = options["schema"] || _default;
  this.onWarning = options["onWarning"] || null;
  this.legacy = options["legacy"] || false;
  this.json = options["json"] || false;
  this.listener = options["listener"] || null;
  this.implicitTypes = this.schema.compiledImplicit;
  this.typeMap = this.schema.compiledTypeMap;
  this.length = input.length;
  this.position = 0;
  this.line = 0;
  this.lineStart = 0;
  this.lineIndent = 0;
  this.firstTabInLine = -1;
  this.documents = [];
}
function generateError(state, message) {
  var mark = {
    name: state.filename,
    buffer: state.input.slice(0, -1),
    // omit trailing \0
    position: state.position,
    line: state.line,
    column: state.position - state.lineStart
  };
  mark.snippet = snippet(mark);
  return new exception(message, mark);
}
function throwError(state, message) {
  throw generateError(state, message);
}
function throwWarning(state, message) {
  if (state.onWarning) {
    state.onWarning.call(null, generateError(state, message));
  }
}
var directiveHandlers = {
  YAML: function handleYamlDirective(state, name, args) {
    var match, major, minor;
    if (state.version !== null) {
      throwError(state, "duplication of %YAML directive");
    }
    if (args.length !== 1) {
      throwError(state, "YAML directive accepts exactly one argument");
    }
    match = /^([0-9]+)\.([0-9]+)$/.exec(args[0]);
    if (match === null) {
      throwError(state, "ill-formed argument of the YAML directive");
    }
    major = parseInt(match[1], 10);
    minor = parseInt(match[2], 10);
    if (major !== 1) {
      throwError(state, "unacceptable YAML version of the document");
    }
    state.version = args[0];
    state.checkLineBreaks = minor < 2;
    if (minor !== 1 && minor !== 2) {
      throwWarning(state, "unsupported YAML version of the document");
    }
  },
  TAG: function handleTagDirective(state, name, args) {
    var handle, prefix;
    if (args.length !== 2) {
      throwError(state, "TAG directive accepts exactly two arguments");
    }
    handle = args[0];
    prefix = args[1];
    if (!PATTERN_TAG_HANDLE.test(handle)) {
      throwError(state, "ill-formed tag handle (first argument) of the TAG directive");
    }
    if (_hasOwnProperty$1.call(state.tagMap, handle)) {
      throwError(state, 'there is a previously declared suffix for "' + handle + '" tag handle');
    }
    if (!PATTERN_TAG_URI.test(prefix)) {
      throwError(state, "ill-formed tag prefix (second argument) of the TAG directive");
    }
    try {
      prefix = decodeURIComponent(prefix);
    } catch (err) {
      throwError(state, "tag prefix is malformed: " + prefix);
    }
    state.tagMap[handle] = prefix;
  }
};
function captureSegment(state, start, end, checkJson) {
  var _position, _length, _character, _result;
  if (start < end) {
    _result = state.input.slice(start, end);
    if (checkJson) {
      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {
        _character = _result.charCodeAt(_position);
        if (!(_character === 9 || 32 <= _character && _character <= 1114111)) {
          throwError(state, "expected valid JSON character");
        }
      }
    } else if (PATTERN_NON_PRINTABLE.test(_result)) {
      throwError(state, "the stream contains non-printable characters");
    }
    state.result += _result;
  }
}
function mergeMappings(state, destination, source, overridableKeys) {
  var sourceKeys, key, index, quantity;
  if (!common.isObject(source)) {
    throwError(state, "cannot merge mappings; the provided source object is unacceptable");
  }
  sourceKeys = Object.keys(source);
  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {
    key = sourceKeys[index];
    if (!_hasOwnProperty$1.call(destination, key)) {
      destination[key] = source[key];
      overridableKeys[key] = true;
    }
  }
}
function storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, startLine, startLineStart, startPos) {
  var index, quantity;
  if (Array.isArray(keyNode)) {
    keyNode = Array.prototype.slice.call(keyNode);
    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {
      if (Array.isArray(keyNode[index])) {
        throwError(state, "nested arrays are not supported inside keys");
      }
      if (typeof keyNode === "object" && _class(keyNode[index]) === "[object Object]") {
        keyNode[index] = "[object Object]";
      }
    }
  }
  if (typeof keyNode === "object" && _class(keyNode) === "[object Object]") {
    keyNode = "[object Object]";
  }
  keyNode = String(keyNode);
  if (_result === null) {
    _result = {};
  }
  if (keyTag === "tag:yaml.org,2002:merge") {
    if (Array.isArray(valueNode)) {
      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {
        mergeMappings(state, _result, valueNode[index], overridableKeys);
      }
    } else {
      mergeMappings(state, _result, valueNode, overridableKeys);
    }
  } else {
    if (!state.json && !_hasOwnProperty$1.call(overridableKeys, keyNode) && _hasOwnProperty$1.call(_result, keyNode)) {
      state.line = startLine || state.line;
      state.lineStart = startLineStart || state.lineStart;
      state.position = startPos || state.position;
      throwError(state, "duplicated mapping key");
    }
    if (keyNode === "__proto__") {
      Object.defineProperty(_result, keyNode, {
        configurable: true,
        enumerable: true,
        writable: true,
        value: valueNode
      });
    } else {
      _result[keyNode] = valueNode;
    }
    delete overridableKeys[keyNode];
  }
  return _result;
}
function readLineBreak(state) {
  var ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 10) {
    state.position++;
  } else if (ch === 13) {
    state.position++;
    if (state.input.charCodeAt(state.position) === 10) {
      state.position++;
    }
  } else {
    throwError(state, "a line break is expected");
  }
  state.line += 1;
  state.lineStart = state.position;
  state.firstTabInLine = -1;
}
function skipSeparationSpace(state, allowComments, checkIndent) {
  var lineBreaks = 0, ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    while (is_WHITE_SPACE(ch)) {
      if (ch === 9 && state.firstTabInLine === -1) {
        state.firstTabInLine = state.position;
      }
      ch = state.input.charCodeAt(++state.position);
    }
    if (allowComments && ch === 35) {
      do {
        ch = state.input.charCodeAt(++state.position);
      } while (ch !== 10 && ch !== 13 && ch !== 0);
    }
    if (is_EOL(ch)) {
      readLineBreak(state);
      ch = state.input.charCodeAt(state.position);
      lineBreaks++;
      state.lineIndent = 0;
      while (ch === 32) {
        state.lineIndent++;
        ch = state.input.charCodeAt(++state.position);
      }
    } else {
      break;
    }
  }
  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {
    throwWarning(state, "deficient indentation");
  }
  return lineBreaks;
}
function testDocumentSeparator(state) {
  var _position = state.position, ch;
  ch = state.input.charCodeAt(_position);
  if ((ch === 45 || ch === 46) && ch === state.input.charCodeAt(_position + 1) && ch === state.input.charCodeAt(_position + 2)) {
    _position += 3;
    ch = state.input.charCodeAt(_position);
    if (ch === 0 || is_WS_OR_EOL(ch)) {
      return true;
    }
  }
  return false;
}
function writeFoldedLines(state, count) {
  if (count === 1) {
    state.result += " ";
  } else if (count > 1) {
    state.result += common.repeat("\n", count - 1);
  }
}
function readPlainScalar(state, nodeIndent, withinFlowCollection) {
  var preceding, following, captureStart, captureEnd, hasPendingContent, _line, _lineStart, _lineIndent, _kind = state.kind, _result = state.result, ch;
  ch = state.input.charCodeAt(state.position);
  if (is_WS_OR_EOL(ch) || is_FLOW_INDICATOR(ch) || ch === 35 || ch === 38 || ch === 42 || ch === 33 || ch === 124 || ch === 62 || ch === 39 || ch === 34 || ch === 37 || ch === 64 || ch === 96) {
    return false;
  }
  if (ch === 63 || ch === 45) {
    following = state.input.charCodeAt(state.position + 1);
    if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
      return false;
    }
  }
  state.kind = "scalar";
  state.result = "";
  captureStart = captureEnd = state.position;
  hasPendingContent = false;
  while (ch !== 0) {
    if (ch === 58) {
      following = state.input.charCodeAt(state.position + 1);
      if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
        break;
      }
    } else if (ch === 35) {
      preceding = state.input.charCodeAt(state.position - 1);
      if (is_WS_OR_EOL(preceding)) {
        break;
      }
    } else if (state.position === state.lineStart && testDocumentSeparator(state) || withinFlowCollection && is_FLOW_INDICATOR(ch)) {
      break;
    } else if (is_EOL(ch)) {
      _line = state.line;
      _lineStart = state.lineStart;
      _lineIndent = state.lineIndent;
      skipSeparationSpace(state, false, -1);
      if (state.lineIndent >= nodeIndent) {
        hasPendingContent = true;
        ch = state.input.charCodeAt(state.position);
        continue;
      } else {
        state.position = captureEnd;
        state.line = _line;
        state.lineStart = _lineStart;
        state.lineIndent = _lineIndent;
        break;
      }
    }
    if (hasPendingContent) {
      captureSegment(state, captureStart, captureEnd, false);
      writeFoldedLines(state, state.line - _line);
      captureStart = captureEnd = state.position;
      hasPendingContent = false;
    }
    if (!is_WHITE_SPACE(ch)) {
      captureEnd = state.position + 1;
    }
    ch = state.input.charCodeAt(++state.position);
  }
  captureSegment(state, captureStart, captureEnd, false);
  if (state.result) {
    return true;
  }
  state.kind = _kind;
  state.result = _result;
  return false;
}
function readSingleQuotedScalar(state, nodeIndent) {
  var ch, captureStart, captureEnd;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 39) {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  state.position++;
  captureStart = captureEnd = state.position;
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    if (ch === 39) {
      captureSegment(state, captureStart, state.position, true);
      ch = state.input.charCodeAt(++state.position);
      if (ch === 39) {
        captureStart = state.position;
        state.position++;
        captureEnd = state.position;
      } else {
        return true;
      }
    } else if (is_EOL(ch)) {
      captureSegment(state, captureStart, captureEnd, true);
      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
      captureStart = captureEnd = state.position;
    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
      throwError(state, "unexpected end of the document within a single quoted scalar");
    } else {
      state.position++;
      captureEnd = state.position;
    }
  }
  throwError(state, "unexpected end of the stream within a single quoted scalar");
}
function readDoubleQuotedScalar(state, nodeIndent) {
  var captureStart, captureEnd, hexLength, hexResult, tmp, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 34) {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  state.position++;
  captureStart = captureEnd = state.position;
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    if (ch === 34) {
      captureSegment(state, captureStart, state.position, true);
      state.position++;
      return true;
    } else if (ch === 92) {
      captureSegment(state, captureStart, state.position, true);
      ch = state.input.charCodeAt(++state.position);
      if (is_EOL(ch)) {
        skipSeparationSpace(state, false, nodeIndent);
      } else if (ch < 256 && simpleEscapeCheck[ch]) {
        state.result += simpleEscapeMap[ch];
        state.position++;
      } else if ((tmp = escapedHexLen(ch)) > 0) {
        hexLength = tmp;
        hexResult = 0;
        for (; hexLength > 0; hexLength--) {
          ch = state.input.charCodeAt(++state.position);
          if ((tmp = fromHexCode(ch)) >= 0) {
            hexResult = (hexResult << 4) + tmp;
          } else {
            throwError(state, "expected hexadecimal character");
          }
        }
        state.result += charFromCodepoint(hexResult);
        state.position++;
      } else {
        throwError(state, "unknown escape sequence");
      }
      captureStart = captureEnd = state.position;
    } else if (is_EOL(ch)) {
      captureSegment(state, captureStart, captureEnd, true);
      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
      captureStart = captureEnd = state.position;
    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
      throwError(state, "unexpected end of the document within a double quoted scalar");
    } else {
      state.position++;
      captureEnd = state.position;
    }
  }
  throwError(state, "unexpected end of the stream within a double quoted scalar");
}
function readFlowCollection(state, nodeIndent) {
  var readNext = true, _line, _lineStart, _pos, _tag = state.tag, _result, _anchor = state.anchor, following, terminator, isPair, isExplicitPair, isMapping, overridableKeys = /* @__PURE__ */ Object.create(null), keyNode, keyTag, valueNode, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 91) {
    terminator = 93;
    isMapping = false;
    _result = [];
  } else if (ch === 123) {
    terminator = 125;
    isMapping = true;
    _result = {};
  } else {
    return false;
  }
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(++state.position);
  while (ch !== 0) {
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if (ch === terminator) {
      state.position++;
      state.tag = _tag;
      state.anchor = _anchor;
      state.kind = isMapping ? "mapping" : "sequence";
      state.result = _result;
      return true;
    } else if (!readNext) {
      throwError(state, "missed comma between flow collection entries");
    } else if (ch === 44) {
      throwError(state, "expected the node content, but found ','");
    }
    keyTag = keyNode = valueNode = null;
    isPair = isExplicitPair = false;
    if (ch === 63) {
      following = state.input.charCodeAt(state.position + 1);
      if (is_WS_OR_EOL(following)) {
        isPair = isExplicitPair = true;
        state.position++;
        skipSeparationSpace(state, true, nodeIndent);
      }
    }
    _line = state.line;
    _lineStart = state.lineStart;
    _pos = state.position;
    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
    keyTag = state.tag;
    keyNode = state.result;
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if ((isExplicitPair || state.line === _line) && ch === 58) {
      isPair = true;
      ch = state.input.charCodeAt(++state.position);
      skipSeparationSpace(state, true, nodeIndent);
      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
      valueNode = state.result;
    }
    if (isMapping) {
      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);
    } else if (isPair) {
      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));
    } else {
      _result.push(keyNode);
    }
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if (ch === 44) {
      readNext = true;
      ch = state.input.charCodeAt(++state.position);
    } else {
      readNext = false;
    }
  }
  throwError(state, "unexpected end of the stream within a flow collection");
}
function readBlockScalar(state, nodeIndent) {
  var captureStart, folding, chomping = CHOMPING_CLIP, didReadContent = false, detectedIndent = false, textIndent = nodeIndent, emptyLines = 0, atMoreIndented = false, tmp, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 124) {
    folding = false;
  } else if (ch === 62) {
    folding = true;
  } else {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  while (ch !== 0) {
    ch = state.input.charCodeAt(++state.position);
    if (ch === 43 || ch === 45) {
      if (CHOMPING_CLIP === chomping) {
        chomping = ch === 43 ? CHOMPING_KEEP : CHOMPING_STRIP;
      } else {
        throwError(state, "repeat of a chomping mode identifier");
      }
    } else if ((tmp = fromDecimalCode(ch)) >= 0) {
      if (tmp === 0) {
        throwError(state, "bad explicit indentation width of a block scalar; it cannot be less than one");
      } else if (!detectedIndent) {
        textIndent = nodeIndent + tmp - 1;
        detectedIndent = true;
      } else {
        throwError(state, "repeat of an indentation width identifier");
      }
    } else {
      break;
    }
  }
  if (is_WHITE_SPACE(ch)) {
    do {
      ch = state.input.charCodeAt(++state.position);
    } while (is_WHITE_SPACE(ch));
    if (ch === 35) {
      do {
        ch = state.input.charCodeAt(++state.position);
      } while (!is_EOL(ch) && ch !== 0);
    }
  }
  while (ch !== 0) {
    readLineBreak(state);
    state.lineIndent = 0;
    ch = state.input.charCodeAt(state.position);
    while ((!detectedIndent || state.lineIndent < textIndent) && ch === 32) {
      state.lineIndent++;
      ch = state.input.charCodeAt(++state.position);
    }
    if (!detectedIndent && state.lineIndent > textIndent) {
      textIndent = state.lineIndent;
    }
    if (is_EOL(ch)) {
      emptyLines++;
      continue;
    }
    if (state.lineIndent < textIndent) {
      if (chomping === CHOMPING_KEEP) {
        state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
      } else if (chomping === CHOMPING_CLIP) {
        if (didReadContent) {
          state.result += "\n";
        }
      }
      break;
    }
    if (folding) {
      if (is_WHITE_SPACE(ch)) {
        atMoreIndented = true;
        state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
      } else if (atMoreIndented) {
        atMoreIndented = false;
        state.result += common.repeat("\n", emptyLines + 1);
      } else if (emptyLines === 0) {
        if (didReadContent) {
          state.result += " ";
        }
      } else {
        state.result += common.repeat("\n", emptyLines);
      }
    } else {
      state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
    }
    didReadContent = true;
    detectedIndent = true;
    emptyLines = 0;
    captureStart = state.position;
    while (!is_EOL(ch) && ch !== 0) {
      ch = state.input.charCodeAt(++state.position);
    }
    captureSegment(state, captureStart, state.position, false);
  }
  return true;
}
function readBlockSequence(state, nodeIndent) {
  var _line, _tag = state.tag, _anchor = state.anchor, _result = [], following, detected = false, ch;
  if (state.firstTabInLine !== -1)
    return false;
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    if (state.firstTabInLine !== -1) {
      state.position = state.firstTabInLine;
      throwError(state, "tab characters must not be used in indentation");
    }
    if (ch !== 45) {
      break;
    }
    following = state.input.charCodeAt(state.position + 1);
    if (!is_WS_OR_EOL(following)) {
      break;
    }
    detected = true;
    state.position++;
    if (skipSeparationSpace(state, true, -1)) {
      if (state.lineIndent <= nodeIndent) {
        _result.push(null);
        ch = state.input.charCodeAt(state.position);
        continue;
      }
    }
    _line = state.line;
    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);
    _result.push(state.result);
    skipSeparationSpace(state, true, -1);
    ch = state.input.charCodeAt(state.position);
    if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
      throwError(state, "bad indentation of a sequence entry");
    } else if (state.lineIndent < nodeIndent) {
      break;
    }
  }
  if (detected) {
    state.tag = _tag;
    state.anchor = _anchor;
    state.kind = "sequence";
    state.result = _result;
    return true;
  }
  return false;
}
function readBlockMapping(state, nodeIndent, flowIndent) {
  var following, allowCompact, _line, _keyLine, _keyLineStart, _keyPos, _tag = state.tag, _anchor = state.anchor, _result = {}, overridableKeys = /* @__PURE__ */ Object.create(null), keyTag = null, keyNode = null, valueNode = null, atExplicitKey = false, detected = false, ch;
  if (state.firstTabInLine !== -1)
    return false;
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    if (!atExplicitKey && state.firstTabInLine !== -1) {
      state.position = state.firstTabInLine;
      throwError(state, "tab characters must not be used in indentation");
    }
    following = state.input.charCodeAt(state.position + 1);
    _line = state.line;
    if ((ch === 63 || ch === 58) && is_WS_OR_EOL(following)) {
      if (ch === 63) {
        if (atExplicitKey) {
          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
          keyTag = keyNode = valueNode = null;
        }
        detected = true;
        atExplicitKey = true;
        allowCompact = true;
      } else if (atExplicitKey) {
        atExplicitKey = false;
        allowCompact = true;
      } else {
        throwError(state, "incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");
      }
      state.position += 1;
      ch = following;
    } else {
      _keyLine = state.line;
      _keyLineStart = state.lineStart;
      _keyPos = state.position;
      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {
        break;
      }
      if (state.line === _line) {
        ch = state.input.charCodeAt(state.position);
        while (is_WHITE_SPACE(ch)) {
          ch = state.input.charCodeAt(++state.position);
        }
        if (ch === 58) {
          ch = state.input.charCodeAt(++state.position);
          if (!is_WS_OR_EOL(ch)) {
            throwError(state, "a whitespace character is expected after the key-value separator within a block mapping");
          }
          if (atExplicitKey) {
            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
            keyTag = keyNode = valueNode = null;
          }
          detected = true;
          atExplicitKey = false;
          allowCompact = false;
          keyTag = state.tag;
          keyNode = state.result;
        } else if (detected) {
          throwError(state, "can not read an implicit mapping pair; a colon is missed");
        } else {
          state.tag = _tag;
          state.anchor = _anchor;
          return true;
        }
      } else if (detected) {
        throwError(state, "can not read a block mapping entry; a multiline key may not be an implicit key");
      } else {
        state.tag = _tag;
        state.anchor = _anchor;
        return true;
      }
    }
    if (state.line === _line || state.lineIndent > nodeIndent) {
      if (atExplicitKey) {
        _keyLine = state.line;
        _keyLineStart = state.lineStart;
        _keyPos = state.position;
      }
      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {
        if (atExplicitKey) {
          keyNode = state.result;
        } else {
          valueNode = state.result;
        }
      }
      if (!atExplicitKey) {
        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);
        keyTag = keyNode = valueNode = null;
      }
      skipSeparationSpace(state, true, -1);
      ch = state.input.charCodeAt(state.position);
    }
    if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
      throwError(state, "bad indentation of a mapping entry");
    } else if (state.lineIndent < nodeIndent) {
      break;
    }
  }
  if (atExplicitKey) {
    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
  }
  if (detected) {
    state.tag = _tag;
    state.anchor = _anchor;
    state.kind = "mapping";
    state.result = _result;
  }
  return detected;
}
function readTagProperty(state) {
  var _position, isVerbatim = false, isNamed = false, tagHandle, tagName, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 33)
    return false;
  if (state.tag !== null) {
    throwError(state, "duplication of a tag property");
  }
  ch = state.input.charCodeAt(++state.position);
  if (ch === 60) {
    isVerbatim = true;
    ch = state.input.charCodeAt(++state.position);
  } else if (ch === 33) {
    isNamed = true;
    tagHandle = "!!";
    ch = state.input.charCodeAt(++state.position);
  } else {
    tagHandle = "!";
  }
  _position = state.position;
  if (isVerbatim) {
    do {
      ch = state.input.charCodeAt(++state.position);
    } while (ch !== 0 && ch !== 62);
    if (state.position < state.length) {
      tagName = state.input.slice(_position, state.position);
      ch = state.input.charCodeAt(++state.position);
    } else {
      throwError(state, "unexpected end of the stream within a verbatim tag");
    }
  } else {
    while (ch !== 0 && !is_WS_OR_EOL(ch)) {
      if (ch === 33) {
        if (!isNamed) {
          tagHandle = state.input.slice(_position - 1, state.position + 1);
          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {
            throwError(state, "named tag handle cannot contain such characters");
          }
          isNamed = true;
          _position = state.position + 1;
        } else {
          throwError(state, "tag suffix cannot contain exclamation marks");
        }
      }
      ch = state.input.charCodeAt(++state.position);
    }
    tagName = state.input.slice(_position, state.position);
    if (PATTERN_FLOW_INDICATORS.test(tagName)) {
      throwError(state, "tag suffix cannot contain flow indicator characters");
    }
  }
  if (tagName && !PATTERN_TAG_URI.test(tagName)) {
    throwError(state, "tag name cannot contain such characters: " + tagName);
  }
  try {
    tagName = decodeURIComponent(tagName);
  } catch (err) {
    throwError(state, "tag name is malformed: " + tagName);
  }
  if (isVerbatim) {
    state.tag = tagName;
  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {
    state.tag = state.tagMap[tagHandle] + tagName;
  } else if (tagHandle === "!") {
    state.tag = "!" + tagName;
  } else if (tagHandle === "!!") {
    state.tag = "tag:yaml.org,2002:" + tagName;
  } else {
    throwError(state, 'undeclared tag handle "' + tagHandle + '"');
  }
  return true;
}
function readAnchorProperty(state) {
  var _position, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 38)
    return false;
  if (state.anchor !== null) {
    throwError(state, "duplication of an anchor property");
  }
  ch = state.input.charCodeAt(++state.position);
  _position = state.position;
  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
    ch = state.input.charCodeAt(++state.position);
  }
  if (state.position === _position) {
    throwError(state, "name of an anchor node must contain at least one character");
  }
  state.anchor = state.input.slice(_position, state.position);
  return true;
}
function readAlias(state) {
  var _position, alias, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 42)
    return false;
  ch = state.input.charCodeAt(++state.position);
  _position = state.position;
  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
    ch = state.input.charCodeAt(++state.position);
  }
  if (state.position === _position) {
    throwError(state, "name of an alias node must contain at least one character");
  }
  alias = state.input.slice(_position, state.position);
  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {
    throwError(state, 'unidentified alias "' + alias + '"');
  }
  state.result = state.anchorMap[alias];
  skipSeparationSpace(state, true, -1);
  return true;
}
function composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {
  var allowBlockStyles, allowBlockScalars, allowBlockCollections, indentStatus = 1, atNewLine = false, hasContent = false, typeIndex, typeQuantity, typeList, type2, flowIndent, blockIndent;
  if (state.listener !== null) {
    state.listener("open", state);
  }
  state.tag = null;
  state.anchor = null;
  state.kind = null;
  state.result = null;
  allowBlockStyles = allowBlockScalars = allowBlockCollections = CONTEXT_BLOCK_OUT === nodeContext || CONTEXT_BLOCK_IN === nodeContext;
  if (allowToSeek) {
    if (skipSeparationSpace(state, true, -1)) {
      atNewLine = true;
      if (state.lineIndent > parentIndent) {
        indentStatus = 1;
      } else if (state.lineIndent === parentIndent) {
        indentStatus = 0;
      } else if (state.lineIndent < parentIndent) {
        indentStatus = -1;
      }
    }
  }
  if (indentStatus === 1) {
    while (readTagProperty(state) || readAnchorProperty(state)) {
      if (skipSeparationSpace(state, true, -1)) {
        atNewLine = true;
        allowBlockCollections = allowBlockStyles;
        if (state.lineIndent > parentIndent) {
          indentStatus = 1;
        } else if (state.lineIndent === parentIndent) {
          indentStatus = 0;
        } else if (state.lineIndent < parentIndent) {
          indentStatus = -1;
        }
      } else {
        allowBlockCollections = false;
      }
    }
  }
  if (allowBlockCollections) {
    allowBlockCollections = atNewLine || allowCompact;
  }
  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {
    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {
      flowIndent = parentIndent;
    } else {
      flowIndent = parentIndent + 1;
    }
    blockIndent = state.position - state.lineStart;
    if (indentStatus === 1) {
      if (allowBlockCollections && (readBlockSequence(state, blockIndent) || readBlockMapping(state, blockIndent, flowIndent)) || readFlowCollection(state, flowIndent)) {
        hasContent = true;
      } else {
        if (allowBlockScalars && readBlockScalar(state, flowIndent) || readSingleQuotedScalar(state, flowIndent) || readDoubleQuotedScalar(state, flowIndent)) {
          hasContent = true;
        } else if (readAlias(state)) {
          hasContent = true;
          if (state.tag !== null || state.anchor !== null) {
            throwError(state, "alias node should not have any properties");
          }
        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {
          hasContent = true;
          if (state.tag === null) {
            state.tag = "?";
          }
        }
        if (state.anchor !== null) {
          state.anchorMap[state.anchor] = state.result;
        }
      }
    } else if (indentStatus === 0) {
      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);
    }
  }
  if (state.tag === null) {
    if (state.anchor !== null) {
      state.anchorMap[state.anchor] = state.result;
    }
  } else if (state.tag === "?") {
    if (state.result !== null && state.kind !== "scalar") {
      throwError(state, 'unacceptable node kind for !<?> tag; it should be "scalar", not "' + state.kind + '"');
    }
    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {
      type2 = state.implicitTypes[typeIndex];
      if (type2.resolve(state.result)) {
        state.result = type2.construct(state.result);
        state.tag = type2.tag;
        if (state.anchor !== null) {
          state.anchorMap[state.anchor] = state.result;
        }
        break;
      }
    }
  } else if (state.tag !== "!") {
    if (_hasOwnProperty$1.call(state.typeMap[state.kind || "fallback"], state.tag)) {
      type2 = state.typeMap[state.kind || "fallback"][state.tag];
    } else {
      type2 = null;
      typeList = state.typeMap.multi[state.kind || "fallback"];
      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {
        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {
          type2 = typeList[typeIndex];
          break;
        }
      }
    }
    if (!type2) {
      throwError(state, "unknown tag !<" + state.tag + ">");
    }
    if (state.result !== null && type2.kind !== state.kind) {
      throwError(state, "unacceptable node kind for !<" + state.tag + '> tag; it should be "' + type2.kind + '", not "' + state.kind + '"');
    }
    if (!type2.resolve(state.result, state.tag)) {
      throwError(state, "cannot resolve a node with !<" + state.tag + "> explicit tag");
    } else {
      state.result = type2.construct(state.result, state.tag);
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = state.result;
      }
    }
  }
  if (state.listener !== null) {
    state.listener("close", state);
  }
  return state.tag !== null || state.anchor !== null || hasContent;
}
function readDocument(state) {
  var documentStart = state.position, _position, directiveName, directiveArgs, hasDirectives = false, ch;
  state.version = null;
  state.checkLineBreaks = state.legacy;
  state.tagMap = /* @__PURE__ */ Object.create(null);
  state.anchorMap = /* @__PURE__ */ Object.create(null);
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    skipSeparationSpace(state, true, -1);
    ch = state.input.charCodeAt(state.position);
    if (state.lineIndent > 0 || ch !== 37) {
      break;
    }
    hasDirectives = true;
    ch = state.input.charCodeAt(++state.position);
    _position = state.position;
    while (ch !== 0 && !is_WS_OR_EOL(ch)) {
      ch = state.input.charCodeAt(++state.position);
    }
    directiveName = state.input.slice(_position, state.position);
    directiveArgs = [];
    if (directiveName.length < 1) {
      throwError(state, "directive name must not be less than one character in length");
    }
    while (ch !== 0) {
      while (is_WHITE_SPACE(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      if (ch === 35) {
        do {
          ch = state.input.charCodeAt(++state.position);
        } while (ch !== 0 && !is_EOL(ch));
        break;
      }
      if (is_EOL(ch))
        break;
      _position = state.position;
      while (ch !== 0 && !is_WS_OR_EOL(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      directiveArgs.push(state.input.slice(_position, state.position));
    }
    if (ch !== 0)
      readLineBreak(state);
    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {
      directiveHandlers[directiveName](state, directiveName, directiveArgs);
    } else {
      throwWarning(state, 'unknown document directive "' + directiveName + '"');
    }
  }
  skipSeparationSpace(state, true, -1);
  if (state.lineIndent === 0 && state.input.charCodeAt(state.position) === 45 && state.input.charCodeAt(state.position + 1) === 45 && state.input.charCodeAt(state.position + 2) === 45) {
    state.position += 3;
    skipSeparationSpace(state, true, -1);
  } else if (hasDirectives) {
    throwError(state, "directives end mark is expected");
  }
  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);
  skipSeparationSpace(state, true, -1);
  if (state.checkLineBreaks && PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {
    throwWarning(state, "non-ASCII line breaks are interpreted as content");
  }
  state.documents.push(state.result);
  if (state.position === state.lineStart && testDocumentSeparator(state)) {
    if (state.input.charCodeAt(state.position) === 46) {
      state.position += 3;
      skipSeparationSpace(state, true, -1);
    }
    return;
  }
  if (state.position < state.length - 1) {
    throwError(state, "end of the stream or a document separator is expected");
  } else {
    return;
  }
}
function loadDocuments(input, options) {
  input = String(input);
  options = options || {};
  if (input.length !== 0) {
    if (input.charCodeAt(input.length - 1) !== 10 && input.charCodeAt(input.length - 1) !== 13) {
      input += "\n";
    }
    if (input.charCodeAt(0) === 65279) {
      input = input.slice(1);
    }
  }
  var state = new State$1(input, options);
  var nullpos = input.indexOf("\0");
  if (nullpos !== -1) {
    state.position = nullpos;
    throwError(state, "null byte is not allowed in input");
  }
  state.input += "\0";
  while (state.input.charCodeAt(state.position) === 32) {
    state.lineIndent += 1;
    state.position += 1;
  }
  while (state.position < state.length - 1) {
    readDocument(state);
  }
  return state.documents;
}
function loadAll$1(input, iterator, options) {
  if (iterator !== null && typeof iterator === "object" && typeof options === "undefined") {
    options = iterator;
    iterator = null;
  }
  var documents = loadDocuments(input, options);
  if (typeof iterator !== "function") {
    return documents;
  }
  for (var index = 0, length = documents.length; index < length; index += 1) {
    iterator(documents[index]);
  }
}
function load$1(input, options) {
  var documents = loadDocuments(input, options);
  if (documents.length === 0) {
    return void 0;
  } else if (documents.length === 1) {
    return documents[0];
  }
  throw new exception("expected a single document in the stream, but found more");
}
var loadAll_1 = loadAll$1;
var load_1 = load$1;
var loader = {
  loadAll: loadAll_1,
  load: load_1
};
var _toString = Object.prototype.toString;
var _hasOwnProperty = Object.prototype.hasOwnProperty;
var CHAR_BOM = 65279;
var CHAR_TAB = 9;
var CHAR_LINE_FEED = 10;
var CHAR_CARRIAGE_RETURN = 13;
var CHAR_SPACE = 32;
var CHAR_EXCLAMATION = 33;
var CHAR_DOUBLE_QUOTE = 34;
var CHAR_SHARP = 35;
var CHAR_PERCENT = 37;
var CHAR_AMPERSAND = 38;
var CHAR_SINGLE_QUOTE = 39;
var CHAR_ASTERISK = 42;
var CHAR_COMMA = 44;
var CHAR_MINUS = 45;
var CHAR_COLON = 58;
var CHAR_EQUALS = 61;
var CHAR_GREATER_THAN = 62;
var CHAR_QUESTION = 63;
var CHAR_COMMERCIAL_AT = 64;
var CHAR_LEFT_SQUARE_BRACKET = 91;
var CHAR_RIGHT_SQUARE_BRACKET = 93;
var CHAR_GRAVE_ACCENT = 96;
var CHAR_LEFT_CURLY_BRACKET = 123;
var CHAR_VERTICAL_LINE = 124;
var CHAR_RIGHT_CURLY_BRACKET = 125;
var ESCAPE_SEQUENCES = {};
ESCAPE_SEQUENCES[0] = "\\0";
ESCAPE_SEQUENCES[7] = "\\a";
ESCAPE_SEQUENCES[8] = "\\b";
ESCAPE_SEQUENCES[9] = "\\t";
ESCAPE_SEQUENCES[10] = "\\n";
ESCAPE_SEQUENCES[11] = "\\v";
ESCAPE_SEQUENCES[12] = "\\f";
ESCAPE_SEQUENCES[13] = "\\r";
ESCAPE_SEQUENCES[27] = "\\e";
ESCAPE_SEQUENCES[34] = '\\"';
ESCAPE_SEQUENCES[92] = "\\\\";
ESCAPE_SEQUENCES[133] = "\\N";
ESCAPE_SEQUENCES[160] = "\\_";
ESCAPE_SEQUENCES[8232] = "\\L";
ESCAPE_SEQUENCES[8233] = "\\P";
var DEPRECATED_BOOLEANS_SYNTAX = [
  "y",
  "Y",
  "yes",
  "Yes",
  "YES",
  "on",
  "On",
  "ON",
  "n",
  "N",
  "no",
  "No",
  "NO",
  "off",
  "Off",
  "OFF"
];
var DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;
function compileStyleMap(schema2, map2) {
  var result, keys, index, length, tag, style, type2;
  if (map2 === null)
    return {};
  result = {};
  keys = Object.keys(map2);
  for (index = 0, length = keys.length; index < length; index += 1) {
    tag = keys[index];
    style = String(map2[tag]);
    if (tag.slice(0, 2) === "!!") {
      tag = "tag:yaml.org,2002:" + tag.slice(2);
    }
    type2 = schema2.compiledTypeMap["fallback"][tag];
    if (type2 && _hasOwnProperty.call(type2.styleAliases, style)) {
      style = type2.styleAliases[style];
    }
    result[tag] = style;
  }
  return result;
}
function encodeHex(character) {
  var string, handle, length;
  string = character.toString(16).toUpperCase();
  if (character <= 255) {
    handle = "x";
    length = 2;
  } else if (character <= 65535) {
    handle = "u";
    length = 4;
  } else if (character <= 4294967295) {
    handle = "U";
    length = 8;
  } else {
    throw new exception("code point within a string may not be greater than 0xFFFFFFFF");
  }
  return "\\" + handle + common.repeat("0", length - string.length) + string;
}
var QUOTING_TYPE_SINGLE = 1;
var QUOTING_TYPE_DOUBLE = 2;
function State(options) {
  this.schema = options["schema"] || _default;
  this.indent = Math.max(1, options["indent"] || 2);
  this.noArrayIndent = options["noArrayIndent"] || false;
  this.skipInvalid = options["skipInvalid"] || false;
  this.flowLevel = common.isNothing(options["flowLevel"]) ? -1 : options["flowLevel"];
  this.styleMap = compileStyleMap(this.schema, options["styles"] || null);
  this.sortKeys = options["sortKeys"] || false;
  this.lineWidth = options["lineWidth"] || 80;
  this.noRefs = options["noRefs"] || false;
  this.noCompatMode = options["noCompatMode"] || false;
  this.condenseFlow = options["condenseFlow"] || false;
  this.quotingType = options["quotingType"] === '"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;
  this.forceQuotes = options["forceQuotes"] || false;
  this.replacer = typeof options["replacer"] === "function" ? options["replacer"] : null;
  this.implicitTypes = this.schema.compiledImplicit;
  this.explicitTypes = this.schema.compiledExplicit;
  this.tag = null;
  this.result = "";
  this.duplicates = [];
  this.usedDuplicates = null;
}
function indentString(string, spaces) {
  var ind = common.repeat(" ", spaces), position = 0, next = -1, result = "", line, length = string.length;
  while (position < length) {
    next = string.indexOf("\n", position);
    if (next === -1) {
      line = string.slice(position);
      position = length;
    } else {
      line = string.slice(position, next + 1);
      position = next + 1;
    }
    if (line.length && line !== "\n")
      result += ind;
    result += line;
  }
  return result;
}
function generateNextLine(state, level) {
  return "\n" + common.repeat(" ", state.indent * level);
}
function testImplicitResolving(state, str2) {
  var index, length, type2;
  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {
    type2 = state.implicitTypes[index];
    if (type2.resolve(str2)) {
      return true;
    }
  }
  return false;
}
function isWhitespace(c) {
  return c === CHAR_SPACE || c === CHAR_TAB;
}
function isPrintable(c) {
  return 32 <= c && c <= 126 || 161 <= c && c <= 55295 && c !== 8232 && c !== 8233 || 57344 <= c && c <= 65533 && c !== CHAR_BOM || 65536 <= c && c <= 1114111;
}
function isNsCharOrWhitespace(c) {
  return isPrintable(c) && c !== CHAR_BOM && c !== CHAR_CARRIAGE_RETURN && c !== CHAR_LINE_FEED;
}
function isPlainSafe(c, prev, inblock) {
  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);
  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);
  return (
    // ns-plain-safe
    (inblock ? (
      // c = flow-in
      cIsNsCharOrWhitespace
    ) : cIsNsCharOrWhitespace && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET) && c !== CHAR_SHARP && !(prev === CHAR_COLON && !cIsNsChar) || isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP || prev === CHAR_COLON && cIsNsChar
  );
}
function isPlainSafeFirst(c) {
  return isPrintable(c) && c !== CHAR_BOM && !isWhitespace(c) && c !== CHAR_MINUS && c !== CHAR_QUESTION && c !== CHAR_COLON && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET && c !== CHAR_SHARP && c !== CHAR_AMPERSAND && c !== CHAR_ASTERISK && c !== CHAR_EXCLAMATION && c !== CHAR_VERTICAL_LINE && c !== CHAR_EQUALS && c !== CHAR_GREATER_THAN && c !== CHAR_SINGLE_QUOTE && c !== CHAR_DOUBLE_QUOTE && c !== CHAR_PERCENT && c !== CHAR_COMMERCIAL_AT && c !== CHAR_GRAVE_ACCENT;
}
function isPlainSafeLast(c) {
  return !isWhitespace(c) && c !== CHAR_COLON;
}
function codePointAt(string, pos) {
  var first = string.charCodeAt(pos), second;
  if (first >= 55296 && first <= 56319 && pos + 1 < string.length) {
    second = string.charCodeAt(pos + 1);
    if (second >= 56320 && second <= 57343) {
      return (first - 55296) * 1024 + second - 56320 + 65536;
    }
  }
  return first;
}
function needIndentIndicator(string) {
  var leadingSpaceRe = /^\n* /;
  return leadingSpaceRe.test(string);
}
var STYLE_PLAIN = 1;
var STYLE_SINGLE = 2;
var STYLE_LITERAL = 3;
var STYLE_FOLDED = 4;
var STYLE_DOUBLE = 5;
function chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth, testAmbiguousType, quotingType, forceQuotes, inblock) {
  var i;
  var char = 0;
  var prevChar = null;
  var hasLineBreak = false;
  var hasFoldableLine = false;
  var shouldTrackWidth = lineWidth !== -1;
  var previousLineBreak = -1;
  var plain = isPlainSafeFirst(codePointAt(string, 0)) && isPlainSafeLast(codePointAt(string, string.length - 1));
  if (singleLineOnly || forceQuotes) {
    for (i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
      char = codePointAt(string, i);
      if (!isPrintable(char)) {
        return STYLE_DOUBLE;
      }
      plain = plain && isPlainSafe(char, prevChar, inblock);
      prevChar = char;
    }
  } else {
    for (i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
      char = codePointAt(string, i);
      if (char === CHAR_LINE_FEED) {
        hasLineBreak = true;
        if (shouldTrackWidth) {
          hasFoldableLine = hasFoldableLine || // Foldable line = too long, and not more-indented.
          i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ";
          previousLineBreak = i;
        }
      } else if (!isPrintable(char)) {
        return STYLE_DOUBLE;
      }
      plain = plain && isPlainSafe(char, prevChar, inblock);
      prevChar = char;
    }
    hasFoldableLine = hasFoldableLine || shouldTrackWidth && (i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ");
  }
  if (!hasLineBreak && !hasFoldableLine) {
    if (plain && !forceQuotes && !testAmbiguousType(string)) {
      return STYLE_PLAIN;
    }
    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;
  }
  if (indentPerLevel > 9 && needIndentIndicator(string)) {
    return STYLE_DOUBLE;
  }
  if (!forceQuotes) {
    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;
  }
  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;
}
function writeScalar(state, string, level, iskey, inblock) {
  state.dump = function() {
    if (string.length === 0) {
      return state.quotingType === QUOTING_TYPE_DOUBLE ? '""' : "''";
    }
    if (!state.noCompatMode) {
      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {
        return state.quotingType === QUOTING_TYPE_DOUBLE ? '"' + string + '"' : "'" + string + "'";
      }
    }
    var indent = state.indent * Math.max(1, level);
    var lineWidth = state.lineWidth === -1 ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);
    var singleLineOnly = iskey || state.flowLevel > -1 && level >= state.flowLevel;
    function testAmbiguity(string2) {
      return testImplicitResolving(state, string2);
    }
    switch (chooseScalarStyle(
      string,
      singleLineOnly,
      state.indent,
      lineWidth,
      testAmbiguity,
      state.quotingType,
      state.forceQuotes && !iskey,
      inblock
    )) {
      case STYLE_PLAIN:
        return string;
      case STYLE_SINGLE:
        return "'" + string.replace(/'/g, "''") + "'";
      case STYLE_LITERAL:
        return "|" + blockHeader(string, state.indent) + dropEndingNewline(indentString(string, indent));
      case STYLE_FOLDED:
        return ">" + blockHeader(string, state.indent) + dropEndingNewline(indentString(foldString(string, lineWidth), indent));
      case STYLE_DOUBLE:
        return '"' + escapeString(string) + '"';
      default:
        throw new exception("impossible error: invalid scalar style");
    }
  }();
}
function blockHeader(string, indentPerLevel) {
  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : "";
  var clip = string[string.length - 1] === "\n";
  var keep = clip && (string[string.length - 2] === "\n" || string === "\n");
  var chomp = keep ? "+" : clip ? "" : "-";
  return indentIndicator + chomp + "\n";
}
function dropEndingNewline(string) {
  return string[string.length - 1] === "\n" ? string.slice(0, -1) : string;
}
function foldString(string, width) {
  var lineRe = /(\n+)([^\n]*)/g;
  var result = function() {
    var nextLF = string.indexOf("\n");
    nextLF = nextLF !== -1 ? nextLF : string.length;
    lineRe.lastIndex = nextLF;
    return foldLine(string.slice(0, nextLF), width);
  }();
  var prevMoreIndented = string[0] === "\n" || string[0] === " ";
  var moreIndented;
  var match;
  while (match = lineRe.exec(string)) {
    var prefix = match[1], line = match[2];
    moreIndented = line[0] === " ";
    result += prefix + (!prevMoreIndented && !moreIndented && line !== "" ? "\n" : "") + foldLine(line, width);
    prevMoreIndented = moreIndented;
  }
  return result;
}
function foldLine(line, width) {
  if (line === "" || line[0] === " ")
    return line;
  var breakRe = / [^ ]/g;
  var match;
  var start = 0, end, curr = 0, next = 0;
  var result = "";
  while (match = breakRe.exec(line)) {
    next = match.index;
    if (next - start > width) {
      end = curr > start ? curr : next;
      result += "\n" + line.slice(start, end);
      start = end + 1;
    }
    curr = next;
  }
  result += "\n";
  if (line.length - start > width && curr > start) {
    result += line.slice(start, curr) + "\n" + line.slice(curr + 1);
  } else {
    result += line.slice(start);
  }
  return result.slice(1);
}
function escapeString(string) {
  var result = "";
  var char = 0;
  var escapeSeq;
  for (var i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
    char = codePointAt(string, i);
    escapeSeq = ESCAPE_SEQUENCES[char];
    if (!escapeSeq && isPrintable(char)) {
      result += string[i];
      if (char >= 65536)
        result += string[i + 1];
    } else {
      result += escapeSeq || encodeHex(char);
    }
  }
  return result;
}
function writeFlowSequence(state, level, object) {
  var _result = "", _tag = state.tag, index, length, value;
  for (index = 0, length = object.length; index < length; index += 1) {
    value = object[index];
    if (state.replacer) {
      value = state.replacer.call(object, String(index), value);
    }
    if (writeNode(state, level, value, false, false) || typeof value === "undefined" && writeNode(state, level, null, false, false)) {
      if (_result !== "")
        _result += "," + (!state.condenseFlow ? " " : "");
      _result += state.dump;
    }
  }
  state.tag = _tag;
  state.dump = "[" + _result + "]";
}
function writeBlockSequence(state, level, object, compact) {
  var _result = "", _tag = state.tag, index, length, value;
  for (index = 0, length = object.length; index < length; index += 1) {
    value = object[index];
    if (state.replacer) {
      value = state.replacer.call(object, String(index), value);
    }
    if (writeNode(state, level + 1, value, true, true, false, true) || typeof value === "undefined" && writeNode(state, level + 1, null, true, true, false, true)) {
      if (!compact || _result !== "") {
        _result += generateNextLine(state, level);
      }
      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
        _result += "-";
      } else {
        _result += "- ";
      }
      _result += state.dump;
    }
  }
  state.tag = _tag;
  state.dump = _result || "[]";
}
function writeFlowMapping(state, level, object) {
  var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, pairBuffer;
  for (index = 0, length = objectKeyList.length; index < length; index += 1) {
    pairBuffer = "";
    if (_result !== "")
      pairBuffer += ", ";
    if (state.condenseFlow)
      pairBuffer += '"';
    objectKey = objectKeyList[index];
    objectValue = object[objectKey];
    if (state.replacer) {
      objectValue = state.replacer.call(object, objectKey, objectValue);
    }
    if (!writeNode(state, level, objectKey, false, false)) {
      continue;
    }
    if (state.dump.length > 1024)
      pairBuffer += "? ";
    pairBuffer += state.dump + (state.condenseFlow ? '"' : "") + ":" + (state.condenseFlow ? "" : " ");
    if (!writeNode(state, level, objectValue, false, false)) {
      continue;
    }
    pairBuffer += state.dump;
    _result += pairBuffer;
  }
  state.tag = _tag;
  state.dump = "{" + _result + "}";
}
function writeBlockMapping(state, level, object, compact) {
  var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, explicitPair, pairBuffer;
  if (state.sortKeys === true) {
    objectKeyList.sort();
  } else if (typeof state.sortKeys === "function") {
    objectKeyList.sort(state.sortKeys);
  } else if (state.sortKeys) {
    throw new exception("sortKeys must be a boolean or a function");
  }
  for (index = 0, length = objectKeyList.length; index < length; index += 1) {
    pairBuffer = "";
    if (!compact || _result !== "") {
      pairBuffer += generateNextLine(state, level);
    }
    objectKey = objectKeyList[index];
    objectValue = object[objectKey];
    if (state.replacer) {
      objectValue = state.replacer.call(object, objectKey, objectValue);
    }
    if (!writeNode(state, level + 1, objectKey, true, true, true)) {
      continue;
    }
    explicitPair = state.tag !== null && state.tag !== "?" || state.dump && state.dump.length > 1024;
    if (explicitPair) {
      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
        pairBuffer += "?";
      } else {
        pairBuffer += "? ";
      }
    }
    pairBuffer += state.dump;
    if (explicitPair) {
      pairBuffer += generateNextLine(state, level);
    }
    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {
      continue;
    }
    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
      pairBuffer += ":";
    } else {
      pairBuffer += ": ";
    }
    pairBuffer += state.dump;
    _result += pairBuffer;
  }
  state.tag = _tag;
  state.dump = _result || "{}";
}
function detectType(state, object, explicit) {
  var _result, typeList, index, length, type2, style;
  typeList = explicit ? state.explicitTypes : state.implicitTypes;
  for (index = 0, length = typeList.length; index < length; index += 1) {
    type2 = typeList[index];
    if ((type2.instanceOf || type2.predicate) && (!type2.instanceOf || typeof object === "object" && object instanceof type2.instanceOf) && (!type2.predicate || type2.predicate(object))) {
      if (explicit) {
        if (type2.multi && type2.representName) {
          state.tag = type2.representName(object);
        } else {
          state.tag = type2.tag;
        }
      } else {
        state.tag = "?";
      }
      if (type2.represent) {
        style = state.styleMap[type2.tag] || type2.defaultStyle;
        if (_toString.call(type2.represent) === "[object Function]") {
          _result = type2.represent(object, style);
        } else if (_hasOwnProperty.call(type2.represent, style)) {
          _result = type2.represent[style](object, style);
        } else {
          throw new exception("!<" + type2.tag + '> tag resolver accepts not "' + style + '" style');
        }
        state.dump = _result;
      }
      return true;
    }
  }
  return false;
}
function writeNode(state, level, object, block, compact, iskey, isblockseq) {
  state.tag = null;
  state.dump = object;
  if (!detectType(state, object, false)) {
    detectType(state, object, true);
  }
  var type2 = _toString.call(state.dump);
  var inblock = block;
  var tagStr;
  if (block) {
    block = state.flowLevel < 0 || state.flowLevel > level;
  }
  var objectOrArray = type2 === "[object Object]" || type2 === "[object Array]", duplicateIndex, duplicate;
  if (objectOrArray) {
    duplicateIndex = state.duplicates.indexOf(object);
    duplicate = duplicateIndex !== -1;
  }
  if (state.tag !== null && state.tag !== "?" || duplicate || state.indent !== 2 && level > 0) {
    compact = false;
  }
  if (duplicate && state.usedDuplicates[duplicateIndex]) {
    state.dump = "*ref_" + duplicateIndex;
  } else {
    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {
      state.usedDuplicates[duplicateIndex] = true;
    }
    if (type2 === "[object Object]") {
      if (block && Object.keys(state.dump).length !== 0) {
        writeBlockMapping(state, level, state.dump, compact);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + state.dump;
        }
      } else {
        writeFlowMapping(state, level, state.dump);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + " " + state.dump;
        }
      }
    } else if (type2 === "[object Array]") {
      if (block && state.dump.length !== 0) {
        if (state.noArrayIndent && !isblockseq && level > 0) {
          writeBlockSequence(state, level - 1, state.dump, compact);
        } else {
          writeBlockSequence(state, level, state.dump, compact);
        }
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + state.dump;
        }
      } else {
        writeFlowSequence(state, level, state.dump);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + " " + state.dump;
        }
      }
    } else if (type2 === "[object String]") {
      if (state.tag !== "?") {
        writeScalar(state, state.dump, level, iskey, inblock);
      }
    } else if (type2 === "[object Undefined]") {
      return false;
    } else {
      if (state.skipInvalid)
        return false;
      throw new exception("unacceptable kind of an object to dump " + type2);
    }
    if (state.tag !== null && state.tag !== "?") {
      tagStr = encodeURI(
        state.tag[0] === "!" ? state.tag.slice(1) : state.tag
      ).replace(/!/g, "%21");
      if (state.tag[0] === "!") {
        tagStr = "!" + tagStr;
      } else if (tagStr.slice(0, 18) === "tag:yaml.org,2002:") {
        tagStr = "!!" + tagStr.slice(18);
      } else {
        tagStr = "!<" + tagStr + ">";
      }
      state.dump = tagStr + " " + state.dump;
    }
  }
  return true;
}
function getDuplicateReferences(object, state) {
  var objects = [], duplicatesIndexes = [], index, length;
  inspectNode(object, objects, duplicatesIndexes);
  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {
    state.duplicates.push(objects[duplicatesIndexes[index]]);
  }
  state.usedDuplicates = new Array(length);
}
function inspectNode(object, objects, duplicatesIndexes) {
  var objectKeyList, index, length;
  if (object !== null && typeof object === "object") {
    index = objects.indexOf(object);
    if (index !== -1) {
      if (duplicatesIndexes.indexOf(index) === -1) {
        duplicatesIndexes.push(index);
      }
    } else {
      objects.push(object);
      if (Array.isArray(object)) {
        for (index = 0, length = object.length; index < length; index += 1) {
          inspectNode(object[index], objects, duplicatesIndexes);
        }
      } else {
        objectKeyList = Object.keys(object);
        for (index = 0, length = objectKeyList.length; index < length; index += 1) {
          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);
        }
      }
    }
  }
}
function dump$1(input, options) {
  options = options || {};
  var state = new State(options);
  if (!state.noRefs)
    getDuplicateReferences(input, state);
  var value = input;
  if (state.replacer) {
    value = state.replacer.call({ "": value }, "", value);
  }
  if (writeNode(state, 0, value, true, true))
    return state.dump + "\n";
  return "";
}
var dump_1 = dump$1;
var dumper = {
  dump: dump_1
};
function renamed(from, to) {
  return function() {
    throw new Error("Function yaml." + from + " is removed in js-yaml 4. Use yaml." + to + " instead, which is now safe by default.");
  };
}
var load = loader.load;
var loadAll = loader.loadAll;
var dump = dumper.dump;
var safeLoad = renamed("safeLoad", "load");
var safeLoadAll = renamed("safeLoadAll", "loadAll");
var safeDump = renamed("safeDump", "dump");

// src/libs/FileCache.ts
var import_obsidian = require("obsidian");
var FileCache = class {
  /**
   * Creates a new FileCache instance
   * @constructor
   */
  constructor() {
    this.app = Global.getInstance().app;
    this.logger = Global.getInstance().logger;
    this.fileCachePromise = null;
    this.fileCache = null;
    this.duplicateNames = null;
    this.fileCacheReady = false;
    this.eventsRegistered = false;
    if (!this.fileCache) {
      this.buildFileCache().then(() => {
        this.logger.debug("File Cache built");
      });
    }
    this.createEventHandler = this.createEventHandler.bind(this);
    this.renameEventHandler = this.renameEventHandler.bind(this);
    this.deleteEventHandler = this.deleteEventHandler.bind(this);
    this.registerEvents();
  }
  /**
   * Returns the FileCache instance if it exists, otherwise creates a new instance
   * @returns The FileCache instance
   */
  static getInstance() {
    if (!FileCache.instance) {
      FileCache.instance = new FileCache();
    }
    return FileCache.instance;
  }
  /**
   * Deconstructs the FileCache instance
   * unregisters all events
   */
  static deconstructor() {
    if (!FileCache.instance) {
      Global.getInstance().logger.error("FileCache instance not loaded");
      return;
    }
    const instance = FileCache.instance;
    if (instance.eventsRegistered) {
      instance.app.vault.off("rename", instance.renameEventHandler);
      instance.app.vault.off("delete", instance.deleteEventHandler);
      instance.app.vault.off("create", instance.createEventHandler);
      instance.eventsRegistered = false;
      Global.getInstance().logger.debug("File cache events unregistered");
      return;
    }
    Global.getInstance().logger.debug("File cache events not registered");
  }
  /**
   * Wait for the file cache to be ready
   * @returns {Promise<void>} Promise that resolves when the file cache is ready
   * @description This method returns a promise that resolves when the file cache is ready.
   */
  async waitForCacheReady() {
    while (!this.fileCacheReady) {
      await new Promise((resolve) => setTimeout(resolve, 5));
    }
  }
  /**
   * Builds the file cache
   * @returns Promise that resolves when the file cache is built
   * @private
   */
  async buildFileCache() {
    const startTime = Date.now();
    const allFiles = this.app.vault.getFiles();
    this.fileCache = /* @__PURE__ */ new Map();
    this.duplicateNames = /* @__PURE__ */ new Map();
    for (const file of allFiles) {
      this.addEntry(file);
    }
    this.fileCacheReady = true;
    const endTime = Date.now();
    this.logger.debug(`File cache for ${allFiles.length} files built in ${endTime - startTime}ms`);
  }
  /**
   * Updates the file cache with the new file
   * @param file The file to add to the cache
   * @returns True if the file was added to the cache, false otherwise
   * @private
   */
  addEntry(file) {
    if (!this.fileCache) {
      this.logger.error("File cache not available");
      return false;
    }
    let state = true;
    const existingFile = this.fileCache.get(file.name);
    if (existingFile === void 0) {
      this.fileCache.set(file.name, file);
    } else if (existingFile === null) {
      state && (state = this.addDuplicateEntry([file]));
    } else {
      state && (state = this.addDuplicateEntry([existingFile, file]));
      this.fileCache.set(file.name, null);
    }
    return state;
  }
  /**
   * Updates the duplicate cache with the new file
   * @param file The files to add to the cache
   * @returns True if the file was added to the cache, false otherwise
   * @private
   */
  addDuplicateEntry(file) {
    var _a;
    const fileName = (_a = file.first()) == null ? void 0 : _a.name;
    if (!fileName) {
      this.logger.error("File name not available");
      return false;
    }
    if (!this.duplicateNames) {
      this.logger.error("Duplicate cache not available");
      return false;
    }
    const duplicateEntry = this.duplicateNames.get(fileName);
    if (duplicateEntry) {
      file.forEach((f) => duplicateEntry.push(f));
    } else {
      this.duplicateNames.set(fileName, file);
    }
    return true;
  }
  /**
   * Removes the file from the duplicate cache
   * @param file The file to remove from the cache
   * @param oldPath The old path of the file
   * @returns True if the file was removed from the cache, false otherwise
   * @private
   */
  removeDuplicateEntry(file, oldPath = null) {
    if (!this.duplicateNames) {
      this.logger.error("Duplicate cache not available");
      return false;
    }
    const duplicateEntry = this.duplicateNames.get(file.name);
    if (!duplicateEntry) {
      this.logger.error("File ${file.name} not found in duplicate cache");
      return false;
    }
    const path = oldPath != null ? oldPath : file.path;
    const index = duplicateEntry.findIndex((f) => f.path === path);
    if (index > -1) {
      duplicateEntry.splice(index, 1);
    } else {
      this.logger.error(`File ${file.name} not found in duplicate cache`);
      return false;
    }
    return true;
  }
  /**
   * Removes the file from the file cache
   * @param file The file to remove from the cache
   * @returns True if the file was removed from the cache, false otherwise
   * @private
   */
  removeEntry(file) {
    if (!this.fileCache) {
      this.logger.error("File cache not available");
      return false;
    }
    let state = true;
    const existingFile = this.fileCache.get(file.name);
    if (existingFile) {
      this.fileCache.delete(file.name);
    } else if (existingFile === void 0) {
      this.logger.warn(`File ${file.name} not found in cache`);
      return false;
    } else if (existingFile === null) {
      state && (state = this.removeDuplicateEntry(file));
    }
    return state;
  }
  /**
   * Renames the file in the file cache
   * @param file The file to rename
   * @param oldPath The old path of the file
   * @returns True if the file was renamed in the cache, false otherwise
   * @private
   */
  renameEntry(file, oldPath) {
    if (!this.fileCache) {
      this.logger.error("File cache not available");
      return false;
    }
    const oldFileName = this.getFileNameFromPath(oldPath);
    if (!oldFileName) {
      this.logger.error("Old file name not available");
      return false;
    }
    const existingFile = this.fileCache.get(oldFileName);
    let state = true;
    if (existingFile) {
      this.fileCache.delete(oldFileName);
      state && (state = this.addEntry(file));
    } else if (existingFile === void 0) {
      this.logger.warn(`File ${oldFileName} not found in cache`);
      state && (state = this.addEntry(file));
    } else if (existingFile === null) {
      state && (state = this.removeDuplicateEntry(file, oldPath));
      state && (state = this.addDuplicateEntry([file]));
    }
    return state;
  }
  /**
   * Event handler for the create event
   * @param file The file to create in the file cache
   * @private
   */
  createEventHandler(file) {
    let state = true;
    if (file instanceof import_obsidian.TFile) {
      state && (state = this.addEntry(file));
    }
    if (state) {
      this.logger.debug(`File ${file.name} create in file cache event handler success`);
    } else {
      this.logger.error(`Error creating file ${file.name} in file cache event handler`);
    }
  }
  /**
   * Event handler for the rename event
   * @param file The file to rename in the file cache
   * @param oldPath The old path of the file
   * @private
   */
  renameEventHandler(file, oldPath) {
    let state = true;
    if (file instanceof import_obsidian.TFile) {
      const oldFileName = oldPath.split("/").last();
      if (!oldFileName) {
        this.logger.error("Cannot extract old file name from the path");
        return;
      }
      state && (state = this.renameEntry(file, oldFileName));
    }
    if (state) {
      this.logger.debug(`File ${file.name} renamed in file cache event handler success`);
    } else {
      this.logger.error(`Error renaming file ${file.name} in file cache event handler`);
    }
  }
  /**
   * Event handler for the delete event
   * @param file The file to delete in the file cache
   * @private
   */
  deleteEventHandler(file) {
    let state = true;
    if (file instanceof import_obsidian.TFile) {
      state && (state = this.removeEntry(file));
    }
    if (state) {
      this.logger.debug(`File ${file.name} delete in file cache event handler success`);
    } else {
      this.logger.error(`Error deleting file ${file.name} in file cache event handler`);
    }
  }
  /**
   * Registers the events for the file cache
   * @private
   */
  registerEvents() {
    if (!this.eventsRegistered) {
      this.app.vault.on("rename", this.renameEventHandler);
      this.app.vault.on("delete", this.deleteEventHandler);
      this.app.vault.on("create", this.createEventHandler);
      this.eventsRegistered = true;
      this.logger.debug("File cache events registered");
    }
  }
  /**
   * Returns the file name from the file path
   * @param filePath The file path to extract the file name from
   * @returns The file name
   * @private
   */
  getFileNameFromPath(filePath) {
    const oldFileName = filePath.split("/").last();
    if (!oldFileName) {
      this.logger.error("Cannot extract old file name from the path");
      return;
    }
    return oldFileName;
  }
  /**
   * Returns the file from the file cache
   * @param fileName The name of the file to find
   * @returns The file/s if found, undefined otherwise
   */
  findFileByName(fileName) {
    var _a, _b;
    const foundFile = (_a = this.fileCache) == null ? void 0 : _a.get(fileName);
    if (foundFile) {
      return foundFile;
    } else if (foundFile === null) {
      const duplicateEntry = (_b = this.duplicateNames) == null ? void 0 : _b.get(fileName);
      if (!duplicateEntry) {
        this.logger.error(`File ${fileName} not found in duplicate cache`);
        return void 0;
      }
      return duplicateEntry;
    } else {
      return void 0;
    }
  }
  /**
   * Returns the file from the file cache
   * @param filePath The path of the file to find
   * @returns The file/s if found, undefined otherwise
   */
  findFileByPath(filePath) {
    const fileName = this.getFileNameFromPath(filePath);
    if (!fileName) {
      this.logger.error("File name not available");
      return void 0;
    }
    return this.findFileByName(fileName);
  }
};

// src/libs/MetadataCache.ts
var MetadataCache = class {
  /**
   * Constructor for the MetadataCache class
   * @description This constructor is private because the MetadataCache class is a singleton. Use the getInstance() method to get the singleton instance.
   */
  constructor() {
    this.app = Global.getInstance().app;
    this.logger = Global.getInstance().logger;
    this.metadataCachePromise = null;
    this.metadataCache = null;
    this.metadataCacheReady = false;
    this.eventsRegistered = false;
    this.changedEventHandler = this.changedEventHandler.bind(this);
    this.renameEventHandler = this.renameEventHandler.bind(this);
    this.deleteEventHandler = this.deleteEventHandler.bind(this);
    if (!this.metadataCache) {
      this.buildMetadataCache().then(() => {
        this.logger.debug("Metadata cache built");
        this.registerEvents();
      });
    }
  }
  /**
   * Get the metadata cache
   * @returns {FileMetadata[]} Array of FileMetadata objects
   * @description This method returns the metadata cache as an array of FileMetadata objects. The FileMetadata object contains the file and the cached metadata.
   */
  get Cache() {
    if (this.metadataCacheReady && this.metadataCache) {
      return Array.from(this.metadataCache.values());
    } else {
      this.logger.error("Metadata cache not initialized");
      return [];
    }
  }
  /**
   * Get the singleton instance of the MetadataCache class
   * @returns {MetadataCache} The MetadataCache instance
   */
  static getInstance() {
    if (!MetadataCache.instance) {
      MetadataCache.instance = new MetadataCache();
    }
    return MetadataCache.instance;
  }
  /**
   * Deconstructor for the MetadataCache class
   * @description This method is used to unregister the event handlers for the metadata cache.
   */
  static deconstructor() {
    if (!MetadataCache.instance) {
      Global.getInstance().logger.error("Metadata cache instance not loaded");
      return;
    }
    const instance = MetadataCache.instance;
    if (instance.eventsRegistered) {
      instance.app.vault.off("rename", instance.renameEventHandler);
      instance.app.metadataCache.off("changed", instance.changedEventHandler);
      instance.app.metadataCache.off("deleted", instance.deleteEventHandler);
      instance.eventsRegistered = false;
      Global.getInstance().logger.debug("Metadata cache events unregistered");
      return;
    }
    Global.getInstance().logger.debug("Metadata cache events not registered");
  }
  /**
   * Check if the metadata cache is ready
   * @returns {boolean} True if the metadata cache is ready, false otherwise
   */
  isCacheReady() {
    return this.metadataCacheReady;
  }
  /**
   * Wait for the metadata cache to be ready
   * @returns {Promise<void>} Promise that resolves when the metadata cache is ready
   * @description This method returns a promise that resolves when the metadata cache is ready.
   */
  async waitForCacheReady() {
    while (!this.metadataCacheReady) {
      await new Promise((resolve) => setTimeout(resolve, 5));
    }
  }
  /**
   * Build the metadata cache
   * @returns {Promise<void>} Promise that resolves when the metadata cache is built
   */
  async buildMetadataCache() {
    const startTime = Date.now();
    this.metadataCache = /* @__PURE__ */ new Map();
    const allFiles = this.app.vault.getFiles();
    const addEntryPromises = allFiles.map((file) => this.addEntry(file));
    await Promise.all(addEntryPromises);
    this.metadataCacheReady = true;
    const endTime = Date.now();
    this.logger.debug(`Metadata cache for ${allFiles.length} files built in ${endTime - startTime}ms`);
  }
  /**
   * Add a file to the metadata cache
   * @param file The file to add to the metadata cache
   */
  async addEntry(file) {
    if (this.metadataCache) {
      const metadata = this.app.metadataCache.getFileCache(file);
      if (metadata) {
        this.metadataCache.set(file.path, { file, metadata });
      } else {
        this.logger.warn(`No metadata found for file ${file.path}`);
      }
    } else {
      this.logger.error("Metadata cache not initialized");
    }
  }
  /**
   * Delete a file from the metadata cache
   * @param file The file to delete from the metadata cache
   */
  deleteEntry(file) {
    if (this.metadataCache) {
      this.metadataCache.delete(file.path);
    } else {
      this.logger.error("Metadata cache not initialized");
    }
    this.logger.debug(`Metadata cache entry for file ${file.path} deleted`);
  }
  /**
   * Update a file in the metadata cache
   * @param file The file to update in the metadata cache
   */
  async updateEntry(file) {
    if (this.metadataCache) {
      const entry = this.metadataCache.get(file.path);
      const metadata = this.app.metadataCache.getFileCache(file);
      if (entry && metadata) {
        entry.metadata = metadata;
      } else if (!entry) {
        this.logger.warn(`No metadata cache entry found for file ${file.path}`);
      } else {
        this.logger.warn(`No metadata found for file ${file.path}`);
      }
    } else {
      this.logger.error("Metadata cache not initialized");
    }
    this.logger.debug(`Metadata cache entry for file ${file.path} updated`);
  }
  /**
   * Rename a file in the metadata cache
   * @param newFile The new file object
   * @param oldPath The old path of the file
   */
  async renameEntry(newFile, oldPath) {
    if (this.metadataCache) {
      const entry = this.metadataCache.get(oldPath);
      if (entry) {
        entry.file = newFile;
      } else {
        this.logger.warn(`No metadata cache entry found for file ${oldPath}`);
      }
    } else {
      this.logger.error("Metadata cache not initialized");
    }
    this.logger.debug(`Metadata cache entry for file ${oldPath} renamed to ${newFile.path}`);
  }
  /**
   * Event handler for the rename event
   * @param file New file object
   * @param oldPath Old path of the file
   */
  renameEventHandler(file, oldPath) {
    this.logger.debug(`File ${file.path} renamed to ${oldPath}`);
    this.renameEntry(file, oldPath);
  }
  /**
   * Event handler for the delete event
   * @param file Deleted file object
   */
  deleteEventHandler(file) {
    this.logger.debug(`File ${file.path} deleted`);
    this.deleteEntry(file);
  }
  /**
   * Event handler for the changed event
   * @param file Changed file object
   */
  changedEventHandler(file) {
    if (this.metadataCache) {
      const existingEntry = this.metadataCache.get(file.path);
      if (existingEntry) {
        this.updateEntry(file);
      } else {
        this.addEntry(file);
      }
    }
  }
  redrawMarkdownView() {
    this.logger.debug(`Redrawing markdown view`);
    this.app.workspace.updateOptions();
  }
  /**
   * Register event handlers for the metadata cache
   */
  registerEvents() {
    if (!this.eventsRegistered) {
      this.app.vault.on("rename", this.renameEventHandler);
      this.app.metadataCache.on("changed", this.changedEventHandler);
      this.app.metadataCache.on("deleted", this.deleteEventHandler);
      this.eventsRegistered = true;
      this.logger.debug("Metadata cache events registered");
    }
  }
};

// src/classes/Logging.ts
var Logging = class {
  /**
   * Creates a new Logging instance
   * @param logLevel The log level to use. Defaults to "info"
   */
  constructor(logLevel = "info", logPrefix = "") {
    this.logLevel = logLevel;
    this.logPrefix = `${logPrefix}: `;
    if (this.logLevel === "none") {
      console.info("Logging disabled");
    }
    Logging.instance = this;
  }
  setLogLevel(logLevel) {
    this.logLevel = logLevel;
    console.info(`Log level set to ${logLevel}`);
  }
  /**
   * Returns the Logging instance
   */
  static getInstance() {
    if (!Logging.instance) {
      Logging.instance = new Logging();
    }
    return Logging.instance;
  }
  /**
   * Logs a message to the console if the log level is "trace"
   * @param message 
   * @param optionalParams 
   */
  trace(message, ...optionalParams) {
    if (this.logLevelActive("trace")) {
      const logMessage = this.constructLogMessage(message);
      console.debug(logMessage, ...optionalParams);
    }
  }
  /**
   * Logs a message to the console if the log level is "debug"
   * @param message 
   * @param optionalParams 
   */
  debug(message, ...optionalParams) {
    if (this.logLevelActive("debug")) {
      const logMessage = this.constructLogMessage(message);
      console.debug(logMessage, ...optionalParams);
    }
  }
  /**
   * Logs a message to the console if the log level is "info" or "debug"
   * @param message 
   * @param optionalParams 
   */
  info(message, ...optionalParams) {
    if (this.logLevelActive("info")) {
      const logMessage = this.constructLogMessage(message);
      console.info(logMessage, ...optionalParams);
    }
  }
  /**
   * Logs a message to the console if the log level is "info", "debug" or "warn"
   * @param message 
   * @param optionalParams 
   */
  warn(message, ...optionalParams) {
    if (this.logLevelActive("warn")) {
      const logMessage = this.constructLogMessage(message);
      console.warn(logMessage, ...optionalParams);
    }
  }
  /**
   * Logs a message to the console if the log level is "info", "debug", "warn" or "error"
   * @param message 
   * @param optionalParams 
   */
  error(message, ...optionalParams) {
    if (this.logLevelActive("error")) {
      const logMessage = this.constructLogMessage(message);
      console.error(logMessage, ...optionalParams);
    }
  }
  constructLogMessage(message) {
    return `${this.logPrefix}${message}`;
  }
  logLevelActive(logLevel) {
    if (this.logLevel === "none") {
      return false;
    }
    if (this.logLevel === "trace") {
      return true;
    }
    if (this.logLevel === "debug") {
      return logLevel !== "trace";
    }
    if (this.logLevel === "info") {
      return logLevel !== "trace" && logLevel !== "debug";
    }
    if (this.logLevel === "warn") {
      return logLevel !== "trace" && logLevel !== "debug" && logLevel !== "info";
    }
    if (this.logLevel === "error") {
      return logLevel !== "trace" && logLevel !== "debug" && logLevel !== "info" && logLevel !== "warn";
    }
    return true;
  }
};

// src/classes/Global.ts
var Global = class {
  constructor(prj, app, settings) {
    if (Global.instance) {
      return Global.instance;
    }
    this.plugin = prj;
    this.app = app;
    this.settings = settings;
    this.logger = new Logging(this.settings.logLevel, "Prj");
    Global.instance = this;
    this.fileCache = FileCache.getInstance();
    this.metadataCache = MetadataCache.getInstance();
  }
  async awaitCacheInitialization() {
    this.logger.debug("Waiting for cache initialization");
    await this.fileCache.waitForCacheReady();
    await this.metadataCache.waitForCacheReady();
    this.logger.debug("Cache initialized");
  }
  static deconstructor() {
    FileCache.deconstructor();
    MetadataCache.deconstructor();
  }
  static getInstance(prj = null, app = null, settings = null) {
    if (!Global.instance) {
      if (!prj || !app || !settings) {
        throw new Error("Global instance not initialized and no app provided");
      }
      Global.instance = new Global(prj, app, settings);
    }
    return Global.instance;
  }
};

// src/models/DocumentModel.ts
var import_obsidian3 = require("obsidian");

// src/models/TransactionModel.ts
var TransactionModel = class {
  /**
   * Creates a new instance of the TransactionModel class.
   * @param writeChanges A function that writes the changes to the file.
   */
  constructor(writeChanges) {
    this.logger = Global.getInstance().logger;
    this.transactionActive = false;
    this.changes = {};
    this.transactionActive = false;
    this.writeChanges = writeChanges;
  }
  /**
   * Starts a transaction
   * @remarks - If a transaction is already active, this method does nothing and logs a warning.
   */
  startTransaction() {
    if (this.isTransactionActive) {
      this.logger.warn("Transaction already active");
      return;
    }
    this.transactionActive = true;
  }
  /**
   * Finishes a transaction
   * @remarks - If no transaction is active, this method does nothing and logs a warning.
   * - This method writes the changes to the file.
   * @remarks - If the `writeChanges` method throws an error, the error is logged and the transaction is aborted.
   */
  finishTransaction() {
    if (!this.isTransactionActive) {
      this.logger.warn("No transaction active");
      return;
    }
    try {
      this.writeChanges(this.changes);
    } catch (error) {
      this.logger.error("`writeChanges` failed with error:", error);
    } finally {
      this.changes = {};
      this.transactionActive = false;
    }
  }
  /**
   * Aborts a transaction
   * @remarks - If no transaction is active, this method does nothing and logs a warning.
   * - This method discards all changes.
   */
  abortTransaction() {
    if (!this.isTransactionActive) {
      this.logger.warn("No transaction active");
      return;
    }
    this.changes = {};
    this.transactionActive = false;
  }
  /**
   * Updates the value of the given key.
   * @param key The key to update as path. Example: `data.title`
   * @param value The value to set.
   */
  updateKeyValue(key, value) {
    const keys = key.split(".");
    let current = this.changes;
    keys.forEach((k, index) => {
      if (index === keys.length - 1) {
        current[k] = value;
      } else {
        current[k] = current[k] || {};
        current = current[k];
      }
    });
    if (!this.isTransactionActive) {
      this.writeChanges(this.changes);
      this.changes = {};
    }
  }
  /**
   * Returns whether a transaction is active.
   * @returns `true` if a transaction is active, otherwise `false`.
   */
  get isTransactionActive() {
    return this.transactionActive;
  }
};

// src/models/BaseModel.ts
var BaseModel = class extends TransactionModel {
  /**
   * Creates a new BaseModel instance.
   * @param file The file to create the model for.
   * @param ctor The constructor of the data object.
   * @param yamlKeyMap The yaml key map to use.
   */
  constructor(file, ctor, yamlKeyMap) {
    super((update) => {
      this.frontmatter = update;
    });
    this.global = Global.getInstance();
    this.app = Global.getInstance().app;
    this.logger = Global.getInstance().logger;
    this._file = file;
    this.ctor = ctor;
    this.initYamlKeyMap(yamlKeyMap);
  }
  get file() {
    return this._file;
  }
  /**
   * Returns the data object as a proxy.
   * @returns The data object as a proxy.
   */
  get _data() {
    if (this.dataProxy) {
      return this.dataProxy;
    }
    const frontmatter = this.getMetadata();
    if (!frontmatter) {
      this.logger.error("Frontmatter not found");
      const emptyObject = new this.ctor();
      return emptyObject;
    }
    if (this.yamlKeyMap) {
      for (const key in this.yamlKeyMap) {
        if (frontmatter[this.yamlKeyMap[key]]) {
          frontmatter[key] = frontmatter[this.yamlKeyMap[key]];
          delete frontmatter[this.yamlKeyMap[key]];
        }
      }
    }
    const dataObject = new this.ctor(frontmatter);
    this.dataProxy = this.createProxy(dataObject);
    return this.dataProxy;
  }
  set _data(values) {
    const dataObject = new this.ctor(values);
    for (const key in dataObject) {
      this._data[key] = values[key];
    }
  }
  get frontmatter() {
    var _a;
    return (_a = this.getMetadata()) != null ? _a : {};
  }
  set frontmatter(value) {
    (async () => {
      try {
        await this.app.fileManager.processFrontMatter(this._file, (frontmatter) => {
          this.updateNestedFrontmatterObjects(frontmatter, value);
          return frontmatter;
        });
        this.logger.debug(`Frontmatter for file ${this._file.path} successfully updated.`);
      } catch (error) {
        this.logger.error(`Error updating the frontmatter for file ${this._file.path}:`, error);
      }
    })();
  }
  /**
   * Creates a proxy for the given object.
   * @param obj The object to create a proxy for.
   * @param path The path of the object. e.g. `data.title`
   * @returns The proxy object.
   */
  createProxy(obj, path = "") {
    return new Proxy(obj, {
      get: (target, property, receiver) => {
        const propertyKey = this.getPropertyKey(property);
        const value = Reflect.get(target, property, receiver);
        const newPath = path ? `${path}.${propertyKey}` : `${propertyKey}`;
        if (value && typeof value === "object") {
          return this.createProxy(value, newPath);
        }
        return value;
      },
      set: (target, property, value, receiver) => {
        const propertyKey = this.getPropertyKey(property);
        const newPath = path ? `${path}.${propertyKey}` : `${propertyKey}`;
        Reflect.set(target, property, value, receiver);
        this.updateKeyValue(newPath, value);
        return true;
      }
    });
  }
  /**
   * Updates the `yamlKeyMap` with the given value.
   * @param yamlKeyMap The new `yamlKeyMap` to set.
   */
  initYamlKeyMap(yamlKeyMap) {
    if (yamlKeyMap) {
      this.yamlKeyMap = yamlKeyMap;
    }
  }
  getPropertyKey(property) {
    return typeof property === "symbol" ? property.toString() : property;
  }
  getMetadata() {
    var _a, _b;
    const cachedMetadata = (_b = (_a = this.app) == null ? void 0 : _a.metadataCache) == null ? void 0 : _b.getCache(this._file.path);
    if (cachedMetadata && cachedMetadata.frontmatter) {
      return cachedMetadata.frontmatter;
    } else {
      this.logger.warn(`No Metadata found for ${this._file.path}`);
      return null;
    }
  }
  updateNestedFrontmatterObjects(frontmatter, updates) {
    Object.entries(updates).forEach(([key, value]) => {
      if (this.yamlKeyMap && this.yamlKeyMap[key]) {
        key = this.yamlKeyMap[key];
      }
      if (typeof value === "object" && value !== void 0 && value !== null && frontmatter[key]) {
        this.updateNestedFrontmatterObjects(frontmatter[key], value);
      } else if (value !== void 0) {
        frontmatter[key] = value;
      }
    });
  }
};

// src/types/DocumentData.ts
var DocumentData = class {
  constructor(data) {
    this.title = data.title !== void 0 ? data.title : void 0;
    this.date = data.date !== void 0 ? data.date : void 0;
    this.description = data.description !== void 0 ? data.description : void 0;
    this.sender = data.sender !== void 0 ? data.sender : void 0;
    this.recipient = data.recipient !== void 0 ? data.recipient : void 0;
    this.dateOfDelivery = data.dateOfDelivery !== void 0 ? data.dateOfDelivery : void 0;
    this.hide = data.hide !== void 0 ? data.hide : void 0;
    this.file = data.file !== void 0 ? data.file : void 0;
    this.relatedFiles = data.relatedFiles !== void 0 ? data.relatedFiles : void 0;
    this.citationTitle = data.citationTitle !== void 0 ? data.citationTitle : void 0;
    this.tags = data.tags !== void 0 ? data.tags : void 0;
    this.type = data.type !== void 0 ? data.type : void 0;
    this.subType = data.subType !== void 0 ? data.subType : void 0;
    this.annotationTarget = data.annotationTarget !== void 0 ? data.annotationTarget : void 0;
  }
};
DocumentData.yamlKeyMap = {
  "annotationTarget": "annotation-target"
};

// src/libs/Helper.ts
var import_obsidian2 = require("obsidian");
var Helper = class {
  /**
   * Extracts the date, filename, file extension and display text from a wikilink
   * @param wikilink Wikilink to extract the data from, eg. [[2021.01.01 - file.txt|Display text]]
   * @returns {WikilinkData} Object containing the date, filename, file extension and display text
   * 
   */
  static extractDataFromWikilink(wikilink) {
    if (wikilink && typeof wikilink === "string") {
      const dismantledLinkMatch = wikilink.match(/\[\[(.+?)(?:\.(\w+))?(?:\|(.*))?\]\]/);
      let date = void 0;
      if (!dismantledLinkMatch) {
        return {
          date: void 0,
          basename: void 0,
          extension: void 0,
          filename: void 0,
          displayText: void 0
        };
      } else {
        const dateMatch = dismantledLinkMatch[1].match(/(\d{4})\.(\d{2})\.(\d{2})/);
        if (dateMatch) {
          date = new Date(`${dateMatch[1]}-${dateMatch[2]}-${dateMatch[3]}`);
        }
        return {
          date,
          basename: dismantledLinkMatch[1],
          extension: dismantledLinkMatch[2],
          filename: `${dismantledLinkMatch[1]}.${dismantledLinkMatch[2]}`,
          displayText: dismantledLinkMatch[3]
        };
      }
    } else {
      return {
        date: void 0,
        basename: void 0,
        extension: void 0,
        filename: void 0,
        displayText: void 0
      };
    }
  }
  /**
   * Generates a UID from the given input
   * @param input The input to generate the UID from
   * @param length The length of the UID
   * @returns The generated UID with the given length
   * @remarks - This method uses the MD5 hash algorithm to generate the UID
   * - The UID is prefixed with a "U" to prevent the UID from starting with a number. The "U" counts to the length of the UID
   */
  static generateUID(input, length = 8) {
    const hash = "U" + this.md5(input).toString();
    return hash.substring(0, length);
  }
  static formatDate(date, format) {
    const regexDate = /^\d{4}-\d{2}-\d{2}$/;
    if (!regexDate.test(date)) {
      return date;
    }
    const formatedDate = (0, import_obsidian2.moment)(date).format(format);
    if (formatedDate === "Invalid date") {
      return date;
    }
    return formatedDate;
  }
  /**
   * Sleeps for the given amount of milliseconds
   * @param ms The amount of milliseconds to sleep
   * @returns A promise that resolves after the given amount of milliseconds
   */
  static async sleep(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  /**
   * Checks if the given text is possibly markdown
   * @param text The text to check
   * @returns Whether the text is possibly markdown (true or false)
   * @remarks - This method checks if the text contains any of the following symbols:
   * - `*`, `_`, `[`, `]`, `=` and `-` if there is a line break
   */
  static isPossiblyMarkdown(text) {
    let regexMarkdownSymbols;
    const regexLineBreak = /\r?\n/;
    const lineBreak = regexLineBreak.test(text);
    if (lineBreak) {
      regexMarkdownSymbols = /[*_\-[\]=]/;
    } else {
      regexMarkdownSymbols = /[*_[\]=]/;
    }
    return regexMarkdownSymbols.test(text);
  }
  /**
   * Checks if any of the tags in `tagsToCheck` is a substring of any tag in `tagsToBeChecked`
   * @param tagsToCheck The tags to check as substrings
   * @param tagsToBeChecked The tags to be checked against
   * @returns Whether any tag from `tagsToCheck` is a substring of any tag in `tagsToBeChecked`
   */
  static isTagIncluded(tagsToCheck, tagsToBeChecked) {
    const _tagsToCheck = Array.isArray(tagsToCheck) ? tagsToCheck : tagsToCheck ? [tagsToCheck] : [];
    const _tagsToBeChecked = Array.isArray(tagsToBeChecked) ? tagsToBeChecked : tagsToBeChecked ? [tagsToBeChecked] : [];
    return _tagsToCheck.some(
      (tagToCheck) => _tagsToBeChecked.some(
        (tagToBeChecked) => tagToBeChecked == null ? void 0 : tagToBeChecked.includes(tagToCheck)
      )
    );
  }
  /**
   * Checks if the given string is an emoji
   * @param str The string to check
   * @returns Whether the string is an emoji (true or false)
   */
  static isEmoji(str2) {
    const emojiRegex = /(\p{Emoji_Presentation}|\p{Emoji}\uFE0F)/u;
    return emojiRegex.test(str2);
  }
};
Helper.md5 = require_md5();

// src/models/DocumentModel.ts
var DocumentModel = class extends BaseModel {
  constructor(file) {
    super(file, DocumentData, DocumentData.yamlKeyMap);
    this.fileCache = Global.getInstance().fileCache;
    this._relatedFiles = void 0;
  }
  get data() {
    return this._data;
  }
  set data(value) {
    this._data = value;
  }
  get relatedFiles() {
    if (this._relatedFiles === void 0) {
      this._relatedFiles = [];
      const relatedFiles = this.data.relatedFiles;
      if (relatedFiles) {
        relatedFiles.map((relatedFile) => {
          var _a;
          const wikilinkData = Helper.extractDataFromWikilink(relatedFile);
          const mdFilename = wikilinkData.basename ? `${wikilinkData.basename}.md` : "";
          const file = this.fileCache.findFileByName(mdFilename);
          if (file instanceof import_obsidian3.TFile && file.path !== this.file.path) {
            (_a = this._relatedFiles) == null ? void 0 : _a.push(new DocumentModel(file));
          }
          return null;
        });
      } else {
        this._relatedFiles = null;
      }
    }
    return this._relatedFiles;
  }
  toString() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    let allText = (_a = this.data.title) != null ? _a : "";
    allText += (_b = this.data.description) != null ? _b : "";
    allText += (_c = this.data.date) != null ? _c : "";
    allText += (_d = this.data.dateOfDelivery) != null ? _d : "";
    allText += (_e = this.data.file) != null ? _e : "";
    allText += (_f = this.data.tags) != null ? _f : "";
    allText += (_g = this.data.sender) != null ? _g : "";
    allText += (_h = this.data.recipient) != null ? _h : "";
    allText += (_i = this.data.relatedFiles) != null ? _i : "";
    return allText;
  }
  getWikilink(text) {
    if (text) {
      return `[[${this.file.name}|${text}]]`;
    } else {
      return `[[${this.file.name}]]`;
    }
  }
  /**
   * Returns the file contents of the document
   * @returns String containing the file contents
   */
  async getFileContents() {
    return this.app.vault.read(this.file);
  }
  getCorospondingSymbol() {
    if (this.data.type === "Metadata") {
      if (this.data.subType === "Cluster") {
        return this.global.settings.documentSettings.clusterSymbol;
      } else if (this.data.hide) {
        return this.global.settings.documentSettings.hideSymbol;
      } else {
        return this.global.settings.documentSettings.symbol;
      }
    }
    return "x-circle";
  }
  /**
   * Returns the description of the document
   * @returns String containing the description
   */
  getDescription() {
    var _a;
    return (_a = this.data.description) != null ? _a : "";
  }
  /**
   * Returns `Input` if the document is addressed to the user or `Output` if it comes from the user. Otherwise `null`.
   * @returns State of the document.
   * E.g. `Input` if the document is addressed to the user or `Output` if it comes from the user. Otherwise `null`.
   */
  getInputOutputState() {
    const username = this.global.settings.user.name;
    const shortUsername = this.global.settings.user.shortName;
    if (this.data && (this.data.sender || this.data.recipient)) {
      if (this.data.sender === username || this.data.sender === shortUsername) {
        return "Output";
      } else if (this.data.recipient === username || this.data.recipient === shortUsername) {
        return "Input";
      } else {
        return null;
      }
    } else {
      return null;
    }
  }
  /**
   * Returns the linked file of the document
   * @returns TFile of the linked file
   */
  getFile() {
    var _a, _b;
    const fileLinkData = Helper.extractDataFromWikilink(this.data.file);
    const file = this.fileCache.findFileByName((_a = fileLinkData.filename) != null ? _a : "");
    if (file instanceof import_obsidian3.TFile) {
      return file;
    } else if (Array.isArray(file)) {
      this.logger.warn(`Multiple files found for ${fileLinkData.filename}`);
      return (_b = file.first()) != null ? _b : this.file;
    }
    this.logger.warn(`No files found for ${fileLinkData.filename}`);
    return this.file;
  }
  /**
   * Returns the tags of the document as an array of strings
   * @returns Array of strings containing the tags
   */
  getTags() {
    const tags = this.data.tags;
    let formattedTags = [];
    if (tags && typeof tags === "string") {
      formattedTags = [tags];
    } else if (Array.isArray(tags)) {
      formattedTags = [...tags];
    }
    return formattedTags;
  }
  /**
   * Sorts the documents by date descending
   * @param documents Array of DocumentModels to sort
   * @remarks This function sorts the array in place
   */
  static sortDocumentsByDateDesc(documents) {
    documents.sort((a, b) => {
      if (a.data.date && b.data.date) {
        const dateA = new Date(a.data.date);
        const dateB = new Date(b.data.date);
        return dateB.getTime() - dateA.getTime();
      } else if (a.data.date) {
        return -1;
      } else if (b.data.date) {
        return 1;
      } else {
        return 0;
      }
    });
  }
  /**
   * Sorts the documents by date ascending
   * @param documents Array of DocumentModels to sort
   * @remarks This function sorts the array in place
   */
  static sortDocumentsByDateAsc(documents) {
    documents.sort((a, b) => {
      if (a.data.date && b.data.date) {
        const dateA = new Date(a.data.date);
        const dateB = new Date(b.data.date);
        return dateA.getTime() - dateB.getTime();
      } else if (a.data.date) {
        return 1;
      } else if (b.data.date) {
        return -1;
      } else {
        return 0;
      }
    });
  }
};

// src/libs/BlockRenderComponents/TableBlockRenderComponent.ts
var import_obsidian4 = require("obsidian");

// src/translations.json
var translations_default = [
  {
    lang: "en",
    translations: {
      DocumentType: "Type",
      Date: "Date",
      Subject: "Subject",
      Sender: "Sender",
      Recipient: "Recipient",
      SendRecip: "Snd./Rcp.",
      Content: "Content",
      DeliveryDate: "Delivery date",
      Tags: "Tags",
      From: "from:",
      To: "to:",
      Refresh: "Refresh",
      Documents: "Documents",
      HideDocuments: "Hide documents",
      Cluster: "Document Cluster",
      Filter: "Filter:",
      MaxShownEntrys: "Max. shown entries",
      Search: "Search",
      DocumentDate: "Document date",
      MetadataFile: "Metadata file",
      PDFFile: "PDF file",
      TraficLight: "\u{1F6A6}",
      Description: "Description",
      Priority: "Prio.",
      Status: "Status",
      DueDate: "Due date",
      PriorityText: "Priority",
      HighPriority: "High priority",
      MediumPriority: "Medium priority",
      LowPriority: "Low priority",
      NoPriority: "No priority",
      Title: "Title",
      StatusActive: "Active",
      StatusWaiting: "Waiting",
      StatusLater: "Later",
      StatusSomeday: "Someday",
      StatusDone: "Done",
      Done: "Done",
      Topic: "Topic",
      Project: "Project",
      Task: "Task",
      ShowMetadataFile: "Show metadata file"
    }
  },
  {
    lang: "de",
    translations: {
      DocumentType: "Typ",
      Date: "Datum",
      Subject: "Betreff",
      Sender: "Absender",
      Recipient: "Empf\xE4nger",
      SendRecip: "Abs./Empf.",
      Content: "Inhalt",
      DeliveryDate: "Zustelldatum",
      Tags: "Tags",
      From: "von:",
      To: "an:",
      Refresh: "Aktualisieren",
      Documents: "Dokumente",
      HideDocuments: "Ausgeblendete Dokumente",
      Cluster: "Dokumenten Cluster",
      Filter: "Filter:",
      MaxShownEntrys: "Max. angezeigte Eintr\xE4ge",
      Search: "Suche",
      DocumentDate: "Dokumenten Datum",
      MetadataFile: "Metadaten Datei",
      PDFFile: "PDF Datei",
      TraficLight: "\u{1F6A6}",
      Description: "Beschreibung",
      Priority: "Prio.",
      Status: "Status",
      DueDate: "F\xE4lligk.-Datum",
      PriorityText: "Priorit\xE4t",
      HighPriority: "Hohe Priorit\xE4t",
      MediumPriority: "Mittlere Priorit\xE4t",
      LowPriority: "Niedrige Priorit\xE4t",
      NoPriority: "Keine Priorit\xE4t",
      Title: "Titel",
      StatusActive: "Aktiv",
      StatusWaiting: "Warten",
      StatusLater: "Sp\xE4ter",
      StatusSomeday: "Irgendwann",
      StatusDone: "Erledigt",
      Done: "Erledigt",
      Topic: "Thema",
      Project: "Projekt",
      Task: "Aufgabe",
      ShowMetadataFile: "Metadaten Datei anzeigen"
    }
  }
];

// src/classes/Lng.ts
var Lng = class {
  /**
   * Returns a translation for the given key.
   * @param key The key to translate.
   * @returns The translation.
   * @remarks - If the translation is not found, the key is returned.
   * - Look at the `translations.json` file to see all available translations.
   */
  static gt(key) {
    const logger = Global.getInstance().logger;
    const lang = Global.getInstance().settings.language;
    const translation = translations_default;
    const language = translation.find((v) => v.lang === lang);
    if (language) {
      if (language.translations.hasOwnProperty(key)) {
        return language.translations[key];
      }
    }
    logger.warn(`Translation for key ${key} not found`);
    return key;
  }
};

// src/libs/BlockRenderComponents/TableBlockRenderComponent.ts
var TableBlockRenderComponent = class {
  //#endregion
  constructor(settings) {
    //#region General properties
    this.global = Global.getInstance();
    this.logger = this.global.logger;
    this.metadataCache = this.global.metadataCache.Cache;
    this.fileCache = this.global.fileCache;
    this.processorSettings = settings;
    this.component = new import_obsidian4.MarkdownRenderChild(this.processorSettings.container);
  }
  /**
   * Builds the component first time.
   * @remarks Calls the `draw` method.
   */
  async build() {
    return this.draw();
  }
  /**
   * Builds the `tableContainer` and `headerContainer` elements.
   * @remarks - Call this method to build the base structure first.
   * - Override this method to build the other elements.
   * @remarks - Build the `tableContainer` and `headerContainer` elements.
   * - Build the `controle block` => add a refresh button which calls the `redraw` method.
   */
  async draw() {
    this.headerContainer = document.createElement("div");
    this.processorSettings.container.appendChild(this.headerContainer);
    this.headerContainer.classList.add("header-container");
    const blockControle = document.createElement("div");
    this.headerContainer.appendChild(blockControle);
    blockControle.classList.add("block-controle");
    const refreshButton = document.createElement("a");
    blockControle.appendChild(refreshButton);
    refreshButton.classList.add("refresh-button");
    refreshButton.title = Lng.gt("Refresh");
    refreshButton.href = "#";
    (0, import_obsidian4.setIcon)(refreshButton, "refresh-cw");
    this.component.registerDomEvent(refreshButton, "click", async (event) => {
      event.preventDefault();
      this.redraw();
    });
    this.tableContainer = document.createElement("div");
    this.processorSettings.container.appendChild(this.tableContainer);
    this.tableContainer.classList.add("table-container");
  }
  /**
   * Redraws the component on request. Clears the container and calls the `draw` method.
   * @remarks This methode clears the container and calls the `draw` methode.
   */
  async redraw() {
    this.processorSettings.container.innerHTML = "";
    return this.draw();
  }
  /**
   * Normalizes the header.
   * @remarks - Removes the `disable` class from the header.
   * - The header is not grayed out anymore.
   */
  normalizeHeader() {
    this.headerContainer.removeClass("disable");
  }
  /**
   * Grays out the header.
   * @remarks - Adds the `disable` class to the header.
   * - The header is grayed out.
   */
  grayOutHeader() {
    this.headerContainer.addClass("disable");
  }
  getUID(model) {
    return Helper.generateUID(model.file.path);
  }
};

// src/libs/Search.ts
var Search = class {
  /**
   * Parses the search text into an array of objects that represent the search terms
   * @param searchText The search text to parse
   * @returns An array of objects with the following properties:
   * - term: The search term
   * - negate: Whether the term should be negated
   * - isOperator: Whether the term is an operator
   */
  static parseSearchText(searchText) {
    searchText = searchText.toLowerCase();
    if (!searchText.includes('"')) {
      return [{ term: searchText.trim(), negate: false, isOperator: false }];
    }
    const terms = [];
    let term = "";
    let inQuotes = false;
    let negate = false;
    for (const char of searchText) {
      if (char === '"') {
        if (inQuotes) {
          terms.push({ term: term.toLowerCase(), negate, isOperator: false });
          term = "";
          negate = false;
        }
        inQuotes = !inQuotes;
      } else if (inQuotes) {
        term += char;
      } else if (char === " ") {
        continue;
      } else if (["&", "|", "!"].includes(char)) {
        if (term.length > 0) {
          terms.push({ term, negate, isOperator: false });
          term = "";
          negate = false;
        }
        if (char === "!") {
          negate = true;
        } else {
          terms.push({ term: char, negate: false, isOperator: true });
        }
      } else {
        term += char;
      }
    }
    if (term.length > 0) {
      terms.push({ term, negate, isOperator: false });
    }
    if (terms.length > 1) {
      let i = 0;
      while (i < terms.length - 1) {
        if (!terms[i].isOperator && !terms[i + 1].isOperator) {
          terms.splice(i + 1, 0, { term: "&", negate: false, isOperator: true });
        }
        i += 2;
      }
    }
    return terms;
  }
  /**
   * Applies the search logic to the given text content
   * @param terms The search terms
   * @param textContent The text content to apply the search logic to
   * @returns Whether the text content matches the search terms (true or false)
   */
  static applySearchLogic(terms, textContent) {
    textContent = textContent.toLowerCase();
    let result = terms[0].negate ? !textContent.includes(terms[0].term) : textContent.includes(terms[0].term);
    for (let i = 1; i < terms.length; i += 2) {
      const operatorObj = terms[i];
      const nextTermObj = terms[i + 1];
      const nextTermMatch = nextTermObj.negate ? !textContent.includes(nextTermObj.term) : textContent.includes(nextTermObj.term);
      if (operatorObj.term === "&") {
        result = result && nextTermMatch;
      } else if (operatorObj.term === "|") {
        result = result || nextTermMatch;
      }
    }
    return result;
  }
};

// src/libs/Table.ts
var Table = class {
  // // //// // //// // //
  /**
   * Creates a new table
   * @param tableHeaders A list of table headers
   * @param id The ID of the table
   * @param classList The class list of the table
   */
  constructor(tableHeaders, id, classList) {
    this.logger = Global.getInstance().logger;
    /**
     * A list of row placeholders
     * @remarks - The row placeholders are used to keep the order of the rows when hiding and showing rows.
     * - The placeholders rows are empty and have the id `defaultIds.placeholder` (default: `placeholder-row`).
     */
    this._rowPlaceholders = [];
    this._visibleRows = 0;
    this._hiddenRows = 0;
    //   Default classes  //
    this.defaultClasses = {
      table: ["prj-table"],
      header: ["prj-table-header"],
      headerRow: ["prj-table-header-row"],
      headerCell: ["prj-table-header-cell"],
      body: ["prj-table-body"],
      row: ["prj-table-row", "prj-table-row-hover"],
      cell: ["prj-table-cell"],
      emojiCell: ["emoji-cell"],
      hiddenRow: "hidden-row",
      evenRow: "even-row",
      oddRow: "odd-row"
    };
    // Default IDs 
    this.defaultIds = {
      placeholder: "placeholder-row"
    };
    this._headers = tableHeaders;
    this._tableId = id;
    this._tableClassList = classList;
    this._table = this.createTable();
  }
  get data() {
    return this._table;
  }
  /**
   * Delte the complete table
   */
  deconstructor() {
    this._table.table.remove();
  }
  createTable() {
    const table = document.createElement("table");
    table.id = this._tableId;
    table.classList.add(...this.defaultClasses.table);
    if (this._tableClassList) {
      this._tableClassList.forEach((classItem) => {
        table.classList.add(classItem);
      });
    }
    const tableHeader = table.createTHead();
    tableHeader.classList.add(...this.defaultClasses.header);
    const tableHeaderRow = tableHeader.insertRow();
    tableHeaderRow.classList.add(...this.defaultClasses.headerRow);
    const tableHeaderCells = [];
    this._headers.forEach((header) => {
      const tableHeaderCell = document.createElement("th");
      tableHeaderCell.classList.add(...this.defaultClasses.headerCell);
      tableHeaderCell.id = this.makeSafeForId(header.text);
      tableHeaderCell.textContent = header.text;
      if (header.headerClass) {
        header.headerClass.forEach((classItem) => {
          tableHeaderCell.classList.add(classItem);
        });
      }
      tableHeaderCells.push(tableHeaderCell);
      tableHeaderRow.appendChild(tableHeaderCell);
    });
    const tableBody = table.createTBody();
    tableBody.classList.add(...this.defaultClasses.body);
    const structedTable = {
      table,
      header: tableHeader,
      headerRow: tableHeaderRow,
      headerCells: tableHeaderCells,
      body: tableBody,
      rows: []
    };
    return structedTable;
  }
  /**
   * Adds a row to the table
   * @param rowUid The UID of the new row
   * @param rowData The data of the new row
   * @param rowClassList The class list of the new row
   * @param hidden Whether the new row should be hidden
   */
  addRow(row) {
    this._addRow(row.rowUid, row.rowData, row.rowClassList, row.hidden);
  }
  /**
   * Adds multiple rows to the table
   * @param rows The rows to add
   * @param rows.rowUid The UID of the new row
   * @param rows.rowData The data of the new row
   * @param rows.rowClassList The class list of the new row
   * @param rows.hidden Whether the new row should be hidden
   * @remarks - The rows are added in the order of the array.
   * - The rows are added to the internal array.
   * - If the row is hidden, the row content is replaced with a placeholder.
   */
  addRows(rows) {
    const collectedRows = document.createDocumentFragment();
    rows.forEach((row) => {
      const rowFragment = this.createRow(row.rowUid, row.rowData, row.rowClassList, row.hidden);
      if (rowFragment) {
        this._table.rows.push(rowFragment);
        if (row.hidden) {
          collectedRows.append(this._getPlaceholder(row.rowUid));
        } else {
          collectedRows.append(rowFragment);
        }
      }
    });
    this._table.body.append(collectedRows);
  }
  /**
   * Adds a row to the table
   * @param rowUid The UID of the new row
   * @param rowData The data of the new row as an array of DocumentFragments. Each DocumentFragment represents a cell.
   * @param rowClassList The class list of the new row
   * @param hidden Whether the new row should be hidden
   * @remarks - The row is added to the internal array.
   * - If the row is hidden, the row content is replaced with a placeholder.
   */
  _addRow(rowUid, rowData, rowClassList, hidden) {
    const tableRow = this.createRow(rowUid, rowData, rowClassList, hidden);
    this._table.rows.push(tableRow);
    if (hidden) {
      this._table.body.append(this._getPlaceholder(rowUid));
    } else {
      this._table.body.append(tableRow);
    }
  }
  /**
   * Creates a row
   * @param rowUid The UID of the row 
   * @param rowData The data of the row as an array of DocumentFragments. Each DocumentFragment represents a cell.
   * @param rowClassList The class list of the row
   * @param hidden Whether the row should be hidden.
   * @remarks **If true, the row is hidden and the row content is later replaced with a placeholder.**
   * @returns The created row as an HTMLTableRowElement
   */
  createRow(rowUid, rowData, rowClassList, hidden) {
    const tableRow = document.createElement("tr");
    tableRow.classList.add(...this.defaultClasses.row);
    tableRow.setAttribute("row-uid", rowUid);
    if (rowClassList) {
      rowClassList.forEach((classItem) => {
        tableRow.classList.add(classItem);
      });
    }
    if (hidden) {
      tableRow.classList.add(this.defaultClasses.hiddenRow);
      this._hiddenRows++;
    } else {
      this.setRowOddOrEven(tableRow);
      this._visibleRows++;
    }
    rowData.forEach((data, index) => {
      var _a;
      const tableCell = tableRow.insertCell();
      tableCell.classList.add(...this.defaultClasses.cell);
      if (this._headers[index] !== void 0 && this._headers[index].columnClass) {
        (_a = this._headers[index].columnClass) == null ? void 0 : _a.forEach((classItem) => {
          tableCell.classList.add(classItem);
        });
      }
      tableCell.setAttribute("data-label", this._headers[index].text);
      if (Helper.isEmoji(this._headers[index].text)) {
        tableCell.classList.add(...this.defaultClasses.emojiCell);
      }
      tableCell.appendChild(data);
    });
    return tableRow;
  }
  /**
   * Sets the row to odd or even
   * @param tableRow The row to set
   * @remarks - The row is set to odd or even based on the last visible row.
   * - If no visible row exists, the row is set to even.
   * @remarks It does not search for the last visible line in the HTML table itself, but in an internal array.
   */
  setRowOddOrEven(tableRow) {
    let lastVisibleRow;
    for (let i = this._table.rows.length - 1; i >= 0; i--) {
      if (!this._table.rows[i].classList.contains(this.defaultClasses.hiddenRow)) {
        lastVisibleRow = this._table.rows[i];
        break;
      }
    }
    if (lastVisibleRow) {
      tableRow.classList.add(lastVisibleRow.classList.contains(this.defaultClasses.evenRow) ? this.defaultClasses.oddRow : this.defaultClasses.evenRow);
    } else {
      tableRow.classList.add(this.defaultClasses.evenRow);
    }
  }
  /**
   * Returns the number of visible and hidden rows
   * @returns The number of visible and hidden rows
   * @returns visibleRows The number of visible rows
   * @returns hiddenRows The number of hidden rows
   */
  getRowStats() {
    return { visibleRows: this._visibleRows, hiddenRows: this._hiddenRows };
  }
  /**
   * Deletes the row with the given UID
   * @param rowUid The UID of the row
   * @remarks - The row is deleted from the table body and the internal array.
   * - If a placeholder exists, it is also deleted from the table body and the internal array.
   */
  deleteRow(rowUid) {
    const rowToDelete = this.getRow(rowUid);
    const rowVisible = rowToDelete && !rowToDelete.classList.contains(this.defaultClasses.hiddenRow);
    if (rowVisible) {
      if (rowToDelete) {
        try {
          this._table.body.removeChild(rowToDelete);
        } catch (error) {
          this.logger.warn("Row not active in the table. Error:", error);
        }
        this._table.rows = this._table.rows.filter((row) => row.getAttribute("row-uid") !== rowUid);
        this._removePlaceholder(rowUid);
      }
      this._visibleRows--;
      this.refreshRowEvenOddClass();
    } else {
      const placeholder = this._removePlaceholder(rowUid);
      if (placeholder) {
        try {
          this._table.body.removeChild(placeholder);
        } catch (error) {
          this.logger.warn("Placeholder row not active in the table. Error:", error);
        }
      }
      this._hiddenRows--;
    }
  }
  /**
   * Set a row to hidden
   * @param rowUid The UID of the row
   * @remarks - The row is set to hidden and the row content is replaced with a placeholder.
   * - Only if the state has changed, the calculation of the odd and even rows is updated.
   */
  hideRow(rowUid) {
    const changes = this._hideRow(rowUid);
    if (changes)
      this.refreshRowEvenOddClass();
  }
  /**
   * Set a row to hidden, replaces the row content with a placeholder and updates the row stats
   * @param rowUid The UID of the row
   * @returns Whether the state has changed. Returns `false` if the row is already hidden.
   */
  _hideRow(rowUid) {
    this.logger.trace(`Row ${rowUid} should be hidden.`);
    const changes = this.togleRowClass(rowUid, [this.defaultClasses.hiddenRow], true);
    this.logger.trace(`Row ${rowUid} changes: ${changes}`);
    if (changes) {
      this._removeRowContent(rowUid);
      this._visibleRows--;
      this._hiddenRows++;
    }
    return changes;
  }
  /**
   * Set a row to visible
   * @param rowUid The UID of the row
   * @remarks - The row is set to visible and the row content is replaced with the original content.
   * - Only if the state has changed, the calculation of the odd and even rows is updated.
   */
  showRow(rowUid) {
    const changes = this._showRow(rowUid);
    if (changes)
      this.refreshRowEvenOddClass();
  }
  /**
   * Set a row to visible, replaces the placeholder with the original row content and updates the row stats
   * @param rowUid The UID of the row
   * @returns Whether the state has changed. Returns `false` if the row is already visible.
   */
  _showRow(rowUid) {
    this.logger.trace(`Row ${rowUid} should be shown.`);
    const changes = this.togleRowClass(rowUid, [this.defaultClasses.hiddenRow], false);
    this.logger.trace(`Row ${rowUid} changes: ${changes}`);
    if (changes) {
      this._addRowContent(rowUid);
      this._visibleRows++;
      this._hiddenRows--;
    }
    return changes;
  }
  /**
   * Set the state of multiple rows to hidden or visible
   * @param rows The rows to change
   * @param rows.rowUid The UID of the row
   * @param rows.hidden Whether to hide or show the row
   */
  async changeShowHideStateRows(rows) {
    this.logger.trace(`Change Show/Hide state of ${rows.length} rows.`);
    let changes = false;
    rows.forEach((row) => {
      this.logger.trace(`Change Show/Hide state of Row: ${row.rowUid} to ${row.hidden}.`);
      if (row.hidden) {
        this.logger.trace(`Hide Row: ${row.rowUid}`);
        const result = this._hideRow(row.rowUid);
        changes || (changes = result);
      } else {
        this.logger.trace(`Show Row: ${row.rowUid}`);
        const result = this._showRow(row.rowUid);
        changes || (changes = result);
      }
    });
    if (changes)
      this.refreshRowEvenOddClass();
  }
  /**
   * Replaces the row in table body with a placeholder
   * @param rowUid The UID of the row
   * @remarks - Search the row in the internal array,
   * - If found, get the placeholder from the internal array and replace the row in the table body with the placeholder.
   */
  _removeRowContent(rowUid) {
    const row = this.getRow(rowUid);
    if (row) {
      const placeholder = this._getPlaceholder(rowUid);
      this._table.body.replaceChild(placeholder, row);
    }
  }
  /**
   * Replaces the placeholder in table body with the row
   * @param rowUid The UID of the row
   * @remarks - Search the row in the internal array,
   * - If found, get the placeholder from the internal array and replace the placeholder in the table body with the row.
   */
  _addRowContent(rowUid) {
    const row = this.getRow(rowUid);
    if (row) {
      const placeholder = this._getPlaceholder(rowUid);
      if (placeholder) {
        try {
          this._table.body.replaceChild(row, placeholder);
        } catch (error) {
          this.logger.warn("Placeholder row not active in the table. Error:", error);
        }
      }
    }
  }
  /**
   * Generates a placeholder row
   * @param rowUid The UID of the row
   * @returns The generated placeholder row
   * @remarks - The placeholder row is empty and has the id `defaultIds.placeholder` (default: `placeholder-row`).
   * - The placeholder row is added to the internal array.
   */
  _generatePlaceholder(rowUid) {
    const placeholder = document.createElement("tr");
    placeholder.id = this.defaultIds.placeholder;
    placeholder.setAttribute("row-uid", rowUid);
    this._rowPlaceholders.push({ rowUid, row: placeholder });
    return placeholder;
  }
  /**
   * Removes the placeholder row with the given UID from the internal array
   * @param rowUid The UID of the row
   */
  _removePlaceholder(rowUid) {
    var _a;
    const placeholder = (_a = this._rowPlaceholders.find((rowPlaceholder) => rowPlaceholder.rowUid === rowUid)) == null ? void 0 : _a.row;
    if (placeholder) {
      this._rowPlaceholders = this._rowPlaceholders.filter((rowPlaceholder) => rowPlaceholder.rowUid !== rowUid);
    }
    return placeholder;
  }
  /**
   * Returns the placeholder row with the given UID
   * @param rowUid The UID of the row
   * @returns - The placeholder row with the given UID
   * - or a new placeholder row if no placeholder row with the given UID exists
   * @remarks - If a new placeholder row is generated, it is added to the internal array.
   */
  _getPlaceholder(rowUid) {
    var _a;
    const placeholder = (_a = this._rowPlaceholders.find((rowPlaceholder) => rowPlaceholder.rowUid === rowUid)) == null ? void 0 : _a.row;
    if (placeholder)
      return placeholder;
    else {
      return this._generatePlaceholder(rowUid);
    }
  }
  /**
   * Returns the row with the given UID
   * @param rowUid The UID of the row
   * @returns The row with the given UID or undefined if no row with the given UID exists
   */
  getRow(rowUid) {
    return this._table.rows.find((row) => row.getAttribute("row-uid") === rowUid);
  }
  /**
   * Toggles the class of a row
   * @param rowUid The UID of the row
   * @param classList The class list to toggle
   * @param add Whether to add or remove the class
   */
  togleRowClass(rowUid, classList, add) {
    let changes = false;
    const row = this.getRow(rowUid);
    if (row) {
      changes = this.toggleClass(row, classList, add);
    }
    return changes;
  }
  /**
   * Refreshes the odd and even rows with the corosponding classes
   * @remarks - The odd and even rows are calculated based on the visible rows from the internal array.
   * - Change the classes only if necessary.
   */
  refreshRowEvenOddClass() {
    const visibleRows = this._table.rows.filter((row) => !row.classList.contains(this.defaultClasses.hiddenRow));
    visibleRows.forEach((row, index) => {
      if (index % 2 === 0) {
        this.toggleClass(row, [this.defaultClasses.evenRow], true);
        this.toggleClass(row, [this.defaultClasses.oddRow], false);
      } else {
        this.toggleClass(row, [this.defaultClasses.evenRow], false);
        this.toggleClass(row, [this.defaultClasses.oddRow], true);
      }
    });
  }
  toggleClass(element, classList, add) {
    let changes = false;
    const presentClasses = element.classList;
    if (add) {
      classList.forEach((classItem) => {
        if (!presentClasses.contains(classItem)) {
          element.classList.add(classItem);
          changes = true;
        }
      });
    } else {
      classList.forEach((classItem) => {
        if (presentClasses.contains(classItem)) {
          element.classList.remove(classItem);
          changes = true;
        }
      });
    }
    return changes;
  }
  /**
   * Changes the header of the table
   * @param header The header to change; the header text must match the original header text
   */
  changeHeader(header) {
    this.changeHeaderClass(header);
    this.changeColumnClass(header);
    this._headers[this._headers.findIndex((headerItem) => headerItem.text === header.text)] = header;
  }
  changeHeaderClass(header) {
    const headerIndex = this._headers.findIndex((headerItem) => headerItem.text === header.text);
    const oldHeaderClasses = this._headers[headerIndex].headerClass;
    const newHeaderClasses = header.headerClass;
    const headerCell = this._table.headerCells[headerIndex];
    if (oldHeaderClasses) {
      this.toggleClass(headerCell, oldHeaderClasses, false);
    }
    if (newHeaderClasses) {
      this.toggleClass(headerCell, newHeaderClasses, true);
    }
  }
  changeColumnClass(header) {
    const columnIndex = this._headers.findIndex((headerItem) => headerItem.text === header.text);
    const oldHeaderClasses = this._headers[columnIndex].headerClass;
    this._table.rows.forEach((row) => {
      const cell = row.cells[columnIndex];
      if (cell) {
        if (oldHeaderClasses) {
          this.toggleClass(cell, oldHeaderClasses, false);
        }
        if (header.columnClass) {
          this.toggleClass(cell, header.columnClass, true);
        }
      }
    });
  }
  makeSafeForId(input) {
    let result = "";
    for (let i = 0; i < input.length; i++) {
      const char = input[i];
      if (i === 0 && !isNaN(Number(char))) {
        result += "_";
      } else if (char.match(/[a-zA-Z]/)) {
        result += char.toLowerCase();
      } else if (char.match(/[0-9]/)) {
        result += char;
      } else {
        result += "_";
      }
    }
    return result;
  }
};

// src/libs/BlockRenderComponents/InnerComponents/FilterButton.ts
var import_obsidian5 = require("obsidian");
var FilterButton = class {
  /**
   * Creates a new filter button.
   * @param component The component to register the events to.
   * @param type The type of the filter button.
   * @param symbol The symbol of the filter button.
   * @param status The initial status of the filter button.
   * @param onFilter The callback to call when the filter button is clicked. Passes the type of the filter button and the status of the filter button.
   * @returns The created filter button as `DocumentFragment`.
   * @remarks - The filter button consists of a filter button container and a filter button.
   * - CSS classes:
   * - `filter-symbol` - The filter button.
   * - `filter-symbol-hide` - Additional class for the filter button to hide it.
   */
  static create(component, type2, symbol, status, onFilter) {
    const headerItemContainer = document.createDocumentFragment();
    const filterButtonContainer = document.createElement("div");
    headerItemContainer.appendChild(filterButtonContainer);
    const filter = FilterButton.createFilterButton(status, type2, symbol, component, onFilter);
    filterButtonContainer.appendChild(filter);
    return headerItemContainer;
  }
  /**
   * Creates the filter button.
   * @param status The initial status of the filter button.
   * @param type The type of the filter button.
   * @param symbol The symbol of the filter button.
   * @param component The component to register the events to.
   * @param filterCallback The callback to call when the filter button is clicked. Passes the type of the filter button and the status of the filter button.
   * @returns The created filter button as `DocumentFragment`.
   * @remarks - The filter button is a `HTMLAnchorElement`.
   * - CSS classes:
   * - `filter-symbol` - The filter button.
   * - `filter-symbol-hide` - Additional class for the filter button to hide it.
   */
  static createFilterButton(status, type2, symbol, component, filterCallback) {
    const logger = Global.getInstance().logger;
    const filterButtonContainer = document.createDocumentFragment();
    const filter = document.createElement("a");
    filterButtonContainer.appendChild(filter);
    filter.classList.add("filter-symbol");
    if (!status) {
      filter.classList.add("filter-symbol-hide");
    }
    filter.title = Lng.gt(type2);
    filter.href = "#";
    (0, import_obsidian5.setIcon)(filter, symbol);
    component.registerDomEvent(filter, "click", async (event) => {
      filter.classList.toggle("filter-symbol-hide");
      try {
        await filterCallback(type2, filter.classList.contains("filter-symbol-hide"));
      } catch (error) {
        logger.error("The `onFilter` callback threw an error!", error);
      }
    });
    return filterButtonContainer;
  }
};

// src/libs/BlockRenderComponents/InnerComponents/MaxShownModelsInput.ts
var import_obsidian6 = require("obsidian");
var MaxShownModelsInput = class {
  /**
   * Creates a new max shown models input component.
   * @param component The component to register the events to.
   * @param defaultValue The default value of the max shown models number.
   * @param batchSize The batch size to add or subtract.
   * @param onChange The callback to call when the max shown models number changes. Passes the max shown models number. You can return a new max shown models number.
   * @returns The created max shown models input component as `DocumentFragment`.
   * @remarks - The max shown models input component consists of a container, a minus symbol, a presentation span and a plus symbol.
   * - CSS classes:
   * - `filter-max-models` - The container of the max shown models input component.
   * - `filter-max-number` - The presentation span of the max shown models input component.
   * - `minus-batch-button` - The minus symbol of the max shown models input component.
   * - `plus-batch-button` - The plus symbol of the max shown models input component.
   */
  static create(component, defaultValue, batchSize, onChange) {
    const headerItemContainer = document.createDocumentFragment();
    const logger = Global.getInstance().logger;
    let debounceTimer;
    const maxShownModels = {
      maxShownModels: !isNaN(parseFloat(defaultValue)) && isFinite(defaultValue) ? Number(defaultValue) : 0
    };
    const filterMaxModelsContainer = document.createElement("div");
    headerItemContainer.appendChild(filterMaxModelsContainer);
    filterMaxModelsContainer.classList.add("filter-max-models");
    const number = this.createNumberPresentation(maxShownModels, component, batchSize);
    const debounceOnChange = () => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(async () => {
        var _a;
        try {
          maxShownModels.maxShownModels = (_a = await onChange(maxShownModels.maxShownModels)) != null ? _a : maxShownModels.maxShownModels;
        } catch (error) {
          logger.error("The `onChange` callback threw an error!", error);
        } finally {
          number.number.textContent = maxShownModels.maxShownModels.toString();
        }
      }, 500);
    };
    MaxShownModelsInput.createNumberPresentationEvent(
      component,
      number.number,
      maxShownModels,
      batchSize,
      debounceOnChange
    );
    const minus = this.createSymbol(
      "minus",
      number.number,
      component,
      maxShownModels,
      batchSize,
      debounceOnChange
    );
    const plus = this.createSymbol(
      "plus",
      number.number,
      component,
      maxShownModels,
      batchSize,
      debounceOnChange
    );
    filterMaxModelsContainer.appendChild(minus);
    filterMaxModelsContainer.appendChild(number.container);
    filterMaxModelsContainer.appendChild(plus);
    return headerItemContainer;
  }
  /**
   * Create the presentation span for the max shown models number.
   * @param maxShownModels The container for the max shown models number.
   * @returns - The created presentation span as `DocumentFragment`
   * - The created presentation span as `HTMLSpanElement`
   * - The span element has the class `filter-max-number`.
   */
  static createNumberPresentation(maxShownModels, component, batchSize) {
    const filterMaxModelsContainer = document.createDocumentFragment();
    const maxShownNumber = document.createElement("span");
    filterMaxModelsContainer.appendChild(maxShownNumber);
    maxShownNumber.classList.add("filter-max-number");
    maxShownNumber.title = Lng.gt("MaxShownEntrys");
    maxShownNumber.textContent = maxShownModels.maxShownModels.toString();
    return { container: filterMaxModelsContainer, number: maxShownNumber };
  }
  /**
   * Creates the mouse wheel events for the max shown models number presentation span.
   * @param component The component to register the events to.
   * @param maxShownNumber The presentation span of the max shown models number.
   * @param maxShownModels The container for the max shown models number.
   * @param batchSize The batch size to add or subtract.
   * @param onMaxShownModelsChange The callback to call when the max shown models number changes.
   */
  static createNumberPresentationEvent(component, maxShownNumber, maxShownModels, batchSize, onMaxShownModelsChange) {
    component.registerDomEvent(maxShownNumber, "wheel", async (event) => {
      event.preventDefault();
      if (event.deltaY > 0) {
        this.changeValue("minus", maxShownModels, batchSize, maxShownNumber, onMaxShownModelsChange);
      } else {
        this.changeValue("plus", maxShownModels, batchSize, maxShownNumber, onMaxShownModelsChange);
      }
    }, { passive: false });
  }
  /**
   * Creates a symbol for the max shown models number.
   * @param type The type of the symbol. Can be `plus` or `minus`.
   * @param maxShownNumber The presentation span of the max shown models number.
   * @param component The component to register the events to.
   * @param maxShownModels The container for the max shown models number.
   * @param batchSize The batch size to add or subtract.
   * @param onMaxShownModelsChange The callback to call when the max shown models number changes.
   * @returns The created symbol as `DocumentFragment`.
   * @remarks - The symbol is a `HTMLAnchorElement`.
   * - The symbol has the class `plus-batch-button` or `minus-batch-button`.
   */
  static createSymbol(type2, maxShownNumber, component, maxShownModels, batchSize, onMaxShownModelsChange) {
    const filterMaxModelsContainer = document.createDocumentFragment();
    const maxShownDocMinus = document.createElement("a");
    filterMaxModelsContainer.appendChild(maxShownDocMinus);
    maxShownDocMinus.classList.add(`${type2}-batch-button`);
    maxShownDocMinus.title = type2;
    maxShownDocMinus.href = "#";
    (0, import_obsidian6.setIcon)(maxShownDocMinus, type2);
    component.registerDomEvent(maxShownDocMinus, "click", async (event) => {
      this.changeValue(type2, maxShownModels, batchSize, maxShownNumber, onMaxShownModelsChange);
    });
    return filterMaxModelsContainer;
  }
  /**
   * Changes the max shown models number.
   * @param type The type of the symbol. Can be `plus` or `minus`.
   * @param maxShownModels The container for the max shown models number.
   * @param batchSize The batch size to add or subtract.
   * @param maxShownNumber The presentation span of the max shown models number.
   * @param onMaxShownModelsChange The callback to call when the max shown models number changes.
   */
  static changeValue(type2, maxShownModels, batchSize, maxShownNumber, onMaxShownModelsChange) {
    if (type2 === "minus") {
      if (maxShownModels.maxShownModels >= batchSize) {
        maxShownModels.maxShownModels -= maxShownModels.maxShownModels % batchSize || batchSize;
      } else {
        maxShownModels.maxShownModels = 0;
      }
    } else {
      maxShownModels.maxShownModels += batchSize - maxShownModels.maxShownModels % batchSize;
    }
    maxShownNumber.textContent = maxShownModels.maxShownModels.toString();
    onMaxShownModelsChange();
  }
};

// src/libs/BlockRenderComponents/InnerComponents/SearchInput.ts
var SearchInput = class {
  /**
   * Creates a new search input component.
   * @param component The component to register the events to.
   * @param onSearch The callback to call when the search box value changes. Passes the search box value and the key that was pressed.
   * @returns The created search input component as `DocumentFragment`.
   * @remarks - The search input component consists of a label, an input sizer and a search box.
   * - CSS classes:
   *  - `filter-search` - The container of the search input component.
   *  - `filter-text` - The label of the search input component.
   *  - `search-box-sizer` - The sizer of the search input component.
   *  - `search-box` - The search box of the search input component.
   */
  static create(component, onSearch) {
    const logger = Global.getInstance().logger;
    const headerItemContainer = document.createDocumentFragment();
    const searchLabelContainer = document.createElement("div");
    headerItemContainer.appendChild(searchLabelContainer);
    searchLabelContainer.classList.add("filter-search");
    SearchInput.createSearchLabel(searchLabelContainer);
    const searchBoxSizer = SearchInput.createSearchBoxSizer(searchLabelContainer);
    const searchBoxInput = SearchInput.createSearchBoxInput(searchBoxSizer);
    component.registerDomEvent(searchBoxInput, "input", async (event) => {
      this.setSearchBoxSizerValue(searchBoxSizer, searchBoxInput.value);
    });
    component.registerDomEvent(searchBoxInput, "keydown", async (event) => {
      let value = searchBoxInput.value;
      try {
        value = await onSearch(searchBoxInput.value, event.key);
      } catch (error) {
        logger.error("The `onSearch` callback threw an error!", error);
      } finally {
        this.setSearchBoxSizerValue(searchBoxSizer, value);
        this.setSearchBoxInputValue(searchBoxInput, value);
      }
    });
    return headerItemContainer;
  }
  /**
   * Creates the search label.
   * @param searchLabelContainer The container to append the label to. 
   * @remarks - The label is a `HTMLSpanElement`.
   * - The label text is `Search`-value of the translation.
   * - The label element has the class `filter-text`.
   */
  static createSearchLabel(searchLabelContainer) {
    const filterLabel = document.createElement("span");
    searchLabelContainer.appendChild(filterLabel);
    filterLabel.classList.add("filter-text");
    filterLabel.textContent = Lng.gt("Search") + ":";
  }
  /**
   * Creates the search box sizer.
   * @param searchLabelContainer The container to append the sizer to.
   * @returns The created search box sizer.
   * @remarks - The sizer is a `HTMLLabelElement`.
   * - The sizer has the class `search-box-sizer`.
   */
  static createSearchBoxSizer(searchLabelContainer) {
    const searchBoxSizer = document.createElement("label");
    searchLabelContainer.appendChild(searchBoxSizer);
    searchBoxSizer.classList.add("search-box-sizer");
    return searchBoxSizer;
  }
  /**
   * Creates the search box input.
   * @param searchBoxSizer The container to append the input to.
   * @returns The created search box input.
   * @remarks - The input is a `HTMLInputElement`.
   * - The input type is `text`.
   * - The input placeholder is `Search`-value of the translation.
   * - The input element has the class `search-box`.
   */
  static createSearchBoxInput(searchBoxSizer) {
    const searchBoxInput = document.createElement("input");
    searchBoxSizer.appendChild(searchBoxInput);
    searchBoxInput.classList.add("search-box");
    searchBoxInput.type = "text";
    searchBoxInput.placeholder = Lng.gt("Search");
    searchBoxInput.value = "";
    return searchBoxInput;
  }
  /**
   * Sets the search box sizer value.
   * @param searchBoxSizer The search box sizer to set the value to.
   * @param value The value to set.
   */
  static setSearchBoxSizerValue(searchBoxSizer, value) {
    searchBoxSizer.dataset.value = "_" + value + "_";
  }
  /**
   * Sets the search box input value.
   * @param searchBoxInput The search box input to set the value to.
   * @param value The value to set.
   */
  static setSearchBoxInputValue(searchBoxInput, value) {
    searchBoxInput.value = value;
  }
};

// src/libs/BlockRenderComponents/InnerComponents/DocumentComponents.ts
var import_obsidian10 = require("obsidian");

// src/libs/EditableDataView/Components/BaseComponent.ts
var import_obsidian7 = require("obsidian");
var BaseComponent = class {
  //#endregion
  constructor(component) {
    this.cancelButton = void 0;
    this.saveButton = void 0;
    this.component = component;
    this.shippingContainer = document.createElement("div");
    this.shippingContainer.classList.add("editable-data-view", "container");
  }
  get container() {
    return this.shippingContainer;
  }
  /**
   * Creates the base structure of the component.
   * @param editabilityEnabled If `true`, the component will be created to allow editing.
   * @tutorial Run this methode in the `finalize`-methode of the child class before creating your elements.
   */
  createBaseStructure(editabilityEnabled = this.editabilityEnabled) {
    this.presentationContainer = document.createElement("div");
    this.presentationContainer.classList.add("editable-data-view", "presentation-container");
    this.shippingContainer.appendChild(this.presentationContainer);
    if (editabilityEnabled && (import_obsidian7.Platform.isMobile ? Global.getInstance().settings.mobile : true)) {
      this.buttonContainer = document.createElement("div");
      this.buttonContainer.classList.add("editable-data-view", "button-container");
      this.createEditButton();
      this.shippingContainer.appendChild(this.buttonContainer);
    }
  }
  /**
   * Creates the `edit` button and adds it to the `buttonContainer`.
   */
  createEditButton() {
    this.editButton = document.createElement("button");
    this.buttonContainer.appendChild(this.editButton);
    this.editButton.classList.add("editable-data-view");
    this.editButton.classList.add("button");
    (0, import_obsidian7.setIcon)(this.editButton, "pen");
    this.component.registerDomEvent(this.editButton, "click", () => this.enableEditMode());
  }
  /**
   * Creates the `save` and `cancel` buttons and the `input` container and adds them to the `buttonContainer`.
   */
  createComponentsForEdit() {
    this.dataInputContainer = document.createElement("div");
    this.dataInputContainer.classList.add("editable-data-view", "data-input-container", "hidden");
    this.shippingContainer.insertBefore(this.dataInputContainer, this.presentationContainer);
    this.cancelButton = document.createElement("button");
    this.buttonContainer.insertAfter(this.cancelButton, this.editButton);
    this.cancelButton.classList.add("editable-data-view");
    this.cancelButton.classList.add("button");
    this.cancelButton.classList.add("hidden");
    (0, import_obsidian7.setIcon)(this.cancelButton, "x");
    this.component.registerDomEvent(this.cancelButton, "click", () => this.disableEditMode());
    this.saveButton = document.createElement("button");
    this.buttonContainer.insertAfter(this.saveButton, this.cancelButton);
    this.saveButton.classList.add("editable-data-view");
    this.saveButton.classList.add("button");
    this.saveButton.classList.add("hidden");
    (0, import_obsidian7.setIcon)(this.saveButton, "check");
    this.component.registerDomEvent(this.saveButton, "click", () => this.saveChanges());
  }
  /**
   * This method is called after the final configuration of the component.
   */
  finalize() {
    var _a;
    this.createBaseStructure();
    (_a = this.onFinalize) == null ? void 0 : _a.call(this);
  }
  /**
   * This method is called when the user clicks on the `edit` button.
   * It should switch the component to edit mode and 
   * create the `save` and `cancel` buttons if not already created.
   * @remarks You can call this methode to simulate a click on the `edit` button.
   */
  enableEditMode() {
    var _a, _b;
    if (!this.cancelButton || !this.saveButton) {
      this.createComponentsForEdit();
      (_a = this.onFirstEdit) == null ? void 0 : _a.call(this);
    }
    if (this.cancelButton && this.saveButton) {
      this.presentationContainer.classList.add("hidden");
      this.dataInputContainer.classList.remove("hidden");
      this.cancelButton.classList.remove("hidden");
      this.saveButton.classList.remove("hidden");
      this.editButton.classList.add("hidden");
      (_b = this.onEnableEditCallback) == null ? void 0 : _b.call(this);
    }
  }
  /**
   * This method is called when the user clicks on the `cancel` button or 
   * after the `saveChanges`-methode is clicked.
   * @remarks You can call this methode to simulate a click on the `cancel` button.
   */
  disableEditMode() {
    var _a;
    if (this.cancelButton && this.saveButton) {
      this.presentationContainer.classList.remove("hidden");
      this.dataInputContainer.classList.add("hidden");
      this.cancelButton.classList.add("hidden");
      this.saveButton.classList.add("hidden");
      this.editButton.classList.remove("hidden");
      (_a = this.onDisableEditCallback) == null ? void 0 : _a.call(this);
    }
  }
  /**
   * This method is called when the user clicks on the `save` button.
   * @remarks You can call this methode to simulate a click on the `save` button.
   */
  async saveChanges() {
    var _a;
    if (this.cancelButton && this.saveButton) {
      await ((_a = this.onSaveCallback) == null ? void 0 : _a.call(this));
      this.disableEditMode();
    }
  }
};

// src/libs/EditableDataView/Components/DateComponent.ts
var DateComponent = class extends BaseComponent {
  //#endregion
  constructor(component) {
    super(component);
    //#region base properties
    this.editabilityEnabled = false;
    this.onFinalize = this.build;
    this.onFirstEdit = this.buildInput;
    this.onEnableEditCallback = this.enableEdit;
    this.onSaveCallback = this.save;
    this.onDisableEditCallback = this.disableEdit;
  }
  //#region Configuration methods
  /**
   * Enables the editability of the component.
   * @returns The component itself.
   */
  enableEditability() {
    this.editabilityEnabled = true;
    return this;
  }
  /**
   * Sets the value of the component.
   * @param value The value to set.
   * @returns The component itself.
   */
  setValue(value) {
    this._value = value;
    return this;
  }
  /**
   * Sets the title of the component.
   * @param title The title to set.
   * @returns The component itself.
   */
  setTitle(title) {
    this._title = title;
    return this;
  }
  /**
   * Sets the formator of the component.
   * @param formator The formator to set.
   * @returns The component itself.
   * @remarks The formator is called when the component change in `not-edit` mode.
   */
  setFormator(formator) {
    this._onPresentation = formator;
    return this;
  }
  /**
   * Sets the saver of the component.
   * @param callback The saver to set.
   * @returns The component itself.
   * @remarks The saver is called when the component save button is clicked.
   */
  onSave(callback) {
    this._onSave = callback;
    return this;
  }
  //#endregion
  //#region Base Callbacks
  build() {
    this.presentationSpan = document.createElement("span");
    this.presentationContainer.appendChild(this.presentationSpan);
    this.presentationSpan.title = this._title;
    this.presentationSpan.classList.add("editable-data-view");
    this.presentationSpan.classList.add("date-presentation");
    this.presentationSpan.textContent = this._onPresentation ? this._onPresentation(this._value) : this._value;
  }
  buildInput() {
    this.input = document.createElement("input");
    this.dataInputContainer.appendChild(this.input);
    this.input.type = "date";
    this.input.title = this._title;
    this.input.classList.add("editable-data-view");
    this.input.classList.add("date-input");
  }
  enableEdit() {
    this.input.value = this._value ? this._value : "";
    this.input.focus();
    this.input.select();
  }
  disableEdit() {
    this.presentationSpan.textContent = this._onPresentation ? this._onPresentation(this._value) : this._value;
  }
  async save() {
    var _a;
    this._value = this.input.value;
    await ((_a = this._onSave) == null ? void 0 : _a.call(this, this._value));
  }
  //#endregion
};

// src/libs/EditableDataView/Components/DropdownComponent.ts
var DropdownComponent = class extends BaseComponent {
  //#endregion
  constructor(component) {
    super(component);
    //#region base properties
    this.editabilityEnabled = false;
    this.onFinalize = this.build;
    this.onFirstEdit = this.buildInput;
    this.onEnableEditCallback = this.enableEdit;
    this.onSaveCallback = this.save;
    this.onDisableEditCallback = this.disableEdit;
  }
  get _selectedOption() {
    const selectedOption = this._options.find((o) => o.value === this._value);
    if (selectedOption)
      return selectedOption;
    return { value: this._value, text: this._value };
  }
  //#region Configuration methods
  /**
   * Enables the editability of the component.
   * @returns The component itself.
   */
  enableEditability() {
    this.editabilityEnabled = true;
    return this;
  }
  /**
   * Sets the value of the component.
   * @param value The value to set.
   * @returns The component itself.
   */
  setValue(value) {
    this._value = value;
    return this;
  }
  /**
   * Sets the options of the component.
   * @param options The options to set.
   * @returns The component itself.
   */
  setOptions(options) {
    this._options = options;
    return this;
  }
  /**
   * Sets the title of the component.
   * @param title The title to set.
   * @returns The component itself.
   */
  setTitle(title) {
    this._title = title;
    return this;
  }
  /**
   * Sets the formator of the component.
   * @param formator The formator to set.
   * @returns The component itself.
   * @remarks - The formator is called when the component change in `not-edit` mode.
   * - `value` is the value of the selected option. (Not the text!)
   */
  setFormator(formator) {
    this._onPresentation = async (value) => {
      const { text, html } = formator(value);
      if (html) {
        this.presentationSpan.innerHTML = "";
        this.presentationSpan.appendChild(html);
      } else {
        this.presentationSpan.textContent = text;
      }
    };
    return this;
  }
  /**
   * Sets the saver of the component.
   * @param callback The saver to set.
   * @returns The component itself.
   * @remarks - The saver is called when the component save button is clicked.
   * - `value` is the value of the selected option. (Not the text!)
   */
  onSave(callback) {
    this._onSave = callback;
    return this;
  }
  //#endregion
  enableOptions() {
    const optionFound = this._options.find((o) => o.value === this._value);
    if (!optionFound) {
      const optionElement = document.createElement("option");
      optionElement.value = this._value;
      optionElement.textContent = `${this._value} (not in options)`;
      this.select.appendChild(optionElement);
    }
    this._options.forEach((option) => {
      const optionElement = document.createElement("option");
      optionElement.value = option.value;
      optionElement.textContent = option.text;
      this.select.appendChild(optionElement);
    });
  }
  disableOptions() {
    this.select.innerHTML = "";
  }
  //#region Base Callbacks
  build() {
    var _a;
    this.presentationSpan = document.createElement("span");
    this.presentationContainer.appendChild(this.presentationSpan);
    this.presentationSpan.title = this._title;
    this.presentationSpan.classList.add("editable-data-view");
    this.presentationSpan.classList.add("text-presentation");
    (_a = this._onPresentation) == null ? void 0 : _a.call(this, this._selectedOption.value);
  }
  buildInput() {
    this.select = document.createElement("select");
    this.dataInputContainer.appendChild(this.select);
    this.select.title = this._title;
    this.select.classList.add("editable-data-view");
    this.select.classList.add("select-input");
  }
  enableEdit() {
    this.enableOptions();
    this.select.value = this._value ? this._value : "";
    this.select.focus();
  }
  disableEdit() {
    var _a;
    (_a = this._onPresentation) == null ? void 0 : _a.call(this, this._selectedOption.value);
    this.disableOptions();
  }
  async save() {
    var _a;
    this._value = this.select.value;
    await ((_a = this._onSave) == null ? void 0 : _a.call(this, this._value));
  }
  //#endregion
};

// src/libs/EditableDataView/Components/LinkComponent.ts
var LinkComponent = class extends BaseComponent {
  //#endregion
  constructor(component) {
    super(component);
    //#region base properties
    this.editabilityEnabled = false;
    this.linkType = "external";
    this.onFinalize = this.build;
    this.onFirstEdit = this.buildInput;
    this.onEnableEditCallback = this.enableEdit;
    this.onSaveCallback = this.save;
    this.onDisableEditCallback = this.disableEdit;
  }
  //#region Configuration methods
  /**
   * Enables the editability of the component.
   * @returns The component itself.
   */
  enableEditability() {
    this.editabilityEnabled = true;
    return this;
  }
  /**
   * Sets the value of the component.
   * @param value The value to set.
   * @returns The component itself.
   */
  setValue(value) {
    this._value = value;
    return this;
  }
  /**
   * Sets the placeholder of the input element.
   * @param placeholder The placeholder to set.
   * @returns The component itself.
   */
  setPlaceholder(placeholder) {
    this._placeholder = placeholder;
    return this;
  }
  /**
   * Sets suggestions for the input element.
   * @param suggestions The suggestions to set.
   * @returns The component itself.
   */
  setSuggestions(suggestions) {
    this._suggestions = suggestions;
    return this;
  }
  /**
   * Sets the title of the component.
   * @param title The title to set.
   * @returns The component itself.
   */
  setTitle(title) {
    this._title = title;
    return this;
  }
  /**
   * Sets the type of the link.
   * @param type The type to set. Can be `tag`, `file` or `external`.
   * @returns The component itself.
   */
  setLinkType(type2) {
    this.linkType = type2;
    return this;
  }
  /**
   * Sets the suggester of the component.
   * @param suggester The suggester to set.
   * @returns The component itself.
   * @remarks The suggester is called when the user types in the input element.
   */
  setSuggester(suggester) {
    this._suggester = suggester;
    return this;
  }
  /**
   * Sets the formator of the component.
   * @param formator The formator to set.
   * @returns The component itself.
   * @remarks The formator is called when the component change in `not-edit` mode.
   */
  setFormator(formator) {
    this._onPresentation = async (value) => {
      const linkContent = formator(value);
      this.link.href = linkContent.href;
      if (linkContent.html) {
        this.link.innerHTML = "";
        this.link.appendChild(linkContent.html);
      } else
        this.link.textContent = linkContent.text;
      switch (this.linkType) {
        case "tag":
          break;
        case "file":
          this.link.setAttribute("aria-label", linkContent.href);
          this.link.setAttribute("data-href", linkContent.href);
          break;
        case "external":
          break;
      }
      if (this.input && this.label) {
        this.input.value = linkContent.text ? linkContent.text : "";
        this.label.dataset.value = linkContent.text ? linkContent.text : this._placeholder ? this._placeholder : "";
      }
    };
    return this;
  }
  /**
   * Sets the saver of the component.
   * @param callback The saver to set.
   * @returns The component itself.
   * @remarks The saver is called when the component save button is clicked.
   */
  onSave(callback) {
    this._onSave = callback;
    return this;
  }
  //#endregion
  setSuggestionsList(suggestions) {
    if (!this.datalist)
      return;
    this.datalist.innerHTML = "";
    suggestions.forEach((suggestion) => {
      const option = document.createElement("option");
      option.value = suggestion;
      this.datalist.appendChild(option);
    });
  }
  //#region Base Callbacks
  build() {
    var _a;
    this.link = document.createElement("a");
    this.presentationContainer.appendChild(this.link);
    this.link.title = this._title;
    this.link.classList.add("editable-data-view");
    this.link.classList.add("link-presentation");
    switch (this.linkType) {
      case "tag":
        this.link.classList.add("tag");
        this.link.target = "_blank";
        this.link.rel = "noopener";
        break;
      case "file":
        this.link.setAttribute("data-tooltip-position", "top");
        this.link.classList.add("internal-link");
        this.link.target = "_blank";
        this.link.rel = "noopener";
        break;
      case "external":
        break;
    }
    (_a = this._onPresentation) == null ? void 0 : _a.call(this, this._value);
  }
  buildInput() {
    this.label = document.createElement("label");
    this.label.title = this._title;
    this.dataInputContainer.appendChild(this.label);
    this.label.classList.add("editable-data-view");
    this.label.classList.add("text-input-sizer");
    this.input = document.createElement("input");
    this.label.appendChild(this.input);
    this.input.classList.add("editable-data-view");
    this.input.classList.add("text-input");
    this.input.placeholder = this._placeholder ? this._placeholder : "";
    this.component.registerDomEvent(this.input, "input", () => {
      this.label.dataset.value = this.input.value ? this.input.value : this._placeholder ? this._placeholder : "";
      if (this._suggester && this.label.dataset.value !== this._placeholder && this.label.dataset.value !== "")
        this.setSuggestionsList(this._suggester(this.input.value));
    });
    this.component.registerDomEvent(this.input, "keydown", (event) => {
      if (event.key === "Enter") {
        this.saveChanges();
      } else if (event.key === "Escape") {
        this.disableEditMode();
      }
    });
    if (this._suggestions && this._suggestions.length > 0 || this._suggester) {
      const id = Math.random().toString(36).substring(2, 10);
      this.input.setAttribute("list", id);
      this.datalist = document.createElement("datalist");
      this.datalist.id = id;
      this.input.appendChild(this.datalist);
      this.setSuggestionsList(this._suggestions);
    }
  }
  enableEdit() {
    var _a;
    (_a = this._onPresentation) == null ? void 0 : _a.call(this, this._value);
    this.input.focus();
    this.input.select();
  }
  disableEdit() {
    var _a;
    (_a = this._onPresentation) == null ? void 0 : _a.call(this, this._value);
  }
  async save() {
    var _a;
    this._value = this.input.value;
    await ((_a = this._onSave) == null ? void 0 : _a.call(this, this._value));
  }
  //#endregion
};

// src/libs/EditableDataView/Components/TextComponent.ts
var import_obsidian8 = require("obsidian");
var TextComponent = class extends BaseComponent {
  //#endregion
  constructor(component) {
    super(component);
    //#region base properties
    this.editabilityEnabled = false;
    this.onFinalize = this.build;
    this.onFirstEdit = this.buildInput;
    this.onEnableEditCallback = this.enableEdit;
    this.onSaveCallback = this.save;
    this.onDisableEditCallback = this.disableEdit;
  }
  //#region Configuration methods
  /**
   * Enables the editability of the component.
   * @returns The component itself.
   */
  enableEditability() {
    this.editabilityEnabled = true;
    return this;
  }
  /**
   * Sets the value of the component.
   * @param value The value to set.
   * @returns The component itself.
   */
  setValue(value) {
    this._value = value;
    return this;
  }
  /**
   * Sets the placeholder of the input element.
   * @param placeholder The placeholder to set.
   * @returns The component itself.
   */
  setPlaceholder(placeholder) {
    this._placeholder = placeholder;
    return this;
  }
  /**
   * Sets suggestions for the input element.
   * @param suggestions The suggestions to set.
   * @returns The component itself.
   */
  setSuggestions(suggestions) {
    this._suggestions = suggestions;
    return this;
  }
  /**
   * Sets the title of the component.
   * @param title The title to set.
   * @returns The component itself.
   */
  setTitle(title) {
    this._title = title;
    return this;
  }
  /**
   * Sets the suggester of the component.
   * @param suggester The suggester to set.
   * @returns The component itself.
   * @remarks The suggester is called when the user types in the input element.
   */
  setSuggester(suggester) {
    this._suggester = suggester;
    return this;
  }
  /**
   * Sets the formator of the component.
   * @param formator The formator to set.
   * @returns The component itself.
   * @remarks The formator is called when the component change in `not-edit` mode.
   */
  setFormator(formator) {
    this._onPresentation = async (value) => {
      this.presentationSpan.textContent = await formator(this._value);
    };
    return this;
  }
  /**
   * Sets the markdown formator of the component.
   * @param path The path of the file to resolve internal links.
   * @returns The component itself.
   * @remarks The formator is called when the component change in `not-edit` mode.
   * - The custom formator is ignored if this method is called!
   */
  setRenderMarkdown(path = "") {
    this._onMarkdownPresentation = (value) => {
      if (Helper.isPossiblyMarkdown(value)) {
        const app = Global.getInstance().app;
        return import_obsidian8.MarkdownRenderer.render(app, value, this.presentationSpan, path, this.component);
      } else {
        this.presentationSpan.innerHTML = "";
        this.presentationSpan.textContent = value;
        return Promise.resolve();
      }
    };
    return this;
  }
  /**
   * Sets the saver of the component.
   * @param callback The saver to set.
   * @returns The component itself.
   * @remarks The saver is called when the component save button is clicked.
   */
  onSave(callback) {
    this._onSave = callback;
    return this;
  }
  //#endregion
  setSuggestionsList(suggestions) {
    if (!this.datalist)
      return;
    this.datalist.innerHTML = "";
    if (!suggestions)
      return;
    suggestions.forEach((suggestion) => {
      const option = document.createElement("option");
      option.value = suggestion;
      this.datalist.appendChild(option);
    });
  }
  //#region Base Callbacks
  build() {
    this.presentationSpan = document.createElement("span");
    this.presentationContainer.appendChild(this.presentationSpan);
    this.presentationSpan.title = this._title;
    this.presentationSpan.classList.add("editable-data-view");
    this.presentationSpan.classList.add("text-presentation");
    if (this._onMarkdownPresentation) {
      this.presentationSpan.textContent = null;
      this._onMarkdownPresentation(this._value);
    } else if (this._onPresentation) {
      this._onPresentation(this._value);
    } else {
      this.presentationSpan.textContent = this._value;
    }
  }
  buildInput() {
    this.label = document.createElement("label");
    this.label.title = this._title;
    this.dataInputContainer.appendChild(this.label);
    this.label.classList.add("editable-data-view");
    this.label.classList.add("text-input-sizer");
    this.input = document.createElement("input");
    this.label.appendChild(this.input);
    this.input.classList.add("editable-data-view");
    this.input.classList.add("text-input");
    this.input.placeholder = this._placeholder ? this._placeholder : "";
    this.component.registerDomEvent(this.input, "input", () => {
      this.label.dataset.value = this.input.value ? this.input.value : this._placeholder ? this._placeholder : "";
      if (this._suggester && this.label.dataset.value !== this._placeholder && this.label.dataset.value !== "")
        this.setSuggestionsList(this._suggester(this.input.value));
    });
    this.component.registerDomEvent(this.input, "keydown", (event) => {
      if (event.key === "Enter") {
        this.saveChanges();
      } else if (event.key === "Escape") {
        this.disableEditMode();
      }
    });
    if (this._suggestions && this._suggestions.length > 0 || this._suggester) {
      const id = Math.random().toString(36).substring(2, 10);
      this.input.setAttribute("list", id);
      this.datalist = document.createElement("datalist");
      this.datalist.id = id;
      this.input.appendChild(this.datalist);
      this.setSuggestionsList(this._suggestions);
    }
  }
  enableEdit() {
    this.input.value = this._value ? this._value : "";
    this.label.dataset.value = this._value ? this._value : this._placeholder ? this._placeholder : "";
    this.input.focus();
    this.input.select();
  }
  disableEdit() {
    if (this._onMarkdownPresentation) {
      this.presentationSpan.textContent = null;
      this._onMarkdownPresentation(this._value);
    } else if (this._onPresentation) {
      this._onPresentation(this._value);
    } else {
      this.presentationSpan.textContent = this._value;
    }
  }
  async save() {
    var _a;
    this._value = this.input.value;
    await ((_a = this._onSave) == null ? void 0 : _a.call(this, this._value));
  }
  //#endregion
};

// src/libs/EditableDataView/Components/TextareaComponent.ts
var import_obsidian9 = require("obsidian");
var TextareaComponent = class extends BaseComponent {
  //#endregion
  constructor(component) {
    super(component);
    //#region base properties
    this.editabilityEnabled = false;
    this.onFinalize = this.build;
    this.onFirstEdit = this.buildInput;
    this.onEnableEditCallback = this.enableEdit;
    this.onSaveCallback = this.save;
    this.onDisableEditCallback = this.disableEdit;
  }
  //#region Configuration methods
  /**
   * Enables the editability of the component.
   * @returns The component itself.
   */
  enableEditability() {
    this.editabilityEnabled = true;
    return this;
  }
  /**
   * Sets the value of the component.
   * @param value The value to set.
   * @returns The component itself.
   */
  setValue(value) {
    this._value = value;
    return this;
  }
  /**
   * Sets the placeholder of the input element.
   * @param placeholder The placeholder to set.
   * @returns The component itself.
   */
  setPlaceholder(placeholder) {
    this._placeholder = placeholder;
    return this;
  }
  /**
   * Sets the title of the component.
   * @param title The title to set.
   * @returns The component itself.
   */
  setTitle(title) {
    this._title = title;
    return this;
  }
  /**
   * Sets the formator of the component.
   * @param formator The formator to set.
   * @returns The component itself.
   * @remarks The formator is called when the component change in `not-edit` mode.
   */
  setFormator(formator) {
    this._onPresentation = async (value) => {
      this.presentationSpan.textContent = await formator(this._value);
    };
    return this;
  }
  /**
   * Sets the markdown formator of the component.
   * @param path The path of the file to resolve internal links.
   * @returns The component itself.
   * @remarks The formator is called when the component change in `not-edit` mode.
   * - The custom formator is ignored if this method is called!
   */
  setRenderMarkdown(path = "") {
    this._onMarkdownPresentation = (value) => {
      if (Helper.isPossiblyMarkdown(value)) {
        const app = Global.getInstance().app;
        return import_obsidian9.MarkdownRenderer.render(app, value, this.presentationSpan, path, this.component);
      } else {
        this.presentationSpan.innerHTML = "";
        this.presentationSpan.textContent = value;
        return Promise.resolve();
      }
    };
    return this;
  }
  /**
   * Sets the saver of the component.
   * @param callback The saver to set.
   * @returns The component itself.
   * @remarks The saver is called when the component save button is clicked.
   */
  onSave(callback) {
    this._onSave = callback;
    return this;
  }
  //#endregion
  //#region Base Callbacks
  build() {
    this.presentationSpan = document.createElement("span");
    this.presentationContainer.appendChild(this.presentationSpan);
    this.presentationSpan.title = this._title;
    this.presentationSpan.classList.add("editable-data-view");
    this.presentationSpan.classList.add("textarea-presentation");
    if (this._onMarkdownPresentation) {
      this.presentationSpan.textContent = null;
      this._onMarkdownPresentation(this._value);
    } else if (this._onPresentation) {
      this._onPresentation(this._value);
    } else {
      this.presentationSpan.textContent = this._value;
    }
  }
  buildInput() {
    this.label = document.createElement("label");
    this.label.title = this._title;
    this.dataInputContainer.appendChild(this.label);
    this.label.classList.add("editable-data-view");
    this.label.classList.add("textarea-input-sizer");
    this.textarea = document.createElement("textarea");
    this.label.appendChild(this.textarea);
    this.textarea.classList.add("editable-data-view");
    this.textarea.classList.add("textarea-input");
    this.textarea.placeholder = this._placeholder ? this._placeholder : "";
    this.component.registerDomEvent(this.textarea, "input", () => {
      this.label.dataset.value = this.textarea.value ? this.textarea.value : this._placeholder ? this._placeholder : "";
    });
    this.component.registerDomEvent(this.textarea, "keydown", (event) => {
      if (event.key === "Escape") {
        this.disableEditMode();
      }
    });
  }
  enableEdit() {
    this.textarea.value = this._value ? this._value : "";
    this.label.dataset.value = this._value ? this._value : this._placeholder ? this._placeholder : "";
    this.textarea.focus();
    this.textarea.select();
  }
  disableEdit() {
    if (this._onMarkdownPresentation) {
      this.presentationSpan.textContent = null;
      this._onMarkdownPresentation(this._value);
    } else if (this._onPresentation) {
      this._onPresentation(this._value);
    } else {
      this.presentationSpan.textContent = this._value;
    }
  }
  async save() {
    var _a;
    this._value = this.textarea.value;
    await ((_a = this._onSave) == null ? void 0 : _a.call(this, this._value));
  }
  //#endregion
};

// src/libs/EditableDataView/EditableDataView.ts
var EditableDataView = class {
  constructor(container, component) {
    this.attributesList = {};
    this._container = container;
    this.component = component;
  }
  addText(configure) {
    const textComponent = new TextComponent(this.component);
    configure(textComponent);
    textComponent.finalize();
    this._container.append(textComponent.container);
    return this;
  }
  addTextarea(configure) {
    const textComponent = new TextareaComponent(this.component);
    configure(textComponent);
    textComponent.finalize();
    this._container.append(textComponent.container);
    return this;
  }
  addLink(configure) {
    const linkComponent = new LinkComponent(this.component);
    configure(linkComponent);
    linkComponent.finalize();
    this._container.appendChild(linkComponent.container);
    return this;
  }
  addDate(configure) {
    const dateComponent = new DateComponent(this.component);
    configure(dateComponent);
    dateComponent.finalize();
    this._container.append(dateComponent.container);
    return this;
  }
  addDropdown(configure) {
    const dropdownComponent = new DropdownComponent(this.component);
    configure(dropdownComponent);
    dropdownComponent.finalize();
    this._container.appendChild(dropdownComponent.container);
    return this;
  }
};

// src/libs/BlockRenderComponents/InnerComponents/DocumentComponents.ts
var DocumentComponents = class {
  static createCellTags(tagContainer, component, tags) {
    tags.forEach((tag) => {
      new EditableDataView(tagContainer, component).addLink(
        (link) => link.setValue(tag).setTitle("Tag").setLinkType("tag").setFormator((value) => {
          return { href: `#${value}`, text: `#${value}` };
        })
      );
    });
  }
  static createCellSummary(documentModel, component, summaryRelatedFiles) {
    const description = documentModel.getDescription();
    new EditableDataView(summaryRelatedFiles, component).addTextarea(
      (textarea) => textarea.setValue(description).setTitle("Summary").enableEditability().setRenderMarkdown().onSave((value) => {
        documentModel.data.description = value;
        return Promise.resolve();
      })
    );
  }
  static createRelatedFilesList(relatedFilesList, component, documentModel, noneDocSymbol, dateFormatShort) {
    const relatedFiles = documentModel.relatedFiles;
    if (!relatedFiles || relatedFiles.length === 0)
      return;
    const container = document.createElement("div");
    relatedFilesList.appendChild(container);
    container.classList.add("related-files-container");
    const breakLine = document.createElement("hr");
    container.appendChild(breakLine);
    breakLine.classList.add("related-files-breakline");
    const list = document.createElement("ul");
    container.appendChild(list);
    list.classList.add("related-files-list");
    relatedFiles.forEach((relatedFile) => {
      const listEntry = document.createElement("li");
      list.append(listEntry);
      const gridContainer = document.createElement("div");
      listEntry.appendChild(gridContainer);
      gridContainer.classList.add("grid-container");
      const iconContainer = document.createElement("span");
      gridContainer.append(iconContainer);
      iconContainer.classList.add("icon-container");
      const inputOutputState = relatedFile.getInputOutputState();
      let listIconString = noneDocSymbol;
      if (inputOutputState === "Input") {
        listIconString = "corner-left-down";
      } else if (inputOutputState === "Output") {
        listIconString = "corner-right-up";
      }
      (0, import_obsidian10.setIcon)(iconContainer, listIconString);
      const metadataContainer = document.createElement("span");
      gridContainer.append(metadataContainer);
      metadataContainer.classList.add("metadata-file-container");
      const metadataFragment = document.createDocumentFragment();
      this.createCellMetadatalink(metadataFragment, component, relatedFile);
      metadataContainer.appendChild(metadataFragment);
      const dateContainer = document.createElement("span");
      gridContainer.append(dateContainer);
      dateContainer.classList.add("date-container");
      new EditableDataView(dateContainer, component).addDate((date) => {
        var _a;
        return date.setValue((_a = relatedFile.data.date) != null ? _a : "na").setTitle("Document Date").setFormator(
          (value) => Helper.formatDate(value, Helper.formatDate(value, dateFormatShort))
        );
      });
      const textContainer = document.createElement("span");
      gridContainer.append(textContainer);
      textContainer.classList.add("data-container");
      const linkFragment = document.createDocumentFragment();
      this.createCellFileLink(linkFragment, component, relatedFile, false);
      textContainer.append(linkFragment);
    });
  }
  static createCellSenderRecipient(documentModel, component, models) {
    var _a, _b;
    const senderRecipient = document.createDocumentFragment();
    const container = document.createElement("div");
    senderRecipient.appendChild(container);
    container.classList.add("senderRecipient");
    const inputOutputState = documentModel.getInputOutputState();
    const sender = (_a = documentModel.data.sender) != null ? _a : null;
    const recipient = (_b = documentModel.data.recipient) != null ? _b : null;
    if (sender && inputOutputState !== "Output") {
      const senderContainer = document.createElement("div");
      senderContainer.classList.add("container");
      const fromTo = document.createElement("span");
      fromTo.classList.add("fromTo");
      fromTo.textContent = Lng.gt("From");
      senderContainer.appendChild(fromTo);
      const name = document.createElement("span");
      name.classList.add("name");
      senderContainer.appendChild(name);
      this.createEDVSenderRecipient(name, component, sender, "Sender", (value) => {
        documentModel.data.sender = value;
        return Promise.resolve();
      }, models);
      container.appendChild(senderContainer);
    }
    if (recipient && inputOutputState !== "Input") {
      const recipientContainer = document.createElement("div");
      recipientContainer.classList.add("container");
      const fromTo = document.createElement("span");
      fromTo.classList.add("fromTo");
      fromTo.textContent = Lng.gt("To");
      recipientContainer.appendChild(fromTo);
      const name = document.createElement("span");
      name.classList.add("name");
      recipientContainer.appendChild(name);
      this.createEDVSenderRecipient(name, component, recipient, "Recipient", (value) => {
        documentModel.data.recipient = value;
        return Promise.resolve();
      }, models);
      container.appendChild(recipientContainer);
    }
    return senderRecipient;
  }
  static createEDVSenderRecipient(name, component, value, title, onSaveCallback, models = []) {
    return new EditableDataView(name, component).addText(
      (text) => text.setValue(value).setTitle(title).enableEditability().setSuggester((inputValue) => {
        const suggestions = models.flatMap((document2) => [document2.data.sender, document2.data.recipient]).filter((v) => v != null).filter((v, index, self2) => self2.indexOf(v) === index).filter((v) => v.includes(inputValue)).sort().splice(0, 10);
        return suggestions;
      }).onSave((newValue) => onSaveCallback(newValue))
    );
  }
  static createCellFileLink(fileLink, component, documentModel, editability = true) {
    const fileCache = Global.getInstance().fileCache;
    const app = Global.getInstance().app;
    new EditableDataView(fileLink, component).addLink((link) => {
      var _a;
      link.setValue((_a = documentModel.data.title) != null ? _a : "").setTitle(Lng.gt("PDFFile")).setLinkType("file").setFormator((value) => {
        var _a2, _b;
        const baseFileData = Helper.extractDataFromWikilink(documentModel.data.file);
        const baseFile = fileCache.findFileByName((_a2 = baseFileData.filename) != null ? _a2 : "");
        let baseFilePath = (_b = baseFileData.filename) != null ? _b : "";
        if (baseFile && baseFile instanceof import_obsidian10.TFile) {
          baseFilePath = baseFile.path;
        }
        let docFragment = void 0;
        if (Helper.isPossiblyMarkdown(value)) {
          docFragment = document.createDocumentFragment();
          const div = document.createElement("div");
          import_obsidian10.MarkdownRenderer.render(app, value != null ? value : "", div, "", component);
          docFragment.appendChild(div);
        }
        return { href: `${baseFilePath}`, text: `${value}`, html: docFragment };
      });
      if (editability) {
        link.enableEditability().onSave((value) => {
          documentModel.data.title = value;
          return Promise.resolve();
        });
      }
    });
  }
  static createCellMetadatalink(metadataLink, component, documentModel) {
    const settings = Global.getInstance().settings;
    new EditableDataView(metadataLink, component).addLink((link) => link.setValue(documentModel.file.path).setTitle("Open metadata file").setLinkType("file").setFormator(
      (value) => {
        const icon = document.createDocumentFragment();
        let iconString = "x-circle";
        if (documentModel.data.hide === true) {
          iconString = settings.documentSettings.hideSymbol;
        } else {
          if (documentModel.data.subType === "Cluster") {
            iconString = settings.documentSettings.clusterSymbol;
          } else {
            iconString = settings.documentSettings.symbol;
          }
        }
        (0, import_obsidian10.setIcon)(icon, iconString);
        return { href: `${value}`, text: `${value}`, html: icon };
      }
    ));
  }
};

// src/libs/BlockRenderComponents/InnerComponents/GeneralComponents.ts
var import_obsidian11 = require("obsidian");
var GeneralComponents = class {
  /**
   * Creates a link to the file at `path` with the `corospondingSymbol` as icon.
   * @param container The container to append the link to.
   * @param component The component to register the events to.
   * @param path The path to the file.
   * @param type The type of the file.
   * @param corospondingSymbol The corosponding symbol for the file type.
   */
  static createMetadataLink(container, component, path, type2, corospondingSymbol) {
    new EditableDataView(container, component).addLink((link) => link.setValue(path).setTitle(Lng.gt(type2 != null ? type2 : "File")).setLinkType("file").setFormator(
      (value) => {
        const icon = document.createDocumentFragment();
        const iconString = corospondingSymbol;
        (0, import_obsidian11.setIcon)(icon, iconString);
        return { href: `${value}`, text: `${value}`, html: icon };
      }
    ));
  }
  static createCellDate(date, component, title, format, onRead, onWrite) {
    new EditableDataView(date, component).addDate(
      (date2) => date2.setValue(onRead()).setTitle(title).enableEditability().setFormator((value) => Helper.formatDate(value, format)).onSave((value) => {
        onWrite(value);
        return Promise.resolve();
      })
    );
  }
};

// src/libs/BlockRenderComponents/DocumentBlockRenderComponent.ts
var DocumentBlockRenderComponent = class extends TableBlockRenderComponent {
  constructor(settings) {
    super(settings);
    this.settings = {
      tags: [],
      docSymbol: this.global.settings.documentSettings.symbol,
      hideDocSymbol: this.global.settings.documentSettings.hideSymbol,
      clusterSymbol: this.global.settings.documentSettings.clusterSymbol,
      noneDocSymbol: "diamond",
      filter: ["Documents"],
      maxDocuments: this.global.settings.defaultMaxShow,
      search: void 0,
      batchSize: 8,
      sleepBetweenBatches: 10
    };
    /**
     * The table headers.
     * @remarks The table headers are used to create the table.
     * 
     */
    this.tableHeaders = [
      { text: Lng.gt("DocumentType"), headerClass: [], columnClass: ["dont-decorate-link", "font-medium"] },
      { text: Lng.gt("Date"), headerClass: [], columnClass: ["font-xsmall"] },
      { text: Lng.gt("Subject"), headerClass: [], columnClass: [] },
      { text: Lng.gt("SendRecip"), headerClass: [], columnClass: ["font-xsmall"] },
      { text: Lng.gt("Content"), headerClass: [], columnClass: ["font-xsmall"] },
      { text: Lng.gt("DeliveryDate"), headerClass: [], columnClass: ["font-xsmall"] },
      { text: Lng.gt("Tags"), headerClass: [], columnClass: ["tags"] }
    ];
    this.parseSettings();
  }
  build() {
    return super.build();
  }
  /**
   * Draws the component and adds the documents to the table.
   * @returns A promise which is resolved when the documents are added to the table.
   * @remarks - Calls the `super.draw` method.
   * - Calls the `buildTable` method.
   * - Calls the `buildHeader` method.
   * - Calls the `addDocumentsToTable` method.
   */
  async draw() {
    const startTime = Date.now();
    const documentsPromise = this.getModels();
    await super.draw();
    await this.buildTable();
    await this.buildHeader();
    this.grayOutHeader();
    this.models = await documentsPromise;
    DocumentModel.sortDocumentsByDateDesc(this.models);
    await this.addDocumentsToTable();
    this.normalizeHeader();
    const endTime = Date.now();
    this.logger.debug(`Redraw Documents (for ${this.models.length} Docs.) runs for ${endTime - startTime}ms`);
  }
  /**
   * Builds the header.
   * @remarks - The header is saved in the `headerContainer` property.
   * - Creates the `filter container`.
   * - Creates the `filter label`.
   * - Creates the `filter buttons`: `Documents`, `HideDocuments` and `Cluster`.
   * - Creates the `max documents input`.
   * - Creates the `search box`.
   */
  async buildHeader() {
    const headerFilterButtons = document.createElement("div");
    this.headerContainer.appendChild(headerFilterButtons);
    headerFilterButtons.classList.add("header-item");
    headerFilterButtons.classList.add("filter-symbols");
    const filterLabelContainer = document.createElement("div");
    headerFilterButtons.appendChild(filterLabelContainer);
    const filterLabel = document.createElement("span");
    filterLabelContainer.appendChild(filterLabel);
    filterLabel.classList.add("filter-symbol");
    filterLabel.textContent = Lng.gt("Filter");
    const documentFilterButton = FilterButton.create(
      this.component,
      "Documents",
      this.settings.docSymbol,
      this.settings.filter.includes("Documents"),
      this.onFilterButton.bind(this)
    );
    headerFilterButtons.appendChild(documentFilterButton);
    const hideDocumentFilterButton = FilterButton.create(
      this.component,
      "HideDocuments",
      this.settings.hideDocSymbol,
      this.settings.filter.includes("HideDocuments"),
      this.onFilterButton.bind(this)
    );
    headerFilterButtons.appendChild(hideDocumentFilterButton);
    const clusterFilterButton = FilterButton.create(
      this.component,
      "Cluster",
      this.settings.clusterSymbol,
      this.settings.filter.includes("Cluster"),
      this.onFilterButton.bind(this)
    );
    headerFilterButtons.appendChild(clusterFilterButton);
    const maxDocuments = MaxShownModelsInput.create(
      this.component,
      this.settings.maxDocuments,
      this.global.settings.defaultMaxShow,
      this.onMaxDocumentsChange.bind(this)
    );
    headerFilterButtons.appendChild(maxDocuments);
    const searchBox = SearchInput.create(
      this.component,
      this.onSearch.bind(this)
    );
    headerFilterButtons.appendChild(searchBox);
  }
  /**
   * This method is called when the filter button is clicked.
   * @param type The type of the filter button.
   * @param status The new status of the filter button.
   * @remarks Runs the `onFilter` method.
   */
  async onFilterButton(type2, status) {
    if (this.settings.filter.includes(type2)) {
      this.settings.filter = this.settings.filter.filter((v) => v !== type2);
    } else {
      this.settings.filter.push(type2);
    }
    this.onFilter();
  }
  /**
   * This method is called when the max documents input is changed.
   * @param maxDocuments The new max documents value.
   * @returns A promise which is resolved when the documents are filtered.
   * @remarks Runs the `onFilter` method.
   */
  async onMaxDocumentsChange(maxDocuments) {
    this.settings.maxDocuments = maxDocuments;
    this.onFilter();
    return void 0;
  }
  /**
   * This method is called when the search box is used.
   * @param search The search text.
   * @param key The key that was pressed.
   * @returns The search text.
   * @remarks - If the `Enter` key was pressed, the search is applied.
   * - If the `Escape` key was pressed, the search is reset.
   * - After the search is applied, the `onFilter` method is called.
   */
  async onSearch(search, key) {
    if (key === "Enter") {
      if (search !== "") {
        this.settings.search = Search.parseSearchText(search);
        this.onFilter();
      } else {
        this.settings.search = void 0;
        this.onFilter();
      }
    } else if (key === "Escape") {
      this.settings.search = void 0;
      this.onFilter();
      return "";
    }
    return search;
  }
  /**
   * Filters the documents and shows/hides them in the table.
   * @remarks - The documents are filtered by the `filter` setting,
   * searched by the `search` setting 
   * and the number of documents is limited by the `maxDocuments` if no search is applied.
   */
  async onFilter() {
    this.grayOutHeader();
    const batchSize = this.settings.batchSize;
    const sleepBetweenBatches = this.settings.sleepBetweenBatches;
    let sleepPromise = Promise.resolve();
    const documentsLength = this.models.length;
    const rows = [];
    let visibleRows = 0;
    for (let i = 0; i < documentsLength; i++) {
      const document2 = this.models[i];
      const rowUid = this.getUID(document2);
      let hide = this.getHideState(document2, void 0);
      this.logger.trace(`Document ${rowUid} is hidden by state: ${hide}`);
      this.logger.trace(`Visible rows: ${visibleRows}; Max shown Docs: ${this.settings.maxDocuments}`);
      if (visibleRows >= this.settings.maxDocuments) {
        hide = true;
      }
      this.logger.trace(`Document ${rowUid} is hidden by max counts: ${hide}`);
      if (hide) {
        rows.push({ rowUid, hidden: true });
      } else {
        visibleRows++;
        rows.push({ rowUid, hidden: false });
      }
      if (i !== 0 && i % batchSize === 0 || i === documentsLength - 1) {
        await sleepPromise;
        this.logger.trace(`Batchsize reached. Change rows: ${rows.length}`);
        await this.table.changeShowHideStateRows(rows);
        rows.length = 0;
        sleepPromise = Helper.sleep(sleepBetweenBatches);
      }
    }
    this.normalizeHeader();
  }
  /**
   * Adds the documents to the table.
   * @param batchSize The batch size.
   * @param sleepBetweenBatches The sleep time between the batches.
   * @returns A promise which is resolved when the documents are added to the table.
   * @remarks - The documents are added to the table in batches.
   * - The batch size is defined in the `batchSize` parameter. Default is `settings.batchSize`.
   * - The sleep time between the batches is defined in the `sleepBetweenBatches` parameter. Default is `settings.sleepBetweenBatches`.
   */
  async addDocumentsToTable(batchSize = this.settings.batchSize, sleepBetweenBatches = this.settings.sleepBetweenBatches) {
    let sleepPromise = Promise.resolve();
    const documentsLength = this.models.length;
    const rows = [];
    let rowPromise = void 0;
    if (documentsLength > 0) {
      rowPromise = this.generateTableRow(this.models[0]);
    } else {
      return;
    }
    let visibleRows = 0;
    for (let i = 0; i < documentsLength; i++) {
      const document2 = i + 1 < documentsLength ? this.models[i + 1] : null;
      const row = await rowPromise;
      rowPromise = document2 ? this.generateTableRow(document2) : void 0;
      if (row && !row.hidden) {
        if (visibleRows < this.settings.maxDocuments) {
          visibleRows++;
        } else {
          row.hidden = true;
        }
      }
      if (row)
        rows.push(row);
      if (i !== 0 && i % batchSize === 0 || i === documentsLength - 1) {
        await sleepPromise;
        this.table.addRows(rows);
        rows.length = 0;
        sleepPromise = Helper.sleep(sleepBetweenBatches);
      }
    }
  }
  /**
   * Generates a table row for the given document.
   * @param documentModel The document to generate the table row for.
   * @returns The generated table row.
   */
  async generateTableRow(documentModel) {
    const rowClassList = [];
    const rowData = [];
    const rowUid = this.getUID(documentModel);
    const metadataLink = document.createDocumentFragment();
    rowData.push(metadataLink);
    DocumentComponents.createCellMetadatalink(
      metadataLink,
      this.component,
      documentModel
    );
    const date = document.createDocumentFragment();
    rowData.push(date);
    GeneralComponents.createCellDate(
      date,
      this.component,
      Lng.gt("DocumentDate"),
      this.global.settings.dateFormat,
      () => {
        var _a;
        return (_a = documentModel.data.date) != null ? _a : "na";
      },
      async (value) => documentModel.data.date = value
    );
    const fileLink = document.createDocumentFragment();
    rowData.push(fileLink);
    DocumentComponents.createCellFileLink(
      fileLink,
      this.component,
      documentModel
    );
    const senderRecipient = DocumentComponents.createCellSenderRecipient(
      documentModel,
      this.component,
      this.models
    );
    rowData.push(senderRecipient);
    const summaryRelatedFiles = document.createDocumentFragment();
    rowData.push(summaryRelatedFiles);
    DocumentComponents.createCellSummary(
      documentModel,
      this.component,
      summaryRelatedFiles
    );
    DocumentComponents.createRelatedFilesList(
      summaryRelatedFiles,
      this.component,
      documentModel,
      this.settings.noneDocSymbol,
      this.global.settings.dateFormatShort
    );
    const deliveryDate = document.createDocumentFragment();
    rowData.push(deliveryDate);
    GeneralComponents.createCellDate(
      deliveryDate,
      this.component,
      Lng.gt("DeliveryDate"),
      this.global.settings.dateFormat,
      () => {
        var _a;
        return (_a = documentModel.data.dateOfDelivery) != null ? _a : "na";
      },
      async (value) => documentModel.data.dateOfDelivery = value
    );
    const tags = document.createDocumentFragment();
    rowData.push(tags);
    DocumentComponents.createCellTags(
      tags,
      this.component,
      documentModel.getTags()
    );
    const hide = this.getHideState(documentModel, void 0);
    const row = {
      rowUid,
      rowData,
      rowClassList,
      hidden: hide
    };
    return row;
  }
  getHideState(document2, maxVisibleRows) {
    let searchResult = false;
    let maxRows = false;
    if (this.settings.search) {
      const text = document2.toString();
      searchResult = Search.applySearchLogic(this.settings.search, text);
    }
    if (maxVisibleRows && maxVisibleRows > 0) {
      const rowStats = this.table.getRowStats();
      maxRows = rowStats.visibleRows >= maxVisibleRows;
    }
    const hide = this.determineHideState(document2);
    if (searchResult && !hide) {
      return false;
    } else if (this.settings.search) {
      return true;
    } else if (!searchResult) {
      return maxRows || hide;
    }
    return hide;
  }
  /**
   * Determines if the document should be hidden.
   * @param document The document to check.
   * @returns If the document should be hidden returns `true`, else `false`.
   * @remarks - The document is hidden if the `filter` setting not includes the document type.
   */
  determineHideState(document2) {
    if (this.settings.filter.includes("Documents") && document2.data.hide !== true && document2.data.subType !== "Cluster") {
      return false;
    }
    if (this.settings.filter.includes("Cluster") && document2.data.subType === "Cluster") {
      return false;
    }
    if (this.settings.filter.includes("HideDocuments") && document2.data.hide === true) {
      return false;
    }
    return true;
  }
  /**
   * Builds the table.
   * @remarks - The table is saved in the `table` property.
   * - The table is appended to the `tableContainer`.
   * - The table has the CSS class `document-table`.
   * - The table has the headers from the `tableHeaders` property.
   */
  async buildTable() {
    this.table = new Table(this.tableHeaders, "document-table", void 0);
    this.tableContainer.appendChild(this.table.data.table);
  }
  redraw() {
    return super.redraw();
  }
  /**
   * Parses the settings given by the user per YAML in code block.
   * @remarks The settings are parsed and saved in the `settings` property.
   * @remarks Settings:
   * - `tags`: Can be `all`, `this` or a list of tags.
   * `this` means the tags of the current document.
   * - `maxDocuments`: The maximum number of documents to show on same time.
   * - `filter`: Must be an array. You can add the following values:
   * `Documents`, `HideDocuments` or `Cluster`. The values present the document types.
   * All values that are in the array are shown.
   */
  parseSettings() {
    this.processorSettings.options.forEach((option) => {
      var _a, _b;
      switch (option.label) {
        case "tags":
          if (option.value === "all") {
            this.settings.tags = [];
          } else if (option.value === "this") {
            const tags = (_b = (_a = this.processorSettings) == null ? void 0 : _a.frontmatter) == null ? void 0 : _b.tags;
            if (Array.isArray(tags)) {
              this.settings.tags.push(...tags);
            } else if (tags) {
              this.settings.tags.push(tags);
            }
          } else {
            this.settings.tags = option.value;
          }
          break;
        case "maxDocuments":
          this.settings.maxDocuments = option.value;
          break;
        case "filter":
          this.settings.filter = option.value;
          break;
        default:
          break;
      }
    });
  }
  /**
   * Returns the models for the table.
   * @returns The models for the table.
   * @remarks - The models are the documents.
   * - The documents are filtered by the `tags` setting. 
   * If tags are empty, all documents are returned, 
   * else only the documents with the tags are returned.
   */
  async getModels() {
    const templateFolder = this.global.settings.templateFolder;
    const allDocumentFiles = this.metadataCache.filter((file) => {
      var _a, _b;
      const defaultFilter = ((_a = file.metadata.frontmatter) == null ? void 0 : _a.type) === "Metadata" && file.file.path !== this.processorSettings.source && !file.file.path.startsWith(templateFolder);
      if (this.settings.tags.length > 0) {
        const tagFilter = Helper.isTagIncluded(this.settings.tags, (_b = file.metadata.frontmatter) == null ? void 0 : _b.tags);
        return defaultFilter && tagFilter;
      }
      return defaultFilter;
    });
    const documents = allDocumentFiles.map((file) => new DocumentModel(file.file));
    return documents;
  }
  /**
   * Returns if the file tags are included in the setting tags.
   * @param fileTags The tags of the file.
   * @param settingTags The tags of the settings.
   * @returns If the file tags are included in the setting tags.
   * @remarks - If the file tags are an array, one tag must be included.
   * - If the file tags are a string, the string must be included.
   */
  isTagIncluded(fileTags, settingTags) {
    if (Array.isArray(fileTags)) {
      return fileTags.some((tag) => settingTags.includes(tag));
    } else {
      return settingTags.includes(fileTags);
    }
  }
};

// src/models/PrjTaskManagementModel.ts
var PrjTaskManagementModel = class extends BaseModel {
  constructor(file, ctor) {
    super(file, ctor, void 0);
  }
  get data() {
    return this._data;
  }
  set data(value) {
    this._data = value;
  }
  toString() {
    var _a, _b, _c, _d, _e;
    let allText = (_a = this.data.title) != null ? _a : "";
    allText += (_b = this.data.description) != null ? _b : "";
    allText += (_c = this.data.status) != null ? _c : "";
    allText += (_d = this.data.due) != null ? _d : "";
    allText += (_e = this.data.tags) != null ? _e : "";
    return allText;
  }
  getCorospondingSymbol() {
    switch (this.data.type) {
      case "Topic":
        return this.global.settings.prjSettings.topicSymbol;
      case "Project":
        return this.global.settings.prjSettings.projectSymbol;
      case "Task":
        return this.global.settings.prjSettings.taskSymbol;
      default:
        return "x-circle";
    }
  }
  /**
   * Sorts the models by urgency descending
   * @param documents Array of DocumentModels to sort
   * @remarks This function sorts the array in place
   * @see {@link statusToNumber}
   * @see {@link calculateUrgency}
   * @see {@link getLastHistoryDate}
   * @remarks The sorting is done as follows:
   * - If both are `done`, sort by last history entry
   * - If `a` or `b` is done, sort it lower
   * - Both are not done, sort by urgency
   * - Both have the same urgency, sort by status
   * - Both have the same status, sort by priority
   * - Fallback to sorting by last history entry
   * - Fallback to stop sorting
   */
  static sortModelsByUrgency(models) {
    models.sort((a, b) => {
      var _a, _b;
      const aDate = PrjTaskManagementModel.getLastHistoryDate(a);
      const bDate = PrjTaskManagementModel.getLastHistoryDate(b);
      if (a.data.status === "Done" && b.data.status === "Done") {
        if (aDate && bDate) {
          return bDate.getTime() - aDate.getTime();
        }
      }
      if (a.data.status === "Done") {
        return 1;
      }
      if (b.data.status === "Done") {
        return -1;
      }
      const aUrgency = PrjTaskManagementModel.calculateUrgency(a);
      const bUrgency = PrjTaskManagementModel.calculateUrgency(b);
      if (bUrgency !== aUrgency) {
        return bUrgency - aUrgency;
      }
      const aStatus = PrjTaskManagementModel.statusToNumber(a.data.status);
      const bStatus = PrjTaskManagementModel.statusToNumber(b.data.status);
      if (bStatus !== aStatus) {
        return bStatus - aStatus;
      }
      const aPrirority = (_a = a.data.priority) != null ? _a : 0;
      const bPrirority = (_b = b.data.priority) != null ? _b : 0;
      if (bPrirority !== aPrirority) {
        return bPrirority - aPrirority;
      }
      if (aDate && bDate) {
        return bDate.getTime() - aDate.getTime();
      }
      return 0;
    });
  }
  /**
   * Returns the number representation of the status.
   * @param status The status to convert.
   * @returns The number representation of the status.
   * @remarks The number representation is:
   * - `Active` = 3
   * - `Waiting` = 2
   * - `Later` = 1
   * - `Someday` = 0
   * - `undefined` = -1
   */
  static statusToNumber(status) {
    switch (status) {
      case "Active":
        return 3;
      case "Waiting":
        return 2;
      case "Later":
        return 1;
      case "Someday":
        return 0;
      default:
        return -1;
    }
  }
  getUrgency() {
    return PrjTaskManagementModel.calculateUrgency(this);
  }
  /**
   * Returns the tags of the model as an array of strings
   * @returns Array of strings containing the tags
   */
  getTags() {
    const tags = this.data.tags;
    let formattedTags = [];
    if (tags && typeof tags === "string") {
      formattedTags = [tags];
    } else if (Array.isArray(tags)) {
      formattedTags = [...tags];
    }
    return formattedTags;
  }
  /**
   * Calculates the urgency of the model.
   * @param model The model to calculate the urgency for.
   * @returns The urgency of the model.
   * @remarks The urgency is calculated as follows:
   * - No `status` or `status` is 'Done' = -2
   * - No `due` or `status` is 'Someday' = -1
   * - Due date is today or in the past = 3
   * - Due date is in the next 3 days = 2
   * - Due date is in the next 7 days = 1
   * - Due date is in more the future = 0
   */
  static calculateUrgency(model) {
    if (!model.data.status || model.data.status === "Done") {
      return -2;
    }
    if (!model.data.due || model.data.status === "Someday") {
      return -1;
    }
    const dueDate = new Date(model.data.due);
    dueDate.setHours(0, 0, 0, 0);
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const differenceInDays = (dueDate.getTime() - today.getTime()) / (1e3 * 3600 * 24);
    let urgency = 0;
    if (differenceInDays <= 0) {
      urgency = 3;
    } else if (differenceInDays <= 3) {
      urgency = 2;
    } else if (differenceInDays <= 7) {
      urgency = 1;
    }
    return urgency;
  }
  /**
   * Returns the date of the last history entry.
   * @param model The model to get the last history entry date from.
   * @returns The date of the last history entry.
   */
  static getLastHistoryDate(model) {
    if (model.data.history && Array.isArray(model.data.history) && model.data.history.length > 0) {
      const history = model.data.history;
      const lastEntry = history[history.length - 1];
      return new Date(lastEntry.date);
    } else {
      return null;
    }
  }
};

// src/types/TopicData.ts
var TopicData = class {
  constructor(data) {
    this.title = data.title !== void 0 ? data.title : void 0;
    this.description = data.description !== void 0 ? data.description : void 0;
    this.status = data.status !== void 0 ? data.status : void 0;
    this.priority = data.priority !== void 0 ? data.priority : void 0;
    this.energy = data.energy !== void 0 ? data.energy : void 0;
    this.due = data.due !== void 0 ? data.due : void 0;
    this.tags = data.tags !== void 0 ? data.tags : void 0;
    this.type = data.type !== void 0 ? data.type : void 0;
    this.subType = data.subType !== void 0 ? data.subType : void 0;
    this.history = data.history !== void 0 ? data.history : void 0;
  }
};

// src/models/TopicModel.ts
var TopicModel = class extends PrjTaskManagementModel {
  constructor(file) {
    super(file, TopicData);
  }
};

// src/types/ProjectData.ts
var ProjectData = class {
  constructor(data) {
    this.title = data.title !== void 0 ? data.title : void 0;
    this.description = data.description !== void 0 ? data.description : void 0;
    this.status = data.status !== void 0 ? data.status : void 0;
    this.priority = data.priority !== void 0 ? data.priority : void 0;
    this.energy = data.energy !== void 0 ? data.energy : void 0;
    this.due = data.due !== void 0 ? data.due : void 0;
    this.tags = data.tags !== void 0 ? data.tags : void 0;
    this.type = data.type !== void 0 ? data.type : void 0;
    this.subType = data.subType !== void 0 ? data.subType : void 0;
    this.history = data.history !== void 0 ? data.history : void 0;
  }
};

// src/models/ProjectModel.ts
var ProjectModel = class extends PrjTaskManagementModel {
  constructor(file) {
    super(file, ProjectData);
  }
};

// src/types/TaskData.ts
var TaskData = class {
  constructor(data) {
    this.title = data.title !== void 0 ? data.title : void 0;
    this.description = data.description !== void 0 ? data.description : void 0;
    this.status = data.status !== void 0 ? data.status : void 0;
    this.priority = data.priority !== void 0 ? data.priority : void 0;
    this.energy = data.energy !== void 0 ? data.energy : void 0;
    this.due = data.due !== void 0 ? data.due : void 0;
    this.tags = data.tags !== void 0 ? data.tags : void 0;
    this.type = data.type !== void 0 ? data.type : void 0;
    this.subType = data.subType !== void 0 ? data.subType : void 0;
    this.history = data.history !== void 0 ? data.history : void 0;
  }
};

// src/models/TaskModel.ts
var TaskModel = class extends PrjTaskManagementModel {
  constructor(file) {
    super(file, TaskData);
  }
};

// src/libs/BlockRenderComponents/InnerComponents/ProjectComponents.ts
var import_obsidian12 = require("obsidian");
var ProjectComponents = class {
  /**
   * Creates a title component.
   * @param container The container to append the title to.
   * @param component The component to register the events to.
   * @param path The path to the file.
   * @param onRead On read callback. Returns the title.
   * @param onWrite On write callback. Passes the new title.
   */
  static createTitle(container, component, path, onRead, onWrite) {
    new EditableDataView(container, component).addLink((link) => {
      link.setValue(onRead()).setTitle(Lng.gt("Title")).setPlaceholder(Lng.gt("Title")).setLinkType("file").setFormator((value) => {
        let title = document.createDocumentFragment();
        if (value === "") {
          (0, import_obsidian12.setIcon)(title, "paperclip");
        } else if (Helper.isPossiblyMarkdown(value)) {
          const div = document.createElement("div");
          import_obsidian12.MarkdownRenderer.render(Global.getInstance().app, value != null ? value : "", div, "", component);
          title.appendChild(div);
        } else {
          title = void 0;
        }
        return { href: `${path}`, text: `${value}`, html: title };
      }).enableEditability().onSave((value) => {
        onWrite(value);
        return Promise.resolve();
      });
    });
  }
  /**
   * Creates a summary component.
   * @param container The container to append the summary to.
   * @param component The component to register the events to.
   * @param description The description to display.
   * @param onWrite On write callback. Passes the new description.
   */
  static createSummary(container, component, description, onWrite) {
    new EditableDataView(container, component).addText(
      (text) => text.setValue(description).setTitle(Lng.gt("Description")).setPlaceholder(Lng.gt("Description")).enableEditability().setRenderMarkdown().onSave((value) => {
        onWrite(value);
        return Promise.resolve();
      })
    );
  }
  static createStatus(container, component, onRead, onWrite) {
    new EditableDataView(container, component).addDropdown((dropdown) => dropdown.setOptions([
      { value: "Active", text: Lng.gt("StatusActive") },
      { value: "Waiting", text: Lng.gt("StatusWaiting") },
      { value: "Later", text: Lng.gt("StatusLater") },
      { value: "Someday", text: Lng.gt("StatusSomeday") },
      { value: "Done", text: Lng.gt("StatusDone") }
    ]).setTitle(Lng.gt("Status")).setValue(onRead()).onSave(async (value) => {
      onWrite(value);
    }).enableEditability().setFormator(
      (value) => {
        const status = value;
        let iconString;
        switch (status) {
          case "Active":
            iconString = "\u26A1";
            break;
          case "Waiting":
            iconString = "\u23F3";
            break;
          case "Later":
            iconString = "\u{1F51C}";
            break;
          case "Someday":
            iconString = "\u{1F4C6}";
            break;
          case "Done":
            iconString = "\u2714\uFE0F";
            break;
          default:
            iconString = "\u26A1";
            break;
        }
        return { text: `${iconString}`, html: void 0 };
      }
    ));
  }
  /**
   * Creates a priority component.
   * @param container The container to append the priority to.
   * @param component The component to register the events to.
   * @param onRead On read callback. Returns the priority.
   * @param onWrite On write callback. Passes the new priority.
   */
  static createPriority(container, component, onRead, onWrite) {
    new EditableDataView(container, component).addDropdown((dropdown) => dropdown.setOptions([
      { value: "3", text: Lng.gt("HighPriority") },
      { value: "2", text: Lng.gt("MediumPriority") },
      { value: "1", text: Lng.gt("LowPriority") },
      { value: "0", text: Lng.gt("NoPriority") }
    ]).setTitle(Lng.gt("PriorityText")).setValue(onRead()).onSave(async (value) => {
      onWrite(value);
    }).enableEditability().setFormator(
      (value) => {
        const icon = document.createDocumentFragment();
        let iconString;
        switch (value) {
          case "3":
            iconString = "signal";
            break;
          case "2":
            iconString = "signal-medium";
            break;
          case "1":
            iconString = "signal-low";
            break;
          case "0":
            iconString = "signal-zero";
            break;
          default:
            iconString = "signal-zero";
            break;
        }
        (0, import_obsidian12.setIcon)(icon, iconString);
        return { text: `${value}`, html: icon };
      }
    ));
  }
  /**
   * Creates a link to the file at `path` with the `corospondingSymbol` as icon.
   * @param container The container to append the link to.
   * @param component The component to register the events to.
   * @param path The path to the file.
   * @param type The type of the file.
   * @param corospondingSymbol The corosponding symbol for the file type.
   */
  static createMetadataLink(container, component, path, type2, corospondingSymbol) {
    new EditableDataView(container, component).addLink((link) => link.setValue(path).setTitle(Lng.gt(type2 != null ? type2 : "File")).setLinkType("file").setFormator(
      (value) => {
        const icon = document.createDocumentFragment();
        const iconString = corospondingSymbol;
        (0, import_obsidian12.setIcon)(icon, iconString);
        return { href: `${value}`, text: `${value}`, html: icon };
      }
    ));
  }
  /**
   * Creates a span with the to `urgency` corresponding urgency symbol.
   * @param container The container to append the span to.
   * @param urgency The urgency to get the symbol for. (3 to -2)
   * @see {@link PrjTaskManagementModel.calculateUrgency}
   * @see {@link UrgencySymbols}
   */
  static createTraficLight(container, urgency) {
    const traficLightSpan = document.createElement("span");
    container.appendChild(traficLightSpan);
    let iconString;
    switch (urgency) {
      case 3:
        iconString = "\u{1F534}";
        break;
      case 2:
        iconString = "\u{1F7E0}";
        break;
      case 1:
        iconString = "\u{1F7E1}";
        break;
      case 0:
        iconString = "\u{1F7E2}";
        break;
      case -1:
        iconString = "\u{1F7E2}";
        break;
      case -2:
        iconString = "\u{1F535}";
        break;
      default:
        iconString = "\u{1F534}";
        break;
    }
    traficLightSpan.textContent = iconString;
  }
};

// src/libs/BlockRenderComponents/ProjectBlockRenderComponent.ts
var ProjectBlockRenderComponent = class extends TableBlockRenderComponent {
  constructor(settings) {
    super(settings);
    this.settings = {
      tags: [],
      topicSymbol: this.global.settings.prjSettings.topicSymbol,
      projectSymbol: this.global.settings.prjSettings.projectSymbol,
      taskSymbol: this.global.settings.prjSettings.taskSymbol,
      otherSymbol: "diamond",
      filter: ["Topic", "Project", "Task"],
      maxDocuments: this.global.settings.defaultMaxShow,
      search: void 0,
      batchSize: 8,
      sleepBetweenBatches: 10
    };
    /**
     * The table headers.
     * @remarks The table headers are used to create the table.
     * 
     */
    this.tableHeaders = [
      { text: Lng.gt("DocumentType"), headerClass: [], columnClass: ["dont-decorate-link", "font-medium"] },
      { text: Lng.gt("TraficLight"), headerClass: [], columnClass: [] },
      { text: Lng.gt("Description"), headerClass: [], columnClass: ["dont-decorate-link", "link-weight-bold"] },
      { text: Lng.gt("Priority"), headerClass: [], columnClass: [] },
      { text: Lng.gt("DueDate"), headerClass: [], columnClass: ["font-xsmall"] },
      { text: Lng.gt("Status"), headerClass: [], columnClass: [] },
      { text: Lng.gt("Tags"), headerClass: [], columnClass: ["tags"] }
    ];
    this.parseSettings();
  }
  build() {
    return super.build();
  }
  async draw() {
    const startTime = Date.now();
    const getModelsPromise = this.getModels();
    await super.draw();
    await this.buildTable();
    await this.buildHeader();
    this.grayOutHeader();
    this.models = await getModelsPromise;
    PrjTaskManagementModel.sortModelsByUrgency(this.models);
    await this.addDocumentsToTable();
    this.normalizeHeader();
    const endTime = Date.now();
    this.logger.debug(`Redraw (for ${this.models.length} Models) runs for ${endTime - startTime}ms`);
  }
  async buildTable() {
    this.table = new Table(this.tableHeaders, "project-table", void 0);
    this.tableContainer.appendChild(this.table.data.table);
  }
  async buildHeader() {
    const headerFilterButtons = document.createElement("div");
    this.headerContainer.appendChild(headerFilterButtons);
    headerFilterButtons.classList.add("header-item");
    headerFilterButtons.classList.add("filter-symbols");
    const filterLabelContainer = document.createElement("div");
    headerFilterButtons.appendChild(filterLabelContainer);
    const filterLabel = document.createElement("span");
    filterLabelContainer.appendChild(filterLabel);
    filterLabel.classList.add("filter-symbol");
    filterLabel.textContent = Lng.gt("Filter");
    const topicFilterButton = FilterButton.create(
      this.component,
      "Topic",
      this.settings.topicSymbol,
      this.settings.filter.includes("Topic"),
      this.onFilterButton.bind(this)
    );
    headerFilterButtons.appendChild(topicFilterButton);
    const projectFilterButton = FilterButton.create(
      this.component,
      "Project",
      this.settings.projectSymbol,
      this.settings.filter.includes("Project"),
      this.onFilterButton.bind(this)
    );
    headerFilterButtons.appendChild(projectFilterButton);
    const taskFilterButton = FilterButton.create(
      this.component,
      "Task",
      this.settings.taskSymbol,
      this.settings.filter.includes("Task"),
      this.onFilterButton.bind(this)
    );
    headerFilterButtons.appendChild(taskFilterButton);
    const doneFilterButton = FilterButton.create(
      this.component,
      "Done",
      "check-square",
      this.settings.filter.includes("Done"),
      this.onFilterButton.bind(this)
    );
    headerFilterButtons.appendChild(doneFilterButton);
    const maxDocuments = MaxShownModelsInput.create(
      this.component,
      this.settings.maxDocuments,
      this.global.settings.defaultMaxShow,
      this.onMaxDocumentsChange.bind(this)
    );
    headerFilterButtons.appendChild(maxDocuments);
    const searchBox = SearchInput.create(
      this.component,
      this.onSearch.bind(this)
    );
    headerFilterButtons.appendChild(searchBox);
  }
  async addDocumentsToTable(batchSize = this.settings.batchSize, sleepBetweenBatches = this.settings.sleepBetweenBatches) {
    let sleepPromise = Promise.resolve();
    const modelsLength = this.models.length;
    const rows = [];
    let rowPromise = void 0;
    if (modelsLength > 0) {
      rowPromise = this.generateTableRow(this.models[0]);
    } else {
      return;
    }
    let visibleRows = 0;
    for (let i = 0; i < modelsLength; i++) {
      const model = i + 1 < modelsLength ? this.models[i + 1] : null;
      const row = await rowPromise;
      rowPromise = model ? this.generateTableRow(model) : void 0;
      if (row && !row.hidden) {
        if (visibleRows < this.settings.maxDocuments) {
          visibleRows++;
        } else {
          row.hidden = true;
        }
      }
      if (row)
        rows.push(row);
      if (i !== 0 && i % batchSize === 0 || i === modelsLength - 1) {
        await sleepPromise;
        this.table.addRows(rows);
        rows.length = 0;
        sleepPromise = Helper.sleep(sleepBetweenBatches);
      }
    }
  }
  async generateTableRow(model) {
    var _a;
    const rowClassList = [];
    const rowData = [];
    const rowUid = this.getUID(model);
    const metadataLink = document.createDocumentFragment();
    rowData.push(metadataLink);
    GeneralComponents.createMetadataLink(
      metadataLink,
      this.component,
      model.file.path,
      model.data.type,
      model.getCorospondingSymbol()
    );
    const traficLight = document.createDocumentFragment();
    rowData.push(traficLight);
    ProjectComponents.createTraficLight(traficLight, model.getUrgency());
    const titleAndSummary = document.createDocumentFragment();
    rowData.push(titleAndSummary);
    ProjectComponents.createTitle(
      titleAndSummary,
      this.component,
      model.file.path,
      () => {
        var _a2;
        return (_a2 = model.data.title) != null ? _a2 : "";
      },
      async (value) => model.data.title = value
    );
    const lineBreak = document.createElement("br");
    titleAndSummary.appendChild(lineBreak);
    ProjectComponents.createSummary(
      titleAndSummary,
      this.component,
      (_a = model.data.description) != null ? _a : "",
      (value) => model.data.description = value
    );
    const priority = document.createDocumentFragment();
    rowData.push(priority);
    ProjectComponents.createPriority(
      priority,
      this.component,
      () => {
        var _a2, _b;
        return (_b = (_a2 = model.data.priority) == null ? void 0 : _a2.toString()) != null ? _b : "0";
      },
      async (value) => model.data.priority = value
    );
    const dueDate = document.createDocumentFragment();
    rowData.push(dueDate);
    GeneralComponents.createCellDate(
      dueDate,
      this.component,
      Lng.gt("DueDate"),
      this.global.settings.dateFormat,
      () => {
        var _a2;
        return (_a2 = model.data.due) != null ? _a2 : "na";
      },
      async (value) => model.data.due = value
    );
    const status = document.createDocumentFragment();
    rowData.push(status);
    ProjectComponents.createStatus(
      status,
      this.component,
      () => {
        var _a2;
        return (_a2 = model.data.status) != null ? _a2 : "Active";
      },
      async (value) => model.data.status = value
    );
    const tags = document.createDocumentFragment();
    rowData.push(tags);
    DocumentComponents.createCellTags(
      tags,
      this.component,
      model.getTags()
    );
    const hide = this.getHideState(model, this.settings.maxDocuments);
    const row = {
      rowUid,
      rowData,
      rowClassList,
      hidden: hide
    };
    return row;
  }
  async onFilterButton(type2, status) {
    if (this.settings.filter.includes(type2)) {
      this.settings.filter = this.settings.filter.filter((v) => v !== type2);
    } else {
      this.settings.filter.push(type2);
    }
    this.onFilter();
  }
  async onMaxDocumentsChange(maxDocuments) {
    this.settings.maxDocuments = maxDocuments;
    this.onFilter();
    return void 0;
  }
  async onSearch(search, key) {
    if (key === "Enter") {
      if (search !== "") {
        this.settings.search = Search.parseSearchText(search);
        this.onFilter();
      } else {
        this.settings.search = void 0;
        this.onFilter();
      }
    } else if (key === "Escape") {
      this.settings.search = void 0;
      this.onFilter();
      return "";
    }
    return search;
  }
  async onFilter() {
    this.grayOutHeader();
    const batchSize = this.settings.batchSize;
    const sleepBetweenBatches = this.settings.sleepBetweenBatches;
    let sleepPromise = Promise.resolve();
    const documentsLength = this.models.length;
    const rows = [];
    let visibleRows = 0;
    for (let i = 0; i < documentsLength; i++) {
      const document2 = this.models[i];
      const rowUid = this.getUID(document2);
      let hide = this.getHideState(document2, void 0);
      if (visibleRows >= this.settings.maxDocuments) {
        hide = true;
      }
      if (hide) {
        rows.push({ rowUid, hidden: true });
      } else {
        visibleRows++;
        rows.push({ rowUid, hidden: false });
      }
      if (i !== 0 && i % batchSize === 0 || i === documentsLength - 1) {
        await sleepPromise;
        this.table.changeShowHideStateRows(rows);
        rows.length = 0;
        sleepPromise = Helper.sleep(sleepBetweenBatches);
      }
    }
    this.normalizeHeader();
  }
  getHideState(model, maxVisibleRows) {
    let searchResult = false;
    let maxRows = false;
    if (!this.settings.filter.includes("Done") && model.data.status === "Done") {
      return true;
    }
    if (this.settings.search) {
      const text = model.toString();
      searchResult = Search.applySearchLogic(this.settings.search, text);
    }
    if (maxVisibleRows && maxVisibleRows > 0) {
      const rowStats = this.table.getRowStats();
      maxRows = rowStats.visibleRows >= maxVisibleRows;
    }
    const hide = this.determineHideState(model);
    if (searchResult && !hide) {
      return false;
    } else if (this.settings.search) {
      return true;
    } else if (!searchResult) {
      return maxRows || hide;
    }
    return hide;
  }
  determineHideState(model) {
    if (this.settings.filter.includes("Topic") && model.data.type === "Topic") {
      return false;
    }
    if (this.settings.filter.includes("Project") && model.data.type === "Project") {
      return false;
    }
    if (this.settings.filter.includes("Task") && model.data.type === "Task") {
      return false;
    }
    return true;
  }
  parseSettings() {
    this.processorSettings.options.forEach((option) => {
      var _a, _b;
      switch (option.label) {
        case "tags":
          if (option.value === "all") {
            this.settings.tags = [];
          } else if (option.value === "this") {
            const tags = (_b = (_a = this.processorSettings) == null ? void 0 : _a.frontmatter) == null ? void 0 : _b.tags;
            if (Array.isArray(tags)) {
              this.settings.tags.push(...tags);
            } else if (tags) {
              this.settings.tags.push(tags);
            }
          } else {
            this.settings.tags = option.value;
          }
          break;
        case "maxDocuments":
          this.settings.maxDocuments = option.value;
          break;
        case "filter":
          this.settings.filter = option.value;
          break;
        default:
          break;
      }
    });
  }
  async getModels() {
    const templateFolder = this.global.settings.templateFolder;
    const allModelFiles = this.metadataCache.filter((file) => {
      var _a, _b, _c, _d;
      const defaultFilter = (((_a = file.metadata.frontmatter) == null ? void 0 : _a.type) === "Topic" || ((_b = file.metadata.frontmatter) == null ? void 0 : _b.type) === "Project" || ((_c = file.metadata.frontmatter) == null ? void 0 : _c.type) === "Task") && file.file.path !== this.processorSettings.source && !file.file.path.startsWith(templateFolder);
      if (this.settings.tags.length > 0) {
        const tagFilter = Helper.isTagIncluded(this.settings.tags, (_d = file.metadata.frontmatter) == null ? void 0 : _d.tags);
        return defaultFilter && tagFilter;
      }
      return defaultFilter;
    });
    const models = [];
    allModelFiles.forEach((file) => {
      var _a;
      switch ((_a = file.metadata.frontmatter) == null ? void 0 : _a.type) {
        case "Topic":
          models.push(new TopicModel(file.file));
          break;
        case "Project":
          models.push(new ProjectModel(file.file));
          break;
        case "Task":
          models.push(new TaskModel(file.file));
          break;
        default:
          break;
      }
    });
    return models;
  }
};

// src/libs/MarkdownBlockProcessor.ts
var MarkdownBlockProcessor = class {
  static async parseSource(source, el, ctx) {
    var _a;
    const startTime = Date.now();
    const parent = el.closest("div.cm-preview-code-block.cm-embed-block.markdown-rendered");
    if (parent) {
      parent.classList.remove("cm-embed-block");
      parent.addClass("prj-block");
    }
    const global2 = Global.getInstance();
    await global2.metadataCache.waitForCacheReady();
    const cache = global2.metadataCache.Cache;
    const logger = global2.logger;
    const cmp = new import_obsidian13.MarkdownRenderChild(el);
    ctx.addChild(cmp);
    cmp.load();
    const blockContainer = document.createElement("div");
    el.append(blockContainer);
    blockContainer.classList.add("prj-block-container");
    const setting = load(source);
    setting.source = ctx.sourcePath;
    setting.frontmatter = (_a = cache.filter((file) => file.file.path === ctx.sourcePath).first()) == null ? void 0 : _a.metadata.frontmatter;
    setting.container = blockContainer;
    setting.ctx = ctx;
    if (setting) {
      switch (setting.type) {
        case "Documents":
          const documentBlock = new DocumentBlockRenderComponent(setting);
          await documentBlock.build();
          break;
        case "Tasks":
        case "Projects":
        case "Topics":
          const projectBlock = new ProjectBlockRenderComponent(setting);
          await projectBlock.build();
          break;
        case "Debug":
          console.log("Debug Mode");
          console.log(`Settings: ${setting}`);
          break;
        default:
          break;
      }
      const endTime = Date.now();
      logger.debug(`MarkdownBlockProcessor runs for ${endTime - startTime}ms`);
    }
  }
};

// src/classes/SettingsTab.ts
var import_obsidian14 = require("obsidian");
var SettingTab = class extends import_obsidian14.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian14.Setting(containerEl).setName("Log Level").setDesc("The log level to use").addDropdown((dropdown) => dropdown.addOptions({
      "none": "none",
      "trace": "trace",
      "debug": "debug",
      "info": "info",
      "warn": "warn",
      "error": "error"
    }).setValue(this.plugin.settings.logLevel).onChange(async (value) => {
      this.plugin.settings.logLevel = value;
      Global.getInstance().logger.setLogLevel(value);
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("Performance Mode (only Mobile)").setDesc("The performance of the plugin is affected by this setting. If disabled, the editability of the blocks is disabled. No effect on Desktop!").addToggle((toggle) => toggle.setValue(this.plugin.settings.mobile).onChange(async (value) => {
      this.plugin.settings.mobile = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setHeading().setName("Localisation");
    new import_obsidian14.Setting(containerEl).setName("Language").setDesc("The language to use").addText((text) => text.setPlaceholder("en | de").setValue(this.plugin.settings.language).onChange(async (value) => {
      this.plugin.settings.language = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("Date Format").setDesc("The Date format to use").addText((text) => text.setPlaceholder("DD.MM.YYYY").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
      this.plugin.settings.dateFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("Short date format").setDesc("The short Date format to use").addText((text) => text.setPlaceholder("DD.MM.YY").setValue(this.plugin.settings.dateFormatShort).onChange(async (value) => {
      this.plugin.settings.dateFormatShort = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("Base Tag").setDesc("The Base Tag for all Elements").addText((text) => text.setPlaceholder("#YourBaseTag").setValue(this.plugin.settings.baseTag).onChange(async (value) => {
      this.plugin.settings.baseTag = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("Template Folder").setDesc("The Folder where all Templates are stored").addText((text) => text.setPlaceholder("YourTemplateFolder").setValue(this.plugin.settings.templateFolder).onChange(async (value) => {
      this.plugin.settings.templateFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setHeading().setName("User Information");
    new import_obsidian14.Setting(containerEl).setName("User: Name").setDesc("Your name").addText((text) => text.setPlaceholder("Your name").setValue(this.plugin.settings.user.name).onChange(async (value) => {
      this.plugin.settings.user.name = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("User: Short name").setDesc("Your name short name").addText((text) => text.setPlaceholder("Your name shortened").setValue(this.plugin.settings.user.shortName).onChange(async (value) => {
      this.plugin.settings.user.shortName = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("User: Email").setDesc("Your E-Mail adress").addText((text) => text.setPlaceholder("Your email").setValue(this.plugin.settings.user.email).onChange(async (value) => {
      this.plugin.settings.user.email = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("User: Street").setDesc("Your street").addText((text) => text.setPlaceholder("Your street").setValue(this.plugin.settings.user.street).onChange(async (value) => {
      this.plugin.settings.user.street = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("User: City").setDesc("Your city").addText((text) => text.setPlaceholder("Your city").setValue(this.plugin.settings.user.city).onChange(async (value) => {
      this.plugin.settings.user.city = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("User: Zip Code").setDesc("Your zip code").addText((text) => text.setPlaceholder("Your zip").setValue(this.plugin.settings.user.zip).onChange(async (value) => {
      this.plugin.settings.user.zip = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("User: Country").setDesc("Your country").addText((text) => text.setPlaceholder("Your country").setValue(this.plugin.settings.user.country).onChange(async (value) => {
      this.plugin.settings.user.country = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setHeading().setName("Document Settings");
    new import_obsidian14.Setting(containerEl).setName("Default Max Show").setDesc("The default max show for Table Entrys").addText((text) => text.setPlaceholder("200").setValue(this.plugin.settings.defaultMaxShow.toString()).onChange(async (value) => {
      this.plugin.settings.defaultMaxShow = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("Document Symbol").setDesc("The Symbol for regular Documents").addText((text) => text.setPlaceholder("file-text").setValue(this.plugin.settings.documentSettings.symbol).onChange(async (value) => {
      this.plugin.settings.documentSettings.symbol = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("Hide Symbol").setDesc("The Symbol for hidden Documents").addText((text) => text.setPlaceholder("file-minus-2").setValue(this.plugin.settings.documentSettings.hideSymbol).onChange(async (value) => {
      this.plugin.settings.documentSettings.hideSymbol = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian14.Setting(containerEl).setName("Cluster Symbol").setDesc("The Symbol for Cluster Documents").addText((text) => text.setPlaceholder("library").setValue(this.plugin.settings.documentSettings.clusterSymbol).onChange(async (value) => {
      this.plugin.settings.documentSettings.clusterSymbol = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/types/PrjSettings.ts
var DEFAULT_SETTINGS = {
  logLevel: "none",
  mobile: false,
  language: "en",
  dateFormat: "DD.MM.YYYY",
  dateFormatShort: "DD.MM.YY",
  user: {
    "name": "",
    "shortName": "",
    "email": "",
    "street": "",
    "city": "",
    "zip": "",
    "country": ""
  },
  "defaultMaxShow": 200,
  "batchSizeShow": 25,
  documentSettings: {
    "symbol": "file-text",
    "hideSymbol": "file-minus-2",
    "clusterSymbol": "library"
  },
  prjSettings: {
    "topicSymbol": "album",
    "projectSymbol": "layout-list",
    "taskSymbol": "clipboard"
  },
  baseTag: "PRJ",
  templateFolder: "Vorlagen/"
};

// src/libs/ContextMenus/GetMetadata.ts
var import_obsidian15 = require("obsidian");
var GetMetadata = class {
  constructor() {
    this.app = Global.getInstance().app;
    this.logger = Global.getInstance().logger;
    this.plugin = Global.getInstance().plugin;
    this.metadataCache = Global.getInstance().metadataCache.Cache;
    this.eventsRegistered = false;
    this.bindContextMenu = this.onContextMenu.bind(this);
    this.logger.debug("Initializing GetMetadata");
    this.registerEvents();
    this.registerCommands();
  }
  static getInstance() {
    if (!GetMetadata.instance) {
      GetMetadata.instance = new GetMetadata();
    }
    return GetMetadata.instance;
  }
  /**
   * Deconstructs the 'GetMetadata' events
   */
  static deconstructor() {
    if (this.instance && this.instance.eventsRegistered) {
      this.instance.logger.trace("Deconstructing 'GetMetadata' events");
      this.instance.app.workspace.off("file-menu", this.instance.bindContextMenu);
      this.instance.eventsRegistered = false;
    } else {
      this.instance.logger.trace("No 'GetMetadata' events to deconstruct");
    }
  }
  /**
   * Registers the 'GetMetadata' events
   */
  registerEvents() {
    if (!this.eventsRegistered) {
      this.logger.trace("Registering 'GetMetadata' events");
      this.app.workspace.on("file-menu", this.bindContextMenu);
      this.eventsRegistered = true;
    }
  }
  /**
   * Registers the 'GetMetadata' commands
   */
  registerCommands() {
    this.logger.trace("Registering 'GetMetadata' commands");
    this.plugin.addCommand({
      id: "get-metadata-file",
      name: Lng.gt("ShowMetadataFile"),
      callback: () => {
        GetMetadata.getInstance().invoke();
      }
    });
  }
  /**
   * Adds the 'GetMetadata' context menu item
   * @param menu The context menu
   * @param file The file to add the context menu item to
   */
  onContextMenu(menu, file) {
    if (!(file instanceof import_obsidian15.TFile) || !file.path.endsWith(".pdf")) {
      return;
    }
    const metadataFile = this.getCorrespondingMetadataFile(file);
    if (!metadataFile) {
      return;
    }
    const document2 = new DocumentModel(metadataFile.file);
    if (metadataFile) {
      menu.addSeparator();
      menu.addItem((item) => {
        item.setTitle(Lng.gt("ShowMetadataFile")).setIcon(document2.getCorospondingSymbol()).onClick(
          async () => {
            await this.openMetadataFile(document2.file);
          }
        );
      });
    }
  }
  /**
   * Returns the metadata file for the given document (e.g. pdf) file
   * @param file The document file
   * @returns The metadata file or undefined if not found
   */
  getCorrespondingMetadataFile(file) {
    return this.metadataCache.find((metadata) => {
      var _a, _b;
      const type2 = (_a = metadata.metadata.frontmatter) == null ? void 0 : _a.type;
      const fileLink = (_b = metadata.metadata.frontmatter) == null ? void 0 : _b.file;
      if (type2 && fileLink && type2 === "Metadata") {
        return fileLink.contains(file.name);
      }
    });
  }
  /**
   * Opens the metadata file for the active (e.g. pdf) file
   */
  async invoke() {
    const workspace = this.app.workspace;
    const activeFile = workspace.getActiveFile();
    if (!activeFile || !(activeFile instanceof import_obsidian15.TFile) || !activeFile.path.endsWith(".pdf")) {
      this.logger.warn("No active pdf file found.");
      return;
    }
    const metadataFile = this.getCorrespondingMetadataFile(activeFile);
    if (!metadataFile) {
      this.logger.warn("No metadata file to the active pdf file found.");
      return;
    }
    const document2 = new DocumentModel(metadataFile.file);
    await this.openMetadataFile(document2.file);
  }
  async openMetadataFile(file) {
    this.logger.trace(`Opening metadata file for ${file.name}`);
    const workspace = this.app.workspace;
    const newLeaf = workspace.getLeaf(true);
    await newLeaf.openFile(file);
    const view = newLeaf.getViewState();
    view.state.mode = "preview";
    newLeaf.setViewState(view);
  }
};

// src/main.ts
var Prj = class extends import_obsidian16.Plugin {
  async onload() {
    console.log("Loading plugin 'PRJ'");
    await this.loadSettings();
    this.addSettingTab(new SettingTab(this.app, this));
    if (this.app.workspace.layoutReady) {
      await this.onLayoutReady();
    } else {
      this.app.workspace.onLayoutReady(this.onLayoutReady.bind(this));
    }
  }
  async onLayoutReady() {
    console.log("Layout ready");
    new Global(this, this.app, this.settings);
    await Global.getInstance().awaitCacheInitialization();
    this.registerMarkdownCodeBlockProcessor("prj", MarkdownBlockProcessor.parseSource);
    this.app.workspace.updateOptions();
    GetMetadata.getInstance();
  }
  onunload() {
    console.log("Unloading plugin 'PRJ'");
    GetMetadata.deconstructor();
    Global.deconstructor();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2NyeXB0by1qcy9jb3JlLmpzIiwgIm5vZGVfbW9kdWxlcy9jcnlwdG8tanMvbWQ1LmpzIiwgInNyYy9tYWluLnRzIiwgInNyYy9saWJzL01hcmtkb3duQmxvY2tQcm9jZXNzb3IudHMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvZGlzdC9qcy15YW1sLm1qcyIsICJzcmMvbGlicy9GaWxlQ2FjaGUudHMiLCAic3JjL2xpYnMvTWV0YWRhdGFDYWNoZS50cyIsICJzcmMvY2xhc3Nlcy9Mb2dnaW5nLnRzIiwgInNyYy9jbGFzc2VzL0dsb2JhbC50cyIsICJzcmMvbW9kZWxzL0RvY3VtZW50TW9kZWwudHMiLCAic3JjL21vZGVscy9UcmFuc2FjdGlvbk1vZGVsLnRzIiwgInNyYy9tb2RlbHMvQmFzZU1vZGVsLnRzIiwgInNyYy90eXBlcy9Eb2N1bWVudERhdGEudHMiLCAic3JjL2xpYnMvSGVscGVyLnRzIiwgInNyYy9saWJzL0Jsb2NrUmVuZGVyQ29tcG9uZW50cy9UYWJsZUJsb2NrUmVuZGVyQ29tcG9uZW50LnRzIiwgInNyYy90cmFuc2xhdGlvbnMuanNvbiIsICJzcmMvY2xhc3Nlcy9MbmcudHMiLCAic3JjL2xpYnMvU2VhcmNoLnRzIiwgInNyYy9saWJzL1RhYmxlLnRzIiwgInNyYy9saWJzL0Jsb2NrUmVuZGVyQ29tcG9uZW50cy9Jbm5lckNvbXBvbmVudHMvRmlsdGVyQnV0dG9uLnRzIiwgInNyYy9saWJzL0Jsb2NrUmVuZGVyQ29tcG9uZW50cy9Jbm5lckNvbXBvbmVudHMvTWF4U2hvd25Nb2RlbHNJbnB1dC50cyIsICJzcmMvbGlicy9CbG9ja1JlbmRlckNvbXBvbmVudHMvSW5uZXJDb21wb25lbnRzL1NlYXJjaElucHV0LnRzIiwgInNyYy9saWJzL0Jsb2NrUmVuZGVyQ29tcG9uZW50cy9Jbm5lckNvbXBvbmVudHMvRG9jdW1lbnRDb21wb25lbnRzLnRzIiwgInNyYy9saWJzL0VkaXRhYmxlRGF0YVZpZXcvQ29tcG9uZW50cy9CYXNlQ29tcG9uZW50LnRzIiwgInNyYy9saWJzL0VkaXRhYmxlRGF0YVZpZXcvQ29tcG9uZW50cy9EYXRlQ29tcG9uZW50LnRzIiwgInNyYy9saWJzL0VkaXRhYmxlRGF0YVZpZXcvQ29tcG9uZW50cy9Ecm9wZG93bkNvbXBvbmVudC50cyIsICJzcmMvbGlicy9FZGl0YWJsZURhdGFWaWV3L0NvbXBvbmVudHMvTGlua0NvbXBvbmVudC50cyIsICJzcmMvbGlicy9FZGl0YWJsZURhdGFWaWV3L0NvbXBvbmVudHMvVGV4dENvbXBvbmVudC50cyIsICJzcmMvbGlicy9FZGl0YWJsZURhdGFWaWV3L0NvbXBvbmVudHMvVGV4dGFyZWFDb21wb25lbnQudHMiLCAic3JjL2xpYnMvRWRpdGFibGVEYXRhVmlldy9FZGl0YWJsZURhdGFWaWV3LnRzIiwgInNyYy9saWJzL0Jsb2NrUmVuZGVyQ29tcG9uZW50cy9Jbm5lckNvbXBvbmVudHMvR2VuZXJhbENvbXBvbmVudHMudHMiLCAic3JjL2xpYnMvQmxvY2tSZW5kZXJDb21wb25lbnRzL0RvY3VtZW50QmxvY2tSZW5kZXJDb21wb25lbnQudHMiLCAic3JjL21vZGVscy9QcmpUYXNrTWFuYWdlbWVudE1vZGVsLnRzIiwgInNyYy90eXBlcy9Ub3BpY0RhdGEudHMiLCAic3JjL21vZGVscy9Ub3BpY01vZGVsLnRzIiwgInNyYy90eXBlcy9Qcm9qZWN0RGF0YS50cyIsICJzcmMvbW9kZWxzL1Byb2plY3RNb2RlbC50cyIsICJzcmMvdHlwZXMvVGFza0RhdGEudHMiLCAic3JjL21vZGVscy9UYXNrTW9kZWwudHMiLCAic3JjL2xpYnMvQmxvY2tSZW5kZXJDb21wb25lbnRzL0lubmVyQ29tcG9uZW50cy9Qcm9qZWN0Q29tcG9uZW50cy50cyIsICJzcmMvbGlicy9CbG9ja1JlbmRlckNvbXBvbmVudHMvUHJvamVjdEJsb2NrUmVuZGVyQ29tcG9uZW50LnRzIiwgInNyYy9jbGFzc2VzL1NldHRpbmdzVGFiLnRzIiwgInNyYy90eXBlcy9QcmpTZXR0aW5ncy50cyIsICJzcmMvbGlicy9Db250ZXh0TWVudXMvR2V0TWV0YWRhdGEudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIjsoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG5cdFx0Ly8gQ29tbW9uSlNcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdH1cblx0ZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyBBTURcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdC8vIEdsb2JhbCAoYnJvd3Nlcilcblx0XHRyb290LkNyeXB0b0pTID0gZmFjdG9yeSgpO1xuXHR9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcblxuXHQvKmdsb2JhbHMgd2luZG93LCBnbG9iYWwsIHJlcXVpcmUqL1xuXG5cdC8qKlxuXHQgKiBDcnlwdG9KUyBjb3JlIGNvbXBvbmVudHMuXG5cdCAqL1xuXHR2YXIgQ3J5cHRvSlMgPSBDcnlwdG9KUyB8fCAoZnVuY3Rpb24gKE1hdGgsIHVuZGVmaW5lZCkge1xuXG5cdCAgICB2YXIgY3J5cHRvO1xuXG5cdCAgICAvLyBOYXRpdmUgY3J5cHRvIGZyb20gd2luZG93IChCcm93c2VyKVxuXHQgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jcnlwdG8pIHtcblx0ICAgICAgICBjcnlwdG8gPSB3aW5kb3cuY3J5cHRvO1xuXHQgICAgfVxuXG5cdCAgICAvLyBOYXRpdmUgY3J5cHRvIGluIHdlYiB3b3JrZXIgKEJyb3dzZXIpXG5cdCAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYuY3J5cHRvKSB7XG5cdCAgICAgICAgY3J5cHRvID0gc2VsZi5jcnlwdG87XG5cdCAgICB9XG5cblx0ICAgIC8vIE5hdGl2ZSBjcnlwdG8gZnJvbSB3b3JrZXJcblx0ICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcy5jcnlwdG8pIHtcblx0ICAgICAgICBjcnlwdG8gPSBnbG9iYWxUaGlzLmNyeXB0bztcblx0ICAgIH1cblxuXHQgICAgLy8gTmF0aXZlIChleHBlcmltZW50YWwgSUUgMTEpIGNyeXB0byBmcm9tIHdpbmRvdyAoQnJvd3Nlcilcblx0ICAgIGlmICghY3J5cHRvICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5tc0NyeXB0bykge1xuXHQgICAgICAgIGNyeXB0byA9IHdpbmRvdy5tc0NyeXB0bztcblx0ICAgIH1cblxuXHQgICAgLy8gTmF0aXZlIGNyeXB0byBmcm9tIGdsb2JhbCAoTm9kZUpTKVxuXHQgICAgaWYgKCFjcnlwdG8gJiYgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsLmNyeXB0bykge1xuXHQgICAgICAgIGNyeXB0byA9IGdsb2JhbC5jcnlwdG87XG5cdCAgICB9XG5cblx0ICAgIC8vIE5hdGl2ZSBjcnlwdG8gaW1wb3J0IHZpYSByZXF1aXJlIChOb2RlSlMpXG5cdCAgICBpZiAoIWNyeXB0byAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGVycikge31cblx0ICAgIH1cblxuXHQgICAgLypcblx0ICAgICAqIENyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSBwc2V1ZG9yYW5kb20gbnVtYmVyIGdlbmVyYXRvclxuXHQgICAgICpcblx0ICAgICAqIEFzIE1hdGgucmFuZG9tKCkgaXMgY3J5cHRvZ3JhcGhpY2FsbHkgbm90IHNhZmUgdG8gdXNlXG5cdCAgICAgKi9cblx0ICAgIHZhciBjcnlwdG9TZWN1cmVSYW5kb21JbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGNyeXB0bykge1xuXHQgICAgICAgICAgICAvLyBVc2UgZ2V0UmFuZG9tVmFsdWVzIG1ldGhvZCAoQnJvd3Nlcilcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50MzJBcnJheSgxKSlbMF07XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAvLyBVc2UgcmFuZG9tQnl0ZXMgbWV0aG9kIChOb2RlSlMpXG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgY3J5cHRvLnJhbmRvbUJ5dGVzID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBjcnlwdG8ucmFuZG9tQnl0ZXMoNCkucmVhZEludDMyTEUoKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignTmF0aXZlIGNyeXB0byBtb2R1bGUgY291bGQgbm90IGJlIHVzZWQgdG8gZ2V0IHNlY3VyZSByYW5kb20gbnVtYmVyLicpO1xuXHQgICAgfTtcblxuXHQgICAgLypcblx0ICAgICAqIExvY2FsIHBvbHlmaWxsIG9mIE9iamVjdC5jcmVhdGVcblxuXHQgICAgICovXG5cdCAgICB2YXIgY3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZ1bmN0aW9uIEYoKSB7fVxuXG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHtcblx0ICAgICAgICAgICAgdmFyIHN1YnR5cGU7XG5cblx0ICAgICAgICAgICAgRi5wcm90b3R5cGUgPSBvYmo7XG5cblx0ICAgICAgICAgICAgc3VidHlwZSA9IG5ldyBGKCk7XG5cblx0ICAgICAgICAgICAgRi5wcm90b3R5cGUgPSBudWxsO1xuXG5cdCAgICAgICAgICAgIHJldHVybiBzdWJ0eXBlO1xuXHQgICAgICAgIH07XG5cdCAgICB9KCkpO1xuXG5cdCAgICAvKipcblx0ICAgICAqIENyeXB0b0pTIG5hbWVzcGFjZS5cblx0ICAgICAqL1xuXHQgICAgdmFyIEMgPSB7fTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBMaWJyYXJ5IG5hbWVzcGFjZS5cblx0ICAgICAqL1xuXHQgICAgdmFyIENfbGliID0gQy5saWIgPSB7fTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBCYXNlIG9iamVjdCBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZS5cblx0ICAgICAqL1xuXHQgICAgdmFyIEJhc2UgPSBDX2xpYi5CYXNlID0gKGZ1bmN0aW9uICgpIHtcblxuXG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGlzIG9iamVjdC5cblx0ICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG92ZXJyaWRlcyBQcm9wZXJ0aWVzIHRvIGNvcHkgaW50byB0aGUgbmV3IG9iamVjdC5cblx0ICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgbmV3IG9iamVjdC5cblx0ICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICogQHN0YXRpY1xuXHQgICAgICAgICAgICAgKlxuXHQgICAgICAgICAgICAgKiBAZXhhbXBsZVxuXHQgICAgICAgICAgICAgKlxuXHQgICAgICAgICAgICAgKiAgICAgdmFyIE15VHlwZSA9IENyeXB0b0pTLmxpYi5CYXNlLmV4dGVuZCh7XG5cdCAgICAgICAgICAgICAqICAgICAgICAgZmllbGQ6ICd2YWx1ZScsXG5cdCAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAqICAgICAgICAgbWV0aG9kOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAqICAgICAgICAgfVxuXHQgICAgICAgICAgICAgKiAgICAgfSk7XG5cdCAgICAgICAgICAgICAqL1xuXHQgICAgICAgICAgICBleHRlbmQ6IGZ1bmN0aW9uIChvdmVycmlkZXMpIHtcblx0ICAgICAgICAgICAgICAgIC8vIFNwYXduXG5cdCAgICAgICAgICAgICAgICB2YXIgc3VidHlwZSA9IGNyZWF0ZSh0aGlzKTtcblxuXHQgICAgICAgICAgICAgICAgLy8gQXVnbWVudFxuXHQgICAgICAgICAgICAgICAgaWYgKG92ZXJyaWRlcykge1xuXHQgICAgICAgICAgICAgICAgICAgIHN1YnR5cGUubWl4SW4ob3ZlcnJpZGVzKTtcblx0ICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGRlZmF1bHQgaW5pdGlhbGl6ZXJcblx0ICAgICAgICAgICAgICAgIGlmICghc3VidHlwZS5oYXNPd25Qcm9wZXJ0eSgnaW5pdCcpIHx8IHRoaXMuaW5pdCA9PT0gc3VidHlwZS5pbml0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3VidHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0eXBlLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZXIncyBwcm90b3R5cGUgaXMgdGhlIHN1YnR5cGUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBzdWJ0eXBlLmluaXQucHJvdG90eXBlID0gc3VidHlwZTtcblxuXHQgICAgICAgICAgICAgICAgLy8gUmVmZXJlbmNlIHN1cGVydHlwZVxuXHQgICAgICAgICAgICAgICAgc3VidHlwZS4kc3VwZXIgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gc3VidHlwZTtcblx0ICAgICAgICAgICAgfSxcblxuXHQgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICogRXh0ZW5kcyB0aGlzIG9iamVjdCBhbmQgcnVucyB0aGUgaW5pdCBtZXRob2QuXG5cdCAgICAgICAgICAgICAqIEFyZ3VtZW50cyB0byBjcmVhdGUoKSB3aWxsIGJlIHBhc3NlZCB0byBpbml0KCkuXG5cdCAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIG5ldyBvYmplY3QuXG5cdCAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAqIEBzdGF0aWNcblx0ICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICogQGV4YW1wbGVcblx0ICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICogICAgIHZhciBpbnN0YW5jZSA9IE15VHlwZS5jcmVhdGUoKTtcblx0ICAgICAgICAgICAgICovXG5cdCAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5leHRlbmQoKTtcblx0ICAgICAgICAgICAgICAgIGluc3RhbmNlLmluaXQuYXBwbHkoaW5zdGFuY2UsIGFyZ3VtZW50cyk7XG5cblx0ICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcblx0ICAgICAgICAgICAgfSxcblxuXHQgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICogSW5pdGlhbGl6ZXMgYSBuZXdseSBjcmVhdGVkIG9iamVjdC5cblx0ICAgICAgICAgICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gYWRkIHNvbWUgbG9naWMgd2hlbiB5b3VyIG9iamVjdHMgYXJlIGNyZWF0ZWQuXG5cdCAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAqICAgICB2YXIgTXlUeXBlID0gQ3J5cHRvSlMubGliLkJhc2UuZXh0ZW5kKHtcblx0ICAgICAgICAgICAgICogICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAqICAgICAgICAgICAgIC8vIC4uLlxuXHQgICAgICAgICAgICAgKiAgICAgICAgIH1cblx0ICAgICAgICAgICAgICogICAgIH0pO1xuXHQgICAgICAgICAgICAgKi9cblx0ICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB9LFxuXG5cdCAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgKiBDb3BpZXMgcHJvcGVydGllcyBpbnRvIHRoaXMgb2JqZWN0LlxuXHQgICAgICAgICAgICAgKlxuXHQgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyBUaGUgcHJvcGVydGllcyB0byBtaXggaW4uXG5cdCAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAqICAgICBNeVR5cGUubWl4SW4oe1xuXHQgICAgICAgICAgICAgKiAgICAgICAgIGZpZWxkOiAndmFsdWUnXG5cdCAgICAgICAgICAgICAqICAgICB9KTtcblx0ICAgICAgICAgICAgICovXG5cdCAgICAgICAgICAgIG1peEluOiBmdW5jdGlvbiAocHJvcGVydGllcykge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIHByb3BlcnRpZXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eU5hbWUpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcHJvcGVydHlOYW1lXSA9IHByb3BlcnRpZXNbcHJvcGVydHlOYW1lXTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgIC8vIElFIHdvbid0IGNvcHkgdG9TdHJpbmcgdXNpbmcgdGhlIGxvb3AgYWJvdmVcblx0ICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KCd0b1N0cmluZycpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy50b1N0cmluZyA9IHByb3BlcnRpZXMudG9TdHJpbmc7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cblx0ICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoaXMgb2JqZWN0LlxuXHQgICAgICAgICAgICAgKlxuXHQgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBjbG9uZS5cblx0ICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICogQGV4YW1wbGVcblx0ICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICogICAgIHZhciBjbG9uZSA9IGluc3RhbmNlLmNsb25lKCk7XG5cdCAgICAgICAgICAgICAqL1xuXHQgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgIH0oKSk7XG5cblx0ICAgIC8qKlxuXHQgICAgICogQW4gYXJyYXkgb2YgMzItYml0IHdvcmRzLlxuXHQgICAgICpcblx0ICAgICAqIEBwcm9wZXJ0eSB7QXJyYXl9IHdvcmRzIFRoZSBhcnJheSBvZiAzMi1iaXQgd29yZHMuXG5cdCAgICAgKiBAcHJvcGVydHkge251bWJlcn0gc2lnQnl0ZXMgVGhlIG51bWJlciBvZiBzaWduaWZpY2FudCBieXRlcyBpbiB0aGlzIHdvcmQgYXJyYXkuXG5cdCAgICAgKi9cblx0ICAgIHZhciBXb3JkQXJyYXkgPSBDX2xpYi5Xb3JkQXJyYXkgPSBCYXNlLmV4dGVuZCh7XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogSW5pdGlhbGl6ZXMgYSBuZXdseSBjcmVhdGVkIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSB3b3JkcyAoT3B0aW9uYWwpIEFuIGFycmF5IG9mIDMyLWJpdCB3b3Jkcy5cblx0ICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc2lnQnl0ZXMgKE9wdGlvbmFsKSBUaGUgbnVtYmVyIG9mIHNpZ25pZmljYW50IGJ5dGVzIGluIHRoZSB3b3Jkcy5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIHdvcmRBcnJheSA9IENyeXB0b0pTLmxpYi5Xb3JkQXJyYXkuY3JlYXRlKCk7XG5cdCAgICAgICAgICogICAgIHZhciB3b3JkQXJyYXkgPSBDcnlwdG9KUy5saWIuV29yZEFycmF5LmNyZWF0ZShbMHgwMDAxMDIwMywgMHgwNDA1MDYwN10pO1xuXHQgICAgICAgICAqICAgICB2YXIgd29yZEFycmF5ID0gQ3J5cHRvSlMubGliLldvcmRBcnJheS5jcmVhdGUoWzB4MDAwMTAyMDMsIDB4MDQwNTA2MDddLCA2KTtcblx0ICAgICAgICAgKi9cblx0ICAgICAgICBpbml0OiBmdW5jdGlvbiAod29yZHMsIHNpZ0J5dGVzKSB7XG5cdCAgICAgICAgICAgIHdvcmRzID0gdGhpcy53b3JkcyA9IHdvcmRzIHx8IFtdO1xuXG5cdCAgICAgICAgICAgIGlmIChzaWdCeXRlcyAhPSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc2lnQnl0ZXMgPSBzaWdCeXRlcztcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc2lnQnl0ZXMgPSB3b3Jkcy5sZW5ndGggKiA0O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSxcblxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENvbnZlcnRzIHRoaXMgd29yZCBhcnJheSB0byBhIHN0cmluZy5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7RW5jb2Rlcn0gZW5jb2RlciAoT3B0aW9uYWwpIFRoZSBlbmNvZGluZyBzdHJhdGVneSB0byB1c2UuIERlZmF1bHQ6IENyeXB0b0pTLmVuYy5IZXhcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHN0cmluZ2lmaWVkIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAZXhhbXBsZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogICAgIHZhciBzdHJpbmcgPSB3b3JkQXJyYXkgKyAnJztcblx0ICAgICAgICAgKiAgICAgdmFyIHN0cmluZyA9IHdvcmRBcnJheS50b1N0cmluZygpO1xuXHQgICAgICAgICAqICAgICB2YXIgc3RyaW5nID0gd29yZEFycmF5LnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KTtcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gKGVuY29kZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIChlbmNvZGVyIHx8IEhleCkuc3RyaW5naWZ5KHRoaXMpO1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDb25jYXRlbmF0ZXMgYSB3b3JkIGFycmF5IHRvIHRoaXMgd29yZCBhcnJheS5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7V29yZEFycmF5fSB3b3JkQXJyYXkgVGhlIHdvcmQgYXJyYXkgdG8gYXBwZW5kLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7V29yZEFycmF5fSBUaGlzIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAZXhhbXBsZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogICAgIHdvcmRBcnJheTEuY29uY2F0KHdvcmRBcnJheTIpO1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIGNvbmNhdDogZnVuY3Rpb24gKHdvcmRBcnJheSkge1xuXHQgICAgICAgICAgICAvLyBTaG9ydGN1dHNcblx0ICAgICAgICAgICAgdmFyIHRoaXNXb3JkcyA9IHRoaXMud29yZHM7XG5cdCAgICAgICAgICAgIHZhciB0aGF0V29yZHMgPSB3b3JkQXJyYXkud29yZHM7XG5cdCAgICAgICAgICAgIHZhciB0aGlzU2lnQnl0ZXMgPSB0aGlzLnNpZ0J5dGVzO1xuXHQgICAgICAgICAgICB2YXIgdGhhdFNpZ0J5dGVzID0gd29yZEFycmF5LnNpZ0J5dGVzO1xuXG5cdCAgICAgICAgICAgIC8vIENsYW1wIGV4Y2VzcyBiaXRzXG5cdCAgICAgICAgICAgIHRoaXMuY2xhbXAoKTtcblxuXHQgICAgICAgICAgICAvLyBDb25jYXRcblx0ICAgICAgICAgICAgaWYgKHRoaXNTaWdCeXRlcyAlIDQpIHtcblx0ICAgICAgICAgICAgICAgIC8vIENvcHkgb25lIGJ5dGUgYXQgYSB0aW1lXG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoYXRTaWdCeXRlczsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRoYXRCeXRlID0gKHRoYXRXb3Jkc1tpID4+PiAyXSA+Pj4gKDI0IC0gKGkgJSA0KSAqIDgpKSAmIDB4ZmY7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpc1dvcmRzWyh0aGlzU2lnQnl0ZXMgKyBpKSA+Pj4gMl0gfD0gdGhhdEJ5dGUgPDwgKDI0IC0gKCh0aGlzU2lnQnl0ZXMgKyBpKSAlIDQpICogOCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAvLyBDb3B5IG9uZSB3b3JkIGF0IGEgdGltZVxuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGF0U2lnQnl0ZXM7IGogKz0gNCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXNXb3Jkc1sodGhpc1NpZ0J5dGVzICsgaikgPj4+IDJdID0gdGhhdFdvcmRzW2ogPj4+IDJdO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuc2lnQnl0ZXMgKz0gdGhhdFNpZ0J5dGVzO1xuXG5cdCAgICAgICAgICAgIC8vIENoYWluYWJsZVxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9LFxuXG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogUmVtb3ZlcyBpbnNpZ25pZmljYW50IGJpdHMuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAZXhhbXBsZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogICAgIHdvcmRBcnJheS5jbGFtcCgpO1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIGNsYW1wOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIC8vIFNob3J0Y3V0c1xuXHQgICAgICAgICAgICB2YXIgd29yZHMgPSB0aGlzLndvcmRzO1xuXHQgICAgICAgICAgICB2YXIgc2lnQnl0ZXMgPSB0aGlzLnNpZ0J5dGVzO1xuXG5cdCAgICAgICAgICAgIC8vIENsYW1wXG5cdCAgICAgICAgICAgIHdvcmRzW3NpZ0J5dGVzID4+PiAyXSAmPSAweGZmZmZmZmZmIDw8ICgzMiAtIChzaWdCeXRlcyAlIDQpICogOCk7XG5cdCAgICAgICAgICAgIHdvcmRzLmxlbmd0aCA9IE1hdGguY2VpbChzaWdCeXRlcyAvIDQpO1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGEgY29weSBvZiB0aGlzIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcmV0dXJuIHtXb3JkQXJyYXl9IFRoZSBjbG9uZS5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIGNsb25lID0gd29yZEFycmF5LmNsb25lKCk7XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdmFyIGNsb25lID0gQmFzZS5jbG9uZS5jYWxsKHRoaXMpO1xuXHQgICAgICAgICAgICBjbG9uZS53b3JkcyA9IHRoaXMud29yZHMuc2xpY2UoMCk7XG5cblx0ICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGEgd29yZCBhcnJheSBmaWxsZWQgd2l0aCByYW5kb20gYnl0ZXMuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbkJ5dGVzIFRoZSBudW1iZXIgb2YgcmFuZG9tIGJ5dGVzIHRvIGdlbmVyYXRlLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7V29yZEFycmF5fSBUaGUgcmFuZG9tIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAc3RhdGljXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAZXhhbXBsZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogICAgIHZhciB3b3JkQXJyYXkgPSBDcnlwdG9KUy5saWIuV29yZEFycmF5LnJhbmRvbSgxNik7XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgcmFuZG9tOiBmdW5jdGlvbiAobkJ5dGVzKSB7XG5cdCAgICAgICAgICAgIHZhciB3b3JkcyA9IFtdO1xuXG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbkJ5dGVzOyBpICs9IDQpIHtcblx0ICAgICAgICAgICAgICAgIHdvcmRzLnB1c2goY3J5cHRvU2VjdXJlUmFuZG9tSW50KCkpO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBXb3JkQXJyYXkuaW5pdCh3b3JkcywgbkJ5dGVzKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBFbmNvZGVyIG5hbWVzcGFjZS5cblx0ICAgICAqL1xuXHQgICAgdmFyIENfZW5jID0gQy5lbmMgPSB7fTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBIZXggZW5jb2Rpbmcgc3RyYXRlZ3kuXG5cdCAgICAgKi9cblx0ICAgIHZhciBIZXggPSBDX2VuYy5IZXggPSB7XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ29udmVydHMgYSB3b3JkIGFycmF5IHRvIGEgaGV4IHN0cmluZy5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7V29yZEFycmF5fSB3b3JkQXJyYXkgVGhlIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBoZXggc3RyaW5nLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHN0YXRpY1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQGV4YW1wbGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqICAgICB2YXIgaGV4U3RyaW5nID0gQ3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkod29yZEFycmF5KTtcblx0ICAgICAgICAgKi9cblx0ICAgICAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uICh3b3JkQXJyYXkpIHtcblx0ICAgICAgICAgICAgLy8gU2hvcnRjdXRzXG5cdCAgICAgICAgICAgIHZhciB3b3JkcyA9IHdvcmRBcnJheS53b3Jkcztcblx0ICAgICAgICAgICAgdmFyIHNpZ0J5dGVzID0gd29yZEFycmF5LnNpZ0J5dGVzO1xuXG5cdCAgICAgICAgICAgIC8vIENvbnZlcnRcblx0ICAgICAgICAgICAgdmFyIGhleENoYXJzID0gW107XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2lnQnl0ZXM7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgdmFyIGJpdGUgPSAod29yZHNbaSA+Pj4gMl0gPj4+ICgyNCAtIChpICUgNCkgKiA4KSkgJiAweGZmO1xuXHQgICAgICAgICAgICAgICAgaGV4Q2hhcnMucHVzaCgoYml0ZSA+Pj4gNCkudG9TdHJpbmcoMTYpKTtcblx0ICAgICAgICAgICAgICAgIGhleENoYXJzLnB1c2goKGJpdGUgJiAweDBmKS50b1N0cmluZygxNikpO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgcmV0dXJuIGhleENoYXJzLmpvaW4oJycpO1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDb252ZXJ0cyBhIGhleCBzdHJpbmcgdG8gYSB3b3JkIGFycmF5LlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGhleFN0ciBUaGUgaGV4IHN0cmluZy5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEByZXR1cm4ge1dvcmRBcnJheX0gVGhlIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAc3RhdGljXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAZXhhbXBsZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogICAgIHZhciB3b3JkQXJyYXkgPSBDcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGhleFN0cmluZyk7XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChoZXhTdHIpIHtcblx0ICAgICAgICAgICAgLy8gU2hvcnRjdXRcblx0ICAgICAgICAgICAgdmFyIGhleFN0ckxlbmd0aCA9IGhleFN0ci5sZW5ndGg7XG5cblx0ICAgICAgICAgICAgLy8gQ29udmVydFxuXHQgICAgICAgICAgICB2YXIgd29yZHMgPSBbXTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZXhTdHJMZW5ndGg7IGkgKz0gMikge1xuXHQgICAgICAgICAgICAgICAgd29yZHNbaSA+Pj4gM10gfD0gcGFyc2VJbnQoaGV4U3RyLnN1YnN0cihpLCAyKSwgMTYpIDw8ICgyNCAtIChpICUgOCkgKiA0KTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgV29yZEFycmF5LmluaXQod29yZHMsIGhleFN0ckxlbmd0aCAvIDIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cblx0ICAgIC8qKlxuXHQgICAgICogTGF0aW4xIGVuY29kaW5nIHN0cmF0ZWd5LlxuXHQgICAgICovXG5cdCAgICB2YXIgTGF0aW4xID0gQ19lbmMuTGF0aW4xID0ge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENvbnZlcnRzIGEgd29yZCBhcnJheSB0byBhIExhdGluMSBzdHJpbmcuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1dvcmRBcnJheX0gd29yZEFycmF5IFRoZSB3b3JkIGFycmF5LlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgTGF0aW4xIHN0cmluZy5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBzdGF0aWNcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIGxhdGluMVN0cmluZyA9IENyeXB0b0pTLmVuYy5MYXRpbjEuc3RyaW5naWZ5KHdvcmRBcnJheSk7XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbiAod29yZEFycmF5KSB7XG5cdCAgICAgICAgICAgIC8vIFNob3J0Y3V0c1xuXHQgICAgICAgICAgICB2YXIgd29yZHMgPSB3b3JkQXJyYXkud29yZHM7XG5cdCAgICAgICAgICAgIHZhciBzaWdCeXRlcyA9IHdvcmRBcnJheS5zaWdCeXRlcztcblxuXHQgICAgICAgICAgICAvLyBDb252ZXJ0XG5cdCAgICAgICAgICAgIHZhciBsYXRpbjFDaGFycyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpZ0J5dGVzOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBiaXRlID0gKHdvcmRzW2kgPj4+IDJdID4+PiAoMjQgLSAoaSAlIDQpICogOCkpICYgMHhmZjtcblx0ICAgICAgICAgICAgICAgIGxhdGluMUNoYXJzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShiaXRlKSk7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICByZXR1cm4gbGF0aW4xQ2hhcnMuam9pbignJyk7XG5cdCAgICAgICAgfSxcblxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENvbnZlcnRzIGEgTGF0aW4xIHN0cmluZyB0byBhIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGF0aW4xU3RyIFRoZSBMYXRpbjEgc3RyaW5nLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7V29yZEFycmF5fSBUaGUgd29yZCBhcnJheS5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBzdGF0aWNcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIHdvcmRBcnJheSA9IENyeXB0b0pTLmVuYy5MYXRpbjEucGFyc2UobGF0aW4xU3RyaW5nKTtcblx0ICAgICAgICAgKi9cblx0ICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGxhdGluMVN0cikge1xuXHQgICAgICAgICAgICAvLyBTaG9ydGN1dFxuXHQgICAgICAgICAgICB2YXIgbGF0aW4xU3RyTGVuZ3RoID0gbGF0aW4xU3RyLmxlbmd0aDtcblxuXHQgICAgICAgICAgICAvLyBDb252ZXJ0XG5cdCAgICAgICAgICAgIHZhciB3b3JkcyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhdGluMVN0ckxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB3b3Jkc1tpID4+PiAyXSB8PSAobGF0aW4xU3RyLmNoYXJDb2RlQXQoaSkgJiAweGZmKSA8PCAoMjQgLSAoaSAlIDQpICogOCk7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICByZXR1cm4gbmV3IFdvcmRBcnJheS5pbml0KHdvcmRzLCBsYXRpbjFTdHJMZW5ndGgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cblx0ICAgIC8qKlxuXHQgICAgICogVVRGLTggZW5jb2Rpbmcgc3RyYXRlZ3kuXG5cdCAgICAgKi9cblx0ICAgIHZhciBVdGY4ID0gQ19lbmMuVXRmOCA9IHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDb252ZXJ0cyBhIHdvcmQgYXJyYXkgdG8gYSBVVEYtOCBzdHJpbmcuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1dvcmRBcnJheX0gd29yZEFycmF5IFRoZSB3b3JkIGFycmF5LlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgVVRGLTggc3RyaW5nLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHN0YXRpY1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQGV4YW1wbGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqICAgICB2YXIgdXRmOFN0cmluZyA9IENyeXB0b0pTLmVuYy5VdGY4LnN0cmluZ2lmeSh3b3JkQXJyYXkpO1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHN0cmluZ2lmeTogZnVuY3Rpb24gKHdvcmRBcnJheSkge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoTGF0aW4xLnN0cmluZ2lmeSh3b3JkQXJyYXkpKSk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWFsZm9ybWVkIFVURi04IGRhdGEnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDb252ZXJ0cyBhIFVURi04IHN0cmluZyB0byBhIHdvcmQgYXJyYXkuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXRmOFN0ciBUaGUgVVRGLTggc3RyaW5nLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7V29yZEFycmF5fSBUaGUgd29yZCBhcnJheS5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBzdGF0aWNcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIHdvcmRBcnJheSA9IENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHV0ZjhTdHJpbmcpO1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHBhcnNlOiBmdW5jdGlvbiAodXRmOFN0cikge1xuXHQgICAgICAgICAgICByZXR1cm4gTGF0aW4xLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudCh1dGY4U3RyKSkpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cblx0ICAgIC8qKlxuXHQgICAgICogQWJzdHJhY3QgYnVmZmVyZWQgYmxvY2sgYWxnb3JpdGhtIHRlbXBsYXRlLlxuXHQgICAgICpcblx0ICAgICAqIFRoZSBwcm9wZXJ0eSBibG9ja1NpemUgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBhIGNvbmNyZXRlIHN1YnR5cGUuXG5cdCAgICAgKlxuXHQgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IF9taW5CdWZmZXJTaXplIFRoZSBudW1iZXIgb2YgYmxvY2tzIHRoYXQgc2hvdWxkIGJlIGtlcHQgdW5wcm9jZXNzZWQgaW4gdGhlIGJ1ZmZlci4gRGVmYXVsdDogMFxuXHQgICAgICovXG5cdCAgICB2YXIgQnVmZmVyZWRCbG9ja0FsZ29yaXRobSA9IENfbGliLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0gPSBCYXNlLmV4dGVuZCh7XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogUmVzZXRzIHRoaXMgYmxvY2sgYWxnb3JpdGhtJ3MgZGF0YSBidWZmZXIgdG8gaXRzIGluaXRpYWwgc3RhdGUuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAZXhhbXBsZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogICAgIGJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0ucmVzZXQoKTtcblx0ICAgICAgICAgKi9cblx0ICAgICAgICByZXNldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyBJbml0aWFsIHZhbHVlc1xuXHQgICAgICAgICAgICB0aGlzLl9kYXRhID0gbmV3IFdvcmRBcnJheS5pbml0KCk7XG5cdCAgICAgICAgICAgIHRoaXMuX25EYXRhQnl0ZXMgPSAwO1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBBZGRzIG5ldyBkYXRhIHRvIHRoaXMgYmxvY2sgYWxnb3JpdGhtJ3MgYnVmZmVyLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtXb3JkQXJyYXl8c3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGFwcGVuZC4gU3RyaW5ncyBhcmUgY29udmVydGVkIHRvIGEgV29yZEFycmF5IHVzaW5nIFVURi04LlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQGV4YW1wbGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqICAgICBidWZmZXJlZEJsb2NrQWxnb3JpdGhtLl9hcHBlbmQoJ2RhdGEnKTtcblx0ICAgICAgICAgKiAgICAgYnVmZmVyZWRCbG9ja0FsZ29yaXRobS5fYXBwZW5kKHdvcmRBcnJheSk7XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgX2FwcGVuZDogZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICAgICAgLy8gQ29udmVydCBzdHJpbmcgdG8gV29yZEFycmF5LCBlbHNlIGFzc3VtZSBXb3JkQXJyYXkgYWxyZWFkeVxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgICAgIGRhdGEgPSBVdGY4LnBhcnNlKGRhdGEpO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgLy8gQXBwZW5kXG5cdCAgICAgICAgICAgIHRoaXMuX2RhdGEuY29uY2F0KGRhdGEpO1xuXHQgICAgICAgICAgICB0aGlzLl9uRGF0YUJ5dGVzICs9IGRhdGEuc2lnQnl0ZXM7XG5cdCAgICAgICAgfSxcblxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFByb2Nlc3NlcyBhdmFpbGFibGUgZGF0YSBibG9ja3MuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBUaGlzIG1ldGhvZCBpbnZva2VzIF9kb1Byb2Nlc3NCbG9jayhvZmZzZXQpLCB3aGljaCBtdXN0IGJlIGltcGxlbWVudGVkIGJ5IGEgY29uY3JldGUgc3VidHlwZS5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZG9GbHVzaCBXaGV0aGVyIGFsbCBibG9ja3MgYW5kIHBhcnRpYWwgYmxvY2tzIHNob3VsZCBiZSBwcm9jZXNzZWQuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcmV0dXJuIHtXb3JkQXJyYXl9IFRoZSBwcm9jZXNzZWQgZGF0YS5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIHByb2Nlc3NlZERhdGEgPSBidWZmZXJlZEJsb2NrQWxnb3JpdGhtLl9wcm9jZXNzKCk7XG5cdCAgICAgICAgICogICAgIHZhciBwcm9jZXNzZWREYXRhID0gYnVmZmVyZWRCbG9ja0FsZ29yaXRobS5fcHJvY2VzcyghISdmbHVzaCcpO1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIF9wcm9jZXNzOiBmdW5jdGlvbiAoZG9GbHVzaCkge1xuXHQgICAgICAgICAgICB2YXIgcHJvY2Vzc2VkV29yZHM7XG5cblx0ICAgICAgICAgICAgLy8gU2hvcnRjdXRzXG5cdCAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YTtcblx0ICAgICAgICAgICAgdmFyIGRhdGFXb3JkcyA9IGRhdGEud29yZHM7XG5cdCAgICAgICAgICAgIHZhciBkYXRhU2lnQnl0ZXMgPSBkYXRhLnNpZ0J5dGVzO1xuXHQgICAgICAgICAgICB2YXIgYmxvY2tTaXplID0gdGhpcy5ibG9ja1NpemU7XG5cdCAgICAgICAgICAgIHZhciBibG9ja1NpemVCeXRlcyA9IGJsb2NrU2l6ZSAqIDQ7XG5cblx0ICAgICAgICAgICAgLy8gQ291bnQgYmxvY2tzIHJlYWR5XG5cdCAgICAgICAgICAgIHZhciBuQmxvY2tzUmVhZHkgPSBkYXRhU2lnQnl0ZXMgLyBibG9ja1NpemVCeXRlcztcblx0ICAgICAgICAgICAgaWYgKGRvRmx1c2gpIHtcblx0ICAgICAgICAgICAgICAgIC8vIFJvdW5kIHVwIHRvIGluY2x1ZGUgcGFydGlhbCBibG9ja3Ncblx0ICAgICAgICAgICAgICAgIG5CbG9ja3NSZWFkeSA9IE1hdGguY2VpbChuQmxvY2tzUmVhZHkpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgLy8gUm91bmQgZG93biB0byBpbmNsdWRlIG9ubHkgZnVsbCBibG9ja3MsXG5cdCAgICAgICAgICAgICAgICAvLyBsZXNzIHRoZSBudW1iZXIgb2YgYmxvY2tzIHRoYXQgbXVzdCByZW1haW4gaW4gdGhlIGJ1ZmZlclxuXHQgICAgICAgICAgICAgICAgbkJsb2Nrc1JlYWR5ID0gTWF0aC5tYXgoKG5CbG9ja3NSZWFkeSB8IDApIC0gdGhpcy5fbWluQnVmZmVyU2l6ZSwgMCk7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAvLyBDb3VudCB3b3JkcyByZWFkeVxuXHQgICAgICAgICAgICB2YXIgbldvcmRzUmVhZHkgPSBuQmxvY2tzUmVhZHkgKiBibG9ja1NpemU7XG5cblx0ICAgICAgICAgICAgLy8gQ291bnQgYnl0ZXMgcmVhZHlcblx0ICAgICAgICAgICAgdmFyIG5CeXRlc1JlYWR5ID0gTWF0aC5taW4obldvcmRzUmVhZHkgKiA0LCBkYXRhU2lnQnl0ZXMpO1xuXG5cdCAgICAgICAgICAgIC8vIFByb2Nlc3MgYmxvY2tzXG5cdCAgICAgICAgICAgIGlmIChuV29yZHNSZWFkeSkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgbldvcmRzUmVhZHk7IG9mZnNldCArPSBibG9ja1NpemUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIGNvbmNyZXRlLWFsZ29yaXRobSBsb2dpY1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RvUHJvY2Vzc0Jsb2NrKGRhdGFXb3Jkcywgb2Zmc2V0KTtcblx0ICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHByb2Nlc3NlZCB3b3Jkc1xuXHQgICAgICAgICAgICAgICAgcHJvY2Vzc2VkV29yZHMgPSBkYXRhV29yZHMuc3BsaWNlKDAsIG5Xb3Jkc1JlYWR5KTtcblx0ICAgICAgICAgICAgICAgIGRhdGEuc2lnQnl0ZXMgLT0gbkJ5dGVzUmVhZHk7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAvLyBSZXR1cm4gcHJvY2Vzc2VkIHdvcmRzXG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgV29yZEFycmF5LmluaXQocHJvY2Vzc2VkV29yZHMsIG5CeXRlc1JlYWR5KTtcblx0ICAgICAgICB9LFxuXG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhpcyBvYmplY3QuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBjbG9uZS5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIGNsb25lID0gYnVmZmVyZWRCbG9ja0FsZ29yaXRobS5jbG9uZSgpO1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHZhciBjbG9uZSA9IEJhc2UuY2xvbmUuY2FsbCh0aGlzKTtcblx0ICAgICAgICAgICAgY2xvbmUuX2RhdGEgPSB0aGlzLl9kYXRhLmNsb25lKCk7XG5cblx0ICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICBfbWluQnVmZmVyU2l6ZTogMFxuXHQgICAgfSk7XG5cblx0ICAgIC8qKlxuXHQgICAgICogQWJzdHJhY3QgaGFzaGVyIHRlbXBsYXRlLlxuXHQgICAgICpcblx0ICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBibG9ja1NpemUgVGhlIG51bWJlciBvZiAzMi1iaXQgd29yZHMgdGhpcyBoYXNoZXIgb3BlcmF0ZXMgb24uIERlZmF1bHQ6IDE2ICg1MTIgYml0cylcblx0ICAgICAqL1xuXHQgICAgdmFyIEhhc2hlciA9IENfbGliLkhhc2hlciA9IEJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0uZXh0ZW5kKHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG5cdCAgICAgICAgICovXG5cdCAgICAgICAgY2ZnOiBCYXNlLmV4dGVuZCgpLFxuXG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogSW5pdGlhbGl6ZXMgYSBuZXdseSBjcmVhdGVkIGhhc2hlci5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjZmcgKE9wdGlvbmFsKSBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIHRvIHVzZSBmb3IgdGhpcyBoYXNoIGNvbXB1dGF0aW9uLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQGV4YW1wbGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqICAgICB2YXIgaGFzaGVyID0gQ3J5cHRvSlMuYWxnby5TSEEyNTYuY3JlYXRlKCk7XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgaW5pdDogZnVuY3Rpb24gKGNmZykge1xuXHQgICAgICAgICAgICAvLyBBcHBseSBjb25maWcgZGVmYXVsdHNcblx0ICAgICAgICAgICAgdGhpcy5jZmcgPSB0aGlzLmNmZy5leHRlbmQoY2ZnKTtcblxuXHQgICAgICAgICAgICAvLyBTZXQgaW5pdGlhbCB2YWx1ZXNcblx0ICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBSZXNldHMgdGhpcyBoYXNoZXIgdG8gaXRzIGluaXRpYWwgc3RhdGUuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAZXhhbXBsZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogICAgIGhhc2hlci5yZXNldCgpO1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIC8vIFJlc2V0IGRhdGEgYnVmZmVyXG5cdCAgICAgICAgICAgIEJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0ucmVzZXQuY2FsbCh0aGlzKTtcblxuXHQgICAgICAgICAgICAvLyBQZXJmb3JtIGNvbmNyZXRlLWhhc2hlciBsb2dpY1xuXHQgICAgICAgICAgICB0aGlzLl9kb1Jlc2V0KCk7XG5cdCAgICAgICAgfSxcblxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFVwZGF0ZXMgdGhpcyBoYXNoZXIgd2l0aCBhIG1lc3NhZ2UuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1dvcmRBcnJheXxzdHJpbmd9IG1lc3NhZ2VVcGRhdGUgVGhlIG1lc3NhZ2UgdG8gYXBwZW5kLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7SGFzaGVyfSBUaGlzIGhhc2hlci5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgaGFzaGVyLnVwZGF0ZSgnbWVzc2FnZScpO1xuXHQgICAgICAgICAqICAgICBoYXNoZXIudXBkYXRlKHdvcmRBcnJheSk7XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAobWVzc2FnZVVwZGF0ZSkge1xuXHQgICAgICAgICAgICAvLyBBcHBlbmRcblx0ICAgICAgICAgICAgdGhpcy5fYXBwZW5kKG1lc3NhZ2VVcGRhdGUpO1xuXG5cdCAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgaGFzaFxuXHQgICAgICAgICAgICB0aGlzLl9wcm9jZXNzKCk7XG5cblx0ICAgICAgICAgICAgLy8gQ2hhaW5hYmxlXG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBGaW5hbGl6ZXMgdGhlIGhhc2ggY29tcHV0YXRpb24uXG5cdCAgICAgICAgICogTm90ZSB0aGF0IHRoZSBmaW5hbGl6ZSBvcGVyYXRpb24gaXMgZWZmZWN0aXZlbHkgYSBkZXN0cnVjdGl2ZSwgcmVhZC1vbmNlIG9wZXJhdGlvbi5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7V29yZEFycmF5fHN0cmluZ30gbWVzc2FnZVVwZGF0ZSAoT3B0aW9uYWwpIEEgZmluYWwgbWVzc2FnZSB1cGRhdGUuXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcmV0dXJuIHtXb3JkQXJyYXl9IFRoZSBoYXNoLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQGV4YW1wbGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqICAgICB2YXIgaGFzaCA9IGhhc2hlci5maW5hbGl6ZSgpO1xuXHQgICAgICAgICAqICAgICB2YXIgaGFzaCA9IGhhc2hlci5maW5hbGl6ZSgnbWVzc2FnZScpO1xuXHQgICAgICAgICAqICAgICB2YXIgaGFzaCA9IGhhc2hlci5maW5hbGl6ZSh3b3JkQXJyYXkpO1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIGZpbmFsaXplOiBmdW5jdGlvbiAobWVzc2FnZVVwZGF0ZSkge1xuXHQgICAgICAgICAgICAvLyBGaW5hbCBtZXNzYWdlIHVwZGF0ZVxuXHQgICAgICAgICAgICBpZiAobWVzc2FnZVVwZGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5fYXBwZW5kKG1lc3NhZ2VVcGRhdGUpO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgLy8gUGVyZm9ybSBjb25jcmV0ZS1oYXNoZXIgbG9naWNcblx0ICAgICAgICAgICAgdmFyIGhhc2ggPSB0aGlzLl9kb0ZpbmFsaXplKCk7XG5cblx0ICAgICAgICAgICAgcmV0dXJuIGhhc2g7XG5cdCAgICAgICAgfSxcblxuXHQgICAgICAgIGJsb2NrU2l6ZTogNTEyLzMyLFxuXG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ3JlYXRlcyBhIHNob3J0Y3V0IGZ1bmN0aW9uIHRvIGEgaGFzaGVyJ3Mgb2JqZWN0IGludGVyZmFjZS5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7SGFzaGVyfSBoYXNoZXIgVGhlIGhhc2hlciB0byBjcmVhdGUgYSBoZWxwZXIgZm9yLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBzaG9ydGN1dCBmdW5jdGlvbi5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBzdGF0aWNcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIFNIQTI1NiA9IENyeXB0b0pTLmxpYi5IYXNoZXIuX2NyZWF0ZUhlbHBlcihDcnlwdG9KUy5hbGdvLlNIQTI1Nik7XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgX2NyZWF0ZUhlbHBlcjogZnVuY3Rpb24gKGhhc2hlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1lc3NhZ2UsIGNmZykge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBoYXNoZXIuaW5pdChjZmcpLmZpbmFsaXplKG1lc3NhZ2UpO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH0sXG5cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGEgc2hvcnRjdXQgZnVuY3Rpb24gdG8gdGhlIEhNQUMncyBvYmplY3QgaW50ZXJmYWNlLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtIYXNoZXJ9IGhhc2hlciBUaGUgaGFzaGVyIHRvIHVzZSBpbiB0aGlzIEhNQUMgaGVscGVyLlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBzaG9ydGN1dCBmdW5jdGlvbi5cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBzdGF0aWNcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBleGFtcGxlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiAgICAgdmFyIEhtYWNTSEEyNTYgPSBDcnlwdG9KUy5saWIuSGFzaGVyLl9jcmVhdGVIbWFjSGVscGVyKENyeXB0b0pTLmFsZ28uU0hBMjU2KTtcblx0ICAgICAgICAgKi9cblx0ICAgICAgICBfY3JlYXRlSG1hY0hlbHBlcjogZnVuY3Rpb24gKGhhc2hlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1lc3NhZ2UsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDX2FsZ28uSE1BQy5pbml0KGhhc2hlciwga2V5KS5maW5hbGl6ZShtZXNzYWdlKTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBBbGdvcml0aG0gbmFtZXNwYWNlLlxuXHQgICAgICovXG5cdCAgICB2YXIgQ19hbGdvID0gQy5hbGdvID0ge307XG5cblx0ICAgIHJldHVybiBDO1xuXHR9KE1hdGgpKTtcblxuXG5cdHJldHVybiBDcnlwdG9KUztcblxufSkpOyIsICI7KGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG5cdGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuXHRcdC8vIENvbW1vbkpTXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiLi9jb3JlXCIpKTtcblx0fVxuXHRlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIEFNRFxuXHRcdGRlZmluZShbXCIuL2NvcmVcIl0sIGZhY3RvcnkpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdC8vIEdsb2JhbCAoYnJvd3Nlcilcblx0XHRmYWN0b3J5KHJvb3QuQ3J5cHRvSlMpO1xuXHR9XG59KHRoaXMsIGZ1bmN0aW9uIChDcnlwdG9KUykge1xuXG5cdChmdW5jdGlvbiAoTWF0aCkge1xuXHQgICAgLy8gU2hvcnRjdXRzXG5cdCAgICB2YXIgQyA9IENyeXB0b0pTO1xuXHQgICAgdmFyIENfbGliID0gQy5saWI7XG5cdCAgICB2YXIgV29yZEFycmF5ID0gQ19saWIuV29yZEFycmF5O1xuXHQgICAgdmFyIEhhc2hlciA9IENfbGliLkhhc2hlcjtcblx0ICAgIHZhciBDX2FsZ28gPSBDLmFsZ287XG5cblx0ICAgIC8vIENvbnN0YW50cyB0YWJsZVxuXHQgICAgdmFyIFQgPSBbXTtcblxuXHQgICAgLy8gQ29tcHV0ZSBjb25zdGFudHNcblx0ICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2NDsgaSsrKSB7XG5cdCAgICAgICAgICAgIFRbaV0gPSAoTWF0aC5hYnMoTWF0aC5zaW4oaSArIDEpKSAqIDB4MTAwMDAwMDAwKSB8IDA7XG5cdCAgICAgICAgfVxuXHQgICAgfSgpKTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBNRDUgaGFzaCBhbGdvcml0aG0uXG5cdCAgICAgKi9cblx0ICAgIHZhciBNRDUgPSBDX2FsZ28uTUQ1ID0gSGFzaGVyLmV4dGVuZCh7XG5cdCAgICAgICAgX2RvUmVzZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdGhpcy5faGFzaCA9IG5ldyBXb3JkQXJyYXkuaW5pdChbXG5cdCAgICAgICAgICAgICAgICAweDY3NDUyMzAxLCAweGVmY2RhYjg5LFxuXHQgICAgICAgICAgICAgICAgMHg5OGJhZGNmZSwgMHgxMDMyNTQ3NlxuXHQgICAgICAgICAgICBdKTtcblx0ICAgICAgICB9LFxuXG5cdCAgICAgICAgX2RvUHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbiAoTSwgb2Zmc2V0KSB7XG5cdCAgICAgICAgICAgIC8vIFN3YXAgZW5kaWFuXG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgLy8gU2hvcnRjdXRzXG5cdCAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0X2kgPSBvZmZzZXQgKyBpO1xuXHQgICAgICAgICAgICAgICAgdmFyIE1fb2Zmc2V0X2kgPSBNW29mZnNldF9pXTtcblxuXHQgICAgICAgICAgICAgICAgTVtvZmZzZXRfaV0gPSAoXG5cdCAgICAgICAgICAgICAgICAgICAgKCgoTV9vZmZzZXRfaSA8PCA4KSAgfCAoTV9vZmZzZXRfaSA+Pj4gMjQpKSAmIDB4MDBmZjAwZmYpIHxcblx0ICAgICAgICAgICAgICAgICAgICAoKChNX29mZnNldF9pIDw8IDI0KSB8IChNX29mZnNldF9pID4+PiA4KSkgICYgMHhmZjAwZmYwMClcblx0ICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAvLyBTaG9ydGN1dHNcblx0ICAgICAgICAgICAgdmFyIEggPSB0aGlzLl9oYXNoLndvcmRzO1xuXG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF8wICA9IE1bb2Zmc2V0ICsgMF07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF8xICA9IE1bb2Zmc2V0ICsgMV07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF8yICA9IE1bb2Zmc2V0ICsgMl07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF8zICA9IE1bb2Zmc2V0ICsgM107XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF80ICA9IE1bb2Zmc2V0ICsgNF07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF81ICA9IE1bb2Zmc2V0ICsgNV07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF82ICA9IE1bb2Zmc2V0ICsgNl07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF83ICA9IE1bb2Zmc2V0ICsgN107XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF84ICA9IE1bb2Zmc2V0ICsgOF07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF85ICA9IE1bb2Zmc2V0ICsgOV07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF8xMCA9IE1bb2Zmc2V0ICsgMTBdO1xuXHQgICAgICAgICAgICB2YXIgTV9vZmZzZXRfMTEgPSBNW29mZnNldCArIDExXTtcblx0ICAgICAgICAgICAgdmFyIE1fb2Zmc2V0XzEyID0gTVtvZmZzZXQgKyAxMl07XG5cdCAgICAgICAgICAgIHZhciBNX29mZnNldF8xMyA9IE1bb2Zmc2V0ICsgMTNdO1xuXHQgICAgICAgICAgICB2YXIgTV9vZmZzZXRfMTQgPSBNW29mZnNldCArIDE0XTtcblx0ICAgICAgICAgICAgdmFyIE1fb2Zmc2V0XzE1ID0gTVtvZmZzZXQgKyAxNV07XG5cblx0ICAgICAgICAgICAgLy8gV29ya2luZyB2YXJpYWJsZXNcblx0ICAgICAgICAgICAgdmFyIGEgPSBIWzBdO1xuXHQgICAgICAgICAgICB2YXIgYiA9IEhbMV07XG5cdCAgICAgICAgICAgIHZhciBjID0gSFsyXTtcblx0ICAgICAgICAgICAgdmFyIGQgPSBIWzNdO1xuXG5cdCAgICAgICAgICAgIC8vIENvbXB1dGF0aW9uXG5cdCAgICAgICAgICAgIGEgPSBGRihhLCBiLCBjLCBkLCBNX29mZnNldF8wLCAgNywgIFRbMF0pO1xuXHQgICAgICAgICAgICBkID0gRkYoZCwgYSwgYiwgYywgTV9vZmZzZXRfMSwgIDEyLCBUWzFdKTtcblx0ICAgICAgICAgICAgYyA9IEZGKGMsIGQsIGEsIGIsIE1fb2Zmc2V0XzIsICAxNywgVFsyXSk7XG5cdCAgICAgICAgICAgIGIgPSBGRihiLCBjLCBkLCBhLCBNX29mZnNldF8zLCAgMjIsIFRbM10pO1xuXHQgICAgICAgICAgICBhID0gRkYoYSwgYiwgYywgZCwgTV9vZmZzZXRfNCwgIDcsICBUWzRdKTtcblx0ICAgICAgICAgICAgZCA9IEZGKGQsIGEsIGIsIGMsIE1fb2Zmc2V0XzUsICAxMiwgVFs1XSk7XG5cdCAgICAgICAgICAgIGMgPSBGRihjLCBkLCBhLCBiLCBNX29mZnNldF82LCAgMTcsIFRbNl0pO1xuXHQgICAgICAgICAgICBiID0gRkYoYiwgYywgZCwgYSwgTV9vZmZzZXRfNywgIDIyLCBUWzddKTtcblx0ICAgICAgICAgICAgYSA9IEZGKGEsIGIsIGMsIGQsIE1fb2Zmc2V0XzgsICA3LCAgVFs4XSk7XG5cdCAgICAgICAgICAgIGQgPSBGRihkLCBhLCBiLCBjLCBNX29mZnNldF85LCAgMTIsIFRbOV0pO1xuXHQgICAgICAgICAgICBjID0gRkYoYywgZCwgYSwgYiwgTV9vZmZzZXRfMTAsIDE3LCBUWzEwXSk7XG5cdCAgICAgICAgICAgIGIgPSBGRihiLCBjLCBkLCBhLCBNX29mZnNldF8xMSwgMjIsIFRbMTFdKTtcblx0ICAgICAgICAgICAgYSA9IEZGKGEsIGIsIGMsIGQsIE1fb2Zmc2V0XzEyLCA3LCAgVFsxMl0pO1xuXHQgICAgICAgICAgICBkID0gRkYoZCwgYSwgYiwgYywgTV9vZmZzZXRfMTMsIDEyLCBUWzEzXSk7XG5cdCAgICAgICAgICAgIGMgPSBGRihjLCBkLCBhLCBiLCBNX29mZnNldF8xNCwgMTcsIFRbMTRdKTtcblx0ICAgICAgICAgICAgYiA9IEZGKGIsIGMsIGQsIGEsIE1fb2Zmc2V0XzE1LCAyMiwgVFsxNV0pO1xuXG5cdCAgICAgICAgICAgIGEgPSBHRyhhLCBiLCBjLCBkLCBNX29mZnNldF8xLCAgNSwgIFRbMTZdKTtcblx0ICAgICAgICAgICAgZCA9IEdHKGQsIGEsIGIsIGMsIE1fb2Zmc2V0XzYsICA5LCAgVFsxN10pO1xuXHQgICAgICAgICAgICBjID0gR0coYywgZCwgYSwgYiwgTV9vZmZzZXRfMTEsIDE0LCBUWzE4XSk7XG5cdCAgICAgICAgICAgIGIgPSBHRyhiLCBjLCBkLCBhLCBNX29mZnNldF8wLCAgMjAsIFRbMTldKTtcblx0ICAgICAgICAgICAgYSA9IEdHKGEsIGIsIGMsIGQsIE1fb2Zmc2V0XzUsICA1LCAgVFsyMF0pO1xuXHQgICAgICAgICAgICBkID0gR0coZCwgYSwgYiwgYywgTV9vZmZzZXRfMTAsIDksICBUWzIxXSk7XG5cdCAgICAgICAgICAgIGMgPSBHRyhjLCBkLCBhLCBiLCBNX29mZnNldF8xNSwgMTQsIFRbMjJdKTtcblx0ICAgICAgICAgICAgYiA9IEdHKGIsIGMsIGQsIGEsIE1fb2Zmc2V0XzQsICAyMCwgVFsyM10pO1xuXHQgICAgICAgICAgICBhID0gR0coYSwgYiwgYywgZCwgTV9vZmZzZXRfOSwgIDUsICBUWzI0XSk7XG5cdCAgICAgICAgICAgIGQgPSBHRyhkLCBhLCBiLCBjLCBNX29mZnNldF8xNCwgOSwgIFRbMjVdKTtcblx0ICAgICAgICAgICAgYyA9IEdHKGMsIGQsIGEsIGIsIE1fb2Zmc2V0XzMsICAxNCwgVFsyNl0pO1xuXHQgICAgICAgICAgICBiID0gR0coYiwgYywgZCwgYSwgTV9vZmZzZXRfOCwgIDIwLCBUWzI3XSk7XG5cdCAgICAgICAgICAgIGEgPSBHRyhhLCBiLCBjLCBkLCBNX29mZnNldF8xMywgNSwgIFRbMjhdKTtcblx0ICAgICAgICAgICAgZCA9IEdHKGQsIGEsIGIsIGMsIE1fb2Zmc2V0XzIsICA5LCAgVFsyOV0pO1xuXHQgICAgICAgICAgICBjID0gR0coYywgZCwgYSwgYiwgTV9vZmZzZXRfNywgIDE0LCBUWzMwXSk7XG5cdCAgICAgICAgICAgIGIgPSBHRyhiLCBjLCBkLCBhLCBNX29mZnNldF8xMiwgMjAsIFRbMzFdKTtcblxuXHQgICAgICAgICAgICBhID0gSEgoYSwgYiwgYywgZCwgTV9vZmZzZXRfNSwgIDQsICBUWzMyXSk7XG5cdCAgICAgICAgICAgIGQgPSBISChkLCBhLCBiLCBjLCBNX29mZnNldF84LCAgMTEsIFRbMzNdKTtcblx0ICAgICAgICAgICAgYyA9IEhIKGMsIGQsIGEsIGIsIE1fb2Zmc2V0XzExLCAxNiwgVFszNF0pO1xuXHQgICAgICAgICAgICBiID0gSEgoYiwgYywgZCwgYSwgTV9vZmZzZXRfMTQsIDIzLCBUWzM1XSk7XG5cdCAgICAgICAgICAgIGEgPSBISChhLCBiLCBjLCBkLCBNX29mZnNldF8xLCAgNCwgIFRbMzZdKTtcblx0ICAgICAgICAgICAgZCA9IEhIKGQsIGEsIGIsIGMsIE1fb2Zmc2V0XzQsICAxMSwgVFszN10pO1xuXHQgICAgICAgICAgICBjID0gSEgoYywgZCwgYSwgYiwgTV9vZmZzZXRfNywgIDE2LCBUWzM4XSk7XG5cdCAgICAgICAgICAgIGIgPSBISChiLCBjLCBkLCBhLCBNX29mZnNldF8xMCwgMjMsIFRbMzldKTtcblx0ICAgICAgICAgICAgYSA9IEhIKGEsIGIsIGMsIGQsIE1fb2Zmc2V0XzEzLCA0LCAgVFs0MF0pO1xuXHQgICAgICAgICAgICBkID0gSEgoZCwgYSwgYiwgYywgTV9vZmZzZXRfMCwgIDExLCBUWzQxXSk7XG5cdCAgICAgICAgICAgIGMgPSBISChjLCBkLCBhLCBiLCBNX29mZnNldF8zLCAgMTYsIFRbNDJdKTtcblx0ICAgICAgICAgICAgYiA9IEhIKGIsIGMsIGQsIGEsIE1fb2Zmc2V0XzYsICAyMywgVFs0M10pO1xuXHQgICAgICAgICAgICBhID0gSEgoYSwgYiwgYywgZCwgTV9vZmZzZXRfOSwgIDQsICBUWzQ0XSk7XG5cdCAgICAgICAgICAgIGQgPSBISChkLCBhLCBiLCBjLCBNX29mZnNldF8xMiwgMTEsIFRbNDVdKTtcblx0ICAgICAgICAgICAgYyA9IEhIKGMsIGQsIGEsIGIsIE1fb2Zmc2V0XzE1LCAxNiwgVFs0Nl0pO1xuXHQgICAgICAgICAgICBiID0gSEgoYiwgYywgZCwgYSwgTV9vZmZzZXRfMiwgIDIzLCBUWzQ3XSk7XG5cblx0ICAgICAgICAgICAgYSA9IElJKGEsIGIsIGMsIGQsIE1fb2Zmc2V0XzAsICA2LCAgVFs0OF0pO1xuXHQgICAgICAgICAgICBkID0gSUkoZCwgYSwgYiwgYywgTV9vZmZzZXRfNywgIDEwLCBUWzQ5XSk7XG5cdCAgICAgICAgICAgIGMgPSBJSShjLCBkLCBhLCBiLCBNX29mZnNldF8xNCwgMTUsIFRbNTBdKTtcblx0ICAgICAgICAgICAgYiA9IElJKGIsIGMsIGQsIGEsIE1fb2Zmc2V0XzUsICAyMSwgVFs1MV0pO1xuXHQgICAgICAgICAgICBhID0gSUkoYSwgYiwgYywgZCwgTV9vZmZzZXRfMTIsIDYsICBUWzUyXSk7XG5cdCAgICAgICAgICAgIGQgPSBJSShkLCBhLCBiLCBjLCBNX29mZnNldF8zLCAgMTAsIFRbNTNdKTtcblx0ICAgICAgICAgICAgYyA9IElJKGMsIGQsIGEsIGIsIE1fb2Zmc2V0XzEwLCAxNSwgVFs1NF0pO1xuXHQgICAgICAgICAgICBiID0gSUkoYiwgYywgZCwgYSwgTV9vZmZzZXRfMSwgIDIxLCBUWzU1XSk7XG5cdCAgICAgICAgICAgIGEgPSBJSShhLCBiLCBjLCBkLCBNX29mZnNldF84LCAgNiwgIFRbNTZdKTtcblx0ICAgICAgICAgICAgZCA9IElJKGQsIGEsIGIsIGMsIE1fb2Zmc2V0XzE1LCAxMCwgVFs1N10pO1xuXHQgICAgICAgICAgICBjID0gSUkoYywgZCwgYSwgYiwgTV9vZmZzZXRfNiwgIDE1LCBUWzU4XSk7XG5cdCAgICAgICAgICAgIGIgPSBJSShiLCBjLCBkLCBhLCBNX29mZnNldF8xMywgMjEsIFRbNTldKTtcblx0ICAgICAgICAgICAgYSA9IElJKGEsIGIsIGMsIGQsIE1fb2Zmc2V0XzQsICA2LCAgVFs2MF0pO1xuXHQgICAgICAgICAgICBkID0gSUkoZCwgYSwgYiwgYywgTV9vZmZzZXRfMTEsIDEwLCBUWzYxXSk7XG5cdCAgICAgICAgICAgIGMgPSBJSShjLCBkLCBhLCBiLCBNX29mZnNldF8yLCAgMTUsIFRbNjJdKTtcblx0ICAgICAgICAgICAgYiA9IElJKGIsIGMsIGQsIGEsIE1fb2Zmc2V0XzksICAyMSwgVFs2M10pO1xuXG5cdCAgICAgICAgICAgIC8vIEludGVybWVkaWF0ZSBoYXNoIHZhbHVlXG5cdCAgICAgICAgICAgIEhbMF0gPSAoSFswXSArIGEpIHwgMDtcblx0ICAgICAgICAgICAgSFsxXSA9IChIWzFdICsgYikgfCAwO1xuXHQgICAgICAgICAgICBIWzJdID0gKEhbMl0gKyBjKSB8IDA7XG5cdCAgICAgICAgICAgIEhbM10gPSAoSFszXSArIGQpIHwgMDtcblx0ICAgICAgICB9LFxuXG5cdCAgICAgICAgX2RvRmluYWxpemU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgLy8gU2hvcnRjdXRzXG5cdCAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YTtcblx0ICAgICAgICAgICAgdmFyIGRhdGFXb3JkcyA9IGRhdGEud29yZHM7XG5cblx0ICAgICAgICAgICAgdmFyIG5CaXRzVG90YWwgPSB0aGlzLl9uRGF0YUJ5dGVzICogODtcblx0ICAgICAgICAgICAgdmFyIG5CaXRzTGVmdCA9IGRhdGEuc2lnQnl0ZXMgKiA4O1xuXG5cdCAgICAgICAgICAgIC8vIEFkZCBwYWRkaW5nXG5cdCAgICAgICAgICAgIGRhdGFXb3Jkc1tuQml0c0xlZnQgPj4+IDVdIHw9IDB4ODAgPDwgKDI0IC0gbkJpdHNMZWZ0ICUgMzIpO1xuXG5cdCAgICAgICAgICAgIHZhciBuQml0c1RvdGFsSCA9IE1hdGguZmxvb3IobkJpdHNUb3RhbCAvIDB4MTAwMDAwMDAwKTtcblx0ICAgICAgICAgICAgdmFyIG5CaXRzVG90YWxMID0gbkJpdHNUb3RhbDtcblx0ICAgICAgICAgICAgZGF0YVdvcmRzWygoKG5CaXRzTGVmdCArIDY0KSA+Pj4gOSkgPDwgNCkgKyAxNV0gPSAoXG5cdCAgICAgICAgICAgICAgICAoKChuQml0c1RvdGFsSCA8PCA4KSAgfCAobkJpdHNUb3RhbEggPj4+IDI0KSkgJiAweDAwZmYwMGZmKSB8XG5cdCAgICAgICAgICAgICAgICAoKChuQml0c1RvdGFsSCA8PCAyNCkgfCAobkJpdHNUb3RhbEggPj4+IDgpKSAgJiAweGZmMDBmZjAwKVxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICBkYXRhV29yZHNbKCgobkJpdHNMZWZ0ICsgNjQpID4+PiA5KSA8PCA0KSArIDE0XSA9IChcblx0ICAgICAgICAgICAgICAgICgoKG5CaXRzVG90YWxMIDw8IDgpICB8IChuQml0c1RvdGFsTCA+Pj4gMjQpKSAmIDB4MDBmZjAwZmYpIHxcblx0ICAgICAgICAgICAgICAgICgoKG5CaXRzVG90YWxMIDw8IDI0KSB8IChuQml0c1RvdGFsTCA+Pj4gOCkpICAmIDB4ZmYwMGZmMDApXG5cdCAgICAgICAgICAgICk7XG5cblx0ICAgICAgICAgICAgZGF0YS5zaWdCeXRlcyA9IChkYXRhV29yZHMubGVuZ3RoICsgMSkgKiA0O1xuXG5cdCAgICAgICAgICAgIC8vIEhhc2ggZmluYWwgYmxvY2tzXG5cdCAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3MoKTtcblxuXHQgICAgICAgICAgICAvLyBTaG9ydGN1dHNcblx0ICAgICAgICAgICAgdmFyIGhhc2ggPSB0aGlzLl9oYXNoO1xuXHQgICAgICAgICAgICB2YXIgSCA9IGhhc2gud29yZHM7XG5cblx0ICAgICAgICAgICAgLy8gU3dhcCBlbmRpYW5cblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIC8vIFNob3J0Y3V0XG5cdCAgICAgICAgICAgICAgICB2YXIgSF9pID0gSFtpXTtcblxuXHQgICAgICAgICAgICAgICAgSFtpXSA9ICgoKEhfaSA8PCA4KSAgfCAoSF9pID4+PiAyNCkpICYgMHgwMGZmMDBmZikgfFxuXHQgICAgICAgICAgICAgICAgICAgICAgICgoKEhfaSA8PCAyNCkgfCAoSF9pID4+PiA4KSkgICYgMHhmZjAwZmYwMCk7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAvLyBSZXR1cm4gZmluYWwgY29tcHV0ZWQgaGFzaFxuXHQgICAgICAgICAgICByZXR1cm4gaGFzaDtcblx0ICAgICAgICB9LFxuXG5cdCAgICAgICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdmFyIGNsb25lID0gSGFzaGVyLmNsb25lLmNhbGwodGhpcyk7XG5cdCAgICAgICAgICAgIGNsb25lLl9oYXNoID0gdGhpcy5faGFzaC5jbG9uZSgpO1xuXG5cdCAgICAgICAgICAgIHJldHVybiBjbG9uZTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgZnVuY3Rpb24gRkYoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuXHQgICAgICAgIHZhciBuID0gYSArICgoYiAmIGMpIHwgKH5iICYgZCkpICsgeCArIHQ7XG5cdCAgICAgICAgcmV0dXJuICgobiA8PCBzKSB8IChuID4+PiAoMzIgLSBzKSkpICsgYjtcblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gR0coYSwgYiwgYywgZCwgeCwgcywgdCkge1xuXHQgICAgICAgIHZhciBuID0gYSArICgoYiAmIGQpIHwgKGMgJiB+ZCkpICsgeCArIHQ7XG5cdCAgICAgICAgcmV0dXJuICgobiA8PCBzKSB8IChuID4+PiAoMzIgLSBzKSkpICsgYjtcblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gSEgoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuXHQgICAgICAgIHZhciBuID0gYSArIChiIF4gYyBeIGQpICsgeCArIHQ7XG5cdCAgICAgICAgcmV0dXJuICgobiA8PCBzKSB8IChuID4+PiAoMzIgLSBzKSkpICsgYjtcblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gSUkoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuXHQgICAgICAgIHZhciBuID0gYSArIChjIF4gKGIgfCB+ZCkpICsgeCArIHQ7XG5cdCAgICAgICAgcmV0dXJuICgobiA8PCBzKSB8IChuID4+PiAoMzIgLSBzKSkpICsgYjtcblx0ICAgIH1cblxuXHQgICAgLyoqXG5cdCAgICAgKiBTaG9ydGN1dCBmdW5jdGlvbiB0byB0aGUgaGFzaGVyJ3Mgb2JqZWN0IGludGVyZmFjZS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1dvcmRBcnJheXxzdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gaGFzaC5cblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtXb3JkQXJyYXl9IFRoZSBoYXNoLlxuXHQgICAgICpcblx0ICAgICAqIEBzdGF0aWNcblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZVxuXHQgICAgICpcblx0ICAgICAqICAgICB2YXIgaGFzaCA9IENyeXB0b0pTLk1ENSgnbWVzc2FnZScpO1xuXHQgICAgICogICAgIHZhciBoYXNoID0gQ3J5cHRvSlMuTUQ1KHdvcmRBcnJheSk7XG5cdCAgICAgKi9cblx0ICAgIEMuTUQ1ID0gSGFzaGVyLl9jcmVhdGVIZWxwZXIoTUQ1KTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBTaG9ydGN1dCBmdW5jdGlvbiB0byB0aGUgSE1BQydzIG9iamVjdCBpbnRlcmZhY2UuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtXb3JkQXJyYXl8c3RyaW5nfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGhhc2guXG5cdCAgICAgKiBAcGFyYW0ge1dvcmRBcnJheXxzdHJpbmd9IGtleSBUaGUgc2VjcmV0IGtleS5cblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtXb3JkQXJyYXl9IFRoZSBITUFDLlxuXHQgICAgICpcblx0ICAgICAqIEBzdGF0aWNcblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZVxuXHQgICAgICpcblx0ICAgICAqICAgICB2YXIgaG1hYyA9IENyeXB0b0pTLkhtYWNNRDUobWVzc2FnZSwga2V5KTtcblx0ICAgICAqL1xuXHQgICAgQy5IbWFjTUQ1ID0gSGFzaGVyLl9jcmVhdGVIbWFjSGVscGVyKE1ENSk7XG5cdH0oTWF0aCkpO1xuXG5cblx0cmV0dXJuIENyeXB0b0pTLk1ENTtcblxufSkpOyIsICJpbXBvcnQgeyBQcmpTZXR0aW5ncyB9IGZyb20gJ3NyYy90eXBlcy9QcmpTZXR0aW5ncyc7XHJcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE1hcmtkb3duQmxvY2tQcm9jZXNzb3IgZnJvbSAnc3JjL2xpYnMvTWFya2Rvd25CbG9ja1Byb2Nlc3Nvcic7XHJcbmltcG9ydCB7IFNldHRpbmdUYWIgfSBmcm9tICdzcmMvY2xhc3Nlcy9TZXR0aW5nc1RhYic7XHJcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3R5cGVzL1ByalNldHRpbmdzJztcclxuaW1wb3J0IEdsb2JhbCBmcm9tICcuL2NsYXNzZXMvR2xvYmFsJztcclxuaW1wb3J0IEdldE1ldGFkYXRhIGZyb20gJy4vbGlicy9Db250ZXh0TWVudXMvR2V0TWV0YWRhdGEnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJqIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogUHJqU2V0dGluZ3M7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiTG9hZGluZyBwbHVnaW4gJ1BSSidcIilcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0aWYgKHRoaXMuYXBwLndvcmtzcGFjZS5sYXlvdXRSZWFkeSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLm9uTGF5b3V0UmVhZHkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KHRoaXMub25MYXlvdXRSZWFkeS5iaW5kKHRoaXMpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIG9uTGF5b3V0UmVhZHkoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zb2xlLmxvZyhcIkxheW91dCByZWFkeVwiKTtcclxuXHJcblx0XHRuZXcgR2xvYmFsKHRoaXMsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuXHRcdGF3YWl0IEdsb2JhbC5nZXRJbnN0YW5jZSgpLmF3YWl0Q2FjaGVJbml0aWFsaXphdGlvbigpO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcigncHJqJywgTWFya2Rvd25CbG9ja1Byb2Nlc3Nvci5wYXJzZVNvdXJjZSk7XHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnVwZGF0ZU9wdGlvbnMoKTtcclxuXHJcblx0XHQvLyBHZXQgTWV0YWRhdGEgRmlsZSBDb250ZXh0IE1lbnUgJiBDb21tYW5kXHJcblx0XHRHZXRNZXRhZGF0YS5nZXRJbnN0YW5jZSgpO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcIlVubG9hZGluZyBwbHVnaW4gJ1BSSidcIilcclxuXHRcdEdldE1ldGFkYXRhLmRlY29uc3RydWN0b3IoKTtcclxuXHRcdEdsb2JhbC5kZWNvbnN0cnVjdG9yKCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59IiwgIi8qIGVzbGludC1kaXNhYmxlIG5vLWNhc2UtZGVjbGFyYXRpb25zICovXHJcbi8vIE5vdGU6IE1hcmtkb3duQmxvY2tQcm9jZXNzb3IgQ2xhc3NcclxuXHJcbmltcG9ydCB7IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIE1hcmtkb3duUmVuZGVyQ2hpbGQgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0ICogYXMgeWFtbCBmcm9tICdqcy15YW1sJztcclxuaW1wb3J0IEdsb2JhbCBmcm9tIFwiLi4vY2xhc3Nlcy9HbG9iYWxcIjtcclxuaW1wb3J0IERvY3VtZW50QmxvY2tSZW5kZXJDb21wb25lbnQgZnJvbSBcIi4vQmxvY2tSZW5kZXJDb21wb25lbnRzL0RvY3VtZW50QmxvY2tSZW5kZXJDb21wb25lbnRcIjtcclxuaW1wb3J0IHsgSVByb2Nlc3NvclNldHRpbmdzIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvSVByb2Nlc3NvclNldHRpbmdzXCI7XHJcbmltcG9ydCBQcm9qZWN0QmxvY2tSZW5kZXJDb21wb25lbnQgZnJvbSBcIi4vQmxvY2tSZW5kZXJDb21wb25lbnRzL1Byb2plY3RCbG9ja1JlbmRlckNvbXBvbmVudFwiO1xyXG5cclxuLyoqXHJcbiAqIENsYXNzIGZvciB0aGUgbWFya2Rvd24gYmxvY2sgcHJvY2Vzc29yLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2Rvd25CbG9ja1Byb2Nlc3NvciB7XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIHBhcnNlU291cmNlKHNvdXJjZTogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQsIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgY20tZW1iZWQtYmxvY2sgY2xhc3MgZnJvbSB0aGUgcGFyZW50IGVsZW1lbnRcclxuICAgICAgICAvLyBhbmQgYWRkIHRoZSBwcmotYmxvY2sgY2xhc3MuXHJcbiAgICAgICAgLy8gVGhpcyByZW1vdmUgdGhlIEJsb2NrLUhvdmVyLUVmZmVrdCBmcm9tIHRoZSBibG9ja1xyXG4gICAgICAgIC8vIGFuZCB3aXRoIENTUyB3ZSByZW1vdmUgdGhlIEJsb2NrLUVkaXQtQnV0dG9uXHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gZWwuY2xvc2VzdCgnZGl2LmNtLXByZXZpZXctY29kZS1ibG9jay5jbS1lbWJlZC1ibG9jay5tYXJrZG93bi1yZW5kZXJlZCcpO1xyXG4gICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NtLWVtYmVkLWJsb2NrJyk7XHJcbiAgICAgICAgICAgIHBhcmVudC5hZGRDbGFzcygncHJqLWJsb2NrJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBnbG9iYWwgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBhd2FpdCBnbG9iYWwubWV0YWRhdGFDYWNoZS53YWl0Rm9yQ2FjaGVSZWFkeSgpO1xyXG4gICAgICAgIGNvbnN0IGNhY2hlID0gZ2xvYmFsLm1ldGFkYXRhQ2FjaGUuQ2FjaGU7XHJcbiAgICAgICAgY29uc3QgbG9nZ2VyID0gZ2xvYmFsLmxvZ2dlcjtcclxuXHJcbiAgICAgICAgY29uc3QgY21wID0gbmV3IE1hcmtkb3duUmVuZGVyQ2hpbGQoZWwpO1xyXG4gICAgICAgIGN0eC5hZGRDaGlsZChjbXApO1xyXG4gICAgICAgIGNtcC5sb2FkKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJsb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZWwuYXBwZW5kKGJsb2NrQ29udGFpbmVyKTtcclxuICAgICAgICBibG9ja0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdwcmotYmxvY2stY29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRpbmc6IElQcm9jZXNzb3JTZXR0aW5ncyA9IHlhbWwubG9hZChzb3VyY2UpIGFzIElQcm9jZXNzb3JTZXR0aW5ncztcclxuICAgICAgICBzZXR0aW5nLnNvdXJjZSA9IGN0eC5zb3VyY2VQYXRoO1xyXG4gICAgICAgIHNldHRpbmcuZnJvbnRtYXR0ZXIgPSBjYWNoZS5maWx0ZXIoZmlsZSA9PiBmaWxlLmZpbGUucGF0aCA9PT0gY3R4LnNvdXJjZVBhdGgpLmZpcnN0KCk/Lm1ldGFkYXRhLmZyb250bWF0dGVyO1xyXG4gICAgICAgIHNldHRpbmcuY29udGFpbmVyID0gYmxvY2tDb250YWluZXI7XHJcbiAgICAgICAgc2V0dGluZy5jdHggPSBjdHg7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5nKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc2V0dGluZy50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiRG9jdW1lbnRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRCbG9jayA9IG5ldyBEb2N1bWVudEJsb2NrUmVuZGVyQ29tcG9uZW50KHNldHRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZG9jdW1lbnRCbG9jay5idWlsZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlRhc2tzXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUHJvamVjdHNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJUb3BpY3NcIjpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9qZWN0QmxvY2sgPSBuZXcgUHJvamVjdEJsb2NrUmVuZGVyQ29tcG9uZW50KHNldHRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJvamVjdEJsb2NrLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiRGVidWdcIjpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlYnVnIE1vZGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFNldHRpbmdzOiAke3NldHRpbmd9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBNYXJrZG93bkJsb2NrUHJvY2Vzc29yIHJ1bnMgZm9yICR7ZW5kVGltZSAtIHN0YXJ0VGltZX1tc2ApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsICJcbi8qISBqcy15YW1sIDQuMS4wIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvanMteWFtbCBAbGljZW5zZSBNSVQgKi9cbmZ1bmN0aW9uIGlzTm90aGluZyhzdWJqZWN0KSB7XG4gIHJldHVybiAodHlwZW9mIHN1YmplY3QgPT09ICd1bmRlZmluZWQnKSB8fCAoc3ViamVjdCA9PT0gbnVsbCk7XG59XG5cblxuZnVuY3Rpb24gaXNPYmplY3Qoc3ViamVjdCkge1xuICByZXR1cm4gKHR5cGVvZiBzdWJqZWN0ID09PSAnb2JqZWN0JykgJiYgKHN1YmplY3QgIT09IG51bGwpO1xufVxuXG5cbmZ1bmN0aW9uIHRvQXJyYXkoc2VxdWVuY2UpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoc2VxdWVuY2UpKSByZXR1cm4gc2VxdWVuY2U7XG4gIGVsc2UgaWYgKGlzTm90aGluZyhzZXF1ZW5jZSkpIHJldHVybiBbXTtcblxuICByZXR1cm4gWyBzZXF1ZW5jZSBdO1xufVxuXG5cbmZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xuICB2YXIgaW5kZXgsIGxlbmd0aCwga2V5LCBzb3VyY2VLZXlzO1xuXG4gIGlmIChzb3VyY2UpIHtcbiAgICBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcblxuICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBzb3VyY2VLZXlzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICAgIGtleSA9IHNvdXJjZUtleXNbaW5kZXhdO1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5cbmZ1bmN0aW9uIHJlcGVhdChzdHJpbmcsIGNvdW50KSB7XG4gIHZhciByZXN1bHQgPSAnJywgY3ljbGU7XG5cbiAgZm9yIChjeWNsZSA9IDA7IGN5Y2xlIDwgY291bnQ7IGN5Y2xlICs9IDEpIHtcbiAgICByZXN1bHQgKz0gc3RyaW5nO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG5mdW5jdGlvbiBpc05lZ2F0aXZlWmVybyhudW1iZXIpIHtcbiAgcmV0dXJuIChudW1iZXIgPT09IDApICYmIChOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgPT09IDEgLyBudW1iZXIpO1xufVxuXG5cbnZhciBpc05vdGhpbmdfMSAgICAgID0gaXNOb3RoaW5nO1xudmFyIGlzT2JqZWN0XzEgICAgICAgPSBpc09iamVjdDtcbnZhciB0b0FycmF5XzEgICAgICAgID0gdG9BcnJheTtcbnZhciByZXBlYXRfMSAgICAgICAgID0gcmVwZWF0O1xudmFyIGlzTmVnYXRpdmVaZXJvXzEgPSBpc05lZ2F0aXZlWmVybztcbnZhciBleHRlbmRfMSAgICAgICAgID0gZXh0ZW5kO1xuXG52YXIgY29tbW9uID0ge1xuXHRpc05vdGhpbmc6IGlzTm90aGluZ18xLFxuXHRpc09iamVjdDogaXNPYmplY3RfMSxcblx0dG9BcnJheTogdG9BcnJheV8xLFxuXHRyZXBlYXQ6IHJlcGVhdF8xLFxuXHRpc05lZ2F0aXZlWmVybzogaXNOZWdhdGl2ZVplcm9fMSxcblx0ZXh0ZW5kOiBleHRlbmRfMVxufTtcblxuLy8gWUFNTCBlcnJvciBjbGFzcy4gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy84NDU4OTg0XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXhjZXB0aW9uLCBjb21wYWN0KSB7XG4gIHZhciB3aGVyZSA9ICcnLCBtZXNzYWdlID0gZXhjZXB0aW9uLnJlYXNvbiB8fCAnKHVua25vd24gcmVhc29uKSc7XG5cbiAgaWYgKCFleGNlcHRpb24ubWFyaykgcmV0dXJuIG1lc3NhZ2U7XG5cbiAgaWYgKGV4Y2VwdGlvbi5tYXJrLm5hbWUpIHtcbiAgICB3aGVyZSArPSAnaW4gXCInICsgZXhjZXB0aW9uLm1hcmsubmFtZSArICdcIiAnO1xuICB9XG5cbiAgd2hlcmUgKz0gJygnICsgKGV4Y2VwdGlvbi5tYXJrLmxpbmUgKyAxKSArICc6JyArIChleGNlcHRpb24ubWFyay5jb2x1bW4gKyAxKSArICcpJztcblxuICBpZiAoIWNvbXBhY3QgJiYgZXhjZXB0aW9uLm1hcmsuc25pcHBldCkge1xuICAgIHdoZXJlICs9ICdcXG5cXG4nICsgZXhjZXB0aW9uLm1hcmsuc25pcHBldDtcbiAgfVxuXG4gIHJldHVybiBtZXNzYWdlICsgJyAnICsgd2hlcmU7XG59XG5cblxuZnVuY3Rpb24gWUFNTEV4Y2VwdGlvbiQxKHJlYXNvbiwgbWFyaykge1xuICAvLyBTdXBlciBjb25zdHJ1Y3RvclxuICBFcnJvci5jYWxsKHRoaXMpO1xuXG4gIHRoaXMubmFtZSA9ICdZQU1MRXhjZXB0aW9uJztcbiAgdGhpcy5yZWFzb24gPSByZWFzb247XG4gIHRoaXMubWFyayA9IG1hcms7XG4gIHRoaXMubWVzc2FnZSA9IGZvcm1hdEVycm9yKHRoaXMsIGZhbHNlKTtcblxuICAvLyBJbmNsdWRlIHN0YWNrIHRyYWNlIGluIGVycm9yIG9iamVjdFxuICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAvLyBDaHJvbWUgYW5kIE5vZGVKU1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICB9IGVsc2Uge1xuICAgIC8vIEZGLCBJRSAxMCsgYW5kIFNhZmFyaSA2Ky4gRmFsbGJhY2sgZm9yIG90aGVyc1xuICAgIHRoaXMuc3RhY2sgPSAobmV3IEVycm9yKCkpLnN0YWNrIHx8ICcnO1xuICB9XG59XG5cblxuLy8gSW5oZXJpdCBmcm9tIEVycm9yXG5ZQU1MRXhjZXB0aW9uJDEucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuWUFNTEV4Y2VwdGlvbiQxLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFlBTUxFeGNlcHRpb24kMTtcblxuXG5ZQU1MRXhjZXB0aW9uJDEucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoY29tcGFjdCkge1xuICByZXR1cm4gdGhpcy5uYW1lICsgJzogJyArIGZvcm1hdEVycm9yKHRoaXMsIGNvbXBhY3QpO1xufTtcblxuXG52YXIgZXhjZXB0aW9uID0gWUFNTEV4Y2VwdGlvbiQxO1xuXG4vLyBnZXQgc25pcHBldCBmb3IgYSBzaW5nbGUgbGluZSwgcmVzcGVjdGluZyBtYXhMZW5ndGhcbmZ1bmN0aW9uIGdldExpbmUoYnVmZmVyLCBsaW5lU3RhcnQsIGxpbmVFbmQsIHBvc2l0aW9uLCBtYXhMaW5lTGVuZ3RoKSB7XG4gIHZhciBoZWFkID0gJyc7XG4gIHZhciB0YWlsID0gJyc7XG4gIHZhciBtYXhIYWxmTGVuZ3RoID0gTWF0aC5mbG9vcihtYXhMaW5lTGVuZ3RoIC8gMikgLSAxO1xuXG4gIGlmIChwb3NpdGlvbiAtIGxpbmVTdGFydCA+IG1heEhhbGZMZW5ndGgpIHtcbiAgICBoZWFkID0gJyAuLi4gJztcbiAgICBsaW5lU3RhcnQgPSBwb3NpdGlvbiAtIG1heEhhbGZMZW5ndGggKyBoZWFkLmxlbmd0aDtcbiAgfVxuXG4gIGlmIChsaW5lRW5kIC0gcG9zaXRpb24gPiBtYXhIYWxmTGVuZ3RoKSB7XG4gICAgdGFpbCA9ICcgLi4uJztcbiAgICBsaW5lRW5kID0gcG9zaXRpb24gKyBtYXhIYWxmTGVuZ3RoIC0gdGFpbC5sZW5ndGg7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHN0cjogaGVhZCArIGJ1ZmZlci5zbGljZShsaW5lU3RhcnQsIGxpbmVFbmQpLnJlcGxhY2UoL1xcdC9nLCAnXHUyMTkyJykgKyB0YWlsLFxuICAgIHBvczogcG9zaXRpb24gLSBsaW5lU3RhcnQgKyBoZWFkLmxlbmd0aCAvLyByZWxhdGl2ZSBwb3NpdGlvblxuICB9O1xufVxuXG5cbmZ1bmN0aW9uIHBhZFN0YXJ0KHN0cmluZywgbWF4KSB7XG4gIHJldHVybiBjb21tb24ucmVwZWF0KCcgJywgbWF4IC0gc3RyaW5nLmxlbmd0aCkgKyBzdHJpbmc7XG59XG5cblxuZnVuY3Rpb24gbWFrZVNuaXBwZXQobWFyaywgb3B0aW9ucykge1xuICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IG51bGwpO1xuXG4gIGlmICghbWFyay5idWZmZXIpIHJldHVybiBudWxsO1xuXG4gIGlmICghb3B0aW9ucy5tYXhMZW5ndGgpIG9wdGlvbnMubWF4TGVuZ3RoID0gNzk7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbmRlbnQgICAgICAhPT0gJ251bWJlcicpIG9wdGlvbnMuaW5kZW50ICAgICAgPSAxO1xuICBpZiAodHlwZW9mIG9wdGlvbnMubGluZXNCZWZvcmUgIT09ICdudW1iZXInKSBvcHRpb25zLmxpbmVzQmVmb3JlID0gMztcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmxpbmVzQWZ0ZXIgICE9PSAnbnVtYmVyJykgb3B0aW9ucy5saW5lc0FmdGVyICA9IDI7XG5cbiAgdmFyIHJlID0gL1xccj9cXG58XFxyfFxcMC9nO1xuICB2YXIgbGluZVN0YXJ0cyA9IFsgMCBdO1xuICB2YXIgbGluZUVuZHMgPSBbXTtcbiAgdmFyIG1hdGNoO1xuICB2YXIgZm91bmRMaW5lTm8gPSAtMTtcblxuICB3aGlsZSAoKG1hdGNoID0gcmUuZXhlYyhtYXJrLmJ1ZmZlcikpKSB7XG4gICAgbGluZUVuZHMucHVzaChtYXRjaC5pbmRleCk7XG4gICAgbGluZVN0YXJ0cy5wdXNoKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTtcblxuICAgIGlmIChtYXJrLnBvc2l0aW9uIDw9IG1hdGNoLmluZGV4ICYmIGZvdW5kTGluZU5vIDwgMCkge1xuICAgICAgZm91bmRMaW5lTm8gPSBsaW5lU3RhcnRzLmxlbmd0aCAtIDI7XG4gICAgfVxuICB9XG5cbiAgaWYgKGZvdW5kTGluZU5vIDwgMCkgZm91bmRMaW5lTm8gPSBsaW5lU3RhcnRzLmxlbmd0aCAtIDE7XG5cbiAgdmFyIHJlc3VsdCA9ICcnLCBpLCBsaW5lO1xuICB2YXIgbGluZU5vTGVuZ3RoID0gTWF0aC5taW4obWFyay5saW5lICsgb3B0aW9ucy5saW5lc0FmdGVyLCBsaW5lRW5kcy5sZW5ndGgpLnRvU3RyaW5nKCkubGVuZ3RoO1xuICB2YXIgbWF4TGluZUxlbmd0aCA9IG9wdGlvbnMubWF4TGVuZ3RoIC0gKG9wdGlvbnMuaW5kZW50ICsgbGluZU5vTGVuZ3RoICsgMyk7XG5cbiAgZm9yIChpID0gMTsgaSA8PSBvcHRpb25zLmxpbmVzQmVmb3JlOyBpKyspIHtcbiAgICBpZiAoZm91bmRMaW5lTm8gLSBpIDwgMCkgYnJlYWs7XG4gICAgbGluZSA9IGdldExpbmUoXG4gICAgICBtYXJrLmJ1ZmZlcixcbiAgICAgIGxpbmVTdGFydHNbZm91bmRMaW5lTm8gLSBpXSxcbiAgICAgIGxpbmVFbmRzW2ZvdW5kTGluZU5vIC0gaV0sXG4gICAgICBtYXJrLnBvc2l0aW9uIC0gKGxpbmVTdGFydHNbZm91bmRMaW5lTm9dIC0gbGluZVN0YXJ0c1tmb3VuZExpbmVObyAtIGldKSxcbiAgICAgIG1heExpbmVMZW5ndGhcbiAgICApO1xuICAgIHJlc3VsdCA9IGNvbW1vbi5yZXBlYXQoJyAnLCBvcHRpb25zLmluZGVudCkgKyBwYWRTdGFydCgobWFyay5saW5lIC0gaSArIDEpLnRvU3RyaW5nKCksIGxpbmVOb0xlbmd0aCkgK1xuICAgICAgJyB8ICcgKyBsaW5lLnN0ciArICdcXG4nICsgcmVzdWx0O1xuICB9XG5cbiAgbGluZSA9IGdldExpbmUobWFyay5idWZmZXIsIGxpbmVTdGFydHNbZm91bmRMaW5lTm9dLCBsaW5lRW5kc1tmb3VuZExpbmVOb10sIG1hcmsucG9zaXRpb24sIG1heExpbmVMZW5ndGgpO1xuICByZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnICcsIG9wdGlvbnMuaW5kZW50KSArIHBhZFN0YXJ0KChtYXJrLmxpbmUgKyAxKS50b1N0cmluZygpLCBsaW5lTm9MZW5ndGgpICtcbiAgICAnIHwgJyArIGxpbmUuc3RyICsgJ1xcbic7XG4gIHJlc3VsdCArPSBjb21tb24ucmVwZWF0KCctJywgb3B0aW9ucy5pbmRlbnQgKyBsaW5lTm9MZW5ndGggKyAzICsgbGluZS5wb3MpICsgJ14nICsgJ1xcbic7XG5cbiAgZm9yIChpID0gMTsgaSA8PSBvcHRpb25zLmxpbmVzQWZ0ZXI7IGkrKykge1xuICAgIGlmIChmb3VuZExpbmVObyArIGkgPj0gbGluZUVuZHMubGVuZ3RoKSBicmVhaztcbiAgICBsaW5lID0gZ2V0TGluZShcbiAgICAgIG1hcmsuYnVmZmVyLFxuICAgICAgbGluZVN0YXJ0c1tmb3VuZExpbmVObyArIGldLFxuICAgICAgbGluZUVuZHNbZm91bmRMaW5lTm8gKyBpXSxcbiAgICAgIG1hcmsucG9zaXRpb24gLSAobGluZVN0YXJ0c1tmb3VuZExpbmVOb10gLSBsaW5lU3RhcnRzW2ZvdW5kTGluZU5vICsgaV0pLFxuICAgICAgbWF4TGluZUxlbmd0aFxuICAgICk7XG4gICAgcmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJyAnLCBvcHRpb25zLmluZGVudCkgKyBwYWRTdGFydCgobWFyay5saW5lICsgaSArIDEpLnRvU3RyaW5nKCksIGxpbmVOb0xlbmd0aCkgK1xuICAgICAgJyB8ICcgKyBsaW5lLnN0ciArICdcXG4nO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdC5yZXBsYWNlKC9cXG4kLywgJycpO1xufVxuXG5cbnZhciBzbmlwcGV0ID0gbWFrZVNuaXBwZXQ7XG5cbnZhciBUWVBFX0NPTlNUUlVDVE9SX09QVElPTlMgPSBbXG4gICdraW5kJyxcbiAgJ211bHRpJyxcbiAgJ3Jlc29sdmUnLFxuICAnY29uc3RydWN0JyxcbiAgJ2luc3RhbmNlT2YnLFxuICAncHJlZGljYXRlJyxcbiAgJ3JlcHJlc2VudCcsXG4gICdyZXByZXNlbnROYW1lJyxcbiAgJ2RlZmF1bHRTdHlsZScsXG4gICdzdHlsZUFsaWFzZXMnXG5dO1xuXG52YXIgWUFNTF9OT0RFX0tJTkRTID0gW1xuICAnc2NhbGFyJyxcbiAgJ3NlcXVlbmNlJyxcbiAgJ21hcHBpbmcnXG5dO1xuXG5mdW5jdGlvbiBjb21waWxlU3R5bGVBbGlhc2VzKG1hcCkge1xuICB2YXIgcmVzdWx0ID0ge307XG5cbiAgaWYgKG1hcCAhPT0gbnVsbCkge1xuICAgIE9iamVjdC5rZXlzKG1hcCkuZm9yRWFjaChmdW5jdGlvbiAoc3R5bGUpIHtcbiAgICAgIG1hcFtzdHlsZV0uZm9yRWFjaChmdW5jdGlvbiAoYWxpYXMpIHtcbiAgICAgICAgcmVzdWx0W1N0cmluZyhhbGlhcyldID0gc3R5bGU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIFR5cGUkMSh0YWcsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmIChUWVBFX0NPTlNUUlVDVE9SX09QVElPTlMuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJ1Vua25vd24gb3B0aW9uIFwiJyArIG5hbWUgKyAnXCIgaXMgbWV0IGluIGRlZmluaXRpb24gb2YgXCInICsgdGFnICsgJ1wiIFlBTUwgdHlwZS4nKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFRPRE86IEFkZCB0YWcgZm9ybWF0IGNoZWNrLlxuICB0aGlzLm9wdGlvbnMgICAgICAgPSBvcHRpb25zOyAvLyBrZWVwIG9yaWdpbmFsIG9wdGlvbnMgaW4gY2FzZSB1c2VyIHdhbnRzIHRvIGV4dGVuZCB0aGlzIHR5cGUgbGF0ZXJcbiAgdGhpcy50YWcgICAgICAgICAgID0gdGFnO1xuICB0aGlzLmtpbmQgICAgICAgICAgPSBvcHRpb25zWydraW5kJ10gICAgICAgICAgfHwgbnVsbDtcbiAgdGhpcy5yZXNvbHZlICAgICAgID0gb3B0aW9uc1sncmVzb2x2ZSddICAgICAgIHx8IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07XG4gIHRoaXMuY29uc3RydWN0ICAgICA9IG9wdGlvbnNbJ2NvbnN0cnVjdCddICAgICB8fCBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gZGF0YTsgfTtcbiAgdGhpcy5pbnN0YW5jZU9mICAgID0gb3B0aW9uc1snaW5zdGFuY2VPZiddICAgIHx8IG51bGw7XG4gIHRoaXMucHJlZGljYXRlICAgICA9IG9wdGlvbnNbJ3ByZWRpY2F0ZSddICAgICB8fCBudWxsO1xuICB0aGlzLnJlcHJlc2VudCAgICAgPSBvcHRpb25zWydyZXByZXNlbnQnXSAgICAgfHwgbnVsbDtcbiAgdGhpcy5yZXByZXNlbnROYW1lID0gb3B0aW9uc1sncmVwcmVzZW50TmFtZSddIHx8IG51bGw7XG4gIHRoaXMuZGVmYXVsdFN0eWxlICA9IG9wdGlvbnNbJ2RlZmF1bHRTdHlsZSddICB8fCBudWxsO1xuICB0aGlzLm11bHRpICAgICAgICAgPSBvcHRpb25zWydtdWx0aSddICAgICAgICAgfHwgZmFsc2U7XG4gIHRoaXMuc3R5bGVBbGlhc2VzICA9IGNvbXBpbGVTdHlsZUFsaWFzZXMob3B0aW9uc1snc3R5bGVBbGlhc2VzJ10gfHwgbnVsbCk7XG5cbiAgaWYgKFlBTUxfTk9ERV9LSU5EUy5pbmRleE9mKHRoaXMua2luZCkgPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignVW5rbm93biBraW5kIFwiJyArIHRoaXMua2luZCArICdcIiBpcyBzcGVjaWZpZWQgZm9yIFwiJyArIHRhZyArICdcIiBZQU1MIHR5cGUuJyk7XG4gIH1cbn1cblxudmFyIHR5cGUgPSBUeXBlJDE7XG5cbi8qZXNsaW50LWRpc2FibGUgbWF4LWxlbiovXG5cblxuXG5cblxuZnVuY3Rpb24gY29tcGlsZUxpc3Qoc2NoZW1hLCBuYW1lKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcblxuICBzY2hlbWFbbmFtZV0uZm9yRWFjaChmdW5jdGlvbiAoY3VycmVudFR5cGUpIHtcbiAgICB2YXIgbmV3SW5kZXggPSByZXN1bHQubGVuZ3RoO1xuXG4gICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKHByZXZpb3VzVHlwZSwgcHJldmlvdXNJbmRleCkge1xuICAgICAgaWYgKHByZXZpb3VzVHlwZS50YWcgPT09IGN1cnJlbnRUeXBlLnRhZyAmJlxuICAgICAgICAgIHByZXZpb3VzVHlwZS5raW5kID09PSBjdXJyZW50VHlwZS5raW5kICYmXG4gICAgICAgICAgcHJldmlvdXNUeXBlLm11bHRpID09PSBjdXJyZW50VHlwZS5tdWx0aSkge1xuXG4gICAgICAgIG5ld0luZGV4ID0gcHJldmlvdXNJbmRleDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJlc3VsdFtuZXdJbmRleF0gPSBjdXJyZW50VHlwZTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG5mdW5jdGlvbiBjb21waWxlTWFwKC8qIGxpc3RzLi4uICovKSB7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgICAgIHNjYWxhcjoge30sXG4gICAgICAgIHNlcXVlbmNlOiB7fSxcbiAgICAgICAgbWFwcGluZzoge30sXG4gICAgICAgIGZhbGxiYWNrOiB7fSxcbiAgICAgICAgbXVsdGk6IHtcbiAgICAgICAgICBzY2FsYXI6IFtdLFxuICAgICAgICAgIHNlcXVlbmNlOiBbXSxcbiAgICAgICAgICBtYXBwaW5nOiBbXSxcbiAgICAgICAgICBmYWxsYmFjazogW11cbiAgICAgICAgfVxuICAgICAgfSwgaW5kZXgsIGxlbmd0aDtcblxuICBmdW5jdGlvbiBjb2xsZWN0VHlwZSh0eXBlKSB7XG4gICAgaWYgKHR5cGUubXVsdGkpIHtcbiAgICAgIHJlc3VsdC5tdWx0aVt0eXBlLmtpbmRdLnB1c2godHlwZSk7XG4gICAgICByZXN1bHQubXVsdGlbJ2ZhbGxiYWNrJ10ucHVzaCh0eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W3R5cGUua2luZF1bdHlwZS50YWddID0gcmVzdWx0WydmYWxsYmFjayddW3R5cGUudGFnXSA9IHR5cGU7XG4gICAgfVxuICB9XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgYXJndW1lbnRzW2luZGV4XS5mb3JFYWNoKGNvbGxlY3RUeXBlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIFNjaGVtYSQxKGRlZmluaXRpb24pIHtcbiAgcmV0dXJuIHRoaXMuZXh0ZW5kKGRlZmluaXRpb24pO1xufVxuXG5cblNjaGVtYSQxLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiBleHRlbmQoZGVmaW5pdGlvbikge1xuICB2YXIgaW1wbGljaXQgPSBbXTtcbiAgdmFyIGV4cGxpY2l0ID0gW107XG5cbiAgaWYgKGRlZmluaXRpb24gaW5zdGFuY2VvZiB0eXBlKSB7XG4gICAgLy8gU2NoZW1hLmV4dGVuZCh0eXBlKVxuICAgIGV4cGxpY2l0LnB1c2goZGVmaW5pdGlvbik7XG5cbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRlZmluaXRpb24pKSB7XG4gICAgLy8gU2NoZW1hLmV4dGVuZChbIHR5cGUxLCB0eXBlMiwgLi4uIF0pXG4gICAgZXhwbGljaXQgPSBleHBsaWNpdC5jb25jYXQoZGVmaW5pdGlvbik7XG5cbiAgfSBlbHNlIGlmIChkZWZpbml0aW9uICYmIChBcnJheS5pc0FycmF5KGRlZmluaXRpb24uaW1wbGljaXQpIHx8IEFycmF5LmlzQXJyYXkoZGVmaW5pdGlvbi5leHBsaWNpdCkpKSB7XG4gICAgLy8gU2NoZW1hLmV4dGVuZCh7IGV4cGxpY2l0OiBbIHR5cGUxLCB0eXBlMiwgLi4uIF0sIGltcGxpY2l0OiBbIHR5cGUxLCB0eXBlMiwgLi4uIF0gfSlcbiAgICBpZiAoZGVmaW5pdGlvbi5pbXBsaWNpdCkgaW1wbGljaXQgPSBpbXBsaWNpdC5jb25jYXQoZGVmaW5pdGlvbi5pbXBsaWNpdCk7XG4gICAgaWYgKGRlZmluaXRpb24uZXhwbGljaXQpIGV4cGxpY2l0ID0gZXhwbGljaXQuY29uY2F0KGRlZmluaXRpb24uZXhwbGljaXQpO1xuXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignU2NoZW1hLmV4dGVuZCBhcmd1bWVudCBzaG91bGQgYmUgYSBUeXBlLCBbIFR5cGUgXSwgJyArXG4gICAgICAnb3IgYSBzY2hlbWEgZGVmaW5pdGlvbiAoeyBpbXBsaWNpdDogWy4uLl0sIGV4cGxpY2l0OiBbLi4uXSB9KScpO1xuICB9XG5cbiAgaW1wbGljaXQuZm9yRWFjaChmdW5jdGlvbiAodHlwZSQxKSB7XG4gICAgaWYgKCEodHlwZSQxIGluc3RhbmNlb2YgdHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJ1NwZWNpZmllZCBsaXN0IG9mIFlBTUwgdHlwZXMgKG9yIGEgc2luZ2xlIFR5cGUgb2JqZWN0KSBjb250YWlucyBhIG5vbi1UeXBlIG9iamVjdC4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZSQxLmxvYWRLaW5kICYmIHR5cGUkMS5sb2FkS2luZCAhPT0gJ3NjYWxhcicpIHtcbiAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJ1RoZXJlIGlzIGEgbm9uLXNjYWxhciB0eXBlIGluIHRoZSBpbXBsaWNpdCBsaXN0IG9mIGEgc2NoZW1hLiBJbXBsaWNpdCByZXNvbHZpbmcgb2Ygc3VjaCB0eXBlcyBpcyBub3Qgc3VwcG9ydGVkLicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlJDEubXVsdGkpIHtcbiAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJ1RoZXJlIGlzIGEgbXVsdGkgdHlwZSBpbiB0aGUgaW1wbGljaXQgbGlzdCBvZiBhIHNjaGVtYS4gTXVsdGkgdGFncyBjYW4gb25seSBiZSBsaXN0ZWQgYXMgZXhwbGljaXQuJyk7XG4gICAgfVxuICB9KTtcblxuICBleHBsaWNpdC5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlJDEpIHtcbiAgICBpZiAoISh0eXBlJDEgaW5zdGFuY2VvZiB0eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignU3BlY2lmaWVkIGxpc3Qgb2YgWUFNTCB0eXBlcyAob3IgYSBzaW5nbGUgVHlwZSBvYmplY3QpIGNvbnRhaW5zIGEgbm9uLVR5cGUgb2JqZWN0LicpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHJlc3VsdCA9IE9iamVjdC5jcmVhdGUoU2NoZW1hJDEucHJvdG90eXBlKTtcblxuICByZXN1bHQuaW1wbGljaXQgPSAodGhpcy5pbXBsaWNpdCB8fCBbXSkuY29uY2F0KGltcGxpY2l0KTtcbiAgcmVzdWx0LmV4cGxpY2l0ID0gKHRoaXMuZXhwbGljaXQgfHwgW10pLmNvbmNhdChleHBsaWNpdCk7XG5cbiAgcmVzdWx0LmNvbXBpbGVkSW1wbGljaXQgPSBjb21waWxlTGlzdChyZXN1bHQsICdpbXBsaWNpdCcpO1xuICByZXN1bHQuY29tcGlsZWRFeHBsaWNpdCA9IGNvbXBpbGVMaXN0KHJlc3VsdCwgJ2V4cGxpY2l0Jyk7XG4gIHJlc3VsdC5jb21waWxlZFR5cGVNYXAgID0gY29tcGlsZU1hcChyZXN1bHQuY29tcGlsZWRJbXBsaWNpdCwgcmVzdWx0LmNvbXBpbGVkRXhwbGljaXQpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5cbnZhciBzY2hlbWEgPSBTY2hlbWEkMTtcblxudmFyIHN0ciA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpzdHInLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBkYXRhICE9PSBudWxsID8gZGF0YSA6ICcnOyB9XG59KTtcblxudmFyIHNlcSA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpzZXEnLCB7XG4gIGtpbmQ6ICdzZXF1ZW5jZScsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDogW107IH1cbn0pO1xuXG52YXIgbWFwID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm1hcCcsIHtcbiAga2luZDogJ21hcHBpbmcnLFxuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBkYXRhICE9PSBudWxsID8gZGF0YSA6IHt9OyB9XG59KTtcblxudmFyIGZhaWxzYWZlID0gbmV3IHNjaGVtYSh7XG4gIGV4cGxpY2l0OiBbXG4gICAgc3RyLFxuICAgIHNlcSxcbiAgICBtYXBcbiAgXVxufSk7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sTnVsbChkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICB2YXIgbWF4ID0gZGF0YS5sZW5ndGg7XG5cbiAgcmV0dXJuIChtYXggPT09IDEgJiYgZGF0YSA9PT0gJ34nKSB8fFxuICAgICAgICAgKG1heCA9PT0gNCAmJiAoZGF0YSA9PT0gJ251bGwnIHx8IGRhdGEgPT09ICdOdWxsJyB8fCBkYXRhID09PSAnTlVMTCcpKTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbE51bGwoKSB7XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBpc051bGwob2JqZWN0KSB7XG4gIHJldHVybiBvYmplY3QgPT09IG51bGw7XG59XG5cbnZhciBfbnVsbCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpudWxsJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxOdWxsLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxOdWxsLFxuICBwcmVkaWNhdGU6IGlzTnVsbCxcbiAgcmVwcmVzZW50OiB7XG4gICAgY2Fub25pY2FsOiBmdW5jdGlvbiAoKSB7IHJldHVybiAnfic7ICAgIH0sXG4gICAgbG93ZXJjYXNlOiBmdW5jdGlvbiAoKSB7IHJldHVybiAnbnVsbCc7IH0sXG4gICAgdXBwZXJjYXNlOiBmdW5jdGlvbiAoKSB7IHJldHVybiAnTlVMTCc7IH0sXG4gICAgY2FtZWxjYXNlOiBmdW5jdGlvbiAoKSB7IHJldHVybiAnTnVsbCc7IH0sXG4gICAgZW1wdHk6ICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiAnJzsgICAgIH1cbiAgfSxcbiAgZGVmYXVsdFN0eWxlOiAnbG93ZXJjYXNlJ1xufSk7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sQm9vbGVhbihkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIG1heCA9IGRhdGEubGVuZ3RoO1xuXG4gIHJldHVybiAobWF4ID09PSA0ICYmIChkYXRhID09PSAndHJ1ZScgfHwgZGF0YSA9PT0gJ1RydWUnIHx8IGRhdGEgPT09ICdUUlVFJykpIHx8XG4gICAgICAgICAobWF4ID09PSA1ICYmIChkYXRhID09PSAnZmFsc2UnIHx8IGRhdGEgPT09ICdGYWxzZScgfHwgZGF0YSA9PT0gJ0ZBTFNFJykpO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sQm9vbGVhbihkYXRhKSB7XG4gIHJldHVybiBkYXRhID09PSAndHJ1ZScgfHxcbiAgICAgICAgIGRhdGEgPT09ICdUcnVlJyB8fFxuICAgICAgICAgZGF0YSA9PT0gJ1RSVUUnO1xufVxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4ob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xufVxuXG52YXIgYm9vbCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpib29sJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxCb29sZWFuLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxCb29sZWFuLFxuICBwcmVkaWNhdGU6IGlzQm9vbGVhbixcbiAgcmVwcmVzZW50OiB7XG4gICAgbG93ZXJjYXNlOiBmdW5jdGlvbiAob2JqZWN0KSB7IHJldHVybiBvYmplY3QgPyAndHJ1ZScgOiAnZmFsc2UnOyB9LFxuICAgIHVwcGVyY2FzZTogZnVuY3Rpb24gKG9iamVjdCkgeyByZXR1cm4gb2JqZWN0ID8gJ1RSVUUnIDogJ0ZBTFNFJzsgfSxcbiAgICBjYW1lbGNhc2U6IGZ1bmN0aW9uIChvYmplY3QpIHsgcmV0dXJuIG9iamVjdCA/ICdUcnVlJyA6ICdGYWxzZSc7IH1cbiAgfSxcbiAgZGVmYXVsdFN0eWxlOiAnbG93ZXJjYXNlJ1xufSk7XG5cbmZ1bmN0aW9uIGlzSGV4Q29kZShjKSB7XG4gIHJldHVybiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkgfHxcbiAgICAgICAgICgoMHg0MS8qIEEgKi8gPD0gYykgJiYgKGMgPD0gMHg0Ni8qIEYgKi8pKSB8fFxuICAgICAgICAgKCgweDYxLyogYSAqLyA8PSBjKSAmJiAoYyA8PSAweDY2LyogZiAqLykpO1xufVxuXG5mdW5jdGlvbiBpc09jdENvZGUoYykge1xuICByZXR1cm4gKCgweDMwLyogMCAqLyA8PSBjKSAmJiAoYyA8PSAweDM3LyogNyAqLykpO1xufVxuXG5mdW5jdGlvbiBpc0RlY0NvZGUoYykge1xuICByZXR1cm4gKCgweDMwLyogMCAqLyA8PSBjKSAmJiAoYyA8PSAweDM5LyogOSAqLykpO1xufVxuXG5mdW5jdGlvbiByZXNvbHZlWWFtbEludGVnZXIoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBtYXggPSBkYXRhLmxlbmd0aCxcbiAgICAgIGluZGV4ID0gMCxcbiAgICAgIGhhc0RpZ2l0cyA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgaWYgKCFtYXgpIHJldHVybiBmYWxzZTtcblxuICBjaCA9IGRhdGFbaW5kZXhdO1xuXG4gIC8vIHNpZ25cbiAgaWYgKGNoID09PSAnLScgfHwgY2ggPT09ICcrJykge1xuICAgIGNoID0gZGF0YVsrK2luZGV4XTtcbiAgfVxuXG4gIGlmIChjaCA9PT0gJzAnKSB7XG4gICAgLy8gMFxuICAgIGlmIChpbmRleCArIDEgPT09IG1heCkgcmV0dXJuIHRydWU7XG4gICAgY2ggPSBkYXRhWysraW5kZXhdO1xuXG4gICAgLy8gYmFzZSAyLCBiYXNlIDgsIGJhc2UgMTZcblxuICAgIGlmIChjaCA9PT0gJ2InKSB7XG4gICAgICAvLyBiYXNlIDJcbiAgICAgIGluZGV4Kys7XG5cbiAgICAgIGZvciAoOyBpbmRleCA8IG1heDsgaW5kZXgrKykge1xuICAgICAgICBjaCA9IGRhdGFbaW5kZXhdO1xuICAgICAgICBpZiAoY2ggPT09ICdfJykgY29udGludWU7XG4gICAgICAgIGlmIChjaCAhPT0gJzAnICYmIGNoICE9PSAnMScpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNEaWdpdHMgJiYgY2ggIT09ICdfJztcbiAgICB9XG5cblxuICAgIGlmIChjaCA9PT0gJ3gnKSB7XG4gICAgICAvLyBiYXNlIDE2XG4gICAgICBpbmRleCsrO1xuXG4gICAgICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICAgICAgY2ggPSBkYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIWlzSGV4Q29kZShkYXRhLmNoYXJDb2RlQXQoaW5kZXgpKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBoYXNEaWdpdHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc0RpZ2l0cyAmJiBjaCAhPT0gJ18nO1xuICAgIH1cblxuXG4gICAgaWYgKGNoID09PSAnbycpIHtcbiAgICAgIC8vIGJhc2UgOFxuICAgICAgaW5kZXgrKztcblxuICAgICAgZm9yICg7IGluZGV4IDwgbWF4OyBpbmRleCsrKSB7XG4gICAgICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgICAgIGlmIChjaCA9PT0gJ18nKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFpc09jdENvZGUoZGF0YS5jaGFyQ29kZUF0KGluZGV4KSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNEaWdpdHMgJiYgY2ggIT09ICdfJztcbiAgICB9XG4gIH1cblxuICAvLyBiYXNlIDEwIChleGNlcHQgMClcblxuICAvLyB2YWx1ZSBzaG91bGQgbm90IHN0YXJ0IHdpdGggYF9gO1xuICBpZiAoY2ggPT09ICdfJykgcmV0dXJuIGZhbHNlO1xuXG4gIGZvciAoOyBpbmRleCA8IG1heDsgaW5kZXgrKykge1xuICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgIGlmICghaXNEZWNDb2RlKGRhdGEuY2hhckNvZGVBdChpbmRleCkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGhhc0RpZ2l0cyA9IHRydWU7XG4gIH1cblxuICAvLyBTaG91bGQgaGF2ZSBkaWdpdHMgYW5kIHNob3VsZCBub3QgZW5kIHdpdGggYF9gXG4gIGlmICghaGFzRGlnaXRzIHx8IGNoID09PSAnXycpIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbEludGVnZXIoZGF0YSkge1xuICB2YXIgdmFsdWUgPSBkYXRhLCBzaWduID0gMSwgY2g7XG5cbiAgaWYgKHZhbHVlLmluZGV4T2YoJ18nKSAhPT0gLTEpIHtcbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL18vZywgJycpO1xuICB9XG5cbiAgY2ggPSB2YWx1ZVswXTtcblxuICBpZiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnKSB7XG4gICAgaWYgKGNoID09PSAnLScpIHNpZ24gPSAtMTtcbiAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEpO1xuICAgIGNoID0gdmFsdWVbMF07XG4gIH1cblxuICBpZiAodmFsdWUgPT09ICcwJykgcmV0dXJuIDA7XG5cbiAgaWYgKGNoID09PSAnMCcpIHtcbiAgICBpZiAodmFsdWVbMV0gPT09ICdiJykgcmV0dXJuIHNpZ24gKiBwYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgMik7XG4gICAgaWYgKHZhbHVlWzFdID09PSAneCcpIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIDE2KTtcbiAgICBpZiAodmFsdWVbMV0gPT09ICdvJykgcmV0dXJuIHNpZ24gKiBwYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgOCk7XG4gIH1cblxuICByZXR1cm4gc2lnbiAqIHBhcnNlSW50KHZhbHVlLCAxMCk7XG59XG5cbmZ1bmN0aW9uIGlzSW50ZWdlcihvYmplY3QpIHtcbiAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSkgPT09ICdbb2JqZWN0IE51bWJlcl0nICYmXG4gICAgICAgICAob2JqZWN0ICUgMSA9PT0gMCAmJiAhY29tbW9uLmlzTmVnYXRpdmVaZXJvKG9iamVjdCkpO1xufVxuXG52YXIgaW50ID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmludCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sSW50ZWdlcixcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sSW50ZWdlcixcbiAgcHJlZGljYXRlOiBpc0ludGVnZXIsXG4gIHJlcHJlc2VudDoge1xuICAgIGJpbmFyeTogICAgICBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogPj0gMCA/ICcwYicgKyBvYmoudG9TdHJpbmcoMikgOiAnLTBiJyArIG9iai50b1N0cmluZygyKS5zbGljZSgxKTsgfSxcbiAgICBvY3RhbDogICAgICAgZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqID49IDAgPyAnMG8nICArIG9iai50b1N0cmluZyg4KSA6ICctMG8nICArIG9iai50b1N0cmluZyg4KS5zbGljZSgxKTsgfSxcbiAgICBkZWNpbWFsOiAgICAgZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqLnRvU3RyaW5nKDEwKTsgfSxcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG4gICAgaGV4YWRlY2ltYWw6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiA+PSAwID8gJzB4JyArIG9iai50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSA6ICAnLTB4JyArIG9iai50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5zbGljZSgxKTsgfVxuICB9LFxuICBkZWZhdWx0U3R5bGU6ICdkZWNpbWFsJyxcbiAgc3R5bGVBbGlhc2VzOiB7XG4gICAgYmluYXJ5OiAgICAgIFsgMiwgICdiaW4nIF0sXG4gICAgb2N0YWw6ICAgICAgIFsgOCwgICdvY3QnIF0sXG4gICAgZGVjaW1hbDogICAgIFsgMTAsICdkZWMnIF0sXG4gICAgaGV4YWRlY2ltYWw6IFsgMTYsICdoZXgnIF1cbiAgfVxufSk7XG5cbnZhciBZQU1MX0ZMT0FUX1BBVFRFUk4gPSBuZXcgUmVnRXhwKFxuICAvLyAyLjVlNCwgMi41IGFuZCBpbnRlZ2Vyc1xuICAnXig/OlstK10/KD86WzAtOV1bMC05X10qKSg/OlxcXFwuWzAtOV9dKik/KD86W2VFXVstK10/WzAtOV0rKT8nICtcbiAgLy8gLjJlNCwgLjJcbiAgLy8gc3BlY2lhbCBjYXNlLCBzZWVtcyBub3QgZnJvbSBzcGVjXG4gICd8XFxcXC5bMC05X10rKD86W2VFXVstK10/WzAtOV0rKT8nICtcbiAgLy8gLmluZlxuICAnfFstK10/XFxcXC4oPzppbmZ8SW5mfElORiknICtcbiAgLy8gLm5hblxuICAnfFxcXFwuKD86bmFufE5hTnxOQU4pKSQnKTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxGbG9hdChkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKCFZQU1MX0ZMT0FUX1BBVFRFUk4udGVzdChkYXRhKSB8fFxuICAgICAgLy8gUXVpY2sgaGFjayB0byBub3QgYWxsb3cgaW50ZWdlcnMgZW5kIHdpdGggYF9gXG4gICAgICAvLyBQcm9iYWJseSBzaG91bGQgdXBkYXRlIHJlZ2V4cCAmIGNoZWNrIHNwZWVkXG4gICAgICBkYXRhW2RhdGEubGVuZ3RoIC0gMV0gPT09ICdfJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sRmxvYXQoZGF0YSkge1xuICB2YXIgdmFsdWUsIHNpZ247XG5cbiAgdmFsdWUgID0gZGF0YS5yZXBsYWNlKC9fL2csICcnKS50b0xvd2VyQ2FzZSgpO1xuICBzaWduICAgPSB2YWx1ZVswXSA9PT0gJy0nID8gLTEgOiAxO1xuXG4gIGlmICgnKy0nLmluZGV4T2YodmFsdWVbMF0pID49IDApIHtcbiAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEpO1xuICB9XG5cbiAgaWYgKHZhbHVlID09PSAnLmluZicpIHtcbiAgICByZXR1cm4gKHNpZ24gPT09IDEpID8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuXG4gIH0gZWxzZSBpZiAodmFsdWUgPT09ICcubmFuJykge1xuICAgIHJldHVybiBOYU47XG4gIH1cbiAgcmV0dXJuIHNpZ24gKiBwYXJzZUZsb2F0KHZhbHVlLCAxMCk7XG59XG5cblxudmFyIFNDSUVOVElGSUNfV0lUSE9VVF9ET1QgPSAvXlstK10/WzAtOV0rZS87XG5cbmZ1bmN0aW9uIHJlcHJlc2VudFlhbWxGbG9hdChvYmplY3QsIHN0eWxlKSB7XG4gIHZhciByZXM7XG5cbiAgaWYgKGlzTmFOKG9iamVjdCkpIHtcbiAgICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgICBjYXNlICdsb3dlcmNhc2UnOiByZXR1cm4gJy5uYW4nO1xuICAgICAgY2FzZSAndXBwZXJjYXNlJzogcmV0dXJuICcuTkFOJztcbiAgICAgIGNhc2UgJ2NhbWVsY2FzZSc6IHJldHVybiAnLk5hTic7XG4gICAgfVxuICB9IGVsc2UgaWYgKE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA9PT0gb2JqZWN0KSB7XG4gICAgc3dpdGNoIChzdHlsZSkge1xuICAgICAgY2FzZSAnbG93ZXJjYXNlJzogcmV0dXJuICcuaW5mJztcbiAgICAgIGNhc2UgJ3VwcGVyY2FzZSc6IHJldHVybiAnLklORic7XG4gICAgICBjYXNlICdjYW1lbGNhc2UnOiByZXR1cm4gJy5JbmYnO1xuICAgIH1cbiAgfSBlbHNlIGlmIChOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgPT09IG9iamVjdCkge1xuICAgIHN3aXRjaCAoc3R5bGUpIHtcbiAgICAgIGNhc2UgJ2xvd2VyY2FzZSc6IHJldHVybiAnLS5pbmYnO1xuICAgICAgY2FzZSAndXBwZXJjYXNlJzogcmV0dXJuICctLklORic7XG4gICAgICBjYXNlICdjYW1lbGNhc2UnOiByZXR1cm4gJy0uSW5mJztcbiAgICB9XG4gIH0gZWxzZSBpZiAoY29tbW9uLmlzTmVnYXRpdmVaZXJvKG9iamVjdCkpIHtcbiAgICByZXR1cm4gJy0wLjAnO1xuICB9XG5cbiAgcmVzID0gb2JqZWN0LnRvU3RyaW5nKDEwKTtcblxuICAvLyBKUyBzdHJpbmdpZmllciBjYW4gYnVpbGQgc2NpZW50aWZpYyBmb3JtYXQgd2l0aG91dCBkb3RzOiA1ZS0xMDAsXG4gIC8vIHdoaWxlIFlBTUwgcmVxdXJlcyBkb3Q6IDUuZS0xMDAuIEZpeCBpdCB3aXRoIHNpbXBsZSBoYWNrXG5cbiAgcmV0dXJuIFNDSUVOVElGSUNfV0lUSE9VVF9ET1QudGVzdChyZXMpID8gcmVzLnJlcGxhY2UoJ2UnLCAnLmUnKSA6IHJlcztcbn1cblxuZnVuY3Rpb24gaXNGbG9hdChvYmplY3QpIHtcbiAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gJ1tvYmplY3QgTnVtYmVyXScpICYmXG4gICAgICAgICAob2JqZWN0ICUgMSAhPT0gMCB8fCBjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSk7XG59XG5cbnZhciBmbG9hdCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpmbG9hdCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sRmxvYXQsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbEZsb2F0LFxuICBwcmVkaWNhdGU6IGlzRmxvYXQsXG4gIHJlcHJlc2VudDogcmVwcmVzZW50WWFtbEZsb2F0LFxuICBkZWZhdWx0U3R5bGU6ICdsb3dlcmNhc2UnXG59KTtcblxudmFyIGpzb24gPSBmYWlsc2FmZS5leHRlbmQoe1xuICBpbXBsaWNpdDogW1xuICAgIF9udWxsLFxuICAgIGJvb2wsXG4gICAgaW50LFxuICAgIGZsb2F0XG4gIF1cbn0pO1xuXG52YXIgY29yZSA9IGpzb247XG5cbnZhciBZQU1MX0RBVEVfUkVHRVhQID0gbmV3IFJlZ0V4cChcbiAgJ14oWzAtOV1bMC05XVswLTldWzAtOV0pJyAgICAgICAgICArIC8vIFsxXSB5ZWFyXG4gICctKFswLTldWzAtOV0pJyAgICAgICAgICAgICAgICAgICAgKyAvLyBbMl0gbW9udGhcbiAgJy0oWzAtOV1bMC05XSkkJyk7ICAgICAgICAgICAgICAgICAgIC8vIFszXSBkYXlcblxudmFyIFlBTUxfVElNRVNUQU1QX1JFR0VYUCA9IG5ldyBSZWdFeHAoXG4gICdeKFswLTldWzAtOV1bMC05XVswLTldKScgICAgICAgICAgKyAvLyBbMV0geWVhclxuICAnLShbMC05XVswLTldPyknICAgICAgICAgICAgICAgICAgICsgLy8gWzJdIG1vbnRoXG4gICctKFswLTldWzAtOV0/KScgICAgICAgICAgICAgICAgICAgKyAvLyBbM10gZGF5XG4gICcoPzpbVHRdfFsgXFxcXHRdKyknICAgICAgICAgICAgICAgICArIC8vIC4uLlxuICAnKFswLTldWzAtOV0/KScgICAgICAgICAgICAgICAgICAgICsgLy8gWzRdIGhvdXJcbiAgJzooWzAtOV1bMC05XSknICAgICAgICAgICAgICAgICAgICArIC8vIFs1XSBtaW51dGVcbiAgJzooWzAtOV1bMC05XSknICAgICAgICAgICAgICAgICAgICArIC8vIFs2XSBzZWNvbmRcbiAgJyg/OlxcXFwuKFswLTldKikpPycgICAgICAgICAgICAgICAgICsgLy8gWzddIGZyYWN0aW9uXG4gICcoPzpbIFxcXFx0XSooWnwoWy0rXSkoWzAtOV1bMC05XT8pJyArIC8vIFs4XSB0eiBbOV0gdHpfc2lnbiBbMTBdIHR6X2hvdXJcbiAgJyg/OjooWzAtOV1bMC05XSkpPykpPyQnKTsgICAgICAgICAgIC8vIFsxMV0gdHpfbWludXRlXG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sVGltZXN0YW1wKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgaWYgKFlBTUxfREFURV9SRUdFWFAuZXhlYyhkYXRhKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIGlmIChZQU1MX1RJTUVTVEFNUF9SRUdFWFAuZXhlYyhkYXRhKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbFRpbWVzdGFtcChkYXRhKSB7XG4gIHZhciBtYXRjaCwgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIGZyYWN0aW9uID0gMCxcbiAgICAgIGRlbHRhID0gbnVsbCwgdHpfaG91ciwgdHpfbWludXRlLCBkYXRlO1xuXG4gIG1hdGNoID0gWUFNTF9EQVRFX1JFR0VYUC5leGVjKGRhdGEpO1xuICBpZiAobWF0Y2ggPT09IG51bGwpIG1hdGNoID0gWUFNTF9USU1FU1RBTVBfUkVHRVhQLmV4ZWMoZGF0YSk7XG5cbiAgaWYgKG1hdGNoID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ0RhdGUgcmVzb2x2ZSBlcnJvcicpO1xuXG4gIC8vIG1hdGNoOiBbMV0geWVhciBbMl0gbW9udGggWzNdIGRheVxuXG4gIHllYXIgPSArKG1hdGNoWzFdKTtcbiAgbW9udGggPSArKG1hdGNoWzJdKSAtIDE7IC8vIEpTIG1vbnRoIHN0YXJ0cyB3aXRoIDBcbiAgZGF5ID0gKyhtYXRjaFszXSk7XG5cbiAgaWYgKCFtYXRjaFs0XSkgeyAvLyBubyBob3VyXG4gICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoLCBkYXkpKTtcbiAgfVxuXG4gIC8vIG1hdGNoOiBbNF0gaG91ciBbNV0gbWludXRlIFs2XSBzZWNvbmQgWzddIGZyYWN0aW9uXG5cbiAgaG91ciA9ICsobWF0Y2hbNF0pO1xuICBtaW51dGUgPSArKG1hdGNoWzVdKTtcbiAgc2Vjb25kID0gKyhtYXRjaFs2XSk7XG5cbiAgaWYgKG1hdGNoWzddKSB7XG4gICAgZnJhY3Rpb24gPSBtYXRjaFs3XS5zbGljZSgwLCAzKTtcbiAgICB3aGlsZSAoZnJhY3Rpb24ubGVuZ3RoIDwgMykgeyAvLyBtaWxsaS1zZWNvbmRzXG4gICAgICBmcmFjdGlvbiArPSAnMCc7XG4gICAgfVxuICAgIGZyYWN0aW9uID0gK2ZyYWN0aW9uO1xuICB9XG5cbiAgLy8gbWF0Y2g6IFs4XSB0eiBbOV0gdHpfc2lnbiBbMTBdIHR6X2hvdXIgWzExXSB0el9taW51dGVcblxuICBpZiAobWF0Y2hbOV0pIHtcbiAgICB0el9ob3VyID0gKyhtYXRjaFsxMF0pO1xuICAgIHR6X21pbnV0ZSA9ICsobWF0Y2hbMTFdIHx8IDApO1xuICAgIGRlbHRhID0gKHR6X2hvdXIgKiA2MCArIHR6X21pbnV0ZSkgKiA2MDAwMDsgLy8gZGVsdGEgaW4gbWlsaS1zZWNvbmRzXG4gICAgaWYgKG1hdGNoWzldID09PSAnLScpIGRlbHRhID0gLWRlbHRhO1xuICB9XG5cbiAgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBmcmFjdGlvbikpO1xuXG4gIGlmIChkZWx0YSkgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gZGVsdGEpO1xuXG4gIHJldHVybiBkYXRlO1xufVxuXG5mdW5jdGlvbiByZXByZXNlbnRZYW1sVGltZXN0YW1wKG9iamVjdCAvKiwgc3R5bGUqLykge1xuICByZXR1cm4gb2JqZWN0LnRvSVNPU3RyaW5nKCk7XG59XG5cbnZhciB0aW1lc3RhbXAgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6dGltZXN0YW1wJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxUaW1lc3RhbXAsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbFRpbWVzdGFtcCxcbiAgaW5zdGFuY2VPZjogRGF0ZSxcbiAgcmVwcmVzZW50OiByZXByZXNlbnRZYW1sVGltZXN0YW1wXG59KTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxNZXJnZShkYXRhKSB7XG4gIHJldHVybiBkYXRhID09PSAnPDwnIHx8IGRhdGEgPT09IG51bGw7XG59XG5cbnZhciBtZXJnZSA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjptZXJnZScsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sTWVyZ2Vcbn0pO1xuXG4vKmVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UqL1xuXG5cblxuXG5cbi8vIFsgNjQsIDY1LCA2NiBdIC0+IFsgcGFkZGluZywgQ1IsIExGIF1cbnZhciBCQVNFNjRfTUFQID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XFxuXFxyJztcblxuXG5mdW5jdGlvbiByZXNvbHZlWWFtbEJpbmFyeShkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGNvZGUsIGlkeCwgYml0bGVuID0gMCwgbWF4ID0gZGF0YS5sZW5ndGgsIG1hcCA9IEJBU0U2NF9NQVA7XG5cbiAgLy8gQ29udmVydCBvbmUgYnkgb25lLlxuICBmb3IgKGlkeCA9IDA7IGlkeCA8IG1heDsgaWR4KyspIHtcbiAgICBjb2RlID0gbWFwLmluZGV4T2YoZGF0YS5jaGFyQXQoaWR4KSk7XG5cbiAgICAvLyBTa2lwIENSL0xGXG4gICAgaWYgKGNvZGUgPiA2NCkgY29udGludWU7XG5cbiAgICAvLyBGYWlsIG9uIGlsbGVnYWwgY2hhcmFjdGVyc1xuICAgIGlmIChjb2RlIDwgMCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgYml0bGVuICs9IDY7XG4gIH1cblxuICAvLyBJZiB0aGVyZSBhcmUgYW55IGJpdHMgbGVmdCwgc291cmNlIHdhcyBjb3JydXB0ZWRcbiAgcmV0dXJuIChiaXRsZW4gJSA4KSA9PT0gMDtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbEJpbmFyeShkYXRhKSB7XG4gIHZhciBpZHgsIHRhaWxiaXRzLFxuICAgICAgaW5wdXQgPSBkYXRhLnJlcGxhY2UoL1tcXHJcXG49XS9nLCAnJyksIC8vIHJlbW92ZSBDUi9MRiAmIHBhZGRpbmcgdG8gc2ltcGxpZnkgc2NhblxuICAgICAgbWF4ID0gaW5wdXQubGVuZ3RoLFxuICAgICAgbWFwID0gQkFTRTY0X01BUCxcbiAgICAgIGJpdHMgPSAwLFxuICAgICAgcmVzdWx0ID0gW107XG5cbiAgLy8gQ29sbGVjdCBieSA2KjQgYml0cyAoMyBieXRlcylcblxuICBmb3IgKGlkeCA9IDA7IGlkeCA8IG1heDsgaWR4KyspIHtcbiAgICBpZiAoKGlkeCAlIDQgPT09IDApICYmIGlkeCkge1xuICAgICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gMTYpICYgMHhGRik7XG4gICAgICByZXN1bHQucHVzaCgoYml0cyA+PiA4KSAmIDB4RkYpO1xuICAgICAgcmVzdWx0LnB1c2goYml0cyAmIDB4RkYpO1xuICAgIH1cblxuICAgIGJpdHMgPSAoYml0cyA8PCA2KSB8IG1hcC5pbmRleE9mKGlucHV0LmNoYXJBdChpZHgpKTtcbiAgfVxuXG4gIC8vIER1bXAgdGFpbFxuXG4gIHRhaWxiaXRzID0gKG1heCAlIDQpICogNjtcblxuICBpZiAodGFpbGJpdHMgPT09IDApIHtcbiAgICByZXN1bHQucHVzaCgoYml0cyA+PiAxNikgJiAweEZGKTtcbiAgICByZXN1bHQucHVzaCgoYml0cyA+PiA4KSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKGJpdHMgJiAweEZGKTtcbiAgfSBlbHNlIGlmICh0YWlsYml0cyA9PT0gMTgpIHtcbiAgICByZXN1bHQucHVzaCgoYml0cyA+PiAxMCkgJiAweEZGKTtcbiAgICByZXN1bHQucHVzaCgoYml0cyA+PiAyKSAmIDB4RkYpO1xuICB9IGVsc2UgaWYgKHRhaWxiaXRzID09PSAxMikge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDQpICYgMHhGRik7XG4gIH1cblxuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkocmVzdWx0KTtcbn1cblxuZnVuY3Rpb24gcmVwcmVzZW50WWFtbEJpbmFyeShvYmplY3QgLyosIHN0eWxlKi8pIHtcbiAgdmFyIHJlc3VsdCA9ICcnLCBiaXRzID0gMCwgaWR4LCB0YWlsLFxuICAgICAgbWF4ID0gb2JqZWN0Lmxlbmd0aCxcbiAgICAgIG1hcCA9IEJBU0U2NF9NQVA7XG5cbiAgLy8gQ29udmVydCBldmVyeSB0aHJlZSBieXRlcyB0byA0IEFTQ0lJIGNoYXJhY3RlcnMuXG5cbiAgZm9yIChpZHggPSAwOyBpZHggPCBtYXg7IGlkeCsrKSB7XG4gICAgaWYgKChpZHggJSAzID09PSAwKSAmJiBpZHgpIHtcbiAgICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTgpICYgMHgzRl07XG4gICAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDEyKSAmIDB4M0ZdO1xuICAgICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiA2KSAmIDB4M0ZdO1xuICAgICAgcmVzdWx0ICs9IG1hcFtiaXRzICYgMHgzRl07XG4gICAgfVxuXG4gICAgYml0cyA9IChiaXRzIDw8IDgpICsgb2JqZWN0W2lkeF07XG4gIH1cblxuICAvLyBEdW1wIHRhaWxcblxuICB0YWlsID0gbWF4ICUgMztcblxuICBpZiAodGFpbCA9PT0gMCkge1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTgpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxMikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDYpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFtiaXRzICYgMHgzRl07XG4gIH0gZWxzZSBpZiAodGFpbCA9PT0gMikge1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTApICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiA0KSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPDwgMikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgfSBlbHNlIGlmICh0YWlsID09PSAxKSB7XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAyKSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPDwgNCkgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGlzQmluYXJ5KG9iaikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICAnW29iamVjdCBVaW50OEFycmF5XSc7XG59XG5cbnZhciBiaW5hcnkgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6YmluYXJ5Jywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxCaW5hcnksXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbEJpbmFyeSxcbiAgcHJlZGljYXRlOiBpc0JpbmFyeSxcbiAgcmVwcmVzZW50OiByZXByZXNlbnRZYW1sQmluYXJ5XG59KTtcblxudmFyIF9oYXNPd25Qcm9wZXJ0eSQzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfdG9TdHJpbmckMiAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sT21hcChkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICB2YXIgb2JqZWN0S2V5cyA9IFtdLCBpbmRleCwgbGVuZ3RoLCBwYWlyLCBwYWlyS2V5LCBwYWlySGFzS2V5LFxuICAgICAgb2JqZWN0ID0gZGF0YTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBwYWlyID0gb2JqZWN0W2luZGV4XTtcbiAgICBwYWlySGFzS2V5ID0gZmFsc2U7XG5cbiAgICBpZiAoX3RvU3RyaW5nJDIuY2FsbChwYWlyKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAocGFpcktleSBpbiBwYWlyKSB7XG4gICAgICBpZiAoX2hhc093blByb3BlcnR5JDMuY2FsbChwYWlyLCBwYWlyS2V5KSkge1xuICAgICAgICBpZiAoIXBhaXJIYXNLZXkpIHBhaXJIYXNLZXkgPSB0cnVlO1xuICAgICAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXBhaXJIYXNLZXkpIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChvYmplY3RLZXlzLmluZGV4T2YocGFpcktleSkgPT09IC0xKSBvYmplY3RLZXlzLnB1c2gocGFpcktleSk7XG4gICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbE9tYXAoZGF0YSkge1xuICByZXR1cm4gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiBbXTtcbn1cblxudmFyIG9tYXAgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6b21hcCcsIHtcbiAga2luZDogJ3NlcXVlbmNlJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxPbWFwLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxPbWFwXG59KTtcblxudmFyIF90b1N0cmluZyQxID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxQYWlycyhkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICB2YXIgaW5kZXgsIGxlbmd0aCwgcGFpciwga2V5cywgcmVzdWx0LFxuICAgICAgb2JqZWN0ID0gZGF0YTtcblxuICByZXN1bHQgPSBuZXcgQXJyYXkob2JqZWN0Lmxlbmd0aCk7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpciA9IG9iamVjdFtpbmRleF07XG5cbiAgICBpZiAoX3RvU3RyaW5nJDEuY2FsbChwYWlyKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHJldHVybiBmYWxzZTtcblxuICAgIGtleXMgPSBPYmplY3Qua2V5cyhwYWlyKTtcblxuICAgIGlmIChrZXlzLmxlbmd0aCAhPT0gMSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmVzdWx0W2luZGV4XSA9IFsga2V5c1swXSwgcGFpcltrZXlzWzBdXSBdO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxQYWlycyhkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gW107XG5cbiAgdmFyIGluZGV4LCBsZW5ndGgsIHBhaXIsIGtleXMsIHJlc3VsdCxcbiAgICAgIG9iamVjdCA9IGRhdGE7XG5cbiAgcmVzdWx0ID0gbmV3IEFycmF5KG9iamVjdC5sZW5ndGgpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXIgPSBvYmplY3RbaW5kZXhdO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKHBhaXIpO1xuXG4gICAgcmVzdWx0W2luZGV4XSA9IFsga2V5c1swXSwgcGFpcltrZXlzWzBdXSBdO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIHBhaXJzID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnBhaXJzJywge1xuICBraW5kOiAnc2VxdWVuY2UnLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbFBhaXJzLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxQYWlyc1xufSk7XG5cbnZhciBfaGFzT3duUHJvcGVydHkkMiA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sU2V0KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBrZXksIG9iamVjdCA9IGRhdGE7XG5cbiAgZm9yIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKF9oYXNPd25Qcm9wZXJ0eSQyLmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICBpZiAob2JqZWN0W2tleV0gIT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbFNldChkYXRhKSB7XG4gIHJldHVybiBkYXRhICE9PSBudWxsID8gZGF0YSA6IHt9O1xufVxuXG52YXIgc2V0ID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnNldCcsIHtcbiAga2luZDogJ21hcHBpbmcnLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbFNldCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sU2V0XG59KTtcblxudmFyIF9kZWZhdWx0ID0gY29yZS5leHRlbmQoe1xuICBpbXBsaWNpdDogW1xuICAgIHRpbWVzdGFtcCxcbiAgICBtZXJnZVxuICBdLFxuICBleHBsaWNpdDogW1xuICAgIGJpbmFyeSxcbiAgICBvbWFwLFxuICAgIHBhaXJzLFxuICAgIHNldFxuICBdXG59KTtcblxuLyplc2xpbnQtZGlzYWJsZSBtYXgtbGVuLG5vLXVzZS1iZWZvcmUtZGVmaW5lKi9cblxuXG5cblxuXG5cblxudmFyIF9oYXNPd25Qcm9wZXJ0eSQxID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuXG52YXIgQ09OVEVYVF9GTE9XX0lOICAgPSAxO1xudmFyIENPTlRFWFRfRkxPV19PVVQgID0gMjtcbnZhciBDT05URVhUX0JMT0NLX0lOICA9IDM7XG52YXIgQ09OVEVYVF9CTE9DS19PVVQgPSA0O1xuXG5cbnZhciBDSE9NUElOR19DTElQICA9IDE7XG52YXIgQ0hPTVBJTkdfU1RSSVAgPSAyO1xudmFyIENIT01QSU5HX0tFRVAgID0gMztcblxuXG52YXIgUEFUVEVSTl9OT05fUFJJTlRBQkxFICAgICAgICAgPSAvW1xceDAwLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4N0YtXFx4ODRcXHg4Ni1cXHg5RlxcdUZGRkVcXHVGRkZGXXxbXFx1RDgwMC1cXHVEQkZGXSg/IVtcXHVEQzAwLVxcdURGRkZdKXwoPzpbXlxcdUQ4MDAtXFx1REJGRl18XilbXFx1REMwMC1cXHVERkZGXS87XG52YXIgUEFUVEVSTl9OT05fQVNDSUlfTElORV9CUkVBS1MgPSAvW1xceDg1XFx1MjAyOFxcdTIwMjldLztcbnZhciBQQVRURVJOX0ZMT1dfSU5ESUNBVE9SUyAgICAgICA9IC9bLFxcW1xcXVxce1xcfV0vO1xudmFyIFBBVFRFUk5fVEFHX0hBTkRMRSAgICAgICAgICAgID0gL14oPzohfCEhfCFbYS16XFwtXSshKSQvaTtcbnZhciBQQVRURVJOX1RBR19VUkkgICAgICAgICAgICAgICA9IC9eKD86IXxbXixcXFtcXF1cXHtcXH1dKSg/OiVbMC05YS1mXXsyfXxbMC05YS16XFwtIztcXC9cXD86QCY9XFwrXFwkLF9cXC4hflxcKidcXChcXClcXFtcXF1dKSokL2k7XG5cblxuZnVuY3Rpb24gX2NsYXNzKG9iaikgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7IH1cblxuZnVuY3Rpb24gaXNfRU9MKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDBBLyogTEYgKi8pIHx8IChjID09PSAweDBELyogQ1IgKi8pO1xufVxuXG5mdW5jdGlvbiBpc19XSElURV9TUEFDRShjKSB7XG4gIHJldHVybiAoYyA9PT0gMHgwOS8qIFRhYiAqLykgfHwgKGMgPT09IDB4MjAvKiBTcGFjZSAqLyk7XG59XG5cbmZ1bmN0aW9uIGlzX1dTX09SX0VPTChjKSB7XG4gIHJldHVybiAoYyA9PT0gMHgwOS8qIFRhYiAqLykgfHxcbiAgICAgICAgIChjID09PSAweDIwLyogU3BhY2UgKi8pIHx8XG4gICAgICAgICAoYyA9PT0gMHgwQS8qIExGICovKSB8fFxuICAgICAgICAgKGMgPT09IDB4MEQvKiBDUiAqLyk7XG59XG5cbmZ1bmN0aW9uIGlzX0ZMT1dfSU5ESUNBVE9SKGMpIHtcbiAgcmV0dXJuIGMgPT09IDB4MkMvKiAsICovIHx8XG4gICAgICAgICBjID09PSAweDVCLyogWyAqLyB8fFxuICAgICAgICAgYyA9PT0gMHg1RC8qIF0gKi8gfHxcbiAgICAgICAgIGMgPT09IDB4N0IvKiB7ICovIHx8XG4gICAgICAgICBjID09PSAweDdELyogfSAqLztcbn1cblxuZnVuY3Rpb24gZnJvbUhleENvZGUoYykge1xuICB2YXIgbGM7XG5cbiAgaWYgKCgweDMwLyogMCAqLyA8PSBjKSAmJiAoYyA8PSAweDM5LyogOSAqLykpIHtcbiAgICByZXR1cm4gYyAtIDB4MzA7XG4gIH1cblxuICAvKmVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UqL1xuICBsYyA9IGMgfCAweDIwO1xuXG4gIGlmICgoMHg2MS8qIGEgKi8gPD0gbGMpICYmIChsYyA8PSAweDY2LyogZiAqLykpIHtcbiAgICByZXR1cm4gbGMgLSAweDYxICsgMTA7XG4gIH1cblxuICByZXR1cm4gLTE7XG59XG5cbmZ1bmN0aW9uIGVzY2FwZWRIZXhMZW4oYykge1xuICBpZiAoYyA9PT0gMHg3OC8qIHggKi8pIHsgcmV0dXJuIDI7IH1cbiAgaWYgKGMgPT09IDB4NzUvKiB1ICovKSB7IHJldHVybiA0OyB9XG4gIGlmIChjID09PSAweDU1LyogVSAqLykgeyByZXR1cm4gODsgfVxuICByZXR1cm4gMDtcbn1cblxuZnVuY3Rpb24gZnJvbURlY2ltYWxDb2RlKGMpIHtcbiAgaWYgKCgweDMwLyogMCAqLyA8PSBjKSAmJiAoYyA8PSAweDM5LyogOSAqLykpIHtcbiAgICByZXR1cm4gYyAtIDB4MzA7XG4gIH1cblxuICByZXR1cm4gLTE7XG59XG5cbmZ1bmN0aW9uIHNpbXBsZUVzY2FwZVNlcXVlbmNlKGMpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgaW5kZW50ICovXG4gIHJldHVybiAoYyA9PT0gMHgzMC8qIDAgKi8pID8gJ1xceDAwJyA6XG4gICAgICAgIChjID09PSAweDYxLyogYSAqLykgPyAnXFx4MDcnIDpcbiAgICAgICAgKGMgPT09IDB4NjIvKiBiICovKSA/ICdcXHgwOCcgOlxuICAgICAgICAoYyA9PT0gMHg3NC8qIHQgKi8pID8gJ1xceDA5JyA6XG4gICAgICAgIChjID09PSAweDA5LyogVGFiICovKSA/ICdcXHgwOScgOlxuICAgICAgICAoYyA9PT0gMHg2RS8qIG4gKi8pID8gJ1xceDBBJyA6XG4gICAgICAgIChjID09PSAweDc2LyogdiAqLykgPyAnXFx4MEInIDpcbiAgICAgICAgKGMgPT09IDB4NjYvKiBmICovKSA/ICdcXHgwQycgOlxuICAgICAgICAoYyA9PT0gMHg3Mi8qIHIgKi8pID8gJ1xceDBEJyA6XG4gICAgICAgIChjID09PSAweDY1LyogZSAqLykgPyAnXFx4MUInIDpcbiAgICAgICAgKGMgPT09IDB4MjAvKiBTcGFjZSAqLykgPyAnICcgOlxuICAgICAgICAoYyA9PT0gMHgyMi8qIFwiICovKSA/ICdcXHgyMicgOlxuICAgICAgICAoYyA9PT0gMHgyRi8qIC8gKi8pID8gJy8nIDpcbiAgICAgICAgKGMgPT09IDB4NUMvKiBcXCAqLykgPyAnXFx4NUMnIDpcbiAgICAgICAgKGMgPT09IDB4NEUvKiBOICovKSA/ICdcXHg4NScgOlxuICAgICAgICAoYyA9PT0gMHg1Ri8qIF8gKi8pID8gJ1xceEEwJyA6XG4gICAgICAgIChjID09PSAweDRDLyogTCAqLykgPyAnXFx1MjAyOCcgOlxuICAgICAgICAoYyA9PT0gMHg1MC8qIFAgKi8pID8gJ1xcdTIwMjknIDogJyc7XG59XG5cbmZ1bmN0aW9uIGNoYXJGcm9tQ29kZXBvaW50KGMpIHtcbiAgaWYgKGMgPD0gMHhGRkZGKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG4gIH1cbiAgLy8gRW5jb2RlIFVURi0xNiBzdXJyb2dhdGUgcGFpclxuICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VVEYtMTYjQ29kZV9wb2ludHNfVS4yQjAxMDAwMF90b19VLjJCMTBGRkZGXG4gIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKFxuICAgICgoYyAtIDB4MDEwMDAwKSA+PiAxMCkgKyAweEQ4MDAsXG4gICAgKChjIC0gMHgwMTAwMDApICYgMHgwM0ZGKSArIDB4REMwMFxuICApO1xufVxuXG52YXIgc2ltcGxlRXNjYXBlQ2hlY2sgPSBuZXcgQXJyYXkoMjU2KTsgLy8gaW50ZWdlciwgZm9yIGZhc3QgYWNjZXNzXG52YXIgc2ltcGxlRXNjYXBlTWFwID0gbmV3IEFycmF5KDI1Nik7XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gIHNpbXBsZUVzY2FwZUNoZWNrW2ldID0gc2ltcGxlRXNjYXBlU2VxdWVuY2UoaSkgPyAxIDogMDtcbiAgc2ltcGxlRXNjYXBlTWFwW2ldID0gc2ltcGxlRXNjYXBlU2VxdWVuY2UoaSk7XG59XG5cblxuZnVuY3Rpb24gU3RhdGUkMShpbnB1dCwgb3B0aW9ucykge1xuICB0aGlzLmlucHV0ID0gaW5wdXQ7XG5cbiAgdGhpcy5maWxlbmFtZSAgPSBvcHRpb25zWydmaWxlbmFtZSddICB8fCBudWxsO1xuICB0aGlzLnNjaGVtYSAgICA9IG9wdGlvbnNbJ3NjaGVtYSddICAgIHx8IF9kZWZhdWx0O1xuICB0aGlzLm9uV2FybmluZyA9IG9wdGlvbnNbJ29uV2FybmluZyddIHx8IG51bGw7XG4gIC8vIChIaWRkZW4pIFJlbW92ZT8gbWFrZXMgdGhlIGxvYWRlciB0byBleHBlY3QgWUFNTCAxLjEgZG9jdW1lbnRzXG4gIC8vIGlmIHN1Y2ggZG9jdW1lbnRzIGhhdmUgbm8gZXhwbGljaXQgJVlBTUwgZGlyZWN0aXZlXG4gIHRoaXMubGVnYWN5ICAgID0gb3B0aW9uc1snbGVnYWN5J10gICAgfHwgZmFsc2U7XG5cbiAgdGhpcy5qc29uICAgICAgPSBvcHRpb25zWydqc29uJ10gICAgICB8fCBmYWxzZTtcbiAgdGhpcy5saXN0ZW5lciAgPSBvcHRpb25zWydsaXN0ZW5lciddICB8fCBudWxsO1xuXG4gIHRoaXMuaW1wbGljaXRUeXBlcyA9IHRoaXMuc2NoZW1hLmNvbXBpbGVkSW1wbGljaXQ7XG4gIHRoaXMudHlwZU1hcCAgICAgICA9IHRoaXMuc2NoZW1hLmNvbXBpbGVkVHlwZU1hcDtcblxuICB0aGlzLmxlbmd0aCAgICAgPSBpbnB1dC5sZW5ndGg7XG4gIHRoaXMucG9zaXRpb24gICA9IDA7XG4gIHRoaXMubGluZSAgICAgICA9IDA7XG4gIHRoaXMubGluZVN0YXJ0ICA9IDA7XG4gIHRoaXMubGluZUluZGVudCA9IDA7XG5cbiAgLy8gcG9zaXRpb24gb2YgZmlyc3QgbGVhZGluZyB0YWIgaW4gdGhlIGN1cnJlbnQgbGluZSxcbiAgLy8gdXNlZCB0byBtYWtlIHN1cmUgdGhlcmUgYXJlIG5vIHRhYnMgaW4gdGhlIGluZGVudGF0aW9uXG4gIHRoaXMuZmlyc3RUYWJJbkxpbmUgPSAtMTtcblxuICB0aGlzLmRvY3VtZW50cyA9IFtdO1xuXG4gIC8qXG4gIHRoaXMudmVyc2lvbjtcbiAgdGhpcy5jaGVja0xpbmVCcmVha3M7XG4gIHRoaXMudGFnTWFwO1xuICB0aGlzLmFuY2hvck1hcDtcbiAgdGhpcy50YWc7XG4gIHRoaXMuYW5jaG9yO1xuICB0aGlzLmtpbmQ7XG4gIHRoaXMucmVzdWx0OyovXG5cbn1cblxuXG5mdW5jdGlvbiBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKSB7XG4gIHZhciBtYXJrID0ge1xuICAgIG5hbWU6ICAgICBzdGF0ZS5maWxlbmFtZSxcbiAgICBidWZmZXI6ICAgc3RhdGUuaW5wdXQuc2xpY2UoMCwgLTEpLCAvLyBvbWl0IHRyYWlsaW5nIFxcMFxuICAgIHBvc2l0aW9uOiBzdGF0ZS5wb3NpdGlvbixcbiAgICBsaW5lOiAgICAgc3RhdGUubGluZSxcbiAgICBjb2x1bW46ICAgc3RhdGUucG9zaXRpb24gLSBzdGF0ZS5saW5lU3RhcnRcbiAgfTtcblxuICBtYXJrLnNuaXBwZXQgPSBzbmlwcGV0KG1hcmspO1xuXG4gIHJldHVybiBuZXcgZXhjZXB0aW9uKG1lc3NhZ2UsIG1hcmspO1xufVxuXG5mdW5jdGlvbiB0aHJvd0Vycm9yKHN0YXRlLCBtZXNzYWdlKSB7XG4gIHRocm93IGdlbmVyYXRlRXJyb3Ioc3RhdGUsIG1lc3NhZ2UpO1xufVxuXG5mdW5jdGlvbiB0aHJvd1dhcm5pbmcoc3RhdGUsIG1lc3NhZ2UpIHtcbiAgaWYgKHN0YXRlLm9uV2FybmluZykge1xuICAgIHN0YXRlLm9uV2FybmluZy5jYWxsKG51bGwsIGdlbmVyYXRlRXJyb3Ioc3RhdGUsIG1lc3NhZ2UpKTtcbiAgfVxufVxuXG5cbnZhciBkaXJlY3RpdmVIYW5kbGVycyA9IHtcblxuICBZQU1MOiBmdW5jdGlvbiBoYW5kbGVZYW1sRGlyZWN0aXZlKHN0YXRlLCBuYW1lLCBhcmdzKSB7XG5cbiAgICB2YXIgbWF0Y2gsIG1ham9yLCBtaW5vcjtcblxuICAgIGlmIChzdGF0ZS52ZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZHVwbGljYXRpb24gb2YgJVlBTUwgZGlyZWN0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKGFyZ3MubGVuZ3RoICE9PSAxKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnWUFNTCBkaXJlY3RpdmUgYWNjZXB0cyBleGFjdGx5IG9uZSBhcmd1bWVudCcpO1xuICAgIH1cblxuICAgIG1hdGNoID0gL14oWzAtOV0rKVxcLihbMC05XSspJC8uZXhlYyhhcmdzWzBdKTtcblxuICAgIGlmIChtYXRjaCA9PT0gbnVsbCkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2lsbC1mb3JtZWQgYXJndW1lbnQgb2YgdGhlIFlBTUwgZGlyZWN0aXZlJyk7XG4gICAgfVxuXG4gICAgbWFqb3IgPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgIG1pbm9yID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcblxuICAgIGlmIChtYWpvciAhPT0gMSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuYWNjZXB0YWJsZSBZQU1MIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50Jyk7XG4gICAgfVxuXG4gICAgc3RhdGUudmVyc2lvbiA9IGFyZ3NbMF07XG4gICAgc3RhdGUuY2hlY2tMaW5lQnJlYWtzID0gKG1pbm9yIDwgMik7XG5cbiAgICBpZiAobWlub3IgIT09IDEgJiYgbWlub3IgIT09IDIpIHtcbiAgICAgIHRocm93V2FybmluZyhzdGF0ZSwgJ3Vuc3VwcG9ydGVkIFlBTUwgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnQnKTtcbiAgICB9XG4gIH0sXG5cbiAgVEFHOiBmdW5jdGlvbiBoYW5kbGVUYWdEaXJlY3RpdmUoc3RhdGUsIG5hbWUsIGFyZ3MpIHtcblxuICAgIHZhciBoYW5kbGUsIHByZWZpeDtcblxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMikge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ1RBRyBkaXJlY3RpdmUgYWNjZXB0cyBleGFjdGx5IHR3byBhcmd1bWVudHMnKTtcbiAgICB9XG5cbiAgICBoYW5kbGUgPSBhcmdzWzBdO1xuICAgIHByZWZpeCA9IGFyZ3NbMV07XG5cbiAgICBpZiAoIVBBVFRFUk5fVEFHX0hBTkRMRS50ZXN0KGhhbmRsZSkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbGwtZm9ybWVkIHRhZyBoYW5kbGUgKGZpcnN0IGFyZ3VtZW50KSBvZiB0aGUgVEFHIGRpcmVjdGl2ZScpO1xuICAgIH1cblxuICAgIGlmIChfaGFzT3duUHJvcGVydHkkMS5jYWxsKHN0YXRlLnRhZ01hcCwgaGFuZGxlKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RoZXJlIGlzIGEgcHJldmlvdXNseSBkZWNsYXJlZCBzdWZmaXggZm9yIFwiJyArIGhhbmRsZSArICdcIiB0YWcgaGFuZGxlJyk7XG4gICAgfVxuXG4gICAgaWYgKCFQQVRURVJOX1RBR19VUkkudGVzdChwcmVmaXgpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaWxsLWZvcm1lZCB0YWcgcHJlZml4IChzZWNvbmQgYXJndW1lbnQpIG9mIHRoZSBUQUcgZGlyZWN0aXZlJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHByZWZpeCA9IGRlY29kZVVSSUNvbXBvbmVudChwcmVmaXgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhZyBwcmVmaXggaXMgbWFsZm9ybWVkOiAnICsgcHJlZml4KTtcbiAgICB9XG5cbiAgICBzdGF0ZS50YWdNYXBbaGFuZGxlXSA9IHByZWZpeDtcbiAgfVxufTtcblxuXG5mdW5jdGlvbiBjYXB0dXJlU2VnbWVudChzdGF0ZSwgc3RhcnQsIGVuZCwgY2hlY2tKc29uKSB7XG4gIHZhciBfcG9zaXRpb24sIF9sZW5ndGgsIF9jaGFyYWN0ZXIsIF9yZXN1bHQ7XG5cbiAgaWYgKHN0YXJ0IDwgZW5kKSB7XG4gICAgX3Jlc3VsdCA9IHN0YXRlLmlucHV0LnNsaWNlKHN0YXJ0LCBlbmQpO1xuXG4gICAgaWYgKGNoZWNrSnNvbikge1xuICAgICAgZm9yIChfcG9zaXRpb24gPSAwLCBfbGVuZ3RoID0gX3Jlc3VsdC5sZW5ndGg7IF9wb3NpdGlvbiA8IF9sZW5ndGg7IF9wb3NpdGlvbiArPSAxKSB7XG4gICAgICAgIF9jaGFyYWN0ZXIgPSBfcmVzdWx0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uKTtcbiAgICAgICAgaWYgKCEoX2NoYXJhY3RlciA9PT0gMHgwOSB8fFxuICAgICAgICAgICAgICAoMHgyMCA8PSBfY2hhcmFjdGVyICYmIF9jaGFyYWN0ZXIgPD0gMHgxMEZGRkYpKSkge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdleHBlY3RlZCB2YWxpZCBKU09OIGNoYXJhY3RlcicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChQQVRURVJOX05PTl9QUklOVEFCTEUudGVzdChfcmVzdWx0KSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RoZSBzdHJlYW0gY29udGFpbnMgbm9uLXByaW50YWJsZSBjaGFyYWN0ZXJzJyk7XG4gICAgfVxuXG4gICAgc3RhdGUucmVzdWx0ICs9IF9yZXN1bHQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWVyZ2VNYXBwaW5ncyhzdGF0ZSwgZGVzdGluYXRpb24sIHNvdXJjZSwgb3ZlcnJpZGFibGVLZXlzKSB7XG4gIHZhciBzb3VyY2VLZXlzLCBrZXksIGluZGV4LCBxdWFudGl0eTtcblxuICBpZiAoIWNvbW1vbi5pc09iamVjdChzb3VyY2UpKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2Nhbm5vdCBtZXJnZSBtYXBwaW5nczsgdGhlIHByb3ZpZGVkIHNvdXJjZSBvYmplY3QgaXMgdW5hY2NlcHRhYmxlJyk7XG4gIH1cblxuICBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcblxuICBmb3IgKGluZGV4ID0gMCwgcXVhbnRpdHkgPSBzb3VyY2VLZXlzLmxlbmd0aDsgaW5kZXggPCBxdWFudGl0eTsgaW5kZXggKz0gMSkge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaW5kZXhdO1xuXG4gICAgaWYgKCFfaGFzT3duUHJvcGVydHkkMS5jYWxsKGRlc3RpbmF0aW9uLCBrZXkpKSB7XG4gICAgICBkZXN0aW5hdGlvbltrZXldID0gc291cmNlW2tleV07XG4gICAgICBvdmVycmlkYWJsZUtleXNba2V5XSA9IHRydWU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUsXG4gIHN0YXJ0TGluZSwgc3RhcnRMaW5lU3RhcnQsIHN0YXJ0UG9zKSB7XG5cbiAgdmFyIGluZGV4LCBxdWFudGl0eTtcblxuICAvLyBUaGUgb3V0cHV0IGlzIGEgcGxhaW4gb2JqZWN0IGhlcmUsIHNvIGtleXMgY2FuIG9ubHkgYmUgc3RyaW5ncy5cbiAgLy8gV2UgbmVlZCB0byBjb252ZXJ0IGtleU5vZGUgdG8gYSBzdHJpbmcsIGJ1dCBkb2luZyBzbyBjYW4gaGFuZyB0aGUgcHJvY2Vzc1xuICAvLyAoZGVlcGx5IG5lc3RlZCBhcnJheXMgdGhhdCBleHBsb2RlIGV4cG9uZW50aWFsbHkgdXNpbmcgYWxpYXNlcykuXG4gIGlmIChBcnJheS5pc0FycmF5KGtleU5vZGUpKSB7XG4gICAga2V5Tm9kZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGtleU5vZGUpO1xuXG4gICAgZm9yIChpbmRleCA9IDAsIHF1YW50aXR5ID0ga2V5Tm9kZS5sZW5ndGg7IGluZGV4IDwgcXVhbnRpdHk7IGluZGV4ICs9IDEpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGtleU5vZGVbaW5kZXhdKSkge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZCBpbnNpZGUga2V5cycpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGtleU5vZGUgPT09ICdvYmplY3QnICYmIF9jbGFzcyhrZXlOb2RlW2luZGV4XSkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgIGtleU5vZGVbaW5kZXhdID0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQXZvaWQgY29kZSBleGVjdXRpb24gaW4gbG9hZCgpIHZpYSB0b1N0cmluZyBwcm9wZXJ0eVxuICAvLyAoc3RpbGwgdXNlIGl0cyBvd24gdG9TdHJpbmcgZm9yIGFycmF5cywgdGltZXN0YW1wcyxcbiAgLy8gYW5kIHdoYXRldmVyIHVzZXIgc2NoZW1hIGV4dGVuc2lvbnMgaGFwcGVuIHRvIGhhdmUgQEB0b1N0cmluZ1RhZylcbiAgaWYgKHR5cGVvZiBrZXlOb2RlID09PSAnb2JqZWN0JyAmJiBfY2xhc3Moa2V5Tm9kZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAga2V5Tm9kZSA9ICdbb2JqZWN0IE9iamVjdF0nO1xuICB9XG5cblxuICBrZXlOb2RlID0gU3RyaW5nKGtleU5vZGUpO1xuXG4gIGlmIChfcmVzdWx0ID09PSBudWxsKSB7XG4gICAgX3Jlc3VsdCA9IHt9O1xuICB9XG5cbiAgaWYgKGtleVRhZyA9PT0gJ3RhZzp5YW1sLm9yZywyMDAyOm1lcmdlJykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlTm9kZSkpIHtcbiAgICAgIGZvciAoaW5kZXggPSAwLCBxdWFudGl0eSA9IHZhbHVlTm9kZS5sZW5ndGg7IGluZGV4IDwgcXVhbnRpdHk7IGluZGV4ICs9IDEpIHtcbiAgICAgICAgbWVyZ2VNYXBwaW5ncyhzdGF0ZSwgX3Jlc3VsdCwgdmFsdWVOb2RlW2luZGV4XSwgb3ZlcnJpZGFibGVLZXlzKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbWVyZ2VNYXBwaW5ncyhzdGF0ZSwgX3Jlc3VsdCwgdmFsdWVOb2RlLCBvdmVycmlkYWJsZUtleXMpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoIXN0YXRlLmpzb24gJiZcbiAgICAgICAgIV9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwob3ZlcnJpZGFibGVLZXlzLCBrZXlOb2RlKSAmJlxuICAgICAgICBfaGFzT3duUHJvcGVydHkkMS5jYWxsKF9yZXN1bHQsIGtleU5vZGUpKSB7XG4gICAgICBzdGF0ZS5saW5lID0gc3RhcnRMaW5lIHx8IHN0YXRlLmxpbmU7XG4gICAgICBzdGF0ZS5saW5lU3RhcnQgPSBzdGFydExpbmVTdGFydCB8fCBzdGF0ZS5saW5lU3RhcnQ7XG4gICAgICBzdGF0ZS5wb3NpdGlvbiA9IHN0YXJ0UG9zIHx8IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0ZWQgbWFwcGluZyBrZXknKTtcbiAgICB9XG5cbiAgICAvLyB1c2VkIGZvciB0aGlzIHNwZWNpZmljIGtleSBvbmx5IGJlY2F1c2UgT2JqZWN0LmRlZmluZVByb3BlcnR5IGlzIHNsb3dcbiAgICBpZiAoa2V5Tm9kZSA9PT0gJ19fcHJvdG9fXycpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfcmVzdWx0LCBrZXlOb2RlLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiB2YWx1ZU5vZGVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBfcmVzdWx0W2tleU5vZGVdID0gdmFsdWVOb2RlO1xuICAgIH1cbiAgICBkZWxldGUgb3ZlcnJpZGFibGVLZXlzW2tleU5vZGVdO1xuICB9XG5cbiAgcmV0dXJuIF9yZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHJlYWRMaW5lQnJlYWsoc3RhdGUpIHtcbiAgdmFyIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoID09PSAweDBBLyogTEYgKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICB9IGVsc2UgaWYgKGNoID09PSAweDBELyogQ1IgKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgIGlmIChzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSA9PT0gMHgwQS8qIExGICovKSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYSBsaW5lIGJyZWFrIGlzIGV4cGVjdGVkJyk7XG4gIH1cblxuICBzdGF0ZS5saW5lICs9IDE7XG4gIHN0YXRlLmxpbmVTdGFydCA9IHN0YXRlLnBvc2l0aW9uO1xuICBzdGF0ZS5maXJzdFRhYkluTGluZSA9IC0xO1xufVxuXG5mdW5jdGlvbiBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBhbGxvd0NvbW1lbnRzLCBjaGVja0luZGVudCkge1xuICB2YXIgbGluZUJyZWFrcyA9IDAsXG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgIGlmIChjaCA9PT0gMHgwOS8qIFRhYiAqLyAmJiBzdGF0ZS5maXJzdFRhYkluTGluZSA9PT0gLTEpIHtcbiAgICAgICAgc3RhdGUuZmlyc3RUYWJJbkxpbmUgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICAgIH1cbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoYWxsb3dDb21tZW50cyAmJiBjaCA9PT0gMHgyMy8qICMgKi8pIHtcbiAgICAgIGRvIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfSB3aGlsZSAoY2ggIT09IDB4MEEvKiBMRiAqLyAmJiBjaCAhPT0gMHgwRC8qIENSICovICYmIGNoICE9PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgcmVhZExpbmVCcmVhayhzdGF0ZSk7XG5cbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgICBsaW5lQnJlYWtzKys7XG4gICAgICBzdGF0ZS5saW5lSW5kZW50ID0gMDtcblxuICAgICAgd2hpbGUgKGNoID09PSAweDIwLyogU3BhY2UgKi8pIHtcbiAgICAgICAgc3RhdGUubGluZUluZGVudCsrO1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjaGVja0luZGVudCAhPT0gLTEgJiYgbGluZUJyZWFrcyAhPT0gMCAmJiBzdGF0ZS5saW5lSW5kZW50IDwgY2hlY2tJbmRlbnQpIHtcbiAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICdkZWZpY2llbnQgaW5kZW50YXRpb24nKTtcbiAgfVxuXG4gIHJldHVybiBsaW5lQnJlYWtzO1xufVxuXG5mdW5jdGlvbiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbik7XG5cbiAgLy8gQ29uZGl0aW9uIHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgaXMgdGVzdGVkXG4gIC8vIGluIHBhcmVudCBvbiBlYWNoIGNhbGwsIGZvciBlZmZpY2llbmN5LiBObyBuZWVkcyB0byB0ZXN0IGhlcmUgYWdhaW4uXG4gIGlmICgoY2ggPT09IDB4MkQvKiAtICovIHx8IGNoID09PSAweDJFLyogLiAqLykgJiZcbiAgICAgIGNoID09PSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbiArIDEpICYmXG4gICAgICBjaCA9PT0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChfcG9zaXRpb24gKyAyKSkge1xuXG4gICAgX3Bvc2l0aW9uICs9IDM7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uKTtcblxuICAgIGlmIChjaCA9PT0gMCB8fCBpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIGNvdW50KSB7XG4gIGlmIChjb3VudCA9PT0gMSkge1xuICAgIHN0YXRlLnJlc3VsdCArPSAnICc7XG4gIH0gZWxzZSBpZiAoY291bnQgPiAxKSB7XG4gICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGNvdW50IC0gMSk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiByZWFkUGxhaW5TY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQsIHdpdGhpbkZsb3dDb2xsZWN0aW9uKSB7XG4gIHZhciBwcmVjZWRpbmcsXG4gICAgICBmb2xsb3dpbmcsXG4gICAgICBjYXB0dXJlU3RhcnQsXG4gICAgICBjYXB0dXJlRW5kLFxuICAgICAgaGFzUGVuZGluZ0NvbnRlbnQsXG4gICAgICBfbGluZSxcbiAgICAgIF9saW5lU3RhcnQsXG4gICAgICBfbGluZUluZGVudCxcbiAgICAgIF9raW5kID0gc3RhdGUua2luZCxcbiAgICAgIF9yZXN1bHQgPSBzdGF0ZS5yZXN1bHQsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChpc19XU19PUl9FT0woY2gpICAgICAgfHxcbiAgICAgIGlzX0ZMT1dfSU5ESUNBVE9SKGNoKSB8fFxuICAgICAgY2ggPT09IDB4MjMvKiAjICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyNi8qICYgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDJBLyogKiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjEvKiAhICovICAgIHx8XG4gICAgICBjaCA9PT0gMHg3Qy8qIHwgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDNFLyogPiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjcvKiAnICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyMi8qIFwiICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyNS8qICUgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDQwLyogQCAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4NjAvKiBgICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGNoID09PSAweDNGLyogPyAqLyB8fCBjaCA9PT0gMHgyRC8qIC0gKi8pIHtcbiAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICBpZiAoaXNfV1NfT1JfRU9MKGZvbGxvd2luZykgfHxcbiAgICAgICAgd2l0aGluRmxvd0NvbGxlY3Rpb24gJiYgaXNfRkxPV19JTkRJQ0FUT1IoZm9sbG93aW5nKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSAnc2NhbGFyJztcbiAgc3RhdGUucmVzdWx0ID0gJyc7XG4gIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgaGFzUGVuZGluZ0NvbnRlbnQgPSBmYWxzZTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBpZiAoY2ggPT09IDB4M0EvKiA6ICovKSB7XG4gICAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGlmIChpc19XU19PUl9FT0woZm9sbG93aW5nKSB8fFxuICAgICAgICAgIHdpdGhpbkZsb3dDb2xsZWN0aW9uICYmIGlzX0ZMT1dfSU5ESUNBVE9SKGZvbGxvd2luZykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgcHJlY2VkaW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiAtIDEpO1xuXG4gICAgICBpZiAoaXNfV1NfT1JfRU9MKHByZWNlZGluZykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHx8XG4gICAgICAgICAgICAgICB3aXRoaW5GbG93Q29sbGVjdGlvbiAmJiBpc19GTE9XX0lORElDQVRPUihjaCkpIHtcbiAgICAgIGJyZWFrO1xuXG4gICAgfSBlbHNlIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBfbGluZSA9IHN0YXRlLmxpbmU7XG4gICAgICBfbGluZVN0YXJ0ID0gc3RhdGUubGluZVN0YXJ0O1xuICAgICAgX2xpbmVJbmRlbnQgPSBzdGF0ZS5saW5lSW5kZW50O1xuICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgZmFsc2UsIC0xKTtcblxuICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPj0gbm9kZUluZGVudCkge1xuICAgICAgICBoYXNQZW5kaW5nQ29udGVudCA9IHRydWU7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUucG9zaXRpb24gPSBjYXB0dXJlRW5kO1xuICAgICAgICBzdGF0ZS5saW5lID0gX2xpbmU7XG4gICAgICAgIHN0YXRlLmxpbmVTdGFydCA9IF9saW5lU3RhcnQ7XG4gICAgICAgIHN0YXRlLmxpbmVJbmRlbnQgPSBfbGluZUluZGVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhc1BlbmRpbmdDb250ZW50KSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCBmYWxzZSk7XG4gICAgICB3cml0ZUZvbGRlZExpbmVzKHN0YXRlLCBzdGF0ZS5saW5lIC0gX2xpbmUpO1xuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgaGFzUGVuZGluZ0NvbnRlbnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIWlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uICsgMTtcbiAgICB9XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIH1cblxuICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCBmYWxzZSk7XG5cbiAgaWYgKHN0YXRlLnJlc3VsdCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9IF9raW5kO1xuICBzdGF0ZS5yZXN1bHQgPSBfcmVzdWx0O1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlYWRTaW5nbGVRdW90ZWRTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNoLFxuICAgICAgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDI3LyogJyAqLykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSAnc2NhbGFyJztcbiAgc3RhdGUucmVzdWx0ID0gJyc7XG4gIHN0YXRlLnBvc2l0aW9uKys7XG4gIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICB3aGlsZSAoKGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikpICE9PSAwKSB7XG4gICAgaWYgKGNoID09PSAweDI3LyogJyAqLykge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIHRydWUpO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICBpZiAoY2ggPT09IDB4MjcvKiAnICovKSB7XG4gICAgICAgIGNhcHR1cmVTdGFydCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgY2FwdHVyZUVuZCwgdHJ1ZSk7XG4gICAgICB3cml0ZUZvbGRlZExpbmVzKHN0YXRlLCBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBmYWxzZSwgbm9kZUluZGVudCkpO1xuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgfSBlbHNlIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgZG9jdW1lbnQgd2l0aGluIGEgc2luZ2xlIHF1b3RlZCBzY2FsYXInKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIHNpbmdsZSBxdW90ZWQgc2NhbGFyJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWREb3VibGVRdW90ZWRTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNhcHR1cmVTdGFydCxcbiAgICAgIGNhcHR1cmVFbmQsXG4gICAgICBoZXhMZW5ndGgsXG4gICAgICBoZXhSZXN1bHQsXG4gICAgICB0bXAsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyMi8qIFwiICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcbiAgc3RhdGUucG9zaXRpb24rKztcbiAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlICgoY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSkgIT09IDApIHtcbiAgICBpZiAoY2ggPT09IDB4MjIvKiBcIiAqLykge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIHRydWUpO1xuICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgfSBlbHNlIGlmIChjaCA9PT0gMHg1Qy8qIFxcICovKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICAgIGlmIChpc19FT0woY2gpKSB7XG4gICAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCBub2RlSW5kZW50KTtcblxuICAgICAgICAvLyBUT0RPOiByZXdvcmsgdG8gaW5saW5lIGZuIHdpdGggbm8gdHlwZSBjYXN0P1xuICAgICAgfSBlbHNlIGlmIChjaCA8IDI1NiAmJiBzaW1wbGVFc2NhcGVDaGVja1tjaF0pIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IHNpbXBsZUVzY2FwZU1hcFtjaF07XG4gICAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG5cbiAgICAgIH0gZWxzZSBpZiAoKHRtcCA9IGVzY2FwZWRIZXhMZW4oY2gpKSA+IDApIHtcbiAgICAgICAgaGV4TGVuZ3RoID0gdG1wO1xuICAgICAgICBoZXhSZXN1bHQgPSAwO1xuXG4gICAgICAgIGZvciAoOyBoZXhMZW5ndGggPiAwOyBoZXhMZW5ndGgtLSkge1xuICAgICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgICAgIGlmICgodG1wID0gZnJvbUhleENvZGUoY2gpKSA+PSAwKSB7XG4gICAgICAgICAgICBoZXhSZXN1bHQgPSAoaGV4UmVzdWx0IDw8IDQpICsgdG1wO1xuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdleHBlY3RlZCBoZXhhZGVjaW1hbCBjaGFyYWN0ZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY2hhckZyb21Db2RlcG9pbnQoaGV4UmVzdWx0KTtcblxuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5rbm93biBlc2NhcGUgc2VxdWVuY2UnKTtcbiAgICAgIH1cblxuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgfSBlbHNlIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCB0cnVlKTtcbiAgICAgIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCBub2RlSW5kZW50KSk7XG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB9IGVsc2UgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgJiYgdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBkb2N1bWVudCB3aXRoaW4gYSBkb3VibGUgcXVvdGVkIHNjYWxhcicpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgfVxuICB9XG5cbiAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgZG91YmxlIHF1b3RlZCBzY2FsYXInKTtcbn1cblxuZnVuY3Rpb24gcmVhZEZsb3dDb2xsZWN0aW9uKHN0YXRlLCBub2RlSW5kZW50KSB7XG4gIHZhciByZWFkTmV4dCA9IHRydWUsXG4gICAgICBfbGluZSxcbiAgICAgIF9saW5lU3RhcnQsXG4gICAgICBfcG9zLFxuICAgICAgX3RhZyAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBfcmVzdWx0LFxuICAgICAgX2FuY2hvciAgPSBzdGF0ZS5hbmNob3IsXG4gICAgICBmb2xsb3dpbmcsXG4gICAgICB0ZXJtaW5hdG9yLFxuICAgICAgaXNQYWlyLFxuICAgICAgaXNFeHBsaWNpdFBhaXIsXG4gICAgICBpc01hcHBpbmcsXG4gICAgICBvdmVycmlkYWJsZUtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAga2V5Tm9kZSxcbiAgICAgIGtleVRhZyxcbiAgICAgIHZhbHVlTm9kZSxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoID09PSAweDVCLyogWyAqLykge1xuICAgIHRlcm1pbmF0b3IgPSAweDVEOy8qIF0gKi9cbiAgICBpc01hcHBpbmcgPSBmYWxzZTtcbiAgICBfcmVzdWx0ID0gW107XG4gIH0gZWxzZSBpZiAoY2ggPT09IDB4N0IvKiB7ICovKSB7XG4gICAgdGVybWluYXRvciA9IDB4N0Q7LyogfSAqL1xuICAgIGlzTWFwcGluZyA9IHRydWU7XG4gICAgX3Jlc3VsdCA9IHt9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IF9yZXN1bHQ7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgbm9kZUluZGVudCk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKGNoID09PSB0ZXJtaW5hdG9yKSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgc3RhdGUudGFnID0gX3RhZztcbiAgICAgIHN0YXRlLmFuY2hvciA9IF9hbmNob3I7XG4gICAgICBzdGF0ZS5raW5kID0gaXNNYXBwaW5nID8gJ21hcHBpbmcnIDogJ3NlcXVlbmNlJztcbiAgICAgIHN0YXRlLnJlc3VsdCA9IF9yZXN1bHQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCFyZWFkTmV4dCkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ21pc3NlZCBjb21tYSBiZXR3ZWVuIGZsb3cgY29sbGVjdGlvbiBlbnRyaWVzJyk7XG4gICAgfSBlbHNlIGlmIChjaCA9PT0gMHgyQy8qICwgKi8pIHtcbiAgICAgIC8vIFwiZmxvdyBjb2xsZWN0aW9uIGVudHJpZXMgY2FuIG5ldmVyIGJlIGNvbXBsZXRlbHkgZW1wdHlcIiwgYXMgcGVyIFlBTUwgMS4yLCBzZWN0aW9uIDcuNFxuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgXCJleHBlY3RlZCB0aGUgbm9kZSBjb250ZW50LCBidXQgZm91bmQgJywnXCIpO1xuICAgIH1cblxuICAgIGtleVRhZyA9IGtleU5vZGUgPSB2YWx1ZU5vZGUgPSBudWxsO1xuICAgIGlzUGFpciA9IGlzRXhwbGljaXRQYWlyID0gZmFsc2U7XG5cbiAgICBpZiAoY2ggPT09IDB4M0YvKiA/ICovKSB7XG4gICAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGlmIChpc19XU19PUl9FT0woZm9sbG93aW5nKSkge1xuICAgICAgICBpc1BhaXIgPSBpc0V4cGxpY2l0UGFpciA9IHRydWU7XG4gICAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9saW5lID0gc3RhdGUubGluZTsgLy8gU2F2ZSB0aGUgY3VycmVudCBsaW5lLlxuICAgIF9saW5lU3RhcnQgPSBzdGF0ZS5saW5lU3RhcnQ7XG4gICAgX3BvcyA9IHN0YXRlLnBvc2l0aW9uO1xuICAgIGNvbXBvc2VOb2RlKHN0YXRlLCBub2RlSW5kZW50LCBDT05URVhUX0ZMT1dfSU4sIGZhbHNlLCB0cnVlKTtcbiAgICBrZXlUYWcgPSBzdGF0ZS50YWc7XG4gICAga2V5Tm9kZSA9IHN0YXRlLnJlc3VsdDtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoKGlzRXhwbGljaXRQYWlyIHx8IHN0YXRlLmxpbmUgPT09IF9saW5lKSAmJiBjaCA9PT0gMHgzQS8qIDogKi8pIHtcbiAgICAgIGlzUGFpciA9IHRydWU7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcbiAgICAgIGNvbXBvc2VOb2RlKHN0YXRlLCBub2RlSW5kZW50LCBDT05URVhUX0ZMT1dfSU4sIGZhbHNlLCB0cnVlKTtcbiAgICAgIHZhbHVlTm9kZSA9IHN0YXRlLnJlc3VsdDtcbiAgICB9XG5cbiAgICBpZiAoaXNNYXBwaW5nKSB7XG4gICAgICBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgdmFsdWVOb2RlLCBfbGluZSwgX2xpbmVTdGFydCwgX3Bvcyk7XG4gICAgfSBlbHNlIGlmIChpc1BhaXIpIHtcbiAgICAgIF9yZXN1bHQucHVzaChzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBudWxsLCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgdmFsdWVOb2RlLCBfbGluZSwgX2xpbmVTdGFydCwgX3BvcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfcmVzdWx0LnB1c2goa2V5Tm9kZSk7XG4gICAgfVxuXG4gICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgbm9kZUluZGVudCk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKGNoID09PSAweDJDLyogLCAqLykge1xuICAgICAgcmVhZE5leHQgPSB0cnVlO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWFkTmV4dCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIGZsb3cgY29sbGVjdGlvbicpO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNhcHR1cmVTdGFydCxcbiAgICAgIGZvbGRpbmcsXG4gICAgICBjaG9tcGluZyAgICAgICA9IENIT01QSU5HX0NMSVAsXG4gICAgICBkaWRSZWFkQ29udGVudCA9IGZhbHNlLFxuICAgICAgZGV0ZWN0ZWRJbmRlbnQgPSBmYWxzZSxcbiAgICAgIHRleHRJbmRlbnQgICAgID0gbm9kZUluZGVudCxcbiAgICAgIGVtcHR5TGluZXMgICAgID0gMCxcbiAgICAgIGF0TW9yZUluZGVudGVkID0gZmFsc2UsXG4gICAgICB0bXAsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCA9PT0gMHg3Qy8qIHwgKi8pIHtcbiAgICBmb2xkaW5nID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoY2ggPT09IDB4M0UvKiA+ICovKSB7XG4gICAgZm9sZGluZyA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IDB4MkIvKiArICovIHx8IGNoID09PSAweDJELyogLSAqLykge1xuICAgICAgaWYgKENIT01QSU5HX0NMSVAgPT09IGNob21waW5nKSB7XG4gICAgICAgIGNob21waW5nID0gKGNoID09PSAweDJCLyogKyAqLykgPyBDSE9NUElOR19LRUVQIDogQ0hPTVBJTkdfU1RSSVA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAncmVwZWF0IG9mIGEgY2hvbXBpbmcgbW9kZSBpZGVudGlmaWVyJyk7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKCh0bXAgPSBmcm9tRGVjaW1hbENvZGUoY2gpKSA+PSAwKSB7XG4gICAgICBpZiAodG1wID09PSAwKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdiYWQgZXhwbGljaXQgaW5kZW50YXRpb24gd2lkdGggb2YgYSBibG9jayBzY2FsYXI7IGl0IGNhbm5vdCBiZSBsZXNzIHRoYW4gb25lJyk7XG4gICAgICB9IGVsc2UgaWYgKCFkZXRlY3RlZEluZGVudCkge1xuICAgICAgICB0ZXh0SW5kZW50ID0gbm9kZUluZGVudCArIHRtcCAtIDE7XG4gICAgICAgIGRldGVjdGVkSW5kZW50ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdyZXBlYXQgb2YgYW4gaW5kZW50YXRpb24gd2lkdGggaWRlbnRpZmllcicpO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICBkbyB7IGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTsgfVxuICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpO1xuXG4gICAgaWYgKGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICAgIHdoaWxlICghaXNfRU9MKGNoKSAmJiAoY2ggIT09IDApKTtcbiAgICB9XG4gIH1cblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICByZWFkTGluZUJyZWFrKHN0YXRlKTtcbiAgICBzdGF0ZS5saW5lSW5kZW50ID0gMDtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICB3aGlsZSAoKCFkZXRlY3RlZEluZGVudCB8fCBzdGF0ZS5saW5lSW5kZW50IDwgdGV4dEluZGVudCkgJiZcbiAgICAgICAgICAgKGNoID09PSAweDIwLyogU3BhY2UgKi8pKSB7XG4gICAgICBzdGF0ZS5saW5lSW5kZW50Kys7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKCFkZXRlY3RlZEluZGVudCAmJiBzdGF0ZS5saW5lSW5kZW50ID4gdGV4dEluZGVudCkge1xuICAgICAgdGV4dEluZGVudCA9IHN0YXRlLmxpbmVJbmRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIGVtcHR5TGluZXMrKztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIEVuZCBvZiB0aGUgc2NhbGFyLlxuICAgIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgdGV4dEluZGVudCkge1xuXG4gICAgICAvLyBQZXJmb3JtIHRoZSBjaG9tcGluZy5cbiAgICAgIGlmIChjaG9tcGluZyA9PT0gQ0hPTVBJTkdfS0VFUCkge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZGlkUmVhZENvbnRlbnQgPyAxICsgZW1wdHlMaW5lcyA6IGVtcHR5TGluZXMpO1xuICAgICAgfSBlbHNlIGlmIChjaG9tcGluZyA9PT0gQ0hPTVBJTkdfQ0xJUCkge1xuICAgICAgICBpZiAoZGlkUmVhZENvbnRlbnQpIHsgLy8gaS5lLiBvbmx5IGlmIHRoZSBzY2FsYXIgaXMgbm90IGVtcHR5LlxuICAgICAgICAgIHN0YXRlLnJlc3VsdCArPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBCcmVhayB0aGlzIGB3aGlsZWAgY3ljbGUgYW5kIGdvIHRvIHRoZSBmdW5jaXRvbidzIGVwaWxvZ3VlLlxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gRm9sZGVkIHN0eWxlOiB1c2UgZmFuY3kgcnVsZXMgdG8gaGFuZGxlIGxpbmUgYnJlYWtzLlxuICAgIGlmIChmb2xkaW5nKSB7XG5cbiAgICAgIC8vIExpbmVzIHN0YXJ0aW5nIHdpdGggd2hpdGUgc3BhY2UgY2hhcmFjdGVycyAobW9yZS1pbmRlbnRlZCBsaW5lcykgYXJlIG5vdCBmb2xkZWQuXG4gICAgICBpZiAoaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICAgIGF0TW9yZUluZGVudGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gZXhjZXB0IGZvciB0aGUgZmlyc3QgY29udGVudCBsaW5lIChjZi4gRXhhbXBsZSA4LjEpXG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBkaWRSZWFkQ29udGVudCA/IDEgKyBlbXB0eUxpbmVzIDogZW1wdHlMaW5lcyk7XG5cbiAgICAgIC8vIEVuZCBvZiBtb3JlLWluZGVudGVkIGJsb2NrLlxuICAgICAgfSBlbHNlIGlmIChhdE1vcmVJbmRlbnRlZCkge1xuICAgICAgICBhdE1vcmVJbmRlbnRlZCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZW1wdHlMaW5lcyArIDEpO1xuXG4gICAgICAvLyBKdXN0IG9uZSBsaW5lIGJyZWFrIC0gcGVyY2VpdmUgYXMgdGhlIHNhbWUgbGluZS5cbiAgICAgIH0gZWxzZSBpZiAoZW1wdHlMaW5lcyA9PT0gMCkge1xuICAgICAgICBpZiAoZGlkUmVhZENvbnRlbnQpIHsgLy8gaS5lLiBvbmx5IGlmIHdlIGhhdmUgYWxyZWFkeSByZWFkIHNvbWUgc2NhbGFyIGNvbnRlbnQuXG4gICAgICAgICAgc3RhdGUucmVzdWx0ICs9ICcgJztcbiAgICAgICAgfVxuXG4gICAgICAvLyBTZXZlcmFsIGxpbmUgYnJlYWtzIC0gcGVyY2VpdmUgYXMgZGlmZmVyZW50IGxpbmVzLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGVtcHR5TGluZXMpO1xuICAgICAgfVxuXG4gICAgLy8gTGl0ZXJhbCBzdHlsZToganVzdCBhZGQgZXhhY3QgbnVtYmVyIG9mIGxpbmUgYnJlYWtzIGJldHdlZW4gY29udGVudCBsaW5lcy5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gS2VlcCBhbGwgbGluZSBicmVha3MgZXhjZXB0IHRoZSBoZWFkZXIgbGluZSBicmVhay5cbiAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBkaWRSZWFkQ29udGVudCA/IDEgKyBlbXB0eUxpbmVzIDogZW1wdHlMaW5lcyk7XG4gICAgfVxuXG4gICAgZGlkUmVhZENvbnRlbnQgPSB0cnVlO1xuICAgIGRldGVjdGVkSW5kZW50ID0gdHJ1ZTtcbiAgICBlbXB0eUxpbmVzID0gMDtcbiAgICBjYXB0dXJlU3RhcnQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIHdoaWxlICghaXNfRU9MKGNoKSAmJiAoY2ggIT09IDApKSB7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIGZhbHNlKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgX2xpbmUsXG4gICAgICBfdGFnICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBfYW5jaG9yICAgPSBzdGF0ZS5hbmNob3IsXG4gICAgICBfcmVzdWx0ICAgPSBbXSxcbiAgICAgIGZvbGxvd2luZyxcbiAgICAgIGRldGVjdGVkICA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgLy8gdGhlcmUgaXMgYSBsZWFkaW5nIHRhYiBiZWZvcmUgdGhpcyB0b2tlbiwgc28gaXQgY2FuJ3QgYmUgYSBibG9jayBzZXF1ZW5jZS9tYXBwaW5nO1xuICAvLyBpdCBjYW4gc3RpbGwgYmUgZmxvdyBzZXF1ZW5jZS9tYXBwaW5nIG9yIGEgc2NhbGFyXG4gIGlmIChzdGF0ZS5maXJzdFRhYkluTGluZSAhPT0gLTEpIHJldHVybiBmYWxzZTtcblxuICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBfcmVzdWx0O1xuICB9XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBpZiAoc3RhdGUuZmlyc3RUYWJJbkxpbmUgIT09IC0xKSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbiA9IHN0YXRlLmZpcnN0VGFiSW5MaW5lO1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhYiBjaGFyYWN0ZXJzIG11c3Qgbm90IGJlIHVzZWQgaW4gaW5kZW50YXRpb24nKTtcbiAgICB9XG5cbiAgICBpZiAoY2ggIT09IDB4MkQvKiAtICovKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICBpZiAoIWlzX1dTX09SX0VPTChmb2xsb3dpbmcpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBkZXRlY3RlZCA9IHRydWU7XG4gICAgc3RhdGUucG9zaXRpb24rKztcblxuICAgIGlmIChza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSkpIHtcbiAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50IDw9IG5vZGVJbmRlbnQpIHtcbiAgICAgICAgX3Jlc3VsdC5wdXNoKG51bGwpO1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfbGluZSA9IHN0YXRlLmxpbmU7XG4gICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfQkxPQ0tfSU4sIGZhbHNlLCB0cnVlKTtcbiAgICBfcmVzdWx0LnB1c2goc3RhdGUucmVzdWx0KTtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKChzdGF0ZS5saW5lID09PSBfbGluZSB8fCBzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCkgJiYgKGNoICE9PSAwKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2JhZCBpbmRlbnRhdGlvbiBvZiBhIHNlcXVlbmNlIGVudHJ5Jyk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgbm9kZUluZGVudCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRldGVjdGVkKSB7XG4gICAgc3RhdGUudGFnID0gX3RhZztcbiAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgIHN0YXRlLmtpbmQgPSAnc2VxdWVuY2UnO1xuICAgIHN0YXRlLnJlc3VsdCA9IF9yZXN1bHQ7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tNYXBwaW5nKHN0YXRlLCBub2RlSW5kZW50LCBmbG93SW5kZW50KSB7XG4gIHZhciBmb2xsb3dpbmcsXG4gICAgICBhbGxvd0NvbXBhY3QsXG4gICAgICBfbGluZSxcbiAgICAgIF9rZXlMaW5lLFxuICAgICAgX2tleUxpbmVTdGFydCxcbiAgICAgIF9rZXlQb3MsXG4gICAgICBfdGFnICAgICAgICAgID0gc3RhdGUudGFnLFxuICAgICAgX2FuY2hvciAgICAgICA9IHN0YXRlLmFuY2hvcixcbiAgICAgIF9yZXN1bHQgICAgICAgPSB7fSxcbiAgICAgIG92ZXJyaWRhYmxlS2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBrZXlUYWcgICAgICAgID0gbnVsbCxcbiAgICAgIGtleU5vZGUgICAgICAgPSBudWxsLFxuICAgICAgdmFsdWVOb2RlICAgICA9IG51bGwsXG4gICAgICBhdEV4cGxpY2l0S2V5ID0gZmFsc2UsXG4gICAgICBkZXRlY3RlZCAgICAgID0gZmFsc2UsXG4gICAgICBjaDtcblxuICAvLyB0aGVyZSBpcyBhIGxlYWRpbmcgdGFiIGJlZm9yZSB0aGlzIHRva2VuLCBzbyBpdCBjYW4ndCBiZSBhIGJsb2NrIHNlcXVlbmNlL21hcHBpbmc7XG4gIC8vIGl0IGNhbiBzdGlsbCBiZSBmbG93IHNlcXVlbmNlL21hcHBpbmcgb3IgYSBzY2FsYXJcbiAgaWYgKHN0YXRlLmZpcnN0VGFiSW5MaW5lICE9PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IF9yZXN1bHQ7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIGlmICghYXRFeHBsaWNpdEtleSAmJiBzdGF0ZS5maXJzdFRhYkluTGluZSAhPT0gLTEpIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uID0gc3RhdGUuZmlyc3RUYWJJbkxpbmU7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFiIGNoYXJhY3RlcnMgbXVzdCBub3QgYmUgdXNlZCBpbiBpbmRlbnRhdGlvbicpO1xuICAgIH1cblxuICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcbiAgICBfbGluZSA9IHN0YXRlLmxpbmU7IC8vIFNhdmUgdGhlIGN1cnJlbnQgbGluZS5cblxuICAgIC8vXG4gICAgLy8gRXhwbGljaXQgbm90YXRpb24gY2FzZS4gVGhlcmUgYXJlIHR3byBzZXBhcmF0ZSBibG9ja3M6XG4gICAgLy8gZmlyc3QgZm9yIHRoZSBrZXkgKGRlbm90ZWQgYnkgXCI/XCIpIGFuZCBzZWNvbmQgZm9yIHRoZSB2YWx1ZSAoZGVub3RlZCBieSBcIjpcIilcbiAgICAvL1xuICAgIGlmICgoY2ggPT09IDB4M0YvKiA/ICovIHx8IGNoID09PSAweDNBLyogOiAqLykgJiYgaXNfV1NfT1JfRU9MKGZvbGxvd2luZykpIHtcblxuICAgICAgaWYgKGNoID09PSAweDNGLyogPyAqLykge1xuICAgICAgICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCBudWxsLCBfa2V5TGluZSwgX2tleUxpbmVTdGFydCwgX2tleVBvcyk7XG4gICAgICAgICAga2V5VGFnID0ga2V5Tm9kZSA9IHZhbHVlTm9kZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBkZXRlY3RlZCA9IHRydWU7XG4gICAgICAgIGF0RXhwbGljaXRLZXkgPSB0cnVlO1xuICAgICAgICBhbGxvd0NvbXBhY3QgPSB0cnVlO1xuXG4gICAgICB9IGVsc2UgaWYgKGF0RXhwbGljaXRLZXkpIHtcbiAgICAgICAgLy8gaS5lLiAweDNBLyogOiAqLyA9PT0gY2hhcmFjdGVyIGFmdGVyIHRoZSBleHBsaWNpdCBrZXkuXG4gICAgICAgIGF0RXhwbGljaXRLZXkgPSBmYWxzZTtcbiAgICAgICAgYWxsb3dDb21wYWN0ID0gdHJ1ZTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2luY29tcGxldGUgZXhwbGljaXQgbWFwcGluZyBwYWlyOyBhIGtleSBub2RlIGlzIG1pc3NlZDsgb3IgZm9sbG93ZWQgYnkgYSBub24tdGFidWxhdGVkIGVtcHR5IGxpbmUnKTtcbiAgICAgIH1cblxuICAgICAgc3RhdGUucG9zaXRpb24gKz0gMTtcbiAgICAgIGNoID0gZm9sbG93aW5nO1xuXG4gICAgLy9cbiAgICAvLyBJbXBsaWNpdCBub3RhdGlvbiBjYXNlLiBGbG93LXN0eWxlIG5vZGUgYXMgdGhlIGtleSBmaXJzdCwgdGhlbiBcIjpcIiwgYW5kIHRoZSB2YWx1ZS5cbiAgICAvL1xuICAgIH0gZWxzZSB7XG4gICAgICBfa2V5TGluZSA9IHN0YXRlLmxpbmU7XG4gICAgICBfa2V5TGluZVN0YXJ0ID0gc3RhdGUubGluZVN0YXJ0O1xuICAgICAgX2tleVBvcyA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgICBpZiAoIWNvbXBvc2VOb2RlKHN0YXRlLCBmbG93SW5kZW50LCBDT05URVhUX0ZMT1dfT1VULCBmYWxzZSwgdHJ1ZSkpIHtcbiAgICAgICAgLy8gTmVpdGhlciBpbXBsaWNpdCBub3IgZXhwbGljaXQgbm90YXRpb24uXG4gICAgICAgIC8vIFJlYWRpbmcgaXMgZG9uZS4gR28gdG8gdGhlIGVwaWxvZ3VlLlxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlLmxpbmUgPT09IF9saW5lKSB7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICAgICAgd2hpbGUgKGlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaCA9PT0gMHgzQS8qIDogKi8pIHtcbiAgICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICAgICAgICBpZiAoIWlzX1dTX09SX0VPTChjaCkpIHtcbiAgICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdhIHdoaXRlc3BhY2UgY2hhcmFjdGVyIGlzIGV4cGVjdGVkIGFmdGVyIHRoZSBrZXktdmFsdWUgc2VwYXJhdG9yIHdpdGhpbiBhIGJsb2NrIG1hcHBpbmcnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAgICAgc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIG51bGwsIF9rZXlMaW5lLCBfa2V5TGluZVN0YXJ0LCBfa2V5UG9zKTtcbiAgICAgICAgICAgIGtleVRhZyA9IGtleU5vZGUgPSB2YWx1ZU5vZGUgPSBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICBhdEV4cGxpY2l0S2V5ID0gZmFsc2U7XG4gICAgICAgICAgYWxsb3dDb21wYWN0ID0gZmFsc2U7XG4gICAgICAgICAga2V5VGFnID0gc3RhdGUudGFnO1xuICAgICAgICAgIGtleU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG5cbiAgICAgICAgfSBlbHNlIGlmIChkZXRlY3RlZCkge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdjYW4gbm90IHJlYWQgYW4gaW1wbGljaXQgbWFwcGluZyBwYWlyOyBhIGNvbG9uIGlzIG1pc3NlZCcpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhdGUudGFnID0gX3RhZztcbiAgICAgICAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBLZWVwIHRoZSByZXN1bHQgb2YgYGNvbXBvc2VOb2RlYC5cbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2UgaWYgKGRldGVjdGVkKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdjYW4gbm90IHJlYWQgYSBibG9jayBtYXBwaW5nIGVudHJ5OyBhIG11bHRpbGluZSBrZXkgbWF5IG5vdCBiZSBhbiBpbXBsaWNpdCBrZXknKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUudGFnID0gX3RhZztcbiAgICAgICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEtlZXAgdGhlIHJlc3VsdCBvZiBgY29tcG9zZU5vZGVgLlxuICAgICAgfVxuICAgIH1cblxuICAgIC8vXG4gICAgLy8gQ29tbW9uIHJlYWRpbmcgY29kZSBmb3IgYm90aCBleHBsaWNpdCBhbmQgaW1wbGljaXQgbm90YXRpb25zLlxuICAgIC8vXG4gICAgaWYgKHN0YXRlLmxpbmUgPT09IF9saW5lIHx8IHN0YXRlLmxpbmVJbmRlbnQgPiBub2RlSW5kZW50KSB7XG4gICAgICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICBfa2V5TGluZSA9IHN0YXRlLmxpbmU7XG4gICAgICAgIF9rZXlMaW5lU3RhcnQgPSBzdGF0ZS5saW5lU3RhcnQ7XG4gICAgICAgIF9rZXlQb3MgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXBvc2VOb2RlKHN0YXRlLCBub2RlSW5kZW50LCBDT05URVhUX0JMT0NLX09VVCwgdHJ1ZSwgYWxsb3dDb21wYWN0KSkge1xuICAgICAgICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAgIGtleU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWVOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghYXRFeHBsaWNpdEtleSkge1xuICAgICAgICBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgdmFsdWVOb2RlLCBfa2V5TGluZSwgX2tleUxpbmVTdGFydCwgX2tleVBvcyk7XG4gICAgICAgIGtleVRhZyA9IGtleU5vZGUgPSB2YWx1ZU5vZGUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmICgoc3RhdGUubGluZSA9PT0gX2xpbmUgfHwgc3RhdGUubGluZUluZGVudCA+IG5vZGVJbmRlbnQpICYmIChjaCAhPT0gMCkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdiYWQgaW5kZW50YXRpb24gb2YgYSBtYXBwaW5nIGVudHJ5Jyk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgbm9kZUluZGVudCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy9cbiAgLy8gRXBpbG9ndWUuXG4gIC8vXG5cbiAgLy8gU3BlY2lhbCBjYXNlOiBsYXN0IG1hcHBpbmcncyBub2RlIGNvbnRhaW5zIG9ubHkgdGhlIGtleSBpbiBleHBsaWNpdCBub3RhdGlvbi5cbiAgaWYgKGF0RXhwbGljaXRLZXkpIHtcbiAgICBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgbnVsbCwgX2tleUxpbmUsIF9rZXlMaW5lU3RhcnQsIF9rZXlQb3MpO1xuICB9XG5cbiAgLy8gRXhwb3NlIHRoZSByZXN1bHRpbmcgbWFwcGluZy5cbiAgaWYgKGRldGVjdGVkKSB7XG4gICAgc3RhdGUudGFnID0gX3RhZztcbiAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgIHN0YXRlLmtpbmQgPSAnbWFwcGluZyc7XG4gICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgfVxuXG4gIHJldHVybiBkZXRlY3RlZDtcbn1cblxuZnVuY3Rpb24gcmVhZFRhZ1Byb3BlcnR5KHN0YXRlKSB7XG4gIHZhciBfcG9zaXRpb24sXG4gICAgICBpc1ZlcmJhdGltID0gZmFsc2UsXG4gICAgICBpc05hbWVkICAgID0gZmFsc2UsXG4gICAgICB0YWdIYW5kbGUsXG4gICAgICB0YWdOYW1lLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggIT09IDB4MjEvKiAhICovKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHN0YXRlLnRhZyAhPT0gbnVsbCkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdkdXBsaWNhdGlvbiBvZiBhIHRhZyBwcm9wZXJ0eScpO1xuICB9XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCA9PT0gMHgzQy8qIDwgKi8pIHtcbiAgICBpc1ZlcmJhdGltID0gdHJ1ZTtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgfSBlbHNlIGlmIChjaCA9PT0gMHgyMS8qICEgKi8pIHtcbiAgICBpc05hbWVkID0gdHJ1ZTtcbiAgICB0YWdIYW5kbGUgPSAnISEnO1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB9IGVsc2Uge1xuICAgIHRhZ0hhbmRsZSA9ICchJztcbiAgfVxuXG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIGlmIChpc1ZlcmJhdGltKSB7XG4gICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICB3aGlsZSAoY2ggIT09IDAgJiYgY2ggIT09IDB4M0UvKiA+ICovKTtcblxuICAgIGlmIChzdGF0ZS5wb3NpdGlvbiA8IHN0YXRlLmxlbmd0aCkge1xuICAgICAgdGFnTmFtZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSB2ZXJiYXRpbSB0YWcnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpKSB7XG5cbiAgICAgIGlmIChjaCA9PT0gMHgyMS8qICEgKi8pIHtcbiAgICAgICAgaWYgKCFpc05hbWVkKSB7XG4gICAgICAgICAgdGFnSGFuZGxlID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uIC0gMSwgc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgICAgICAgIGlmICghUEFUVEVSTl9UQUdfSEFORExFLnRlc3QodGFnSGFuZGxlKSkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ25hbWVkIHRhZyBoYW5kbGUgY2Fubm90IGNvbnRhaW4gc3VjaCBjaGFyYWN0ZXJzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNOYW1lZCA9IHRydWU7XG4gICAgICAgICAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb24gKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgc3VmZml4IGNhbm5vdCBjb250YWluIGV4Y2xhbWF0aW9uIG1hcmtzJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRhZ05hbWUgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmIChQQVRURVJOX0ZMT1dfSU5ESUNBVE9SUy50ZXN0KHRhZ05hbWUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIHN1ZmZpeCBjYW5ub3QgY29udGFpbiBmbG93IGluZGljYXRvciBjaGFyYWN0ZXJzJyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRhZ05hbWUgJiYgIVBBVFRFUk5fVEFHX1VSSS50ZXN0KHRhZ05hbWUpKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhZyBuYW1lIGNhbm5vdCBjb250YWluIHN1Y2ggY2hhcmFjdGVyczogJyArIHRhZ05hbWUpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICB0YWdOYW1lID0gZGVjb2RlVVJJQ29tcG9uZW50KHRhZ05hbWUpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIG5hbWUgaXMgbWFsZm9ybWVkOiAnICsgdGFnTmFtZSk7XG4gIH1cblxuICBpZiAoaXNWZXJiYXRpbSkge1xuICAgIHN0YXRlLnRhZyA9IHRhZ05hbWU7XG5cbiAgfSBlbHNlIGlmIChfaGFzT3duUHJvcGVydHkkMS5jYWxsKHN0YXRlLnRhZ01hcCwgdGFnSGFuZGxlKSkge1xuICAgIHN0YXRlLnRhZyA9IHN0YXRlLnRhZ01hcFt0YWdIYW5kbGVdICsgdGFnTmFtZTtcblxuICB9IGVsc2UgaWYgKHRhZ0hhbmRsZSA9PT0gJyEnKSB7XG4gICAgc3RhdGUudGFnID0gJyEnICsgdGFnTmFtZTtcblxuICB9IGVsc2UgaWYgKHRhZ0hhbmRsZSA9PT0gJyEhJykge1xuICAgIHN0YXRlLnRhZyA9ICd0YWc6eWFtbC5vcmcsMjAwMjonICsgdGFnTmFtZTtcblxuICB9IGVsc2Uge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmRlY2xhcmVkIHRhZyBoYW5kbGUgXCInICsgdGFnSGFuZGxlICsgJ1wiJyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmVhZEFuY2hvclByb3BlcnR5KHN0YXRlKSB7XG4gIHZhciBfcG9zaXRpb24sXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyNi8qICYgKi8pIHJldHVybiBmYWxzZTtcblxuICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0aW9uIG9mIGFuIGFuY2hvciBwcm9wZXJ0eScpO1xuICB9XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICBfcG9zaXRpb24gPSBzdGF0ZS5wb3NpdGlvbjtcblxuICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkgJiYgIWlzX0ZMT1dfSU5ESUNBVE9SKGNoKSkge1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgfVxuXG4gIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gX3Bvc2l0aW9uKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ25hbWUgb2YgYW4gYW5jaG9yIG5vZGUgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBjaGFyYWN0ZXInKTtcbiAgfVxuXG4gIHN0YXRlLmFuY2hvciA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmVhZEFsaWFzKHN0YXRlKSB7XG4gIHZhciBfcG9zaXRpb24sIGFsaWFzLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggIT09IDB4MkEvKiAqICovKSByZXR1cm4gZmFsc2U7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICBfcG9zaXRpb24gPSBzdGF0ZS5wb3NpdGlvbjtcblxuICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkgJiYgIWlzX0ZMT1dfSU5ESUNBVE9SKGNoKSkge1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgfVxuXG4gIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gX3Bvc2l0aW9uKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ25hbWUgb2YgYW4gYWxpYXMgbm9kZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIGNoYXJhY3RlcicpO1xuICB9XG5cbiAgYWxpYXMgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoIV9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoc3RhdGUuYW5jaG9yTWFwLCBhbGlhcykpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5pZGVudGlmaWVkIGFsaWFzIFwiJyArIGFsaWFzICsgJ1wiJyk7XG4gIH1cblxuICBzdGF0ZS5yZXN1bHQgPSBzdGF0ZS5hbmNob3JNYXBbYWxpYXNdO1xuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb21wb3NlTm9kZShzdGF0ZSwgcGFyZW50SW5kZW50LCBub2RlQ29udGV4dCwgYWxsb3dUb1NlZWssIGFsbG93Q29tcGFjdCkge1xuICB2YXIgYWxsb3dCbG9ja1N0eWxlcyxcbiAgICAgIGFsbG93QmxvY2tTY2FsYXJzLFxuICAgICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zLFxuICAgICAgaW5kZW50U3RhdHVzID0gMSwgLy8gMTogdGhpcz5wYXJlbnQsIDA6IHRoaXM9cGFyZW50LCAtMTogdGhpczxwYXJlbnRcbiAgICAgIGF0TmV3TGluZSAgPSBmYWxzZSxcbiAgICAgIGhhc0NvbnRlbnQgPSBmYWxzZSxcbiAgICAgIHR5cGVJbmRleCxcbiAgICAgIHR5cGVRdWFudGl0eSxcbiAgICAgIHR5cGVMaXN0LFxuICAgICAgdHlwZSxcbiAgICAgIGZsb3dJbmRlbnQsXG4gICAgICBibG9ja0luZGVudDtcblxuICBpZiAoc3RhdGUubGlzdGVuZXIgIT09IG51bGwpIHtcbiAgICBzdGF0ZS5saXN0ZW5lcignb3BlbicsIHN0YXRlKTtcbiAgfVxuXG4gIHN0YXRlLnRhZyAgICA9IG51bGw7XG4gIHN0YXRlLmFuY2hvciA9IG51bGw7XG4gIHN0YXRlLmtpbmQgICA9IG51bGw7XG4gIHN0YXRlLnJlc3VsdCA9IG51bGw7XG5cbiAgYWxsb3dCbG9ja1N0eWxlcyA9IGFsbG93QmxvY2tTY2FsYXJzID0gYWxsb3dCbG9ja0NvbGxlY3Rpb25zID1cbiAgICBDT05URVhUX0JMT0NLX09VVCA9PT0gbm9kZUNvbnRleHQgfHxcbiAgICBDT05URVhUX0JMT0NLX0lOICA9PT0gbm9kZUNvbnRleHQ7XG5cbiAgaWYgKGFsbG93VG9TZWVrKSB7XG4gICAgaWYgKHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKSkge1xuICAgICAgYXROZXdMaW5lID0gdHJ1ZTtcblxuICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPiBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgaW5kZW50U3RhdHVzID0gMTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA9PT0gcGFyZW50SW5kZW50KSB7XG4gICAgICAgIGluZGVudFN0YXR1cyA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgaW5kZW50U3RhdHVzID0gLTE7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGluZGVudFN0YXR1cyA9PT0gMSkge1xuICAgIHdoaWxlIChyZWFkVGFnUHJvcGVydHkoc3RhdGUpIHx8IHJlYWRBbmNob3JQcm9wZXJ0eShzdGF0ZSkpIHtcbiAgICAgIGlmIChza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSkpIHtcbiAgICAgICAgYXROZXdMaW5lID0gdHJ1ZTtcbiAgICAgICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zID0gYWxsb3dCbG9ja1N0eWxlcztcblxuICAgICAgICBpZiAoc3RhdGUubGluZUluZGVudCA+IHBhcmVudEluZGVudCkge1xuICAgICAgICAgIGluZGVudFN0YXR1cyA9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA9PT0gcGFyZW50SW5kZW50KSB7XG4gICAgICAgICAgaW5kZW50U3RhdHVzID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgcGFyZW50SW5kZW50KSB7XG4gICAgICAgICAgaW5kZW50U3RhdHVzID0gLTE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChhbGxvd0Jsb2NrQ29sbGVjdGlvbnMpIHtcbiAgICBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgPSBhdE5ld0xpbmUgfHwgYWxsb3dDb21wYWN0O1xuICB9XG5cbiAgaWYgKGluZGVudFN0YXR1cyA9PT0gMSB8fCBDT05URVhUX0JMT0NLX09VVCA9PT0gbm9kZUNvbnRleHQpIHtcbiAgICBpZiAoQ09OVEVYVF9GTE9XX0lOID09PSBub2RlQ29udGV4dCB8fCBDT05URVhUX0ZMT1dfT1VUID09PSBub2RlQ29udGV4dCkge1xuICAgICAgZmxvd0luZGVudCA9IHBhcmVudEluZGVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgZmxvd0luZGVudCA9IHBhcmVudEluZGVudCArIDE7XG4gICAgfVxuXG4gICAgYmxvY2tJbmRlbnQgPSBzdGF0ZS5wb3NpdGlvbiAtIHN0YXRlLmxpbmVTdGFydDtcblxuICAgIGlmIChpbmRlbnRTdGF0dXMgPT09IDEpIHtcbiAgICAgIGlmIChhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgJiZcbiAgICAgICAgICAocmVhZEJsb2NrU2VxdWVuY2Uoc3RhdGUsIGJsb2NrSW5kZW50KSB8fFxuICAgICAgICAgICByZWFkQmxvY2tNYXBwaW5nKHN0YXRlLCBibG9ja0luZGVudCwgZmxvd0luZGVudCkpIHx8XG4gICAgICAgICAgcmVhZEZsb3dDb2xsZWN0aW9uKHN0YXRlLCBmbG93SW5kZW50KSkge1xuICAgICAgICBoYXNDb250ZW50ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgoYWxsb3dCbG9ja1NjYWxhcnMgJiYgcmVhZEJsb2NrU2NhbGFyKHN0YXRlLCBmbG93SW5kZW50KSkgfHxcbiAgICAgICAgICAgIHJlYWRTaW5nbGVRdW90ZWRTY2FsYXIoc3RhdGUsIGZsb3dJbmRlbnQpIHx8XG4gICAgICAgICAgICByZWFkRG91YmxlUXVvdGVkU2NhbGFyKHN0YXRlLCBmbG93SW5kZW50KSkge1xuICAgICAgICAgIGhhc0NvbnRlbnQgPSB0cnVlO1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVhZEFsaWFzKHN0YXRlKSkge1xuICAgICAgICAgIGhhc0NvbnRlbnQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKHN0YXRlLnRhZyAhPT0gbnVsbCB8fCBzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdhbGlhcyBub2RlIHNob3VsZCBub3QgaGF2ZSBhbnkgcHJvcGVydGllcycpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2UgaWYgKHJlYWRQbGFpblNjYWxhcihzdGF0ZSwgZmxvd0luZGVudCwgQ09OVEVYVF9GTE9XX0lOID09PSBub2RlQ29udGV4dCkpIHtcbiAgICAgICAgICBoYXNDb250ZW50ID0gdHJ1ZTtcblxuICAgICAgICAgIGlmIChzdGF0ZS50YWcgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHN0YXRlLnRhZyA9ICc/JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGluZGVudFN0YXR1cyA9PT0gMCkge1xuICAgICAgLy8gU3BlY2lhbCBjYXNlOiBibG9jayBzZXF1ZW5jZXMgYXJlIGFsbG93ZWQgdG8gaGF2ZSBzYW1lIGluZGVudGF0aW9uIGxldmVsIGFzIHRoZSBwYXJlbnQuXG4gICAgICAvLyBodHRwOi8vd3d3LnlhbWwub3JnL3NwZWMvMS4yL3NwZWMuaHRtbCNpZDI3OTk3ODRcbiAgICAgIGhhc0NvbnRlbnQgPSBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgJiYgcmVhZEJsb2NrU2VxdWVuY2Uoc3RhdGUsIGJsb2NrSW5kZW50KTtcbiAgICB9XG4gIH1cblxuICBpZiAoc3RhdGUudGFnID09PSBudWxsKSB7XG4gICAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBzdGF0ZS5yZXN1bHQ7XG4gICAgfVxuXG4gIH0gZWxzZSBpZiAoc3RhdGUudGFnID09PSAnPycpIHtcbiAgICAvLyBJbXBsaWNpdCByZXNvbHZpbmcgaXMgbm90IGFsbG93ZWQgZm9yIG5vbi1zY2FsYXIgdHlwZXMsIGFuZCAnPydcbiAgICAvLyBub24tc3BlY2lmaWMgdGFnIGlzIG9ubHkgYXV0b21hdGljYWxseSBhc3NpZ25lZCB0byBwbGFpbiBzY2FsYXJzLlxuICAgIC8vXG4gICAgLy8gV2Ugb25seSBuZWVkIHRvIGNoZWNrIGtpbmQgY29uZm9ybWl0eSBpbiBjYXNlIHVzZXIgZXhwbGljaXRseSBhc3NpZ25zICc/J1xuICAgIC8vIHRhZywgZm9yIGV4YW1wbGUgbGlrZSB0aGlzOiBcIiE8Pz4gWzBdXCJcbiAgICAvL1xuICAgIGlmIChzdGF0ZS5yZXN1bHQgIT09IG51bGwgJiYgc3RhdGUua2luZCAhPT0gJ3NjYWxhcicpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmFjY2VwdGFibGUgbm9kZSBraW5kIGZvciAhPD8+IHRhZzsgaXQgc2hvdWxkIGJlIFwic2NhbGFyXCIsIG5vdCBcIicgKyBzdGF0ZS5raW5kICsgJ1wiJyk7XG4gICAgfVxuXG4gICAgZm9yICh0eXBlSW5kZXggPSAwLCB0eXBlUXVhbnRpdHkgPSBzdGF0ZS5pbXBsaWNpdFR5cGVzLmxlbmd0aDsgdHlwZUluZGV4IDwgdHlwZVF1YW50aXR5OyB0eXBlSW5kZXggKz0gMSkge1xuICAgICAgdHlwZSA9IHN0YXRlLmltcGxpY2l0VHlwZXNbdHlwZUluZGV4XTtcblxuICAgICAgaWYgKHR5cGUucmVzb2x2ZShzdGF0ZS5yZXN1bHQpKSB7IC8vIGBzdGF0ZS5yZXN1bHRgIHVwZGF0ZWQgaW4gcmVzb2x2ZXIgaWYgbWF0Y2hlZFxuICAgICAgICBzdGF0ZS5yZXN1bHQgPSB0eXBlLmNvbnN0cnVjdChzdGF0ZS5yZXN1bHQpO1xuICAgICAgICBzdGF0ZS50YWcgPSB0eXBlLnRhZztcbiAgICAgICAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gc3RhdGUucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChzdGF0ZS50YWcgIT09ICchJykge1xuICAgIGlmIChfaGFzT3duUHJvcGVydHkkMS5jYWxsKHN0YXRlLnR5cGVNYXBbc3RhdGUua2luZCB8fCAnZmFsbGJhY2snXSwgc3RhdGUudGFnKSkge1xuICAgICAgdHlwZSA9IHN0YXRlLnR5cGVNYXBbc3RhdGUua2luZCB8fCAnZmFsbGJhY2snXVtzdGF0ZS50YWddO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBsb29raW5nIGZvciBtdWx0aSB0eXBlXG4gICAgICB0eXBlID0gbnVsbDtcbiAgICAgIHR5cGVMaXN0ID0gc3RhdGUudHlwZU1hcC5tdWx0aVtzdGF0ZS5raW5kIHx8ICdmYWxsYmFjayddO1xuXG4gICAgICBmb3IgKHR5cGVJbmRleCA9IDAsIHR5cGVRdWFudGl0eSA9IHR5cGVMaXN0Lmxlbmd0aDsgdHlwZUluZGV4IDwgdHlwZVF1YW50aXR5OyB0eXBlSW5kZXggKz0gMSkge1xuICAgICAgICBpZiAoc3RhdGUudGFnLnNsaWNlKDAsIHR5cGVMaXN0W3R5cGVJbmRleF0udGFnLmxlbmd0aCkgPT09IHR5cGVMaXN0W3R5cGVJbmRleF0udGFnKSB7XG4gICAgICAgICAgdHlwZSA9IHR5cGVMaXN0W3R5cGVJbmRleF07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXR5cGUpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmtub3duIHRhZyAhPCcgKyBzdGF0ZS50YWcgKyAnPicpO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5yZXN1bHQgIT09IG51bGwgJiYgdHlwZS5raW5kICE9PSBzdGF0ZS5raW5kKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5hY2NlcHRhYmxlIG5vZGUga2luZCBmb3IgITwnICsgc3RhdGUudGFnICsgJz4gdGFnOyBpdCBzaG91bGQgYmUgXCInICsgdHlwZS5raW5kICsgJ1wiLCBub3QgXCInICsgc3RhdGUua2luZCArICdcIicpO1xuICAgIH1cblxuICAgIGlmICghdHlwZS5yZXNvbHZlKHN0YXRlLnJlc3VsdCwgc3RhdGUudGFnKSkgeyAvLyBgc3RhdGUucmVzdWx0YCB1cGRhdGVkIGluIHJlc29sdmVyIGlmIG1hdGNoZWRcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdjYW5ub3QgcmVzb2x2ZSBhIG5vZGUgd2l0aCAhPCcgKyBzdGF0ZS50YWcgKyAnPiBleHBsaWNpdCB0YWcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUucmVzdWx0ID0gdHlwZS5jb25zdHJ1Y3Qoc3RhdGUucmVzdWx0LCBzdGF0ZS50YWcpO1xuICAgICAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc3RhdGUubGlzdGVuZXIgIT09IG51bGwpIHtcbiAgICBzdGF0ZS5saXN0ZW5lcignY2xvc2UnLCBzdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIHN0YXRlLnRhZyAhPT0gbnVsbCB8fCAgc3RhdGUuYW5jaG9yICE9PSBudWxsIHx8IGhhc0NvbnRlbnQ7XG59XG5cbmZ1bmN0aW9uIHJlYWREb2N1bWVudChzdGF0ZSkge1xuICB2YXIgZG9jdW1lbnRTdGFydCA9IHN0YXRlLnBvc2l0aW9uLFxuICAgICAgX3Bvc2l0aW9uLFxuICAgICAgZGlyZWN0aXZlTmFtZSxcbiAgICAgIGRpcmVjdGl2ZUFyZ3MsXG4gICAgICBoYXNEaXJlY3RpdmVzID0gZmFsc2UsXG4gICAgICBjaDtcblxuICBzdGF0ZS52ZXJzaW9uID0gbnVsbDtcbiAgc3RhdGUuY2hlY2tMaW5lQnJlYWtzID0gc3RhdGUubGVnYWN5O1xuICBzdGF0ZS50YWdNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBzdGF0ZS5hbmNob3JNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIHdoaWxlICgoY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSkgIT09IDApIHtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPiAwIHx8IGNoICE9PSAweDI1LyogJSAqLykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaGFzRGlyZWN0aXZlcyA9IHRydWU7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgZGlyZWN0aXZlTmFtZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuICAgIGRpcmVjdGl2ZUFyZ3MgPSBbXTtcblxuICAgIGlmIChkaXJlY3RpdmVOYW1lLmxlbmd0aCA8IDEpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdkaXJlY3RpdmUgbmFtZSBtdXN0IG5vdCBiZSBsZXNzIHRoYW4gb25lIGNoYXJhY3RlciBpbiBsZW5ndGgnKTtcbiAgICB9XG5cbiAgICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2ggPT09IDB4MjMvKiAjICovKSB7XG4gICAgICAgIGRvIHsgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pOyB9XG4gICAgICAgIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfRU9MKGNoKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNfRU9MKGNoKSkgYnJlYWs7XG5cbiAgICAgIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkpIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgICBkaXJlY3RpdmVBcmdzLnB1c2goc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbikpO1xuICAgIH1cblxuICAgIGlmIChjaCAhPT0gMCkgcmVhZExpbmVCcmVhayhzdGF0ZSk7XG5cbiAgICBpZiAoX2hhc093blByb3BlcnR5JDEuY2FsbChkaXJlY3RpdmVIYW5kbGVycywgZGlyZWN0aXZlTmFtZSkpIHtcbiAgICAgIGRpcmVjdGl2ZUhhbmRsZXJzW2RpcmVjdGl2ZU5hbWVdKHN0YXRlLCBkaXJlY3RpdmVOYW1lLCBkaXJlY3RpdmVBcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3dXYXJuaW5nKHN0YXRlLCAndW5rbm93biBkb2N1bWVudCBkaXJlY3RpdmUgXCInICsgZGlyZWN0aXZlTmFtZSArICdcIicpO1xuICAgIH1cbiAgfVxuXG4gIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICBpZiAoc3RhdGUubGluZUluZGVudCA9PT0gMCAmJlxuICAgICAgc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikgICAgID09PSAweDJELyogLSAqLyAmJlxuICAgICAgc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpID09PSAweDJELyogLSAqLyAmJlxuICAgICAgc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDIpID09PSAweDJELyogLSAqLykge1xuICAgIHN0YXRlLnBvc2l0aW9uICs9IDM7XG4gICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuXG4gIH0gZWxzZSBpZiAoaGFzRGlyZWN0aXZlcykge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdkaXJlY3RpdmVzIGVuZCBtYXJrIGlzIGV4cGVjdGVkJyk7XG4gIH1cblxuICBjb21wb3NlTm9kZShzdGF0ZSwgc3RhdGUubGluZUluZGVudCAtIDEsIENPTlRFWFRfQkxPQ0tfT1VULCBmYWxzZSwgdHJ1ZSk7XG4gIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICBpZiAoc3RhdGUuY2hlY2tMaW5lQnJlYWtzICYmXG4gICAgICBQQVRURVJOX05PTl9BU0NJSV9MSU5FX0JSRUFLUy50ZXN0KHN0YXRlLmlucHV0LnNsaWNlKGRvY3VtZW50U3RhcnQsIHN0YXRlLnBvc2l0aW9uKSkpIHtcbiAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICdub24tQVNDSUkgbGluZSBicmVha3MgYXJlIGludGVycHJldGVkIGFzIGNvbnRlbnQnKTtcbiAgfVxuXG4gIHN0YXRlLmRvY3VtZW50cy5wdXNoKHN0YXRlLnJlc3VsdCk7XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgJiYgdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSkge1xuXG4gICAgaWYgKHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pID09PSAweDJFLyogLiAqLykge1xuICAgICAgc3RhdGUucG9zaXRpb24gKz0gMztcbiAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uIDwgKHN0YXRlLmxlbmd0aCAtIDEpKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2VuZCBvZiB0aGUgc3RyZWFtIG9yIGEgZG9jdW1lbnQgc2VwYXJhdG9yIGlzIGV4cGVjdGVkJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuO1xuICB9XG59XG5cblxuZnVuY3Rpb24gbG9hZERvY3VtZW50cyhpbnB1dCwgb3B0aW9ucykge1xuICBpbnB1dCA9IFN0cmluZyhpbnB1dCk7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGlmIChpbnB1dC5sZW5ndGggIT09IDApIHtcblxuICAgIC8vIEFkZCB0YWlsaW5nIGBcXG5gIGlmIG5vdCBleGlzdHNcbiAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChpbnB1dC5sZW5ndGggLSAxKSAhPT0gMHgwQS8qIExGICovICYmXG4gICAgICAgIGlucHV0LmNoYXJDb2RlQXQoaW5wdXQubGVuZ3RoIC0gMSkgIT09IDB4MEQvKiBDUiAqLykge1xuICAgICAgaW5wdXQgKz0gJ1xcbic7XG4gICAgfVxuXG4gICAgLy8gU3RyaXAgQk9NXG4gICAgaWYgKGlucHV0LmNoYXJDb2RlQXQoMCkgPT09IDB4RkVGRikge1xuICAgICAgaW5wdXQgPSBpbnB1dC5zbGljZSgxKTtcbiAgICB9XG4gIH1cblxuICB2YXIgc3RhdGUgPSBuZXcgU3RhdGUkMShpbnB1dCwgb3B0aW9ucyk7XG5cbiAgdmFyIG51bGxwb3MgPSBpbnB1dC5pbmRleE9mKCdcXDAnKTtcblxuICBpZiAobnVsbHBvcyAhPT0gLTEpIHtcbiAgICBzdGF0ZS5wb3NpdGlvbiA9IG51bGxwb3M7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ251bGwgYnl0ZSBpcyBub3QgYWxsb3dlZCBpbiBpbnB1dCcpO1xuICB9XG5cbiAgLy8gVXNlIDAgYXMgc3RyaW5nIHRlcm1pbmF0b3IuIFRoYXQgc2lnbmlmaWNhbnRseSBzaW1wbGlmaWVzIGJvdW5kcyBjaGVjay5cbiAgc3RhdGUuaW5wdXQgKz0gJ1xcMCc7XG5cbiAgd2hpbGUgKHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pID09PSAweDIwLyogU3BhY2UgKi8pIHtcbiAgICBzdGF0ZS5saW5lSW5kZW50ICs9IDE7XG4gICAgc3RhdGUucG9zaXRpb24gKz0gMTtcbiAgfVxuXG4gIHdoaWxlIChzdGF0ZS5wb3NpdGlvbiA8IChzdGF0ZS5sZW5ndGggLSAxKSkge1xuICAgIHJlYWREb2N1bWVudChzdGF0ZSk7XG4gIH1cblxuICByZXR1cm4gc3RhdGUuZG9jdW1lbnRzO1xufVxuXG5cbmZ1bmN0aW9uIGxvYWRBbGwkMShpbnB1dCwgaXRlcmF0b3IsIG9wdGlvbnMpIHtcbiAgaWYgKGl0ZXJhdG9yICE9PSBudWxsICYmIHR5cGVvZiBpdGVyYXRvciA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgb3B0aW9ucyA9IGl0ZXJhdG9yO1xuICAgIGl0ZXJhdG9yID0gbnVsbDtcbiAgfVxuXG4gIHZhciBkb2N1bWVudHMgPSBsb2FkRG9jdW1lbnRzKGlucHV0LCBvcHRpb25zKTtcblxuICBpZiAodHlwZW9mIGl0ZXJhdG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50cztcbiAgfVxuXG4gIGZvciAodmFyIGluZGV4ID0gMCwgbGVuZ3RoID0gZG9jdW1lbnRzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBpdGVyYXRvcihkb2N1bWVudHNbaW5kZXhdKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGxvYWQkMShpbnB1dCwgb3B0aW9ucykge1xuICB2YXIgZG9jdW1lbnRzID0gbG9hZERvY3VtZW50cyhpbnB1dCwgb3B0aW9ucyk7XG5cbiAgaWYgKGRvY3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAvKmVzbGludC1kaXNhYmxlIG5vLXVuZGVmaW5lZCovXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIGlmIChkb2N1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50c1swXTtcbiAgfVxuICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdleHBlY3RlZCBhIHNpbmdsZSBkb2N1bWVudCBpbiB0aGUgc3RyZWFtLCBidXQgZm91bmQgbW9yZScpO1xufVxuXG5cbnZhciBsb2FkQWxsXzEgPSBsb2FkQWxsJDE7XG52YXIgbG9hZF8xICAgID0gbG9hZCQxO1xuXG52YXIgbG9hZGVyID0ge1xuXHRsb2FkQWxsOiBsb2FkQWxsXzEsXG5cdGxvYWQ6IGxvYWRfMVxufTtcblxuLyplc2xpbnQtZGlzYWJsZSBuby11c2UtYmVmb3JlLWRlZmluZSovXG5cblxuXG5cblxudmFyIF90b1N0cmluZyAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgX2hhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxudmFyIENIQVJfQk9NICAgICAgICAgICAgICAgICAgPSAweEZFRkY7XG52YXIgQ0hBUl9UQUIgICAgICAgICAgICAgICAgICA9IDB4MDk7IC8qIFRhYiAqL1xudmFyIENIQVJfTElORV9GRUVEICAgICAgICAgICAgPSAweDBBOyAvKiBMRiAqL1xudmFyIENIQVJfQ0FSUklBR0VfUkVUVVJOICAgICAgPSAweDBEOyAvKiBDUiAqL1xudmFyIENIQVJfU1BBQ0UgICAgICAgICAgICAgICAgPSAweDIwOyAvKiBTcGFjZSAqL1xudmFyIENIQVJfRVhDTEFNQVRJT04gICAgICAgICAgPSAweDIxOyAvKiAhICovXG52YXIgQ0hBUl9ET1VCTEVfUVVPVEUgICAgICAgICA9IDB4MjI7IC8qIFwiICovXG52YXIgQ0hBUl9TSEFSUCAgICAgICAgICAgICAgICA9IDB4MjM7IC8qICMgKi9cbnZhciBDSEFSX1BFUkNFTlQgICAgICAgICAgICAgID0gMHgyNTsgLyogJSAqL1xudmFyIENIQVJfQU1QRVJTQU5EICAgICAgICAgICAgPSAweDI2OyAvKiAmICovXG52YXIgQ0hBUl9TSU5HTEVfUVVPVEUgICAgICAgICA9IDB4Mjc7IC8qICcgKi9cbnZhciBDSEFSX0FTVEVSSVNLICAgICAgICAgICAgID0gMHgyQTsgLyogKiAqL1xudmFyIENIQVJfQ09NTUEgICAgICAgICAgICAgICAgPSAweDJDOyAvKiAsICovXG52YXIgQ0hBUl9NSU5VUyAgICAgICAgICAgICAgICA9IDB4MkQ7IC8qIC0gKi9cbnZhciBDSEFSX0NPTE9OICAgICAgICAgICAgICAgID0gMHgzQTsgLyogOiAqL1xudmFyIENIQVJfRVFVQUxTICAgICAgICAgICAgICAgPSAweDNEOyAvKiA9ICovXG52YXIgQ0hBUl9HUkVBVEVSX1RIQU4gICAgICAgICA9IDB4M0U7IC8qID4gKi9cbnZhciBDSEFSX1FVRVNUSU9OICAgICAgICAgICAgID0gMHgzRjsgLyogPyAqL1xudmFyIENIQVJfQ09NTUVSQ0lBTF9BVCAgICAgICAgPSAweDQwOyAvKiBAICovXG52YXIgQ0hBUl9MRUZUX1NRVUFSRV9CUkFDS0VUICA9IDB4NUI7IC8qIFsgKi9cbnZhciBDSEFSX1JJR0hUX1NRVUFSRV9CUkFDS0VUID0gMHg1RDsgLyogXSAqL1xudmFyIENIQVJfR1JBVkVfQUNDRU5UICAgICAgICAgPSAweDYwOyAvKiBgICovXG52YXIgQ0hBUl9MRUZUX0NVUkxZX0JSQUNLRVQgICA9IDB4N0I7IC8qIHsgKi9cbnZhciBDSEFSX1ZFUlRJQ0FMX0xJTkUgICAgICAgID0gMHg3QzsgLyogfCAqL1xudmFyIENIQVJfUklHSFRfQ1VSTFlfQlJBQ0tFVCAgPSAweDdEOyAvKiB9ICovXG5cbnZhciBFU0NBUEVfU0VRVUVOQ0VTID0ge307XG5cbkVTQ0FQRV9TRVFVRU5DRVNbMHgwMF0gICA9ICdcXFxcMCc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDddICAgPSAnXFxcXGEnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDA4XSAgID0gJ1xcXFxiJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwOV0gICA9ICdcXFxcdCc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MEFdICAgPSAnXFxcXG4nO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBCXSAgID0gJ1xcXFx2JztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwQ10gICA9ICdcXFxcZic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MERdICAgPSAnXFxcXHInO1xuRVNDQVBFX1NFUVVFTkNFU1sweDFCXSAgID0gJ1xcXFxlJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgyMl0gICA9ICdcXFxcXCInO1xuRVNDQVBFX1NFUVVFTkNFU1sweDVDXSAgID0gJ1xcXFxcXFxcJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHg4NV0gICA9ICdcXFxcTic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4QTBdICAgPSAnXFxcXF8nO1xuRVNDQVBFX1NFUVVFTkNFU1sweDIwMjhdID0gJ1xcXFxMJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgyMDI5XSA9ICdcXFxcUCc7XG5cbnZhciBERVBSRUNBVEVEX0JPT0xFQU5TX1NZTlRBWCA9IFtcbiAgJ3knLCAnWScsICd5ZXMnLCAnWWVzJywgJ1lFUycsICdvbicsICdPbicsICdPTicsXG4gICduJywgJ04nLCAnbm8nLCAnTm8nLCAnTk8nLCAnb2ZmJywgJ09mZicsICdPRkYnXG5dO1xuXG52YXIgREVQUkVDQVRFRF9CQVNFNjBfU1lOVEFYID0gL15bLStdP1swLTlfXSsoPzo6WzAtOV9dKykrKD86XFwuWzAtOV9dKik/JC87XG5cbmZ1bmN0aW9uIGNvbXBpbGVTdHlsZU1hcChzY2hlbWEsIG1hcCkge1xuICB2YXIgcmVzdWx0LCBrZXlzLCBpbmRleCwgbGVuZ3RoLCB0YWcsIHN0eWxlLCB0eXBlO1xuXG4gIGlmIChtYXAgPT09IG51bGwpIHJldHVybiB7fTtcblxuICByZXN1bHQgPSB7fTtcbiAga2V5cyA9IE9iamVjdC5rZXlzKG1hcCk7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHRhZyA9IGtleXNbaW5kZXhdO1xuICAgIHN0eWxlID0gU3RyaW5nKG1hcFt0YWddKTtcblxuICAgIGlmICh0YWcuc2xpY2UoMCwgMikgPT09ICchIScpIHtcbiAgICAgIHRhZyA9ICd0YWc6eWFtbC5vcmcsMjAwMjonICsgdGFnLnNsaWNlKDIpO1xuICAgIH1cbiAgICB0eXBlID0gc2NoZW1hLmNvbXBpbGVkVHlwZU1hcFsnZmFsbGJhY2snXVt0YWddO1xuXG4gICAgaWYgKHR5cGUgJiYgX2hhc093blByb3BlcnR5LmNhbGwodHlwZS5zdHlsZUFsaWFzZXMsIHN0eWxlKSkge1xuICAgICAgc3R5bGUgPSB0eXBlLnN0eWxlQWxpYXNlc1tzdHlsZV07XG4gICAgfVxuXG4gICAgcmVzdWx0W3RhZ10gPSBzdHlsZTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGVuY29kZUhleChjaGFyYWN0ZXIpIHtcbiAgdmFyIHN0cmluZywgaGFuZGxlLCBsZW5ndGg7XG5cbiAgc3RyaW5nID0gY2hhcmFjdGVyLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXG4gIGlmIChjaGFyYWN0ZXIgPD0gMHhGRikge1xuICAgIGhhbmRsZSA9ICd4JztcbiAgICBsZW5ndGggPSAyO1xuICB9IGVsc2UgaWYgKGNoYXJhY3RlciA8PSAweEZGRkYpIHtcbiAgICBoYW5kbGUgPSAndSc7XG4gICAgbGVuZ3RoID0gNDtcbiAgfSBlbHNlIGlmIChjaGFyYWN0ZXIgPD0gMHhGRkZGRkZGRikge1xuICAgIGhhbmRsZSA9ICdVJztcbiAgICBsZW5ndGggPSA4O1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBleGNlcHRpb24oJ2NvZGUgcG9pbnQgd2l0aGluIGEgc3RyaW5nIG1heSBub3QgYmUgZ3JlYXRlciB0aGFuIDB4RkZGRkZGRkYnKTtcbiAgfVxuXG4gIHJldHVybiAnXFxcXCcgKyBoYW5kbGUgKyBjb21tb24ucmVwZWF0KCcwJywgbGVuZ3RoIC0gc3RyaW5nLmxlbmd0aCkgKyBzdHJpbmc7XG59XG5cblxudmFyIFFVT1RJTkdfVFlQRV9TSU5HTEUgPSAxLFxuICAgIFFVT1RJTkdfVFlQRV9ET1VCTEUgPSAyO1xuXG5mdW5jdGlvbiBTdGF0ZShvcHRpb25zKSB7XG4gIHRoaXMuc2NoZW1hICAgICAgICA9IG9wdGlvbnNbJ3NjaGVtYSddIHx8IF9kZWZhdWx0O1xuICB0aGlzLmluZGVudCAgICAgICAgPSBNYXRoLm1heCgxLCAob3B0aW9uc1snaW5kZW50J10gfHwgMikpO1xuICB0aGlzLm5vQXJyYXlJbmRlbnQgPSBvcHRpb25zWydub0FycmF5SW5kZW50J10gfHwgZmFsc2U7XG4gIHRoaXMuc2tpcEludmFsaWQgICA9IG9wdGlvbnNbJ3NraXBJbnZhbGlkJ10gfHwgZmFsc2U7XG4gIHRoaXMuZmxvd0xldmVsICAgICA9IChjb21tb24uaXNOb3RoaW5nKG9wdGlvbnNbJ2Zsb3dMZXZlbCddKSA/IC0xIDogb3B0aW9uc1snZmxvd0xldmVsJ10pO1xuICB0aGlzLnN0eWxlTWFwICAgICAgPSBjb21waWxlU3R5bGVNYXAodGhpcy5zY2hlbWEsIG9wdGlvbnNbJ3N0eWxlcyddIHx8IG51bGwpO1xuICB0aGlzLnNvcnRLZXlzICAgICAgPSBvcHRpb25zWydzb3J0S2V5cyddIHx8IGZhbHNlO1xuICB0aGlzLmxpbmVXaWR0aCAgICAgPSBvcHRpb25zWydsaW5lV2lkdGgnXSB8fCA4MDtcbiAgdGhpcy5ub1JlZnMgICAgICAgID0gb3B0aW9uc1snbm9SZWZzJ10gfHwgZmFsc2U7XG4gIHRoaXMubm9Db21wYXRNb2RlICA9IG9wdGlvbnNbJ25vQ29tcGF0TW9kZSddIHx8IGZhbHNlO1xuICB0aGlzLmNvbmRlbnNlRmxvdyAgPSBvcHRpb25zWydjb25kZW5zZUZsb3cnXSB8fCBmYWxzZTtcbiAgdGhpcy5xdW90aW5nVHlwZSAgID0gb3B0aW9uc1sncXVvdGluZ1R5cGUnXSA9PT0gJ1wiJyA/IFFVT1RJTkdfVFlQRV9ET1VCTEUgOiBRVU9USU5HX1RZUEVfU0lOR0xFO1xuICB0aGlzLmZvcmNlUXVvdGVzICAgPSBvcHRpb25zWydmb3JjZVF1b3RlcyddIHx8IGZhbHNlO1xuICB0aGlzLnJlcGxhY2VyICAgICAgPSB0eXBlb2Ygb3B0aW9uc1sncmVwbGFjZXInXSA9PT0gJ2Z1bmN0aW9uJyA/IG9wdGlvbnNbJ3JlcGxhY2VyJ10gOiBudWxsO1xuXG4gIHRoaXMuaW1wbGljaXRUeXBlcyA9IHRoaXMuc2NoZW1hLmNvbXBpbGVkSW1wbGljaXQ7XG4gIHRoaXMuZXhwbGljaXRUeXBlcyA9IHRoaXMuc2NoZW1hLmNvbXBpbGVkRXhwbGljaXQ7XG5cbiAgdGhpcy50YWcgPSBudWxsO1xuICB0aGlzLnJlc3VsdCA9ICcnO1xuXG4gIHRoaXMuZHVwbGljYXRlcyA9IFtdO1xuICB0aGlzLnVzZWREdXBsaWNhdGVzID0gbnVsbDtcbn1cblxuLy8gSW5kZW50cyBldmVyeSBsaW5lIGluIGEgc3RyaW5nLiBFbXB0eSBsaW5lcyAoXFxuIG9ubHkpIGFyZSBub3QgaW5kZW50ZWQuXG5mdW5jdGlvbiBpbmRlbnRTdHJpbmcoc3RyaW5nLCBzcGFjZXMpIHtcbiAgdmFyIGluZCA9IGNvbW1vbi5yZXBlYXQoJyAnLCBzcGFjZXMpLFxuICAgICAgcG9zaXRpb24gPSAwLFxuICAgICAgbmV4dCA9IC0xLFxuICAgICAgcmVzdWx0ID0gJycsXG4gICAgICBsaW5lLFxuICAgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcblxuICB3aGlsZSAocG9zaXRpb24gPCBsZW5ndGgpIHtcbiAgICBuZXh0ID0gc3RyaW5nLmluZGV4T2YoJ1xcbicsIHBvc2l0aW9uKTtcbiAgICBpZiAobmV4dCA9PT0gLTEpIHtcbiAgICAgIGxpbmUgPSBzdHJpbmcuc2xpY2UocG9zaXRpb24pO1xuICAgICAgcG9zaXRpb24gPSBsZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpbmUgPSBzdHJpbmcuc2xpY2UocG9zaXRpb24sIG5leHQgKyAxKTtcbiAgICAgIHBvc2l0aW9uID0gbmV4dCArIDE7XG4gICAgfVxuXG4gICAgaWYgKGxpbmUubGVuZ3RoICYmIGxpbmUgIT09ICdcXG4nKSByZXN1bHQgKz0gaW5kO1xuXG4gICAgcmVzdWx0ICs9IGxpbmU7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU5leHRMaW5lKHN0YXRlLCBsZXZlbCkge1xuICByZXR1cm4gJ1xcbicgKyBjb21tb24ucmVwZWF0KCcgJywgc3RhdGUuaW5kZW50ICogbGV2ZWwpO1xufVxuXG5mdW5jdGlvbiB0ZXN0SW1wbGljaXRSZXNvbHZpbmcoc3RhdGUsIHN0cikge1xuICB2YXIgaW5kZXgsIGxlbmd0aCwgdHlwZTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gc3RhdGUuaW1wbGljaXRUeXBlcy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdHlwZSA9IHN0YXRlLmltcGxpY2l0VHlwZXNbaW5kZXhdO1xuXG4gICAgaWYgKHR5cGUucmVzb2x2ZShzdHIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIFszM10gcy13aGl0ZSA6Oj0gcy1zcGFjZSB8IHMtdGFiXG5mdW5jdGlvbiBpc1doaXRlc3BhY2UoYykge1xuICByZXR1cm4gYyA9PT0gQ0hBUl9TUEFDRSB8fCBjID09PSBDSEFSX1RBQjtcbn1cblxuLy8gUmV0dXJucyB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgY2FuIGJlIHByaW50ZWQgd2l0aG91dCBlc2NhcGluZy5cbi8vIEZyb20gWUFNTCAxLjI6IFwiYW55IGFsbG93ZWQgY2hhcmFjdGVycyBrbm93biB0byBiZSBub24tcHJpbnRhYmxlXG4vLyBzaG91bGQgYWxzbyBiZSBlc2NhcGVkLiBbSG93ZXZlcixdIFRoaXMgaXNuXHUyMDE5dCBtYW5kYXRvcnlcIlxuLy8gRGVyaXZlZCBmcm9tIG5iLWNoYXIgLSBcXHQgLSAjeDg1IC0gI3hBMCAtICN4MjAyOCAtICN4MjAyOS5cbmZ1bmN0aW9uIGlzUHJpbnRhYmxlKGMpIHtcbiAgcmV0dXJuICAoMHgwMDAyMCA8PSBjICYmIGMgPD0gMHgwMDAwN0UpXG4gICAgICB8fCAoKDB4MDAwQTEgPD0gYyAmJiBjIDw9IDB4MDBEN0ZGKSAmJiBjICE9PSAweDIwMjggJiYgYyAhPT0gMHgyMDI5KVxuICAgICAgfHwgKCgweDBFMDAwIDw9IGMgJiYgYyA8PSAweDAwRkZGRCkgJiYgYyAhPT0gQ0hBUl9CT00pXG4gICAgICB8fCAgKDB4MTAwMDAgPD0gYyAmJiBjIDw9IDB4MTBGRkZGKTtcbn1cblxuLy8gWzM0XSBucy1jaGFyIDo6PSBuYi1jaGFyIC0gcy13aGl0ZVxuLy8gWzI3XSBuYi1jaGFyIDo6PSBjLXByaW50YWJsZSAtIGItY2hhciAtIGMtYnl0ZS1vcmRlci1tYXJrXG4vLyBbMjZdIGItY2hhciAgOjo9IGItbGluZS1mZWVkIHwgYi1jYXJyaWFnZS1yZXR1cm5cbi8vIEluY2x1ZGluZyBzLXdoaXRlIChmb3Igc29tZSByZWFzb24sIGV4YW1wbGVzIGRvZXNuJ3QgbWF0Y2ggc3BlY3MgaW4gdGhpcyBhc3BlY3QpXG4vLyBucy1jaGFyIDo6PSBjLXByaW50YWJsZSAtIGItbGluZS1mZWVkIC0gYi1jYXJyaWFnZS1yZXR1cm4gLSBjLWJ5dGUtb3JkZXItbWFya1xuZnVuY3Rpb24gaXNOc0NoYXJPcldoaXRlc3BhY2UoYykge1xuICByZXR1cm4gaXNQcmludGFibGUoYylcbiAgICAmJiBjICE9PSBDSEFSX0JPTVxuICAgIC8vIC0gYi1jaGFyXG4gICAgJiYgYyAhPT0gQ0hBUl9DQVJSSUFHRV9SRVRVUk5cbiAgICAmJiBjICE9PSBDSEFSX0xJTkVfRkVFRDtcbn1cblxuLy8gWzEyN10gIG5zLXBsYWluLXNhZmUoYykgOjo9IGMgPSBmbG93LW91dCAgXHUyMUQyIG5zLXBsYWluLXNhZmUtb3V0XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGZsb3ctaW4gICBcdTIxRDIgbnMtcGxhaW4tc2FmZS1pblxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBibG9jay1rZXkgXHUyMUQyIG5zLXBsYWluLXNhZmUtb3V0XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGZsb3cta2V5ICBcdTIxRDIgbnMtcGxhaW4tc2FmZS1pblxuLy8gWzEyOF0gbnMtcGxhaW4tc2FmZS1vdXQgOjo9IG5zLWNoYXJcbi8vIFsxMjldICBucy1wbGFpbi1zYWZlLWluIDo6PSBucy1jaGFyIC0gYy1mbG93LWluZGljYXRvclxuLy8gWzEzMF0gIG5zLXBsYWluLWNoYXIoYykgOjo9ICAoIG5zLXBsYWluLXNhZmUoYykgLSBcdTIwMUM6XHUyMDFEIC0gXHUyMDFDI1x1MjAxRCApXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICggLyogQW4gbnMtY2hhciBwcmVjZWRpbmcgKi8gXHUyMDFDI1x1MjAxRCApXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICggXHUyMDFDOlx1MjAxRCAvKiBGb2xsb3dlZCBieSBhbiBucy1wbGFpbi1zYWZlKGMpICovIClcbmZ1bmN0aW9uIGlzUGxhaW5TYWZlKGMsIHByZXYsIGluYmxvY2spIHtcbiAgdmFyIGNJc05zQ2hhck9yV2hpdGVzcGFjZSA9IGlzTnNDaGFyT3JXaGl0ZXNwYWNlKGMpO1xuICB2YXIgY0lzTnNDaGFyID0gY0lzTnNDaGFyT3JXaGl0ZXNwYWNlICYmICFpc1doaXRlc3BhY2UoYyk7XG4gIHJldHVybiAoXG4gICAgLy8gbnMtcGxhaW4tc2FmZVxuICAgIGluYmxvY2sgPyAvLyBjID0gZmxvdy1pblxuICAgICAgY0lzTnNDaGFyT3JXaGl0ZXNwYWNlXG4gICAgICA6IGNJc05zQ2hhck9yV2hpdGVzcGFjZVxuICAgICAgICAvLyAtIGMtZmxvdy1pbmRpY2F0b3JcbiAgICAgICAgJiYgYyAhPT0gQ0hBUl9DT01NQVxuICAgICAgICAmJiBjICE9PSBDSEFSX0xFRlRfU1FVQVJFX0JSQUNLRVRcbiAgICAgICAgJiYgYyAhPT0gQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVFxuICAgICAgICAmJiBjICE9PSBDSEFSX0xFRlRfQ1VSTFlfQlJBQ0tFVFxuICAgICAgICAmJiBjICE9PSBDSEFSX1JJR0hUX0NVUkxZX0JSQUNLRVRcbiAgKVxuICAgIC8vIG5zLXBsYWluLWNoYXJcbiAgICAmJiBjICE9PSBDSEFSX1NIQVJQIC8vIGZhbHNlIG9uICcjJ1xuICAgICYmICEocHJldiA9PT0gQ0hBUl9DT0xPTiAmJiAhY0lzTnNDaGFyKSAvLyBmYWxzZSBvbiAnOiAnXG4gICAgfHwgKGlzTnNDaGFyT3JXaGl0ZXNwYWNlKHByZXYpICYmICFpc1doaXRlc3BhY2UocHJldikgJiYgYyA9PT0gQ0hBUl9TSEFSUCkgLy8gY2hhbmdlIHRvIHRydWUgb24gJ1teIF0jJ1xuICAgIHx8IChwcmV2ID09PSBDSEFSX0NPTE9OICYmIGNJc05zQ2hhcik7IC8vIGNoYW5nZSB0byB0cnVlIG9uICc6W14gXSdcbn1cblxuLy8gU2ltcGxpZmllZCB0ZXN0IGZvciB2YWx1ZXMgYWxsb3dlZCBhcyB0aGUgZmlyc3QgY2hhcmFjdGVyIGluIHBsYWluIHN0eWxlLlxuZnVuY3Rpb24gaXNQbGFpblNhZmVGaXJzdChjKSB7XG4gIC8vIFVzZXMgYSBzdWJzZXQgb2YgbnMtY2hhciAtIGMtaW5kaWNhdG9yXG4gIC8vIHdoZXJlIG5zLWNoYXIgPSBuYi1jaGFyIC0gcy13aGl0ZS5cbiAgLy8gTm8gc3VwcG9ydCBvZiAoICggXHUyMDFDP1x1MjAxRCB8IFx1MjAxQzpcdTIwMUQgfCBcdTIwMUMtXHUyMDFEICkgLyogRm9sbG93ZWQgYnkgYW4gbnMtcGxhaW4tc2FmZShjKSkgKi8gKSBwYXJ0XG4gIHJldHVybiBpc1ByaW50YWJsZShjKSAmJiBjICE9PSBDSEFSX0JPTVxuICAgICYmICFpc1doaXRlc3BhY2UoYykgLy8gLSBzLXdoaXRlXG4gICAgLy8gLSAoYy1pbmRpY2F0b3IgOjo9XG4gICAgLy8gXHUyMDFDLVx1MjAxRCB8IFx1MjAxQz9cdTIwMUQgfCBcdTIwMUM6XHUyMDFEIHwgXHUyMDFDLFx1MjAxRCB8IFx1MjAxQ1tcdTIwMUQgfCBcdTIwMUNdXHUyMDFEIHwgXHUyMDFDe1x1MjAxRCB8IFx1MjAxQ31cdTIwMURcbiAgICAmJiBjICE9PSBDSEFSX01JTlVTXG4gICAgJiYgYyAhPT0gQ0hBUl9RVUVTVElPTlxuICAgICYmIGMgIT09IENIQVJfQ09MT05cbiAgICAmJiBjICE9PSBDSEFSX0NPTU1BXG4gICAgJiYgYyAhPT0gQ0hBUl9MRUZUX1NRVUFSRV9CUkFDS0VUXG4gICAgJiYgYyAhPT0gQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUXG4gICAgJiYgYyAhPT0gQ0hBUl9SSUdIVF9DVVJMWV9CUkFDS0VUXG4gICAgLy8gfCBcdTIwMUMjXHUyMDFEIHwgXHUyMDFDJlx1MjAxRCB8IFx1MjAxQypcdTIwMUQgfCBcdTIwMUMhXHUyMDFEIHwgXHUyMDFDfFx1MjAxRCB8IFx1MjAxQz1cdTIwMUQgfCBcdTIwMUM+XHUyMDFEIHwgXHUyMDFDJ1x1MjAxRCB8IFx1MjAxQ1wiXHUyMDFEXG4gICAgJiYgYyAhPT0gQ0hBUl9TSEFSUFxuICAgICYmIGMgIT09IENIQVJfQU1QRVJTQU5EXG4gICAgJiYgYyAhPT0gQ0hBUl9BU1RFUklTS1xuICAgICYmIGMgIT09IENIQVJfRVhDTEFNQVRJT05cbiAgICAmJiBjICE9PSBDSEFSX1ZFUlRJQ0FMX0xJTkVcbiAgICAmJiBjICE9PSBDSEFSX0VRVUFMU1xuICAgICYmIGMgIT09IENIQVJfR1JFQVRFUl9USEFOXG4gICAgJiYgYyAhPT0gQ0hBUl9TSU5HTEVfUVVPVEVcbiAgICAmJiBjICE9PSBDSEFSX0RPVUJMRV9RVU9URVxuICAgIC8vIHwgXHUyMDFDJVx1MjAxRCB8IFx1MjAxQ0BcdTIwMUQgfCBcdTIwMUNgXHUyMDFEKVxuICAgICYmIGMgIT09IENIQVJfUEVSQ0VOVFxuICAgICYmIGMgIT09IENIQVJfQ09NTUVSQ0lBTF9BVFxuICAgICYmIGMgIT09IENIQVJfR1JBVkVfQUNDRU5UO1xufVxuXG4vLyBTaW1wbGlmaWVkIHRlc3QgZm9yIHZhbHVlcyBhbGxvd2VkIGFzIHRoZSBsYXN0IGNoYXJhY3RlciBpbiBwbGFpbiBzdHlsZS5cbmZ1bmN0aW9uIGlzUGxhaW5TYWZlTGFzdChjKSB7XG4gIC8vIGp1c3Qgbm90IHdoaXRlc3BhY2Ugb3IgY29sb24sIGl0IHdpbGwgYmUgY2hlY2tlZCB0byBiZSBwbGFpbiBjaGFyYWN0ZXIgbGF0ZXJcbiAgcmV0dXJuICFpc1doaXRlc3BhY2UoYykgJiYgYyAhPT0gQ0hBUl9DT0xPTjtcbn1cblxuLy8gU2FtZSBhcyAnc3RyaW5nJy5jb2RlUG9pbnRBdChwb3MpLCBidXQgd29ya3MgaW4gb2xkZXIgYnJvd3NlcnMuXG5mdW5jdGlvbiBjb2RlUG9pbnRBdChzdHJpbmcsIHBvcykge1xuICB2YXIgZmlyc3QgPSBzdHJpbmcuY2hhckNvZGVBdChwb3MpLCBzZWNvbmQ7XG4gIGlmIChmaXJzdCA+PSAweEQ4MDAgJiYgZmlyc3QgPD0gMHhEQkZGICYmIHBvcyArIDEgPCBzdHJpbmcubGVuZ3RoKSB7XG4gICAgc2Vjb25kID0gc3RyaW5nLmNoYXJDb2RlQXQocG9zICsgMSk7XG4gICAgaWYgKHNlY29uZCA+PSAweERDMDAgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgLy8gaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmcjc3Vycm9nYXRlLWZvcm11bGFlXG4gICAgICByZXR1cm4gKGZpcnN0IC0gMHhEODAwKSAqIDB4NDAwICsgc2Vjb25kIC0gMHhEQzAwICsgMHgxMDAwMDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZpcnN0O1xufVxuXG4vLyBEZXRlcm1pbmVzIHdoZXRoZXIgYmxvY2sgaW5kZW50YXRpb24gaW5kaWNhdG9yIGlzIHJlcXVpcmVkLlxuZnVuY3Rpb24gbmVlZEluZGVudEluZGljYXRvcihzdHJpbmcpIHtcbiAgdmFyIGxlYWRpbmdTcGFjZVJlID0gL15cXG4qIC87XG4gIHJldHVybiBsZWFkaW5nU3BhY2VSZS50ZXN0KHN0cmluZyk7XG59XG5cbnZhciBTVFlMRV9QTEFJTiAgID0gMSxcbiAgICBTVFlMRV9TSU5HTEUgID0gMixcbiAgICBTVFlMRV9MSVRFUkFMID0gMyxcbiAgICBTVFlMRV9GT0xERUQgID0gNCxcbiAgICBTVFlMRV9ET1VCTEUgID0gNTtcblxuLy8gRGV0ZXJtaW5lcyB3aGljaCBzY2FsYXIgc3R5bGVzIGFyZSBwb3NzaWJsZSBhbmQgcmV0dXJucyB0aGUgcHJlZmVycmVkIHN0eWxlLlxuLy8gbGluZVdpZHRoID0gLTEgPT4gbm8gbGltaXQuXG4vLyBQcmUtY29uZGl0aW9uczogc3RyLmxlbmd0aCA+IDAuXG4vLyBQb3N0LWNvbmRpdGlvbnM6XG4vLyAgICBTVFlMRV9QTEFJTiBvciBTVFlMRV9TSU5HTEUgPT4gbm8gXFxuIGFyZSBpbiB0aGUgc3RyaW5nLlxuLy8gICAgU1RZTEVfTElURVJBTCA9PiBubyBsaW5lcyBhcmUgc3VpdGFibGUgZm9yIGZvbGRpbmcgKG9yIGxpbmVXaWR0aCBpcyAtMSkuXG4vLyAgICBTVFlMRV9GT0xERUQgPT4gYSBsaW5lID4gbGluZVdpZHRoIGFuZCBjYW4gYmUgZm9sZGVkIChhbmQgbGluZVdpZHRoICE9IC0xKS5cbmZ1bmN0aW9uIGNob29zZVNjYWxhclN0eWxlKHN0cmluZywgc2luZ2xlTGluZU9ubHksIGluZGVudFBlckxldmVsLCBsaW5lV2lkdGgsXG4gIHRlc3RBbWJpZ3VvdXNUeXBlLCBxdW90aW5nVHlwZSwgZm9yY2VRdW90ZXMsIGluYmxvY2spIHtcblxuICB2YXIgaTtcbiAgdmFyIGNoYXIgPSAwO1xuICB2YXIgcHJldkNoYXIgPSBudWxsO1xuICB2YXIgaGFzTGluZUJyZWFrID0gZmFsc2U7XG4gIHZhciBoYXNGb2xkYWJsZUxpbmUgPSBmYWxzZTsgLy8gb25seSBjaGVja2VkIGlmIHNob3VsZFRyYWNrV2lkdGhcbiAgdmFyIHNob3VsZFRyYWNrV2lkdGggPSBsaW5lV2lkdGggIT09IC0xO1xuICB2YXIgcHJldmlvdXNMaW5lQnJlYWsgPSAtMTsgLy8gY291bnQgdGhlIGZpcnN0IGxpbmUgY29ycmVjdGx5XG4gIHZhciBwbGFpbiA9IGlzUGxhaW5TYWZlRmlyc3QoY29kZVBvaW50QXQoc3RyaW5nLCAwKSlcbiAgICAgICAgICAmJiBpc1BsYWluU2FmZUxhc3QoY29kZVBvaW50QXQoc3RyaW5nLCBzdHJpbmcubGVuZ3RoIC0gMSkpO1xuXG4gIGlmIChzaW5nbGVMaW5lT25seSB8fCBmb3JjZVF1b3Rlcykge1xuICAgIC8vIENhc2U6IG5vIGJsb2NrIHN0eWxlcy5cbiAgICAvLyBDaGVjayBmb3IgZGlzYWxsb3dlZCBjaGFyYWN0ZXJzIHRvIHJ1bGUgb3V0IHBsYWluIGFuZCBzaW5nbGUuXG4gICAgZm9yIChpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGNoYXIgPj0gMHgxMDAwMCA/IGkgKz0gMiA6IGkrKykge1xuICAgICAgY2hhciA9IGNvZGVQb2ludEF0KHN0cmluZywgaSk7XG4gICAgICBpZiAoIWlzUHJpbnRhYmxlKGNoYXIpKSB7XG4gICAgICAgIHJldHVybiBTVFlMRV9ET1VCTEU7XG4gICAgICB9XG4gICAgICBwbGFpbiA9IHBsYWluICYmIGlzUGxhaW5TYWZlKGNoYXIsIHByZXZDaGFyLCBpbmJsb2NrKTtcbiAgICAgIHByZXZDaGFyID0gY2hhcjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gQ2FzZTogYmxvY2sgc3R5bGVzIHBlcm1pdHRlZC5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgY2hhciA+PSAweDEwMDAwID8gaSArPSAyIDogaSsrKSB7XG4gICAgICBjaGFyID0gY29kZVBvaW50QXQoc3RyaW5nLCBpKTtcbiAgICAgIGlmIChjaGFyID09PSBDSEFSX0xJTkVfRkVFRCkge1xuICAgICAgICBoYXNMaW5lQnJlYWsgPSB0cnVlO1xuICAgICAgICAvLyBDaGVjayBpZiBhbnkgbGluZSBjYW4gYmUgZm9sZGVkLlxuICAgICAgICBpZiAoc2hvdWxkVHJhY2tXaWR0aCkge1xuICAgICAgICAgIGhhc0ZvbGRhYmxlTGluZSA9IGhhc0ZvbGRhYmxlTGluZSB8fFxuICAgICAgICAgICAgLy8gRm9sZGFibGUgbGluZSA9IHRvbyBsb25nLCBhbmQgbm90IG1vcmUtaW5kZW50ZWQuXG4gICAgICAgICAgICAoaSAtIHByZXZpb3VzTGluZUJyZWFrIC0gMSA+IGxpbmVXaWR0aCAmJlxuICAgICAgICAgICAgIHN0cmluZ1twcmV2aW91c0xpbmVCcmVhayArIDFdICE9PSAnICcpO1xuICAgICAgICAgIHByZXZpb3VzTGluZUJyZWFrID0gaTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNQcmludGFibGUoY2hhcikpIHtcbiAgICAgICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgICAgIH1cbiAgICAgIHBsYWluID0gcGxhaW4gJiYgaXNQbGFpblNhZmUoY2hhciwgcHJldkNoYXIsIGluYmxvY2spO1xuICAgICAgcHJldkNoYXIgPSBjaGFyO1xuICAgIH1cbiAgICAvLyBpbiBjYXNlIHRoZSBlbmQgaXMgbWlzc2luZyBhIFxcblxuICAgIGhhc0ZvbGRhYmxlTGluZSA9IGhhc0ZvbGRhYmxlTGluZSB8fCAoc2hvdWxkVHJhY2tXaWR0aCAmJlxuICAgICAgKGkgLSBwcmV2aW91c0xpbmVCcmVhayAtIDEgPiBsaW5lV2lkdGggJiZcbiAgICAgICBzdHJpbmdbcHJldmlvdXNMaW5lQnJlYWsgKyAxXSAhPT0gJyAnKSk7XG4gIH1cbiAgLy8gQWx0aG91Z2ggZXZlcnkgc3R5bGUgY2FuIHJlcHJlc2VudCBcXG4gd2l0aG91dCBlc2NhcGluZywgcHJlZmVyIGJsb2NrIHN0eWxlc1xuICAvLyBmb3IgbXVsdGlsaW5lLCBzaW5jZSB0aGV5J3JlIG1vcmUgcmVhZGFibGUgYW5kIHRoZXkgZG9uJ3QgYWRkIGVtcHR5IGxpbmVzLlxuICAvLyBBbHNvIHByZWZlciBmb2xkaW5nIGEgc3VwZXItbG9uZyBsaW5lLlxuICBpZiAoIWhhc0xpbmVCcmVhayAmJiAhaGFzRm9sZGFibGVMaW5lKSB7XG4gICAgLy8gU3RyaW5ncyBpbnRlcnByZXRhYmxlIGFzIGFub3RoZXIgdHlwZSBoYXZlIHRvIGJlIHF1b3RlZDtcbiAgICAvLyBlLmcuIHRoZSBzdHJpbmcgJ3RydWUnIHZzLiB0aGUgYm9vbGVhbiB0cnVlLlxuICAgIGlmIChwbGFpbiAmJiAhZm9yY2VRdW90ZXMgJiYgIXRlc3RBbWJpZ3VvdXNUeXBlKHN0cmluZykpIHtcbiAgICAgIHJldHVybiBTVFlMRV9QTEFJTjtcbiAgICB9XG4gICAgcmV0dXJuIHF1b3RpbmdUeXBlID09PSBRVU9USU5HX1RZUEVfRE9VQkxFID8gU1RZTEVfRE9VQkxFIDogU1RZTEVfU0lOR0xFO1xuICB9XG4gIC8vIEVkZ2UgY2FzZTogYmxvY2sgaW5kZW50YXRpb24gaW5kaWNhdG9yIGNhbiBvbmx5IGhhdmUgb25lIGRpZ2l0LlxuICBpZiAoaW5kZW50UGVyTGV2ZWwgPiA5ICYmIG5lZWRJbmRlbnRJbmRpY2F0b3Ioc3RyaW5nKSkge1xuICAgIHJldHVybiBTVFlMRV9ET1VCTEU7XG4gIH1cbiAgLy8gQXQgdGhpcyBwb2ludCB3ZSBrbm93IGJsb2NrIHN0eWxlcyBhcmUgdmFsaWQuXG4gIC8vIFByZWZlciBsaXRlcmFsIHN0eWxlIHVubGVzcyB3ZSB3YW50IHRvIGZvbGQuXG4gIGlmICghZm9yY2VRdW90ZXMpIHtcbiAgICByZXR1cm4gaGFzRm9sZGFibGVMaW5lID8gU1RZTEVfRk9MREVEIDogU1RZTEVfTElURVJBTDtcbiAgfVxuICByZXR1cm4gcXVvdGluZ1R5cGUgPT09IFFVT1RJTkdfVFlQRV9ET1VCTEUgPyBTVFlMRV9ET1VCTEUgOiBTVFlMRV9TSU5HTEU7XG59XG5cbi8vIE5vdGU6IGxpbmUgYnJlYWtpbmcvZm9sZGluZyBpcyBpbXBsZW1lbnRlZCBmb3Igb25seSB0aGUgZm9sZGVkIHN0eWxlLlxuLy8gTkIuIFdlIGRyb3AgdGhlIGxhc3QgdHJhaWxpbmcgbmV3bGluZSAoaWYgYW55KSBvZiBhIHJldHVybmVkIGJsb2NrIHNjYWxhclxuLy8gIHNpbmNlIHRoZSBkdW1wZXIgYWRkcyBpdHMgb3duIG5ld2xpbmUuIFRoaXMgYWx3YXlzIHdvcmtzOlxuLy8gICAgXHUyMDIyIE5vIGVuZGluZyBuZXdsaW5lID0+IHVuYWZmZWN0ZWQ7IGFscmVhZHkgdXNpbmcgc3RyaXAgXCItXCIgY2hvbXBpbmcuXG4vLyAgICBcdTIwMjIgRW5kaW5nIG5ld2xpbmUgICAgPT4gcmVtb3ZlZCB0aGVuIHJlc3RvcmVkLlxuLy8gIEltcG9ydGFudGx5LCB0aGlzIGtlZXBzIHRoZSBcIitcIiBjaG9tcCBpbmRpY2F0b3IgZnJvbSBnYWluaW5nIGFuIGV4dHJhIGxpbmUuXG5mdW5jdGlvbiB3cml0ZVNjYWxhcihzdGF0ZSwgc3RyaW5nLCBsZXZlbCwgaXNrZXksIGluYmxvY2spIHtcbiAgc3RhdGUuZHVtcCA9IChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHN0cmluZy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBzdGF0ZS5xdW90aW5nVHlwZSA9PT0gUVVPVElOR19UWVBFX0RPVUJMRSA/ICdcIlwiJyA6IFwiJydcIjtcbiAgICB9XG4gICAgaWYgKCFzdGF0ZS5ub0NvbXBhdE1vZGUpIHtcbiAgICAgIGlmIChERVBSRUNBVEVEX0JPT0xFQU5TX1NZTlRBWC5pbmRleE9mKHN0cmluZykgIT09IC0xIHx8IERFUFJFQ0FURURfQkFTRTYwX1NZTlRBWC50ZXN0KHN0cmluZykpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlLnF1b3RpbmdUeXBlID09PSBRVU9USU5HX1RZUEVfRE9VQkxFID8gKCdcIicgKyBzdHJpbmcgKyAnXCInKSA6IChcIidcIiArIHN0cmluZyArIFwiJ1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaW5kZW50ID0gc3RhdGUuaW5kZW50ICogTWF0aC5tYXgoMSwgbGV2ZWwpOyAvLyBubyAwLWluZGVudCBzY2FsYXJzXG4gICAgLy8gQXMgaW5kZW50YXRpb24gZ2V0cyBkZWVwZXIsIGxldCB0aGUgd2lkdGggZGVjcmVhc2UgbW9ub3RvbmljYWxseVxuICAgIC8vIHRvIHRoZSBsb3dlciBib3VuZCBtaW4oc3RhdGUubGluZVdpZHRoLCA0MCkuXG4gICAgLy8gTm90ZSB0aGF0IHRoaXMgaW1wbGllc1xuICAgIC8vICBzdGF0ZS5saW5lV2lkdGggXHUyMjY0IDQwICsgc3RhdGUuaW5kZW50OiB3aWR0aCBpcyBmaXhlZCBhdCB0aGUgbG93ZXIgYm91bmQuXG4gICAgLy8gIHN0YXRlLmxpbmVXaWR0aCA+IDQwICsgc3RhdGUuaW5kZW50OiB3aWR0aCBkZWNyZWFzZXMgdW50aWwgdGhlIGxvd2VyIGJvdW5kLlxuICAgIC8vIFRoaXMgYmVoYXZlcyBiZXR0ZXIgdGhhbiBhIGNvbnN0YW50IG1pbmltdW0gd2lkdGggd2hpY2ggZGlzYWxsb3dzIG5hcnJvd2VyIG9wdGlvbnMsXG4gICAgLy8gb3IgYW4gaW5kZW50IHRocmVzaG9sZCB3aGljaCBjYXVzZXMgdGhlIHdpZHRoIHRvIHN1ZGRlbmx5IGluY3JlYXNlLlxuICAgIHZhciBsaW5lV2lkdGggPSBzdGF0ZS5saW5lV2lkdGggPT09IC0xXG4gICAgICA/IC0xIDogTWF0aC5tYXgoTWF0aC5taW4oc3RhdGUubGluZVdpZHRoLCA0MCksIHN0YXRlLmxpbmVXaWR0aCAtIGluZGVudCk7XG5cbiAgICAvLyBXaXRob3V0IGtub3dpbmcgaWYga2V5cyBhcmUgaW1wbGljaXQvZXhwbGljaXQsIGFzc3VtZSBpbXBsaWNpdCBmb3Igc2FmZXR5LlxuICAgIHZhciBzaW5nbGVMaW5lT25seSA9IGlza2V5XG4gICAgICAvLyBObyBibG9jayBzdHlsZXMgaW4gZmxvdyBtb2RlLlxuICAgICAgfHwgKHN0YXRlLmZsb3dMZXZlbCA+IC0xICYmIGxldmVsID49IHN0YXRlLmZsb3dMZXZlbCk7XG4gICAgZnVuY3Rpb24gdGVzdEFtYmlndWl0eShzdHJpbmcpIHtcbiAgICAgIHJldHVybiB0ZXN0SW1wbGljaXRSZXNvbHZpbmcoc3RhdGUsIHN0cmluZyk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChjaG9vc2VTY2FsYXJTdHlsZShzdHJpbmcsIHNpbmdsZUxpbmVPbmx5LCBzdGF0ZS5pbmRlbnQsIGxpbmVXaWR0aCxcbiAgICAgIHRlc3RBbWJpZ3VpdHksIHN0YXRlLnF1b3RpbmdUeXBlLCBzdGF0ZS5mb3JjZVF1b3RlcyAmJiAhaXNrZXksIGluYmxvY2spKSB7XG5cbiAgICAgIGNhc2UgU1RZTEVfUExBSU46XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICBjYXNlIFNUWUxFX1NJTkdMRTpcbiAgICAgICAgcmV0dXJuIFwiJ1wiICsgc3RyaW5nLnJlcGxhY2UoLycvZywgXCInJ1wiKSArIFwiJ1wiO1xuICAgICAgY2FzZSBTVFlMRV9MSVRFUkFMOlxuICAgICAgICByZXR1cm4gJ3wnICsgYmxvY2tIZWFkZXIoc3RyaW5nLCBzdGF0ZS5pbmRlbnQpXG4gICAgICAgICAgKyBkcm9wRW5kaW5nTmV3bGluZShpbmRlbnRTdHJpbmcoc3RyaW5nLCBpbmRlbnQpKTtcbiAgICAgIGNhc2UgU1RZTEVfRk9MREVEOlxuICAgICAgICByZXR1cm4gJz4nICsgYmxvY2tIZWFkZXIoc3RyaW5nLCBzdGF0ZS5pbmRlbnQpXG4gICAgICAgICAgKyBkcm9wRW5kaW5nTmV3bGluZShpbmRlbnRTdHJpbmcoZm9sZFN0cmluZyhzdHJpbmcsIGxpbmVXaWR0aCksIGluZGVudCkpO1xuICAgICAgY2FzZSBTVFlMRV9ET1VCTEU6XG4gICAgICAgIHJldHVybiAnXCInICsgZXNjYXBlU3RyaW5nKHN0cmluZykgKyAnXCInO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignaW1wb3NzaWJsZSBlcnJvcjogaW52YWxpZCBzY2FsYXIgc3R5bGUnKTtcbiAgICB9XG4gIH0oKSk7XG59XG5cbi8vIFByZS1jb25kaXRpb25zOiBzdHJpbmcgaXMgdmFsaWQgZm9yIGEgYmxvY2sgc2NhbGFyLCAxIDw9IGluZGVudFBlckxldmVsIDw9IDkuXG5mdW5jdGlvbiBibG9ja0hlYWRlcihzdHJpbmcsIGluZGVudFBlckxldmVsKSB7XG4gIHZhciBpbmRlbnRJbmRpY2F0b3IgPSBuZWVkSW5kZW50SW5kaWNhdG9yKHN0cmluZykgPyBTdHJpbmcoaW5kZW50UGVyTGV2ZWwpIDogJyc7XG5cbiAgLy8gbm90ZSB0aGUgc3BlY2lhbCBjYXNlOiB0aGUgc3RyaW5nICdcXG4nIGNvdW50cyBhcyBhIFwidHJhaWxpbmdcIiBlbXB0eSBsaW5lLlxuICB2YXIgY2xpcCA9ICAgICAgICAgIHN0cmluZ1tzdHJpbmcubGVuZ3RoIC0gMV0gPT09ICdcXG4nO1xuICB2YXIga2VlcCA9IGNsaXAgJiYgKHN0cmluZ1tzdHJpbmcubGVuZ3RoIC0gMl0gPT09ICdcXG4nIHx8IHN0cmluZyA9PT0gJ1xcbicpO1xuICB2YXIgY2hvbXAgPSBrZWVwID8gJysnIDogKGNsaXAgPyAnJyA6ICctJyk7XG5cbiAgcmV0dXJuIGluZGVudEluZGljYXRvciArIGNob21wICsgJ1xcbic7XG59XG5cbi8vIChTZWUgdGhlIG5vdGUgZm9yIHdyaXRlU2NhbGFyLilcbmZ1bmN0aW9uIGRyb3BFbmRpbmdOZXdsaW5lKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nW3N0cmluZy5sZW5ndGggLSAxXSA9PT0gJ1xcbicgPyBzdHJpbmcuc2xpY2UoMCwgLTEpIDogc3RyaW5nO1xufVxuXG4vLyBOb3RlOiBhIGxvbmcgbGluZSB3aXRob3V0IGEgc3VpdGFibGUgYnJlYWsgcG9pbnQgd2lsbCBleGNlZWQgdGhlIHdpZHRoIGxpbWl0LlxuLy8gUHJlLWNvbmRpdGlvbnM6IGV2ZXJ5IGNoYXIgaW4gc3RyIGlzUHJpbnRhYmxlLCBzdHIubGVuZ3RoID4gMCwgd2lkdGggPiAwLlxuZnVuY3Rpb24gZm9sZFN0cmluZyhzdHJpbmcsIHdpZHRoKSB7XG4gIC8vIEluIGZvbGRlZCBzdHlsZSwgJGskIGNvbnNlY3V0aXZlIG5ld2xpbmVzIG91dHB1dCBhcyAkaysxJCBuZXdsaW5lc1x1MjAxNFxuICAvLyB1bmxlc3MgdGhleSdyZSBiZWZvcmUgb3IgYWZ0ZXIgYSBtb3JlLWluZGVudGVkIGxpbmUsIG9yIGF0IHRoZSB2ZXJ5XG4gIC8vIGJlZ2lubmluZyBvciBlbmQsIGluIHdoaWNoIGNhc2UgJGskIG1hcHMgdG8gJGskLlxuICAvLyBUaGVyZWZvcmUsIHBhcnNlIGVhY2ggY2h1bmsgYXMgbmV3bGluZShzKSBmb2xsb3dlZCBieSBhIGNvbnRlbnQgbGluZS5cbiAgdmFyIGxpbmVSZSA9IC8oXFxuKykoW15cXG5dKikvZztcblxuICAvLyBmaXJzdCBsaW5lIChwb3NzaWJseSBhbiBlbXB0eSBsaW5lKVxuICB2YXIgcmVzdWx0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV4dExGID0gc3RyaW5nLmluZGV4T2YoJ1xcbicpO1xuICAgIG5leHRMRiA9IG5leHRMRiAhPT0gLTEgPyBuZXh0TEYgOiBzdHJpbmcubGVuZ3RoO1xuICAgIGxpbmVSZS5sYXN0SW5kZXggPSBuZXh0TEY7XG4gICAgcmV0dXJuIGZvbGRMaW5lKHN0cmluZy5zbGljZSgwLCBuZXh0TEYpLCB3aWR0aCk7XG4gIH0oKSk7XG4gIC8vIElmIHdlIGhhdmVuJ3QgcmVhY2hlZCB0aGUgZmlyc3QgY29udGVudCBsaW5lIHlldCwgZG9uJ3QgYWRkIGFuIGV4dHJhIFxcbi5cbiAgdmFyIHByZXZNb3JlSW5kZW50ZWQgPSBzdHJpbmdbMF0gPT09ICdcXG4nIHx8IHN0cmluZ1swXSA9PT0gJyAnO1xuICB2YXIgbW9yZUluZGVudGVkO1xuXG4gIC8vIHJlc3Qgb2YgdGhlIGxpbmVzXG4gIHZhciBtYXRjaDtcbiAgd2hpbGUgKChtYXRjaCA9IGxpbmVSZS5leGVjKHN0cmluZykpKSB7XG4gICAgdmFyIHByZWZpeCA9IG1hdGNoWzFdLCBsaW5lID0gbWF0Y2hbMl07XG4gICAgbW9yZUluZGVudGVkID0gKGxpbmVbMF0gPT09ICcgJyk7XG4gICAgcmVzdWx0ICs9IHByZWZpeFxuICAgICAgKyAoIXByZXZNb3JlSW5kZW50ZWQgJiYgIW1vcmVJbmRlbnRlZCAmJiBsaW5lICE9PSAnJ1xuICAgICAgICA/ICdcXG4nIDogJycpXG4gICAgICArIGZvbGRMaW5lKGxpbmUsIHdpZHRoKTtcbiAgICBwcmV2TW9yZUluZGVudGVkID0gbW9yZUluZGVudGVkO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gR3JlZWR5IGxpbmUgYnJlYWtpbmcuXG4vLyBQaWNrcyB0aGUgbG9uZ2VzdCBsaW5lIHVuZGVyIHRoZSBsaW1pdCBlYWNoIHRpbWUsXG4vLyBvdGhlcndpc2Ugc2V0dGxlcyBmb3IgdGhlIHNob3J0ZXN0IGxpbmUgb3ZlciB0aGUgbGltaXQuXG4vLyBOQi4gTW9yZS1pbmRlbnRlZCBsaW5lcyAqY2Fubm90KiBiZSBmb2xkZWQsIGFzIHRoYXQgd291bGQgYWRkIGFuIGV4dHJhIFxcbi5cbmZ1bmN0aW9uIGZvbGRMaW5lKGxpbmUsIHdpZHRoKSB7XG4gIGlmIChsaW5lID09PSAnJyB8fCBsaW5lWzBdID09PSAnICcpIHJldHVybiBsaW5lO1xuXG4gIC8vIFNpbmNlIGEgbW9yZS1pbmRlbnRlZCBsaW5lIGFkZHMgYSBcXG4sIGJyZWFrcyBjYW4ndCBiZSBmb2xsb3dlZCBieSBhIHNwYWNlLlxuICB2YXIgYnJlYWtSZSA9IC8gW14gXS9nOyAvLyBub3RlOiB0aGUgbWF0Y2ggaW5kZXggd2lsbCBhbHdheXMgYmUgPD0gbGVuZ3RoLTIuXG4gIHZhciBtYXRjaDtcbiAgLy8gc3RhcnQgaXMgYW4gaW5jbHVzaXZlIGluZGV4LiBlbmQsIGN1cnIsIGFuZCBuZXh0IGFyZSBleGNsdXNpdmUuXG4gIHZhciBzdGFydCA9IDAsIGVuZCwgY3VyciA9IDAsIG5leHQgPSAwO1xuICB2YXIgcmVzdWx0ID0gJyc7XG5cbiAgLy8gSW52YXJpYW50czogMCA8PSBzdGFydCA8PSBsZW5ndGgtMS5cbiAgLy8gICAwIDw9IGN1cnIgPD0gbmV4dCA8PSBtYXgoMCwgbGVuZ3RoLTIpLiBjdXJyIC0gc3RhcnQgPD0gd2lkdGguXG4gIC8vIEluc2lkZSB0aGUgbG9vcDpcbiAgLy8gICBBIG1hdGNoIGltcGxpZXMgbGVuZ3RoID49IDIsIHNvIGN1cnIgYW5kIG5leHQgYXJlIDw9IGxlbmd0aC0yLlxuICB3aGlsZSAoKG1hdGNoID0gYnJlYWtSZS5leGVjKGxpbmUpKSkge1xuICAgIG5leHQgPSBtYXRjaC5pbmRleDtcbiAgICAvLyBtYWludGFpbiBpbnZhcmlhbnQ6IGN1cnIgLSBzdGFydCA8PSB3aWR0aFxuICAgIGlmIChuZXh0IC0gc3RhcnQgPiB3aWR0aCkge1xuICAgICAgZW5kID0gKGN1cnIgPiBzdGFydCkgPyBjdXJyIDogbmV4dDsgLy8gZGVyaXZlIGVuZCA8PSBsZW5ndGgtMlxuICAgICAgcmVzdWx0ICs9ICdcXG4nICsgbGluZS5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgIC8vIHNraXAgdGhlIHNwYWNlIHRoYXQgd2FzIG91dHB1dCBhcyBcXG5cbiAgICAgIHN0YXJ0ID0gZW5kICsgMTsgICAgICAgICAgICAgICAgICAgIC8vIGRlcml2ZSBzdGFydCA8PSBsZW5ndGgtMVxuICAgIH1cbiAgICBjdXJyID0gbmV4dDtcbiAgfVxuXG4gIC8vIEJ5IHRoZSBpbnZhcmlhbnRzLCBzdGFydCA8PSBsZW5ndGgtMSwgc28gdGhlcmUgaXMgc29tZXRoaW5nIGxlZnQgb3Zlci5cbiAgLy8gSXQgaXMgZWl0aGVyIHRoZSB3aG9sZSBzdHJpbmcgb3IgYSBwYXJ0IHN0YXJ0aW5nIGZyb20gbm9uLXdoaXRlc3BhY2UuXG4gIHJlc3VsdCArPSAnXFxuJztcbiAgLy8gSW5zZXJ0IGEgYnJlYWsgaWYgdGhlIHJlbWFpbmRlciBpcyB0b28gbG9uZyBhbmQgdGhlcmUgaXMgYSBicmVhayBhdmFpbGFibGUuXG4gIGlmIChsaW5lLmxlbmd0aCAtIHN0YXJ0ID4gd2lkdGggJiYgY3VyciA+IHN0YXJ0KSB7XG4gICAgcmVzdWx0ICs9IGxpbmUuc2xpY2Uoc3RhcnQsIGN1cnIpICsgJ1xcbicgKyBsaW5lLnNsaWNlKGN1cnIgKyAxKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgKz0gbGluZS5zbGljZShzdGFydCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0LnNsaWNlKDEpOyAvLyBkcm9wIGV4dHJhIFxcbiBqb2luZXJcbn1cblxuLy8gRXNjYXBlcyBhIGRvdWJsZS1xdW90ZWQgc3RyaW5nLlxuZnVuY3Rpb24gZXNjYXBlU3RyaW5nKHN0cmluZykge1xuICB2YXIgcmVzdWx0ID0gJyc7XG4gIHZhciBjaGFyID0gMDtcbiAgdmFyIGVzY2FwZVNlcTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGNoYXIgPj0gMHgxMDAwMCA/IGkgKz0gMiA6IGkrKykge1xuICAgIGNoYXIgPSBjb2RlUG9pbnRBdChzdHJpbmcsIGkpO1xuICAgIGVzY2FwZVNlcSA9IEVTQ0FQRV9TRVFVRU5DRVNbY2hhcl07XG5cbiAgICBpZiAoIWVzY2FwZVNlcSAmJiBpc1ByaW50YWJsZShjaGFyKSkge1xuICAgICAgcmVzdWx0ICs9IHN0cmluZ1tpXTtcbiAgICAgIGlmIChjaGFyID49IDB4MTAwMDApIHJlc3VsdCArPSBzdHJpbmdbaSArIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgKz0gZXNjYXBlU2VxIHx8IGVuY29kZUhleChjaGFyKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiB3cml0ZUZsb3dTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCkge1xuICB2YXIgX3Jlc3VsdCA9ICcnLFxuICAgICAgX3RhZyAgICA9IHN0YXRlLnRhZyxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoLFxuICAgICAgdmFsdWU7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdmFsdWUgPSBvYmplY3RbaW5kZXhdO1xuXG4gICAgaWYgKHN0YXRlLnJlcGxhY2VyKSB7XG4gICAgICB2YWx1ZSA9IHN0YXRlLnJlcGxhY2VyLmNhbGwob2JqZWN0LCBTdHJpbmcoaW5kZXgpLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gV3JpdGUgb25seSB2YWxpZCBlbGVtZW50cywgcHV0IG51bGwgaW5zdGVhZCBvZiBpbnZhbGlkIGVsZW1lbnRzLlxuICAgIGlmICh3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCB2YWx1ZSwgZmFsc2UsIGZhbHNlKSB8fFxuICAgICAgICAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCwgbnVsbCwgZmFsc2UsIGZhbHNlKSkpIHtcblxuICAgICAgaWYgKF9yZXN1bHQgIT09ICcnKSBfcmVzdWx0ICs9ICcsJyArICghc3RhdGUuY29uZGVuc2VGbG93ID8gJyAnIDogJycpO1xuICAgICAgX3Jlc3VsdCArPSBzdGF0ZS5kdW1wO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRlLnRhZyA9IF90YWc7XG4gIHN0YXRlLmR1bXAgPSAnWycgKyBfcmVzdWx0ICsgJ10nO1xufVxuXG5mdW5jdGlvbiB3cml0ZUJsb2NrU2VxdWVuY2Uoc3RhdGUsIGxldmVsLCBvYmplY3QsIGNvbXBhY3QpIHtcbiAgdmFyIF9yZXN1bHQgPSAnJyxcbiAgICAgIF90YWcgICAgPSBzdGF0ZS50YWcsXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aCxcbiAgICAgIHZhbHVlO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHZhbHVlID0gb2JqZWN0W2luZGV4XTtcblxuICAgIGlmIChzdGF0ZS5yZXBsYWNlcikge1xuICAgICAgdmFsdWUgPSBzdGF0ZS5yZXBsYWNlci5jYWxsKG9iamVjdCwgU3RyaW5nKGluZGV4KSwgdmFsdWUpO1xuICAgIH1cblxuICAgIC8vIFdyaXRlIG9ubHkgdmFsaWQgZWxlbWVudHMsIHB1dCBudWxsIGluc3RlYWQgb2YgaW52YWxpZCBlbGVtZW50cy5cbiAgICBpZiAod3JpdGVOb2RlKHN0YXRlLCBsZXZlbCArIDEsIHZhbHVlLCB0cnVlLCB0cnVlLCBmYWxzZSwgdHJ1ZSkgfHxcbiAgICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgIHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCBudWxsLCB0cnVlLCB0cnVlLCBmYWxzZSwgdHJ1ZSkpKSB7XG5cbiAgICAgIGlmICghY29tcGFjdCB8fCBfcmVzdWx0ICE9PSAnJykge1xuICAgICAgICBfcmVzdWx0ICs9IGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlLmR1bXAgJiYgQ0hBUl9MSU5FX0ZFRUQgPT09IHN0YXRlLmR1bXAuY2hhckNvZGVBdCgwKSkge1xuICAgICAgICBfcmVzdWx0ICs9ICctJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9yZXN1bHQgKz0gJy0gJztcbiAgICAgIH1cblxuICAgICAgX3Jlc3VsdCArPSBzdGF0ZS5kdW1wO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRlLnRhZyA9IF90YWc7XG4gIHN0YXRlLmR1bXAgPSBfcmVzdWx0IHx8ICdbXSc7IC8vIEVtcHR5IHNlcXVlbmNlIGlmIG5vIHZhbGlkIHZhbHVlcy5cbn1cblxuZnVuY3Rpb24gd3JpdGVGbG93TWFwcGluZyhzdGF0ZSwgbGV2ZWwsIG9iamVjdCkge1xuICB2YXIgX3Jlc3VsdCAgICAgICA9ICcnLFxuICAgICAgX3RhZyAgICAgICAgICA9IHN0YXRlLnRhZyxcbiAgICAgIG9iamVjdEtleUxpc3QgPSBPYmplY3Qua2V5cyhvYmplY3QpLFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGgsXG4gICAgICBvYmplY3RLZXksXG4gICAgICBvYmplY3RWYWx1ZSxcbiAgICAgIHBhaXJCdWZmZXI7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdEtleUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuXG4gICAgcGFpckJ1ZmZlciA9ICcnO1xuICAgIGlmIChfcmVzdWx0ICE9PSAnJykgcGFpckJ1ZmZlciArPSAnLCAnO1xuXG4gICAgaWYgKHN0YXRlLmNvbmRlbnNlRmxvdykgcGFpckJ1ZmZlciArPSAnXCInO1xuXG4gICAgb2JqZWN0S2V5ID0gb2JqZWN0S2V5TGlzdFtpbmRleF07XG4gICAgb2JqZWN0VmFsdWUgPSBvYmplY3Rbb2JqZWN0S2V5XTtcblxuICAgIGlmIChzdGF0ZS5yZXBsYWNlcikge1xuICAgICAgb2JqZWN0VmFsdWUgPSBzdGF0ZS5yZXBsYWNlci5jYWxsKG9iamVjdCwgb2JqZWN0S2V5LCBvYmplY3RWYWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBvYmplY3RLZXksIGZhbHNlLCBmYWxzZSkpIHtcbiAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgcGFpciBiZWNhdXNlIG9mIGludmFsaWQga2V5O1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5kdW1wLmxlbmd0aCA+IDEwMjQpIHBhaXJCdWZmZXIgKz0gJz8gJztcblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcCArIChzdGF0ZS5jb25kZW5zZUZsb3cgPyAnXCInIDogJycpICsgJzonICsgKHN0YXRlLmNvbmRlbnNlRmxvdyA/ICcnIDogJyAnKTtcblxuICAgIGlmICghd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCwgb2JqZWN0VmFsdWUsIGZhbHNlLCBmYWxzZSkpIHtcbiAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgcGFpciBiZWNhdXNlIG9mIGludmFsaWQgdmFsdWUuXG4gICAgfVxuXG4gICAgcGFpckJ1ZmZlciArPSBzdGF0ZS5kdW1wO1xuXG4gICAgLy8gQm90aCBrZXkgYW5kIHZhbHVlIGFyZSB2YWxpZC5cbiAgICBfcmVzdWx0ICs9IHBhaXJCdWZmZXI7XG4gIH1cblxuICBzdGF0ZS50YWcgPSBfdGFnO1xuICBzdGF0ZS5kdW1wID0gJ3snICsgX3Jlc3VsdCArICd9Jztcbn1cblxuZnVuY3Rpb24gd3JpdGVCbG9ja01hcHBpbmcoc3RhdGUsIGxldmVsLCBvYmplY3QsIGNvbXBhY3QpIHtcbiAgdmFyIF9yZXN1bHQgICAgICAgPSAnJyxcbiAgICAgIF90YWcgICAgICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBvYmplY3RLZXlMaXN0ID0gT2JqZWN0LmtleXMob2JqZWN0KSxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoLFxuICAgICAgb2JqZWN0S2V5LFxuICAgICAgb2JqZWN0VmFsdWUsXG4gICAgICBleHBsaWNpdFBhaXIsXG4gICAgICBwYWlyQnVmZmVyO1xuXG4gIC8vIEFsbG93IHNvcnRpbmcga2V5cyBzbyB0aGF0IHRoZSBvdXRwdXQgZmlsZSBpcyBkZXRlcm1pbmlzdGljXG4gIGlmIChzdGF0ZS5zb3J0S2V5cyA9PT0gdHJ1ZSkge1xuICAgIC8vIERlZmF1bHQgc29ydGluZ1xuICAgIG9iamVjdEtleUxpc3Quc29ydCgpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzdGF0ZS5zb3J0S2V5cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIEN1c3RvbSBzb3J0IGZ1bmN0aW9uXG4gICAgb2JqZWN0S2V5TGlzdC5zb3J0KHN0YXRlLnNvcnRLZXlzKTtcbiAgfSBlbHNlIGlmIChzdGF0ZS5zb3J0S2V5cykge1xuICAgIC8vIFNvbWV0aGluZyBpcyB3cm9uZ1xuICAgIHRocm93IG5ldyBleGNlcHRpb24oJ3NvcnRLZXlzIG11c3QgYmUgYSBib29sZWFuIG9yIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3RLZXlMaXN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBwYWlyQnVmZmVyID0gJyc7XG5cbiAgICBpZiAoIWNvbXBhY3QgfHwgX3Jlc3VsdCAhPT0gJycpIHtcbiAgICAgIHBhaXJCdWZmZXIgKz0gZ2VuZXJhdGVOZXh0TGluZShzdGF0ZSwgbGV2ZWwpO1xuICAgIH1cblxuICAgIG9iamVjdEtleSA9IG9iamVjdEtleUxpc3RbaW5kZXhdO1xuICAgIG9iamVjdFZhbHVlID0gb2JqZWN0W29iamVjdEtleV07XG5cbiAgICBpZiAoc3RhdGUucmVwbGFjZXIpIHtcbiAgICAgIG9iamVjdFZhbHVlID0gc3RhdGUucmVwbGFjZXIuY2FsbChvYmplY3QsIG9iamVjdEtleSwgb2JqZWN0VmFsdWUpO1xuICAgIH1cblxuICAgIGlmICghd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCArIDEsIG9iamVjdEtleSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSkpIHtcbiAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgcGFpciBiZWNhdXNlIG9mIGludmFsaWQga2V5LlxuICAgIH1cblxuICAgIGV4cGxpY2l0UGFpciA9IChzdGF0ZS50YWcgIT09IG51bGwgJiYgc3RhdGUudGFnICE9PSAnPycpIHx8XG4gICAgICAgICAgICAgICAgICAgKHN0YXRlLmR1bXAgJiYgc3RhdGUuZHVtcC5sZW5ndGggPiAxMDI0KTtcblxuICAgIGlmIChleHBsaWNpdFBhaXIpIHtcbiAgICAgIGlmIChzdGF0ZS5kdW1wICYmIENIQVJfTElORV9GRUVEID09PSBzdGF0ZS5kdW1wLmNoYXJDb2RlQXQoMCkpIHtcbiAgICAgICAgcGFpckJ1ZmZlciArPSAnPyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYWlyQnVmZmVyICs9ICc/ICc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFpckJ1ZmZlciArPSBzdGF0ZS5kdW1wO1xuXG4gICAgaWYgKGV4cGxpY2l0UGFpcikge1xuICAgICAgcGFpckJ1ZmZlciArPSBnZW5lcmF0ZU5leHRMaW5lKHN0YXRlLCBsZXZlbCk7XG4gICAgfVxuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsICsgMSwgb2JqZWN0VmFsdWUsIHRydWUsIGV4cGxpY2l0UGFpcikpIHtcbiAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgcGFpciBiZWNhdXNlIG9mIGludmFsaWQgdmFsdWUuXG4gICAgfVxuXG4gICAgaWYgKHN0YXRlLmR1bXAgJiYgQ0hBUl9MSU5FX0ZFRUQgPT09IHN0YXRlLmR1bXAuY2hhckNvZGVBdCgwKSkge1xuICAgICAgcGFpckJ1ZmZlciArPSAnOic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhaXJCdWZmZXIgKz0gJzogJztcbiAgICB9XG5cbiAgICBwYWlyQnVmZmVyICs9IHN0YXRlLmR1bXA7XG5cbiAgICAvLyBCb3RoIGtleSBhbmQgdmFsdWUgYXJlIHZhbGlkLlxuICAgIF9yZXN1bHQgKz0gcGFpckJ1ZmZlcjtcbiAgfVxuXG4gIHN0YXRlLnRhZyA9IF90YWc7XG4gIHN0YXRlLmR1bXAgPSBfcmVzdWx0IHx8ICd7fSc7IC8vIEVtcHR5IG1hcHBpbmcgaWYgbm8gdmFsaWQgcGFpcnMuXG59XG5cbmZ1bmN0aW9uIGRldGVjdFR5cGUoc3RhdGUsIG9iamVjdCwgZXhwbGljaXQpIHtcbiAgdmFyIF9yZXN1bHQsIHR5cGVMaXN0LCBpbmRleCwgbGVuZ3RoLCB0eXBlLCBzdHlsZTtcblxuICB0eXBlTGlzdCA9IGV4cGxpY2l0ID8gc3RhdGUuZXhwbGljaXRUeXBlcyA6IHN0YXRlLmltcGxpY2l0VHlwZXM7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IHR5cGVMaXN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB0eXBlID0gdHlwZUxpc3RbaW5kZXhdO1xuXG4gICAgaWYgKCh0eXBlLmluc3RhbmNlT2YgIHx8IHR5cGUucHJlZGljYXRlKSAmJlxuICAgICAgICAoIXR5cGUuaW5zdGFuY2VPZiB8fCAoKHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnKSAmJiAob2JqZWN0IGluc3RhbmNlb2YgdHlwZS5pbnN0YW5jZU9mKSkpICYmXG4gICAgICAgICghdHlwZS5wcmVkaWNhdGUgIHx8IHR5cGUucHJlZGljYXRlKG9iamVjdCkpKSB7XG5cbiAgICAgIGlmIChleHBsaWNpdCkge1xuICAgICAgICBpZiAodHlwZS5tdWx0aSAmJiB0eXBlLnJlcHJlc2VudE5hbWUpIHtcbiAgICAgICAgICBzdGF0ZS50YWcgPSB0eXBlLnJlcHJlc2VudE5hbWUob2JqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0ZS50YWcgPSB0eXBlLnRhZztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUudGFnID0gJz8nO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZS5yZXByZXNlbnQpIHtcbiAgICAgICAgc3R5bGUgPSBzdGF0ZS5zdHlsZU1hcFt0eXBlLnRhZ10gfHwgdHlwZS5kZWZhdWx0U3R5bGU7XG5cbiAgICAgICAgaWYgKF90b1N0cmluZy5jYWxsKHR5cGUucmVwcmVzZW50KSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJykge1xuICAgICAgICAgIF9yZXN1bHQgPSB0eXBlLnJlcHJlc2VudChvYmplY3QsIHN0eWxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChfaGFzT3duUHJvcGVydHkuY2FsbCh0eXBlLnJlcHJlc2VudCwgc3R5bGUpKSB7XG4gICAgICAgICAgX3Jlc3VsdCA9IHR5cGUucmVwcmVzZW50W3N0eWxlXShvYmplY3QsIHN0eWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCchPCcgKyB0eXBlLnRhZyArICc+IHRhZyByZXNvbHZlciBhY2NlcHRzIG5vdCBcIicgKyBzdHlsZSArICdcIiBzdHlsZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUuZHVtcCA9IF9yZXN1bHQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gU2VyaWFsaXplcyBgb2JqZWN0YCBhbmQgd3JpdGVzIGl0IHRvIGdsb2JhbCBgcmVzdWx0YC5cbi8vIFJldHVybnMgdHJ1ZSBvbiBzdWNjZXNzLCBvciBmYWxzZSBvbiBpbnZhbGlkIG9iamVjdC5cbi8vXG5mdW5jdGlvbiB3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBvYmplY3QsIGJsb2NrLCBjb21wYWN0LCBpc2tleSwgaXNibG9ja3NlcSkge1xuICBzdGF0ZS50YWcgPSBudWxsO1xuICBzdGF0ZS5kdW1wID0gb2JqZWN0O1xuXG4gIGlmICghZGV0ZWN0VHlwZShzdGF0ZSwgb2JqZWN0LCBmYWxzZSkpIHtcbiAgICBkZXRlY3RUeXBlKHN0YXRlLCBvYmplY3QsIHRydWUpO1xuICB9XG5cbiAgdmFyIHR5cGUgPSBfdG9TdHJpbmcuY2FsbChzdGF0ZS5kdW1wKTtcbiAgdmFyIGluYmxvY2sgPSBibG9jaztcbiAgdmFyIHRhZ1N0cjtcblxuICBpZiAoYmxvY2spIHtcbiAgICBibG9jayA9IChzdGF0ZS5mbG93TGV2ZWwgPCAwIHx8IHN0YXRlLmZsb3dMZXZlbCA+IGxldmVsKTtcbiAgfVxuXG4gIHZhciBvYmplY3RPckFycmF5ID0gdHlwZSA9PT0gJ1tvYmplY3QgT2JqZWN0XScgfHwgdHlwZSA9PT0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICAgIGR1cGxpY2F0ZUluZGV4LFxuICAgICAgZHVwbGljYXRlO1xuXG4gIGlmIChvYmplY3RPckFycmF5KSB7XG4gICAgZHVwbGljYXRlSW5kZXggPSBzdGF0ZS5kdXBsaWNhdGVzLmluZGV4T2Yob2JqZWN0KTtcbiAgICBkdXBsaWNhdGUgPSBkdXBsaWNhdGVJbmRleCAhPT0gLTE7XG4gIH1cblxuICBpZiAoKHN0YXRlLnRhZyAhPT0gbnVsbCAmJiBzdGF0ZS50YWcgIT09ICc/JykgfHwgZHVwbGljYXRlIHx8IChzdGF0ZS5pbmRlbnQgIT09IDIgJiYgbGV2ZWwgPiAwKSkge1xuICAgIGNvbXBhY3QgPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChkdXBsaWNhdGUgJiYgc3RhdGUudXNlZER1cGxpY2F0ZXNbZHVwbGljYXRlSW5kZXhdKSB7XG4gICAgc3RhdGUuZHVtcCA9ICcqcmVmXycgKyBkdXBsaWNhdGVJbmRleDtcbiAgfSBlbHNlIHtcbiAgICBpZiAob2JqZWN0T3JBcnJheSAmJiBkdXBsaWNhdGUgJiYgIXN0YXRlLnVzZWREdXBsaWNhdGVzW2R1cGxpY2F0ZUluZGV4XSkge1xuICAgICAgc3RhdGUudXNlZER1cGxpY2F0ZXNbZHVwbGljYXRlSW5kZXhdID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICBpZiAoYmxvY2sgJiYgKE9iamVjdC5rZXlzKHN0YXRlLmR1bXApLmxlbmd0aCAhPT0gMCkpIHtcbiAgICAgICAgd3JpdGVCbG9ja01hcHBpbmcoc3RhdGUsIGxldmVsLCBzdGF0ZS5kdW1wLCBjb21wYWN0KTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0ZUZsb3dNYXBwaW5nKHN0YXRlLCBsZXZlbCwgc3RhdGUuZHVtcCk7XG4gICAgICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgICAgICBzdGF0ZS5kdW1wID0gJyZyZWZfJyArIGR1cGxpY2F0ZUluZGV4ICsgJyAnICsgc3RhdGUuZHVtcDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgaWYgKGJsb2NrICYmIChzdGF0ZS5kdW1wLmxlbmd0aCAhPT0gMCkpIHtcbiAgICAgICAgaWYgKHN0YXRlLm5vQXJyYXlJbmRlbnQgJiYgIWlzYmxvY2tzZXEgJiYgbGV2ZWwgPiAwKSB7XG4gICAgICAgICAgd3JpdGVCbG9ja1NlcXVlbmNlKHN0YXRlLCBsZXZlbCAtIDEsIHN0YXRlLmR1bXAsIGNvbXBhY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdyaXRlQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwsIHN0YXRlLmR1bXAsIGNvbXBhY3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgICAgICBzdGF0ZS5kdW1wID0gJyZyZWZfJyArIGR1cGxpY2F0ZUluZGV4ICsgc3RhdGUuZHVtcDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JpdGVGbG93U2VxdWVuY2Uoc3RhdGUsIGxldmVsLCBzdGF0ZS5kdW1wKTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyAnICcgKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBTdHJpbmddJykge1xuICAgICAgaWYgKHN0YXRlLnRhZyAhPT0gJz8nKSB7XG4gICAgICAgIHdyaXRlU2NhbGFyKHN0YXRlLCBzdGF0ZS5kdW1wLCBsZXZlbCwgaXNrZXksIGluYmxvY2spO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgVW5kZWZpbmVkXScpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0YXRlLnNraXBJbnZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCd1bmFjY2VwdGFibGUga2luZCBvZiBhbiBvYmplY3QgdG8gZHVtcCAnICsgdHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlLnRhZyAhPT0gbnVsbCAmJiBzdGF0ZS50YWcgIT09ICc/Jykge1xuICAgICAgLy8gTmVlZCB0byBlbmNvZGUgYWxsIGNoYXJhY3RlcnMgZXhjZXB0IHRob3NlIGFsbG93ZWQgYnkgdGhlIHNwZWM6XG4gICAgICAvL1xuICAgICAgLy8gWzM1XSBucy1kZWMtZGlnaXQgICAgOjo9ICBbI3gzMC0jeDM5XSAvKiAwLTkgKi9cbiAgICAgIC8vIFszNl0gbnMtaGV4LWRpZ2l0ICAgIDo6PSAgbnMtZGVjLWRpZ2l0XG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICB8IFsjeDQxLSN4NDZdIC8qIEEtRiAqLyB8IFsjeDYxLSN4NjZdIC8qIGEtZiAqL1xuICAgICAgLy8gWzM3XSBucy1hc2NpaS1sZXR0ZXIgOjo9ICBbI3g0MS0jeDVBXSAvKiBBLVogKi8gfCBbI3g2MS0jeDdBXSAvKiBhLXogKi9cbiAgICAgIC8vIFszOF0gbnMtd29yZC1jaGFyICAgIDo6PSAgbnMtZGVjLWRpZ2l0IHwgbnMtYXNjaWktbGV0dGVyIHwgXHUyMDFDLVx1MjAxRFxuICAgICAgLy8gWzM5XSBucy11cmktY2hhciAgICAgOjo9ICBcdTIwMUMlXHUyMDFEIG5zLWhleC1kaWdpdCBucy1oZXgtZGlnaXQgfCBucy13b3JkLWNoYXIgfCBcdTIwMUMjXHUyMDFEXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICB8IFx1MjAxQztcdTIwMUQgfCBcdTIwMUMvXHUyMDFEIHwgXHUyMDFDP1x1MjAxRCB8IFx1MjAxQzpcdTIwMUQgfCBcdTIwMUNAXHUyMDFEIHwgXHUyMDFDJlx1MjAxRCB8IFx1MjAxQz1cdTIwMUQgfCBcdTIwMUMrXHUyMDFEIHwgXHUyMDFDJFx1MjAxRCB8IFx1MjAxQyxcdTIwMURcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHwgXHUyMDFDX1x1MjAxRCB8IFx1MjAxQy5cdTIwMUQgfCBcdTIwMUMhXHUyMDFEIHwgXHUyMDFDflx1MjAxRCB8IFx1MjAxQypcdTIwMUQgfCBcdTIwMUMnXHUyMDFEIHwgXHUyMDFDKFx1MjAxRCB8IFx1MjAxQylcdTIwMUQgfCBcdTIwMUNbXHUyMDFEIHwgXHUyMDFDXVx1MjAxRFxuICAgICAgLy9cbiAgICAgIC8vIEFsc28gbmVlZCB0byBlbmNvZGUgJyEnIGJlY2F1c2UgaXQgaGFzIHNwZWNpYWwgbWVhbmluZyAoZW5kIG9mIHRhZyBwcmVmaXgpLlxuICAgICAgLy9cbiAgICAgIHRhZ1N0ciA9IGVuY29kZVVSSShcbiAgICAgICAgc3RhdGUudGFnWzBdID09PSAnIScgPyBzdGF0ZS50YWcuc2xpY2UoMSkgOiBzdGF0ZS50YWdcbiAgICAgICkucmVwbGFjZSgvIS9nLCAnJTIxJyk7XG5cbiAgICAgIGlmIChzdGF0ZS50YWdbMF0gPT09ICchJykge1xuICAgICAgICB0YWdTdHIgPSAnIScgKyB0YWdTdHI7XG4gICAgICB9IGVsc2UgaWYgKHRhZ1N0ci5zbGljZSgwLCAxOCkgPT09ICd0YWc6eWFtbC5vcmcsMjAwMjonKSB7XG4gICAgICAgIHRhZ1N0ciA9ICchIScgKyB0YWdTdHIuc2xpY2UoMTgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFnU3RyID0gJyE8JyArIHRhZ1N0ciArICc+JztcbiAgICAgIH1cblxuICAgICAgc3RhdGUuZHVtcCA9IHRhZ1N0ciArICcgJyArIHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldER1cGxpY2F0ZVJlZmVyZW5jZXMob2JqZWN0LCBzdGF0ZSkge1xuICB2YXIgb2JqZWN0cyA9IFtdLFxuICAgICAgZHVwbGljYXRlc0luZGV4ZXMgPSBbXSxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoO1xuXG4gIGluc3BlY3ROb2RlKG9iamVjdCwgb2JqZWN0cywgZHVwbGljYXRlc0luZGV4ZXMpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBkdXBsaWNhdGVzSW5kZXhlcy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgc3RhdGUuZHVwbGljYXRlcy5wdXNoKG9iamVjdHNbZHVwbGljYXRlc0luZGV4ZXNbaW5kZXhdXSk7XG4gIH1cbiAgc3RhdGUudXNlZER1cGxpY2F0ZXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gaW5zcGVjdE5vZGUob2JqZWN0LCBvYmplY3RzLCBkdXBsaWNhdGVzSW5kZXhlcykge1xuICB2YXIgb2JqZWN0S2V5TGlzdCxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoO1xuXG4gIGlmIChvYmplY3QgIT09IG51bGwgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpIHtcbiAgICBpbmRleCA9IG9iamVjdHMuaW5kZXhPZihvYmplY3QpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGlmIChkdXBsaWNhdGVzSW5kZXhlcy5pbmRleE9mKGluZGV4KSA9PT0gLTEpIHtcbiAgICAgICAgZHVwbGljYXRlc0luZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iamVjdHMucHVzaChvYmplY3QpO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG4gICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICAgIGluc3BlY3ROb2RlKG9iamVjdFtpbmRleF0sIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0S2V5TGlzdCA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdEtleUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICAgIGluc3BlY3ROb2RlKG9iamVjdFtvYmplY3RLZXlMaXN0W2luZGV4XV0sIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkdW1wJDEoaW5wdXQsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgdmFyIHN0YXRlID0gbmV3IFN0YXRlKG9wdGlvbnMpO1xuXG4gIGlmICghc3RhdGUubm9SZWZzKSBnZXREdXBsaWNhdGVSZWZlcmVuY2VzKGlucHV0LCBzdGF0ZSk7XG5cbiAgdmFyIHZhbHVlID0gaW5wdXQ7XG5cbiAgaWYgKHN0YXRlLnJlcGxhY2VyKSB7XG4gICAgdmFsdWUgPSBzdGF0ZS5yZXBsYWNlci5jYWxsKHsgJyc6IHZhbHVlIH0sICcnLCB2YWx1ZSk7XG4gIH1cblxuICBpZiAod3JpdGVOb2RlKHN0YXRlLCAwLCB2YWx1ZSwgdHJ1ZSwgdHJ1ZSkpIHJldHVybiBzdGF0ZS5kdW1wICsgJ1xcbic7XG5cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgZHVtcF8xID0gZHVtcCQxO1xuXG52YXIgZHVtcGVyID0ge1xuXHRkdW1wOiBkdW1wXzFcbn07XG5cbmZ1bmN0aW9uIHJlbmFtZWQoZnJvbSwgdG8pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Z1bmN0aW9uIHlhbWwuJyArIGZyb20gKyAnIGlzIHJlbW92ZWQgaW4ganMteWFtbCA0LiAnICtcbiAgICAgICdVc2UgeWFtbC4nICsgdG8gKyAnIGluc3RlYWQsIHdoaWNoIGlzIG5vdyBzYWZlIGJ5IGRlZmF1bHQuJyk7XG4gIH07XG59XG5cblxudmFyIFR5cGUgICAgICAgICAgICAgICAgPSB0eXBlO1xudmFyIFNjaGVtYSAgICAgICAgICAgICAgPSBzY2hlbWE7XG52YXIgRkFJTFNBRkVfU0NIRU1BICAgICA9IGZhaWxzYWZlO1xudmFyIEpTT05fU0NIRU1BICAgICAgICAgPSBqc29uO1xudmFyIENPUkVfU0NIRU1BICAgICAgICAgPSBjb3JlO1xudmFyIERFRkFVTFRfU0NIRU1BICAgICAgPSBfZGVmYXVsdDtcbnZhciBsb2FkICAgICAgICAgICAgICAgID0gbG9hZGVyLmxvYWQ7XG52YXIgbG9hZEFsbCAgICAgICAgICAgICA9IGxvYWRlci5sb2FkQWxsO1xudmFyIGR1bXAgICAgICAgICAgICAgICAgPSBkdW1wZXIuZHVtcDtcbnZhciBZQU1MRXhjZXB0aW9uICAgICAgID0gZXhjZXB0aW9uO1xuXG4vLyBSZS1leHBvcnQgYWxsIHR5cGVzIGluIGNhc2UgdXNlciB3YW50cyB0byBjcmVhdGUgY3VzdG9tIHNjaGVtYVxudmFyIHR5cGVzID0ge1xuICBiaW5hcnk6ICAgIGJpbmFyeSxcbiAgZmxvYXQ6ICAgICBmbG9hdCxcbiAgbWFwOiAgICAgICBtYXAsXG4gIG51bGw6ICAgICAgX251bGwsXG4gIHBhaXJzOiAgICAgcGFpcnMsXG4gIHNldDogICAgICAgc2V0LFxuICB0aW1lc3RhbXA6IHRpbWVzdGFtcCxcbiAgYm9vbDogICAgICBib29sLFxuICBpbnQ6ICAgICAgIGludCxcbiAgbWVyZ2U6ICAgICBtZXJnZSxcbiAgb21hcDogICAgICBvbWFwLFxuICBzZXE6ICAgICAgIHNlcSxcbiAgc3RyOiAgICAgICBzdHJcbn07XG5cbi8vIFJlbW92ZWQgZnVuY3Rpb25zIGZyb20gSlMtWUFNTCAzLjAueFxudmFyIHNhZmVMb2FkICAgICAgICAgICAgPSByZW5hbWVkKCdzYWZlTG9hZCcsICdsb2FkJyk7XG52YXIgc2FmZUxvYWRBbGwgICAgICAgICA9IHJlbmFtZWQoJ3NhZmVMb2FkQWxsJywgJ2xvYWRBbGwnKTtcbnZhciBzYWZlRHVtcCAgICAgICAgICAgID0gcmVuYW1lZCgnc2FmZUR1bXAnLCAnZHVtcCcpO1xuXG52YXIganNZYW1sID0ge1xuXHRUeXBlOiBUeXBlLFxuXHRTY2hlbWE6IFNjaGVtYSxcblx0RkFJTFNBRkVfU0NIRU1BOiBGQUlMU0FGRV9TQ0hFTUEsXG5cdEpTT05fU0NIRU1BOiBKU09OX1NDSEVNQSxcblx0Q09SRV9TQ0hFTUE6IENPUkVfU0NIRU1BLFxuXHRERUZBVUxUX1NDSEVNQTogREVGQVVMVF9TQ0hFTUEsXG5cdGxvYWQ6IGxvYWQsXG5cdGxvYWRBbGw6IGxvYWRBbGwsXG5cdGR1bXA6IGR1bXAsXG5cdFlBTUxFeGNlcHRpb246IFlBTUxFeGNlcHRpb24sXG5cdHR5cGVzOiB0eXBlcyxcblx0c2FmZUxvYWQ6IHNhZmVMb2FkLFxuXHRzYWZlTG9hZEFsbDogc2FmZUxvYWRBbGwsXG5cdHNhZmVEdW1wOiBzYWZlRHVtcFxufTtcblxuZXhwb3J0IGRlZmF1bHQganNZYW1sO1xuZXhwb3J0IHsgQ09SRV9TQ0hFTUEsIERFRkFVTFRfU0NIRU1BLCBGQUlMU0FGRV9TQ0hFTUEsIEpTT05fU0NIRU1BLCBTY2hlbWEsIFR5cGUsIFlBTUxFeGNlcHRpb24sIGR1bXAsIGxvYWQsIGxvYWRBbGwsIHNhZmVEdW1wLCBzYWZlTG9hZCwgc2FmZUxvYWRBbGwsIHR5cGVzIH07XG4iLCAiLy8gTm90ZTogRmlsZUNhY2hlIGNsYXNzXHJcblxyXG5pbXBvcnQgTG9nZ2luZyBmcm9tIFwic3JjL2NsYXNzZXMvTG9nZ2luZ1wiO1xyXG5pbXBvcnQgR2xvYmFsIGZyb20gXCIuLi9jbGFzc2VzL0dsb2JhbFwiO1xyXG5pbXBvcnQgeyBBcHAsIFRBYnN0cmFjdEZpbGUsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG4vKipcclxuICogRmlsZUNhY2hlIGNsYXNzXHJcbiAqIEBkZXNjcmlwdGlvbiBDYWNoZXMgdGhlIGZpbGVzIGluIHRoZSB2YXVsdCB3aXRoIGZpbGUgbmFtZSBhcyB0aGUga2V5XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlQ2FjaGUge1xyXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCA9IEdsb2JhbC5nZXRJbnN0YW5jZSgpLmFwcDtcclxuICAgIHByaXZhdGUgbG9nZ2VyOiBMb2dnaW5nID0gR2xvYmFsLmdldEluc3RhbmNlKCkubG9nZ2VyO1xyXG4gICAgcHJpdmF0ZSBmaWxlQ2FjaGVQcm9taXNlOiBQcm9taXNlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGZpbGVDYWNoZTogTWFwPHN0cmluZywgVEZpbGUgfCBudWxsPiB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBkdXBsaWNhdGVOYW1lczogTWFwPHN0cmluZywgQXJyYXk8VEZpbGU+PiB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBmaWxlQ2FjaGVSZWFkeSA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBldmVudHNSZWdpc3RlcmVkID0gZmFsc2U7XHJcblxyXG4gICAgc3RhdGljIGluc3RhbmNlOiBGaWxlQ2FjaGU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBGaWxlQ2FjaGUgaW5zdGFuY2UgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2UgY3JlYXRlcyBhIG5ldyBpbnN0YW5jZVxyXG4gICAgICogQHJldHVybnMgVGhlIEZpbGVDYWNoZSBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XHJcbiAgICAgICAgaWYgKCFGaWxlQ2FjaGUuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgRmlsZUNhY2hlLmluc3RhbmNlID0gbmV3IEZpbGVDYWNoZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRmlsZUNhY2hlLmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBGaWxlQ2FjaGUgaW5zdGFuY2VcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZmlsZUNhY2hlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRGaWxlQ2FjaGUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiRmlsZSBDYWNoZSBidWlsdFwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3JlYXRlRXZlbnRIYW5kbGVyID0gdGhpcy5jcmVhdGVFdmVudEhhbmRsZXIuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnJlbmFtZUV2ZW50SGFuZGxlciA9IHRoaXMucmVuYW1lRXZlbnRIYW5kbGVyLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kZWxldGVFdmVudEhhbmRsZXIgPSB0aGlzLmRlbGV0ZUV2ZW50SGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlY29uc3RydWN0cyB0aGUgRmlsZUNhY2hlIGluc3RhbmNlXHJcbiAgICAgKiB1bnJlZ2lzdGVycyBhbGwgZXZlbnRzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBkZWNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGlmICghRmlsZUNhY2hlLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlci5lcnJvcihcIkZpbGVDYWNoZSBpbnN0YW5jZSBub3QgbG9hZGVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IEZpbGVDYWNoZS5pbnN0YW5jZTtcclxuXHJcbiAgICAgICAgaWYgKGluc3RhbmNlLmV2ZW50c1JlZ2lzdGVyZWQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuYXBwLnZhdWx0Lm9mZigncmVuYW1lJywgaW5zdGFuY2UucmVuYW1lRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UuYXBwLnZhdWx0Lm9mZignZGVsZXRlJywgaW5zdGFuY2UuZGVsZXRlRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UuYXBwLnZhdWx0Lm9mZignY3JlYXRlJywgaW5zdGFuY2UuY3JlYXRlRXZlbnRIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50c1JlZ2lzdGVyZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlci5kZWJ1ZyhcIkZpbGUgY2FjaGUgZXZlbnRzIHVucmVnaXN0ZXJlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsLmdldEluc3RhbmNlKCkubG9nZ2VyLmRlYnVnKFwiRmlsZSBjYWNoZSBldmVudHMgbm90IHJlZ2lzdGVyZWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0IGZvciB0aGUgZmlsZSBjYWNoZSB0byBiZSByZWFkeVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBmaWxlIGNhY2hlIGlzIHJlYWR5XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBmaWxlIGNhY2hlIGlzIHJlYWR5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgd2FpdEZvckNhY2hlUmVhZHkoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgd2hpbGUgKCF0aGlzLmZpbGVDYWNoZVJlYWR5KSB7XHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGRzIHRoZSBmaWxlIGNhY2hlXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZmlsZSBjYWNoZSBpcyBidWlsdFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBidWlsZEZpbGVDYWNoZSgpIHtcclxuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuICAgICAgICB0aGlzLmZpbGVDYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBURmlsZSB8IG51bGw+KCk7XHJcbiAgICAgICAgdGhpcy5kdXBsaWNhdGVOYW1lcyA9IG5ldyBNYXA8c3RyaW5nLCBBcnJheTxURmlsZT4+KCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhbGxGaWxlcykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEVudHJ5KGZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5maWxlQ2FjaGVSZWFkeSA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBGaWxlIGNhY2hlIGZvciAke2FsbEZpbGVzLmxlbmd0aH0gZmlsZXMgYnVpbHQgaW4gJHtlbmRUaW1lIC0gc3RhcnRUaW1lfW1zYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBmaWxlIGNhY2hlIHdpdGggdGhlIG5ldyBmaWxlXHJcbiAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB0byBhZGQgdG8gdGhlIGNhY2hlXHJcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBmaWxlIHdhcyBhZGRlZCB0byB0aGUgY2FjaGUsIGZhbHNlIG90aGVyd2lzZVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhZGRFbnRyeShmaWxlOiBURmlsZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5maWxlQ2FjaGUpIHsgdGhpcy5sb2dnZXIuZXJyb3IoXCJGaWxlIGNhY2hlIG5vdCBhdmFpbGFibGVcIik7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGxldCBzdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5maWxlQ2FjaGUuZ2V0KGZpbGUubmFtZSk7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsZUNhY2hlLnNldChmaWxlLm5hbWUsIGZpbGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdGaWxlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHN0YXRlICYmPSB0aGlzLmFkZER1cGxpY2F0ZUVudHJ5KFtmaWxlXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3RhdGUgJiY9IHRoaXMuYWRkRHVwbGljYXRlRW50cnkoW2V4aXN0aW5nRmlsZSwgZmlsZV0pO1xyXG4gICAgICAgICAgICB0aGlzLmZpbGVDYWNoZS5zZXQoZmlsZS5uYW1lLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGR1cGxpY2F0ZSBjYWNoZSB3aXRoIHRoZSBuZXcgZmlsZVxyXG4gICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGVzIHRvIGFkZCB0byB0aGUgY2FjaGVcclxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGZpbGUgd2FzIGFkZGVkIHRvIHRoZSBjYWNoZSwgZmFsc2Ugb3RoZXJ3aXNlXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFkZER1cGxpY2F0ZUVudHJ5KGZpbGU6IEFycmF5PFRGaWxlPikge1xyXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZS5maXJzdCgpPy5uYW1lO1xyXG4gICAgICAgIGlmICghZmlsZU5hbWUpIHsgdGhpcy5sb2dnZXIuZXJyb3IoXCJGaWxlIG5hbWUgbm90IGF2YWlsYWJsZVwiKTsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmR1cGxpY2F0ZU5hbWVzKSB7IHRoaXMubG9nZ2VyLmVycm9yKFwiRHVwbGljYXRlIGNhY2hlIG5vdCBhdmFpbGFibGVcIik7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZUVudHJ5ID0gdGhpcy5kdXBsaWNhdGVOYW1lcy5nZXQoZmlsZU5hbWUpO1xyXG4gICAgICAgIGlmIChkdXBsaWNhdGVFbnRyeSkge1xyXG4gICAgICAgICAgICBmaWxlLmZvckVhY2goZiA9PiBkdXBsaWNhdGVFbnRyeS5wdXNoKGYpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmR1cGxpY2F0ZU5hbWVzLnNldChmaWxlTmFtZSwgZmlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgZmlsZSBmcm9tIHRoZSBkdXBsaWNhdGUgY2FjaGVcclxuICAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHRvIHJlbW92ZSBmcm9tIHRoZSBjYWNoZVxyXG4gICAgICogQHBhcmFtIG9sZFBhdGggVGhlIG9sZCBwYXRoIG9mIHRoZSBmaWxlXHJcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBmaWxlIHdhcyByZW1vdmVkIGZyb20gdGhlIGNhY2hlLCBmYWxzZSBvdGhlcndpc2VcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVtb3ZlRHVwbGljYXRlRW50cnkoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZyB8IG51bGwgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmR1cGxpY2F0ZU5hbWVzKSB7IHRoaXMubG9nZ2VyLmVycm9yKFwiRHVwbGljYXRlIGNhY2hlIG5vdCBhdmFpbGFibGVcIik7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZUVudHJ5ID0gdGhpcy5kdXBsaWNhdGVOYW1lcy5nZXQoZmlsZS5uYW1lKTtcclxuICAgICAgICBpZiAoIWR1cGxpY2F0ZUVudHJ5KSB7IHRoaXMubG9nZ2VyLmVycm9yKFwiRmlsZSAke2ZpbGUubmFtZX0gbm90IGZvdW5kIGluIGR1cGxpY2F0ZSBjYWNoZVwiKTsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgY29uc3QgcGF0aCA9IG9sZFBhdGggPz8gZmlsZS5wYXRoO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gZHVwbGljYXRlRW50cnkuZmluZEluZGV4KGYgPT4gZi5wYXRoID09PSBwYXRoKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICBkdXBsaWNhdGVFbnRyeS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBGaWxlICR7ZmlsZS5uYW1lfSBub3QgZm91bmQgaW4gZHVwbGljYXRlIGNhY2hlYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBmaWxlIGZyb20gdGhlIGZpbGUgY2FjaGVcclxuICAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHRvIHJlbW92ZSBmcm9tIHRoZSBjYWNoZVxyXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZmlsZSB3YXMgcmVtb3ZlZCBmcm9tIHRoZSBjYWNoZSwgZmFsc2Ugb3RoZXJ3aXNlXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbW92ZUVudHJ5KGZpbGU6IFRGaWxlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpbGVDYWNoZSkgeyB0aGlzLmxvZ2dlci5lcnJvcihcIkZpbGUgY2FjaGUgbm90IGF2YWlsYWJsZVwiKTsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgbGV0IHN0YXRlID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0ZpbGUgPSB0aGlzLmZpbGVDYWNoZS5nZXQoZmlsZS5uYW1lKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdGaWxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsZUNhY2hlLmRlbGV0ZShmaWxlLm5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdGaWxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgRmlsZSAke2ZpbGUubmFtZX0gbm90IGZvdW5kIGluIGNhY2hlYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nRmlsZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzdGF0ZSAmJj0gdGhpcy5yZW1vdmVEdXBsaWNhdGVFbnRyeShmaWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuYW1lcyB0aGUgZmlsZSBpbiB0aGUgZmlsZSBjYWNoZVxyXG4gICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgdG8gcmVuYW1lXHJcbiAgICAgKiBAcGFyYW0gb2xkUGF0aCBUaGUgb2xkIHBhdGggb2YgdGhlIGZpbGVcclxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGZpbGUgd2FzIHJlbmFtZWQgaW4gdGhlIGNhY2hlLCBmYWxzZSBvdGhlcndpc2VcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuYW1lRW50cnkoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZykge1xyXG4gICAgICAgIGlmICghdGhpcy5maWxlQ2FjaGUpIHsgdGhpcy5sb2dnZXIuZXJyb3IoXCJGaWxlIGNhY2hlIG5vdCBhdmFpbGFibGVcIik7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGNvbnN0IG9sZEZpbGVOYW1lID0gdGhpcy5nZXRGaWxlTmFtZUZyb21QYXRoKG9sZFBhdGgpO1xyXG4gICAgICAgIGlmICghb2xkRmlsZU5hbWUpIHsgdGhpcy5sb2dnZXIuZXJyb3IoXCJPbGQgZmlsZSBuYW1lIG5vdCBhdmFpbGFibGVcIik7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuZmlsZUNhY2hlLmdldChvbGRGaWxlTmFtZSk7XHJcbiAgICAgICAgbGV0IHN0YXRlID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdGaWxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsZUNhY2hlLmRlbGV0ZShvbGRGaWxlTmFtZSk7XHJcbiAgICAgICAgICAgIHN0YXRlICYmPSB0aGlzLmFkZEVudHJ5KGZpbGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdGaWxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgRmlsZSAke29sZEZpbGVOYW1lfSBub3QgZm91bmQgaW4gY2FjaGVgKTtcclxuICAgICAgICAgICAgc3RhdGUgJiY9IHRoaXMuYWRkRW50cnkoZmlsZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChleGlzdGluZ0ZpbGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgc3RhdGUgJiY9IHRoaXMucmVtb3ZlRHVwbGljYXRlRW50cnkoZmlsZSwgb2xkUGF0aCk7XHJcbiAgICAgICAgICAgIHN0YXRlICYmPSB0aGlzLmFkZER1cGxpY2F0ZUVudHJ5KFtmaWxlXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBjcmVhdGUgZXZlbnRcclxuICAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHRvIGNyZWF0ZSBpbiB0aGUgZmlsZSBjYWNoZVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVFdmVudEhhbmRsZXIoZmlsZTogVEFic3RyYWN0RmlsZSkge1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICBzdGF0ZSAmJj0gdGhpcy5hZGRFbnRyeShmaWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBGaWxlICR7ZmlsZS5uYW1lfSBjcmVhdGUgaW4gZmlsZSBjYWNoZSBldmVudCBoYW5kbGVyIHN1Y2Nlc3NgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRXJyb3IgY3JlYXRpbmcgZmlsZSAke2ZpbGUubmFtZX0gaW4gZmlsZSBjYWNoZSBldmVudCBoYW5kbGVyYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgaGFuZGxlciBmb3IgdGhlIHJlbmFtZSBldmVudFxyXG4gICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgdG8gcmVuYW1lIGluIHRoZSBmaWxlIGNhY2hlXHJcbiAgICAgKiBAcGFyYW0gb2xkUGF0aCBUaGUgb2xkIHBhdGggb2YgdGhlIGZpbGVcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuYW1lRXZlbnRIYW5kbGVyKGZpbGU6IFRBYnN0cmFjdEZpbGUsIG9sZFBhdGg6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICBjb25zdCBvbGRGaWxlTmFtZSA9IG9sZFBhdGguc3BsaXQoJy8nKS5sYXN0KCk7XHJcbiAgICAgICAgICAgIGlmICghb2xkRmlsZU5hbWUpIHsgdGhpcy5sb2dnZXIuZXJyb3IoXCJDYW5ub3QgZXh0cmFjdCBvbGQgZmlsZSBuYW1lIGZyb20gdGhlIHBhdGhcIik7IHJldHVybjsgfVxyXG4gICAgICAgICAgICBzdGF0ZSAmJj0gdGhpcy5yZW5hbWVFbnRyeShmaWxlLCBvbGRGaWxlTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgRmlsZSAke2ZpbGUubmFtZX0gcmVuYW1lZCBpbiBmaWxlIGNhY2hlIGV2ZW50IGhhbmRsZXIgc3VjY2Vzc2ApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBFcnJvciByZW5hbWluZyBmaWxlICR7ZmlsZS5uYW1lfSBpbiBmaWxlIGNhY2hlIGV2ZW50IGhhbmRsZXJgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciB0aGUgZGVsZXRlIGV2ZW50XHJcbiAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB0byBkZWxldGUgaW4gdGhlIGZpbGUgY2FjaGVcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZGVsZXRlRXZlbnRIYW5kbGVyKGZpbGU6IFRBYnN0cmFjdEZpbGUpIHtcclxuICAgICAgICBsZXQgc3RhdGUgPSB0cnVlO1xyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgc3RhdGUgJiY9IHRoaXMucmVtb3ZlRW50cnkoZmlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgRmlsZSAke2ZpbGUubmFtZX0gZGVsZXRlIGluIGZpbGUgY2FjaGUgZXZlbnQgaGFuZGxlciBzdWNjZXNzYCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIGRlbGV0aW5nIGZpbGUgJHtmaWxlLm5hbWV9IGluIGZpbGUgY2FjaGUgZXZlbnQgaGFuZGxlcmApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyB0aGUgZXZlbnRzIGZvciB0aGUgZmlsZSBjYWNoZVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWdpc3RlckV2ZW50cygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzUmVnaXN0ZXJlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgdGhpcy5yZW5hbWVFdmVudEhhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIHRoaXMuZGVsZXRlRXZlbnRIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLCB0aGlzLmNyZWF0ZUV2ZW50SGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50c1JlZ2lzdGVyZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJGaWxlIGNhY2hlIGV2ZW50cyByZWdpc3RlcmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZpbGUgbmFtZSBmcm9tIHRoZSBmaWxlIHBhdGhcclxuICAgICAqIEBwYXJhbSBmaWxlUGF0aCBUaGUgZmlsZSBwYXRoIHRvIGV4dHJhY3QgdGhlIGZpbGUgbmFtZSBmcm9tXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgZmlsZSBuYW1lXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldEZpbGVOYW1lRnJvbVBhdGgoZmlsZVBhdGg6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG9sZEZpbGVOYW1lID0gZmlsZVBhdGguc3BsaXQoJy8nKS5sYXN0KCk7XHJcbiAgICAgICAgaWYgKCFvbGRGaWxlTmFtZSkgeyB0aGlzLmxvZ2dlci5lcnJvcihcIkNhbm5vdCBleHRyYWN0IG9sZCBmaWxlIG5hbWUgZnJvbSB0aGUgcGF0aFwiKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEZpbGVOYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZmlsZSBmcm9tIHRoZSBmaWxlIGNhY2hlXHJcbiAgICAgKiBAcGFyYW0gZmlsZU5hbWUgVGhlIG5hbWUgb2YgdGhlIGZpbGUgdG8gZmluZFxyXG4gICAgICogQHJldHVybnMgVGhlIGZpbGUvcyBpZiBmb3VuZCwgdW5kZWZpbmVkIG90aGVyd2lzZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZmluZEZpbGVCeU5hbWUoZmlsZU5hbWU6IHN0cmluZyk6IFRGaWxlIHwgQXJyYXk8VEZpbGU+IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBjb25zdCBmb3VuZEZpbGUgPSB0aGlzLmZpbGVDYWNoZT8uZ2V0KGZpbGVOYW1lKTtcclxuICAgICAgICBpZiAoZm91bmRGaWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmb3VuZEZpbGU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmb3VuZEZpbGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlRW50cnkgPSB0aGlzLmR1cGxpY2F0ZU5hbWVzPy5nZXQoZmlsZU5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoIWR1cGxpY2F0ZUVudHJ5KSB7IHRoaXMubG9nZ2VyLmVycm9yKGBGaWxlICR7ZmlsZU5hbWV9IG5vdCBmb3VuZCBpbiBkdXBsaWNhdGUgY2FjaGVgKTsgcmV0dXJuIHVuZGVmaW5lZDsgfVxyXG4gICAgICAgICAgICByZXR1cm4gZHVwbGljYXRlRW50cnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmaWxlIGZyb20gdGhlIGZpbGUgY2FjaGVcclxuICAgICAqIEBwYXJhbSBmaWxlUGF0aCBUaGUgcGF0aCBvZiB0aGUgZmlsZSB0byBmaW5kXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgZmlsZS9zIGlmIGZvdW5kLCB1bmRlZmluZWQgb3RoZXJ3aXNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5kRmlsZUJ5UGF0aChmaWxlUGF0aDogc3RyaW5nKTogVEZpbGUgfCBBcnJheTxURmlsZT4gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZXRGaWxlTmFtZUZyb21QYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICBpZiAoIWZpbGVOYW1lKSB7IHRoaXMubG9nZ2VyLmVycm9yKFwiRmlsZSBuYW1lIG5vdCBhdmFpbGFibGVcIik7IHJldHVybiB1bmRlZmluZWQ7IH1cclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kRmlsZUJ5TmFtZShmaWxlTmFtZSk7XHJcbiAgICB9XHJcblxyXG59IiwgIi8vIE5vdGU6IE1ldGFkYXRhQ2FjaGUgY2xhc3NcclxuXHJcbmltcG9ydCBMb2dnaW5nIGZyb20gXCJzcmMvY2xhc3Nlcy9Mb2dnaW5nXCI7XHJcbmltcG9ydCBHbG9iYWwgZnJvbSBcIi4uL2NsYXNzZXMvR2xvYmFsXCI7XHJcbmltcG9ydCB7IEFwcCwgQ2FjaGVkTWV0YWRhdGEsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG4vKipcclxuICogRmlsZU1ldGFkYXRhIGludGVyZmFjZVxyXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBpbnRlcmZhY2UgaXMgdXNlZCB0byBzdG9yZSB0aGUgZmlsZSBhbmQgdGhlIGNhY2hlZCBtZXRhZGF0YSBpbiB0aGUgbWV0YWRhdGEgY2FjaGUuXHJcbiAqIEBwcm9wZXJ0eSB7VEZpbGV9IGZpbGUgVGhlIGZpbGUgb2JqZWN0XHJcbiAqIEBwcm9wZXJ0eSB7Q2FjaGVkTWV0YWRhdGF9IG1ldGFkYXRhIFRoZSBjYWNoZWQgbWV0YWRhdGFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBGaWxlTWV0YWRhdGEgeyBmaWxlOiBURmlsZTsgbWV0YWRhdGE6IENhY2hlZE1ldGFkYXRhIH1cclxuXHJcbi8qKlxyXG4gKiBTaW5nbGV0b24gY2xhc3MgZm9yIGNhY2hpbmcgbWV0YWRhdGFcclxuICogQGRlc2NyaXB0aW9uIFRoaXMgY2xhc3MgaXMgdXNlZCB0byBjYWNoZSBtZXRhZGF0YSBmb3IgYWxsIGZpbGVzIGluIHRoZSB2YXVsdC4gSXQgaXMgdXNlZCB0byBzcGVlZCB1cCBwcm9jZXNzaW5nIG9mIGRhdGF2aWV3IHF1ZXJpZXMuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXRhZGF0YUNhY2hlIHtcclxuICAgIHByaXZhdGUgYXBwOiBBcHAgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5hcHA7XHJcbiAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2luZyA9IEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlcjtcclxuICAgIHByaXZhdGUgbWV0YWRhdGFDYWNoZVByb21pc2U6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgbWV0YWRhdGFDYWNoZTogTWFwPHN0cmluZywgRmlsZU1ldGFkYXRhPiB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBtZXRhZGF0YUNhY2hlUmVhZHkgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgZXZlbnRzUmVnaXN0ZXJlZCA9IGZhbHNlO1xyXG5cclxuICAgIHN0YXRpYyBpbnN0YW5jZTogTWV0YWRhdGFDYWNoZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgbWV0YWRhdGEgY2FjaGVcclxuICAgICAqIEByZXR1cm5zIHtGaWxlTWV0YWRhdGFbXX0gQXJyYXkgb2YgRmlsZU1ldGFkYXRhIG9iamVjdHNcclxuICAgICAqIEBkZXNjcmlwdGlvbiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBtZXRhZGF0YSBjYWNoZSBhcyBhbiBhcnJheSBvZiBGaWxlTWV0YWRhdGEgb2JqZWN0cy4gVGhlIEZpbGVNZXRhZGF0YSBvYmplY3QgY29udGFpbnMgdGhlIGZpbGUgYW5kIHRoZSBjYWNoZWQgbWV0YWRhdGEuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgQ2FjaGUoKTogRmlsZU1ldGFkYXRhW10ge1xyXG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhQ2FjaGVSZWFkeSAmJiB0aGlzLm1ldGFkYXRhQ2FjaGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5tZXRhZGF0YUNhY2hlLnZhbHVlcygpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIk1ldGFkYXRhIGNhY2hlIG5vdCBpbml0aWFsaXplZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoZSBNZXRhZGF0YUNhY2hlIGNsYXNzXHJcbiAgICAgKiBAcmV0dXJucyB7TWV0YWRhdGFDYWNoZX0gVGhlIE1ldGFkYXRhQ2FjaGUgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xyXG4gICAgICAgIGlmICghTWV0YWRhdGFDYWNoZS5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBNZXRhZGF0YUNhY2hlLmluc3RhbmNlID0gbmV3IE1ldGFkYXRhQ2FjaGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE1ldGFkYXRhQ2FjaGUuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgdGhlIE1ldGFkYXRhQ2FjaGUgY2xhc3NcclxuICAgICAqIEBkZXNjcmlwdGlvbiBUaGlzIGNvbnN0cnVjdG9yIGlzIHByaXZhdGUgYmVjYXVzZSB0aGUgTWV0YWRhdGFDYWNoZSBjbGFzcyBpcyBhIHNpbmdsZXRvbi4gVXNlIHRoZSBnZXRJbnN0YW5jZSgpIG1ldGhvZCB0byBnZXQgdGhlIHNpbmdsZXRvbiBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VkRXZlbnRIYW5kbGVyID0gdGhpcy5jaGFuZ2VkRXZlbnRIYW5kbGVyLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZW5hbWVFdmVudEhhbmRsZXIgPSB0aGlzLnJlbmFtZUV2ZW50SGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlRXZlbnRIYW5kbGVyID0gdGhpcy5kZWxldGVFdmVudEhhbmRsZXIuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm1ldGFkYXRhQ2FjaGUpIHtcclxuICAgICAgICAgICAgdGhpcy5idWlsZE1ldGFkYXRhQ2FjaGUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiTWV0YWRhdGEgY2FjaGUgYnVpbHRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlY29uc3RydWN0b3IgZm9yIHRoZSBNZXRhZGF0YUNhY2hlIGNsYXNzXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhpcyBtZXRob2QgaXMgdXNlZCB0byB1bnJlZ2lzdGVyIHRoZSBldmVudCBoYW5kbGVycyBmb3IgdGhlIG1ldGFkYXRhIGNhY2hlLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZGVjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBpZiAoIU1ldGFkYXRhQ2FjaGUuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgR2xvYmFsLmdldEluc3RhbmNlKCkubG9nZ2VyLmVycm9yKFwiTWV0YWRhdGEgY2FjaGUgaW5zdGFuY2Ugbm90IGxvYWRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBNZXRhZGF0YUNhY2hlLmluc3RhbmNlO1xyXG5cclxuICAgICAgICBpZiAoaW5zdGFuY2UuZXZlbnRzUmVnaXN0ZXJlZCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5hcHAudmF1bHQub2ZmKCdyZW5hbWUnLCBpbnN0YW5jZS5yZW5hbWVFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5hcHAubWV0YWRhdGFDYWNoZS5vZmYoJ2NoYW5nZWQnLCBpbnN0YW5jZS5jaGFuZ2VkRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UuYXBwLm1ldGFkYXRhQ2FjaGUub2ZmKCdkZWxldGVkJywgaW5zdGFuY2UuZGVsZXRlRXZlbnRIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50c1JlZ2lzdGVyZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlci5kZWJ1ZyhcIk1ldGFkYXRhIGNhY2hlIGV2ZW50cyB1bnJlZ2lzdGVyZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlci5kZWJ1ZyhcIk1ldGFkYXRhIGNhY2hlIGV2ZW50cyBub3QgcmVnaXN0ZXJlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRoZSBtZXRhZGF0YSBjYWNoZSBpcyByZWFkeVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1ldGFkYXRhIGNhY2hlIGlzIHJlYWR5LCBmYWxzZSBvdGhlcndpc2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzQ2FjaGVSZWFkeSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YUNhY2hlUmVhZHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0IGZvciB0aGUgbWV0YWRhdGEgY2FjaGUgdG8gYmUgcmVhZHlcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbWV0YWRhdGEgY2FjaGUgaXMgcmVhZHlcclxuICAgICAqIEBkZXNjcmlwdGlvbiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG1ldGFkYXRhIGNhY2hlIGlzIHJlYWR5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgd2FpdEZvckNhY2hlUmVhZHkoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgd2hpbGUgKCF0aGlzLm1ldGFkYXRhQ2FjaGVSZWFkeSkge1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIHRoZSBtZXRhZGF0YSBjYWNoZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBtZXRhZGF0YSBjYWNoZSBpcyBidWlsdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGJ1aWxkTWV0YWRhdGFDYWNoZSgpIHtcclxuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgICAgICB0aGlzLm1ldGFkYXRhQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgRmlsZU1ldGFkYXRhPigpO1xyXG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkRW50cnlQcm9taXNlcyA9IGFsbEZpbGVzLm1hcChmaWxlID0+IHRoaXMuYWRkRW50cnkoZmlsZSkpO1xyXG5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhZGRFbnRyeVByb21pc2VzKTtcclxuXHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YUNhY2hlUmVhZHkgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgTWV0YWRhdGEgY2FjaGUgZm9yICR7YWxsRmlsZXMubGVuZ3RofSBmaWxlcyBidWlsdCBpbiAke2VuZFRpbWUgLSBzdGFydFRpbWV9bXNgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIGZpbGUgdG8gdGhlIG1ldGFkYXRhIGNhY2hlXHJcbiAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB0byBhZGQgdG8gdGhlIG1ldGFkYXRhIGNhY2hlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkRW50cnkoZmlsZTogVEZpbGUpIHtcclxuICAgICAgICBpZiAodGhpcy5tZXRhZGF0YUNhY2hlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXRhZGF0YUNhY2hlLnNldChmaWxlLnBhdGgsIHsgZmlsZSwgbWV0YWRhdGEgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBObyBtZXRhZGF0YSBmb3VuZCBmb3IgZmlsZSAke2ZpbGUucGF0aH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiTWV0YWRhdGEgY2FjaGUgbm90IGluaXRpYWxpemVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhIGZpbGUgZnJvbSB0aGUgbWV0YWRhdGEgY2FjaGVcclxuICAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHRvIGRlbGV0ZSBmcm9tIHRoZSBtZXRhZGF0YSBjYWNoZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGRlbGV0ZUVudHJ5KGZpbGU6IFRGaWxlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWV0YWRhdGFDYWNoZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1ldGFkYXRhQ2FjaGUuZGVsZXRlKGZpbGUucGF0aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJNZXRhZGF0YSBjYWNoZSBub3QgaW5pdGlhbGl6ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBNZXRhZGF0YSBjYWNoZSBlbnRyeSBmb3IgZmlsZSAke2ZpbGUucGF0aH0gZGVsZXRlZGApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGEgZmlsZSBpbiB0aGUgbWV0YWRhdGEgY2FjaGVcclxuICAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHRvIHVwZGF0ZSBpbiB0aGUgbWV0YWRhdGEgY2FjaGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVFbnRyeShmaWxlOiBURmlsZSkge1xyXG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhQ2FjaGUpIHtcclxuICAgICAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLm1ldGFkYXRhQ2FjaGUuZ2V0KGZpbGUucGF0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcbiAgICAgICAgICAgIGlmIChlbnRyeSAmJiBtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZW50cnkubWV0YWRhdGEgPSBtZXRhZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghZW50cnkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYE5vIG1ldGFkYXRhIGNhY2hlIGVudHJ5IGZvdW5kIGZvciBmaWxlICR7ZmlsZS5wYXRofWApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgTm8gbWV0YWRhdGEgZm91bmQgZm9yIGZpbGUgJHtmaWxlLnBhdGh9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIk1ldGFkYXRhIGNhY2hlIG5vdCBpbml0aWFsaXplZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYE1ldGFkYXRhIGNhY2hlIGVudHJ5IGZvciBmaWxlICR7ZmlsZS5wYXRofSB1cGRhdGVkYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5hbWUgYSBmaWxlIGluIHRoZSBtZXRhZGF0YSBjYWNoZVxyXG4gICAgICogQHBhcmFtIG5ld0ZpbGUgVGhlIG5ldyBmaWxlIG9iamVjdFxyXG4gICAgICogQHBhcmFtIG9sZFBhdGggVGhlIG9sZCBwYXRoIG9mIHRoZSBmaWxlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgcmVuYW1lRW50cnkobmV3RmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhQ2FjaGUpIHtcclxuICAgICAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLm1ldGFkYXRhQ2FjaGUuZ2V0KG9sZFBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoZW50cnkpIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LmZpbGUgPSBuZXdGaWxlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgTm8gbWV0YWRhdGEgY2FjaGUgZW50cnkgZm91bmQgZm9yIGZpbGUgJHtvbGRQYXRofWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJNZXRhZGF0YSBjYWNoZSBub3QgaW5pdGlhbGl6ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBNZXRhZGF0YSBjYWNoZSBlbnRyeSBmb3IgZmlsZSAke29sZFBhdGh9IHJlbmFtZWQgdG8gJHtuZXdGaWxlLnBhdGh9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciB0aGUgcmVuYW1lIGV2ZW50XHJcbiAgICAgKiBAcGFyYW0gZmlsZSBOZXcgZmlsZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSBvbGRQYXRoIE9sZCBwYXRoIG9mIHRoZSBmaWxlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuYW1lRXZlbnRIYW5kbGVyKGZpbGU6IFRGaWxlLCBvbGRQYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgRmlsZSAke2ZpbGUucGF0aH0gcmVuYW1lZCB0byAke29sZFBhdGh9YCk7XHJcbiAgICAgICAgdGhpcy5yZW5hbWVFbnRyeShmaWxlLCBvbGRQYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBkZWxldGUgZXZlbnRcclxuICAgICAqIEBwYXJhbSBmaWxlIERlbGV0ZWQgZmlsZSBvYmplY3RcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBkZWxldGVFdmVudEhhbmRsZXIoZmlsZTogVEZpbGUpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgRmlsZSAke2ZpbGUucGF0aH0gZGVsZXRlZGApO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlRW50cnkoZmlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciB0aGUgY2hhbmdlZCBldmVudFxyXG4gICAgICogQHBhcmFtIGZpbGUgQ2hhbmdlZCBmaWxlIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNoYW5nZWRFdmVudEhhbmRsZXIoZmlsZTogVEZpbGUpIHtcclxuICAgICAgICBpZiAodGhpcy5tZXRhZGF0YUNhY2hlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRW50cnkgPSB0aGlzLm1ldGFkYXRhQ2FjaGUuZ2V0KGZpbGUucGF0aCk7XHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0VudHJ5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUVudHJ5KGZpbGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRFbnRyeShmaWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZHJhd01hcmtkb3duVmlldygpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgUmVkcmF3aW5nIG1hcmtkb3duIHZpZXdgKTtcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UudXBkYXRlT3B0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBtZXRhZGF0YSBjYWNoZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyRXZlbnRzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHNSZWdpc3RlcmVkKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgdGhpcy5yZW5hbWVFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKCdjaGFuZ2VkJywgdGhpcy5jaGFuZ2VkRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbignZGVsZXRlZCcsIHRoaXMuZGVsZXRlRXZlbnRIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzUmVnaXN0ZXJlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIk1ldGFkYXRhIGNhY2hlIGV2ZW50cyByZWdpc3RlcmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCAiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xyXG4vKipcclxuICogTG9nZ2luZyBjbGFzczsgZW5jYXBzdWxhdGVzIGNvbnNvbGUubG9nLCBjb25zb2xlLmRlYnVnLCBjb25zb2xlLndhcm4gYW5kIGNvbnNvbGUuZXJyb3JcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2dpbmcge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IExvZ2dpbmc7XHJcbiAgICBwcml2YXRlIGxvZ0xldmVsOiBMb2dnaW5nTGV2ZWw7XHJcbiAgICBwcml2YXRlIGxvZ1ByZWZpeDogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBMb2dnaW5nIGluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gbG9nTGV2ZWwgVGhlIGxvZyBsZXZlbCB0byB1c2UuIERlZmF1bHRzIHRvIFwiaW5mb1wiXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGxvZ0xldmVsOiBMb2dnaW5nTGV2ZWwgPSBcImluZm9cIiwgbG9nUHJlZml4ID0gXCJcIikge1xyXG4gICAgICAgIHRoaXMubG9nTGV2ZWwgPSBsb2dMZXZlbDtcclxuICAgICAgICB0aGlzLmxvZ1ByZWZpeCA9IGAke2xvZ1ByZWZpeH06IGA7XHJcbiAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkxvZ2dpbmcgZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIExvZ2dpbmcuaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRMb2dMZXZlbChsb2dMZXZlbDogTG9nZ2luZ0xldmVsKSB7XHJcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsO1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbyhgTG9nIGxldmVsIHNldCB0byAke2xvZ0xldmVsfWApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgTG9nZ2luZyBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IExvZ2dpbmcge1xyXG4gICAgICAgIGlmICghTG9nZ2luZy5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBMb2dnaW5nLmluc3RhbmNlID0gbmV3IExvZ2dpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIExvZ2dpbmcuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2dzIGEgbWVzc2FnZSB0byB0aGUgY29uc29sZSBpZiB0aGUgbG9nIGxldmVsIGlzIFwidHJhY2VcIlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uYWxQYXJhbXMgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0cmFjZShtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbEFjdGl2ZShcInRyYWNlXCIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvZ01lc3NhZ2UgPSB0aGlzLmNvbnN0cnVjdExvZ01lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcobG9nTWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZ3MgYSBtZXNzYWdlIHRvIHRoZSBjb25zb2xlIGlmIHRoZSBsb2cgbGV2ZWwgaXMgXCJkZWJ1Z1wiXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBcclxuICAgICAqIEBwYXJhbSBvcHRpb25hbFBhcmFtcyBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlYnVnKG1lc3NhZ2U/OiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsQWN0aXZlKFwiZGVidWdcIikpIHtcclxuICAgICAgICAgICAgY29uc3QgbG9nTWVzc2FnZSA9IHRoaXMuY29uc3RydWN0TG9nTWVzc2FnZShtZXNzYWdlKTtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1Zyhsb2dNZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9ncyBhIG1lc3NhZ2UgdG8gdGhlIGNvbnNvbGUgaWYgdGhlIGxvZyBsZXZlbCBpcyBcImluZm9cIiBvciBcImRlYnVnXCJcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIFxyXG4gICAgICogQHBhcmFtIG9wdGlvbmFsUGFyYW1zIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW5mbyhtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbEFjdGl2ZShcImluZm9cIikpIHtcclxuICAgICAgICAgICAgY29uc3QgbG9nTWVzc2FnZSA9IHRoaXMuY29uc3RydWN0TG9nTWVzc2FnZShtZXNzYWdlKTtcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKGxvZ01lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2dzIGEgbWVzc2FnZSB0byB0aGUgY29uc29sZSBpZiB0aGUgbG9nIGxldmVsIGlzIFwiaW5mb1wiLCBcImRlYnVnXCIgb3IgXCJ3YXJuXCJcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIFxyXG4gICAgICogQHBhcmFtIG9wdGlvbmFsUGFyYW1zIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd2FybihtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbEFjdGl2ZShcIndhcm5cIikpIHtcclxuICAgICAgICAgICAgY29uc3QgbG9nTWVzc2FnZSA9IHRoaXMuY29uc3RydWN0TG9nTWVzc2FnZShtZXNzYWdlKTtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGxvZ01lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2dzIGEgbWVzc2FnZSB0byB0aGUgY29uc29sZSBpZiB0aGUgbG9nIGxldmVsIGlzIFwiaW5mb1wiLCBcImRlYnVnXCIsIFwid2FyblwiIG9yIFwiZXJyb3JcIlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uYWxQYXJhbXMgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBlcnJvcihtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbEFjdGl2ZShcImVycm9yXCIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvZ01lc3NhZ2UgPSB0aGlzLmNvbnN0cnVjdExvZ01lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobG9nTWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdExvZ01lc3NhZ2UobWVzc2FnZT86IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubG9nUHJlZml4fSR7bWVzc2FnZX1gO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9nTGV2ZWxBY3RpdmUobG9nTGV2ZWw6IExvZ2dpbmdMZXZlbCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID09PSBcIm5vbmVcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID09PSBcInRyYWNlXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID09PSBcImRlYnVnXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxvZ0xldmVsICE9PSBcInRyYWNlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID09PSBcImluZm9cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gbG9nTGV2ZWwgIT09IFwidHJhY2VcIiAmJiBsb2dMZXZlbCAhPT0gXCJkZWJ1Z1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbCA9PT0gXCJ3YXJuXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxvZ0xldmVsICE9PSBcInRyYWNlXCIgJiYgbG9nTGV2ZWwgIT09IFwiZGVidWdcIiAmJiBsb2dMZXZlbCAhPT0gXCJpbmZvXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID09PSBcImVycm9yXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxvZ0xldmVsICE9PSBcInRyYWNlXCIgJiYgbG9nTGV2ZWwgIT09IFwiZGVidWdcIiAmJiBsb2dMZXZlbCAhPT0gXCJpbmZvXCIgJiYgbG9nTGV2ZWwgIT09IFwid2FyblwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTG9nZ2luZ0xldmVsID0gXCJub25lXCIgfCBcInRyYWNlXCIgfCBcImRlYnVnXCIgfCBcImluZm9cIiB8IFwid2FyblwiIHwgXCJlcnJvclwiOyIsICJpbXBvcnQgeyBQcmpTZXR0aW5ncyB9IGZyb20gJ3NyYy90eXBlcy9QcmpTZXR0aW5ncyc7XHJcbmltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgRmlsZUNhY2hlIGZyb20gXCIuLi9saWJzL0ZpbGVDYWNoZVwiO1xyXG5pbXBvcnQgTWV0YWRhdGFDYWNoZSBmcm9tIFwiLi4vbGlicy9NZXRhZGF0YUNhY2hlXCI7XHJcbmltcG9ydCBMb2dnaW5nLCB7IExvZ2dpbmdMZXZlbCB9IGZyb20gJy4vTG9nZ2luZyc7XHJcbmltcG9ydCBQcmogZnJvbSAnc3JjL21haW4nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2xvYmFsIHtcclxuICAgIHN0YXRpYyBpbnN0YW5jZTogR2xvYmFsO1xyXG4gICAgcGx1Z2luOiBQcmo7XHJcbiAgICBhcHA6IEFwcDtcclxuICAgIGZpbGVDYWNoZTogRmlsZUNhY2hlO1xyXG4gICAgbWV0YWRhdGFDYWNoZTogTWV0YWRhdGFDYWNoZTtcclxuICAgIHNldHRpbmdzOiBQcmpTZXR0aW5ncztcclxuICAgIGxvZ2dlcjogTG9nZ2luZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcmo6IFByaiwgYXBwOiBBcHAsIHNldHRpbmdzOiBQcmpTZXR0aW5ncykge1xyXG4gICAgICAgIGlmIChHbG9iYWwuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdsb2JhbC5pbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwcmo7XHJcblxyXG4gICAgICAgIC8vIE9ic2lkaWFuIEFwcFxyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG5cclxuICAgICAgICAvLyBTZXR0aW5nc1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2luZyh0aGlzLnNldHRpbmdzLmxvZ0xldmVsIGFzIExvZ2dpbmdMZXZlbCwgXCJQcmpcIik7XHJcblxyXG4gICAgICAgIC8vIFNpbmdsZXRvbjsgYmVmb3JlIGNyZWF0aW5nIHRoZSBjYWNoZSBpbnN0YW5jZXMsIGJlY2F1c2UgdGhleSBuZWVkIHRoZSBhcHAgaW5zdGFuY2VcclxuICAgICAgICBHbG9iYWwuaW5zdGFuY2UgPSB0aGlzO1xyXG5cclxuICAgICAgICAvLyBGaWxlIGNhY2hlXHJcbiAgICAgICAgdGhpcy5maWxlQ2FjaGUgPSBGaWxlQ2FjaGUuZ2V0SW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgLy8gTWV0YWRhdGEgY2FjaGVcclxuICAgICAgICB0aGlzLm1ldGFkYXRhQ2FjaGUgPSBNZXRhZGF0YUNhY2hlLmdldEluc3RhbmNlKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBhd2FpdENhY2hlSW5pdGlhbGl6YXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJXYWl0aW5nIGZvciBjYWNoZSBpbml0aWFsaXphdGlvblwiKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZS53YWl0Rm9yQ2FjaGVSZWFkeSgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMubWV0YWRhdGFDYWNoZS53YWl0Rm9yQ2FjaGVSZWFkeSgpO1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiQ2FjaGUgaW5pdGlhbGl6ZWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIEZpbGVDYWNoZS5kZWNvbnN0cnVjdG9yKCk7XHJcbiAgICAgICAgTWV0YWRhdGFDYWNoZS5kZWNvbnN0cnVjdG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKHByajogUHJqIHwgbnVsbCA9IG51bGwsIGFwcDogQXBwIHwgbnVsbCA9IG51bGwsIHNldHRpbmdzOiBQcmpTZXR0aW5ncyB8IG51bGwgPSBudWxsKTogR2xvYmFsIHtcclxuICAgICAgICBpZiAoIUdsb2JhbC5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpZiAoIXByaiB8fCAhYXBwIHx8ICFzZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2xvYmFsIGluc3RhbmNlIG5vdCBpbml0aWFsaXplZCBhbmQgbm8gYXBwIHByb3ZpZGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEdsb2JhbC5pbnN0YW5jZSA9IG5ldyBHbG9iYWwocHJqLCBhcHAsIHNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEdsb2JhbC5pbnN0YW5jZTtcclxuICAgIH1cclxufSIsICIvLyBOb3RlOiBEb2N1bWVudE1vZGVsIGNsYXNzXHJcblxyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBCYXNlTW9kZWwgfSBmcm9tIFwiLi9CYXNlTW9kZWxcIjtcclxuaW1wb3J0IElQcmpNb2RlbCBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JUHJqTW9kZWxcIjtcclxuaW1wb3J0IERvY3VtZW50RGF0YSBmcm9tIFwiLi4vdHlwZXMvRG9jdW1lbnREYXRhXCI7XHJcbmltcG9ydCBHbG9iYWwgZnJvbSBcIi4uL2NsYXNzZXMvR2xvYmFsXCI7XHJcbmltcG9ydCBIZWxwZXIgZnJvbSBcIi4uL2xpYnMvSGVscGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRNb2RlbCBleHRlbmRzIEJhc2VNb2RlbDxEb2N1bWVudERhdGE+IGltcGxlbWVudHMgSVByak1vZGVsPERvY3VtZW50RGF0YT4ge1xyXG4gICAgcHJpdmF0ZSBmaWxlQ2FjaGUgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5maWxlQ2FjaGU7XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVsYXRlZEZpbGVzOiBEb2N1bWVudE1vZGVsW10gfCBudWxsIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZpbGU6IFRGaWxlKSB7XHJcbiAgICAgICAgc3VwZXIoZmlsZSwgRG9jdW1lbnREYXRhLCBEb2N1bWVudERhdGEueWFtbEtleU1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBkYXRhKCk6IFBhcnRpYWw8RG9jdW1lbnREYXRhPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGRhdGEodmFsdWU6IFBhcnRpYWw8RG9jdW1lbnREYXRhPikge1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHJlbGF0ZWRGaWxlcygpOiBEb2N1bWVudE1vZGVsW10gfCBudWxsIHtcclxuICAgICAgICBpZiAodGhpcy5fcmVsYXRlZEZpbGVzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVsYXRlZEZpbGVzID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbGF0ZWRGaWxlcyA9IHRoaXMuZGF0YS5yZWxhdGVkRmlsZXM7XHJcbiAgICAgICAgICAgIGlmIChyZWxhdGVkRmlsZXMpIHtcclxuICAgICAgICAgICAgICAgIHJlbGF0ZWRGaWxlcy5tYXAoKHJlbGF0ZWRGaWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lraWxpbmtEYXRhID0gSGVscGVyLmV4dHJhY3REYXRhRnJvbVdpa2lsaW5rKHJlbGF0ZWRGaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZEZpbGVuYW1lID0gd2lraWxpbmtEYXRhLmJhc2VuYW1lID8gYCR7d2lraWxpbmtEYXRhLmJhc2VuYW1lfS5tZGAgOiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVDYWNoZS5maW5kRmlsZUJ5TmFtZShtZEZpbGVuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUucGF0aCAhPT0gdGhpcy5maWxlLnBhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVsYXRlZEZpbGVzPy5wdXNoKG5ldyBEb2N1bWVudE1vZGVsKGZpbGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHsgdGhpcy5fcmVsYXRlZEZpbGVzID0gbnVsbDsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVsYXRlZEZpbGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBhbGxUZXh0ID0gdGhpcy5kYXRhLnRpdGxlID8/IFwiXCI7XHJcbiAgICAgICAgYWxsVGV4dCArPSB0aGlzLmRhdGEuZGVzY3JpcHRpb24gPz8gXCJcIjtcclxuICAgICAgICBhbGxUZXh0ICs9IHRoaXMuZGF0YS5kYXRlID8/IFwiXCI7XHJcbiAgICAgICAgYWxsVGV4dCArPSB0aGlzLmRhdGEuZGF0ZU9mRGVsaXZlcnkgPz8gXCJcIjtcclxuICAgICAgICBhbGxUZXh0ICs9IHRoaXMuZGF0YS5maWxlID8/IFwiXCI7XHJcbiAgICAgICAgYWxsVGV4dCArPSB0aGlzLmRhdGEudGFncyA/PyBcIlwiO1xyXG4gICAgICAgIGFsbFRleHQgKz0gdGhpcy5kYXRhLnNlbmRlciA/PyBcIlwiO1xyXG4gICAgICAgIGFsbFRleHQgKz0gdGhpcy5kYXRhLnJlY2lwaWVudCA/PyBcIlwiO1xyXG4gICAgICAgIGFsbFRleHQgKz0gdGhpcy5kYXRhLnJlbGF0ZWRGaWxlcyA/PyBcIlwiO1xyXG4gICAgICAgIHJldHVybiBhbGxUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRXaWtpbGluayh0ZXh0OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgW1ske3RoaXMuZmlsZS5uYW1lfXwke3RleHR9XV1gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgW1ske3RoaXMuZmlsZS5uYW1lfV1dYDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmaWxlIGNvbnRlbnRzIG9mIHRoZSBkb2N1bWVudFxyXG4gICAgICogQHJldHVybnMgU3RyaW5nIGNvbnRhaW5pbmcgdGhlIGZpbGUgY29udGVudHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldEZpbGVDb250ZW50cygpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZmlsZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb3Jvc3BvbmRpbmdTeW1ib2woKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09IFwiTWV0YWRhdGFcIikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLnN1YlR5cGUgPT09IFwiQ2x1c3RlclwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWwuc2V0dGluZ3MuZG9jdW1lbnRTZXR0aW5ncy5jbHVzdGVyU3ltYm9sO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5oaWRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWwuc2V0dGluZ3MuZG9jdW1lbnRTZXR0aW5ncy5oaWRlU3ltYm9sO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsLnNldHRpbmdzLmRvY3VtZW50U2V0dGluZ3Muc3ltYm9sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcIngtY2lyY2xlXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgZG9jdW1lbnRcclxuICAgICAqIEByZXR1cm5zIFN0cmluZyBjb250YWluaW5nIHRoZSBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmRlc2NyaXB0aW9uID8/IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGBJbnB1dGAgaWYgdGhlIGRvY3VtZW50IGlzIGFkZHJlc3NlZCB0byB0aGUgdXNlciBvciBgT3V0cHV0YCBpZiBpdCBjb21lcyBmcm9tIHRoZSB1c2VyLiBPdGhlcndpc2UgYG51bGxgLlxyXG4gICAgICogQHJldHVybnMgU3RhdGUgb2YgdGhlIGRvY3VtZW50LlxyXG4gICAgICogRS5nLiBgSW5wdXRgIGlmIHRoZSBkb2N1bWVudCBpcyBhZGRyZXNzZWQgdG8gdGhlIHVzZXIgb3IgYE91dHB1dGAgaWYgaXQgY29tZXMgZnJvbSB0aGUgdXNlci4gT3RoZXJ3aXNlIGBudWxsYC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldElucHV0T3V0cHV0U3RhdGUoKTogbnVsbCB8IFwiSW5wdXRcIiB8IFwiT3V0cHV0XCIge1xyXG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy5nbG9iYWwuc2V0dGluZ3MudXNlci5uYW1lO1xyXG4gICAgICAgIGNvbnN0IHNob3J0VXNlcm5hbWUgPSB0aGlzLmdsb2JhbC5zZXR0aW5ncy51c2VyLnNob3J0TmFtZTtcclxuICAgICAgICBpZiAodGhpcy5kYXRhICYmICh0aGlzLmRhdGEuc2VuZGVyIHx8IHRoaXMuZGF0YS5yZWNpcGllbnQpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuc2VuZGVyID09PSB1c2VybmFtZSB8fCB0aGlzLmRhdGEuc2VuZGVyID09PSBzaG9ydFVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJPdXRwdXRcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEucmVjaXBpZW50ID09PSB1c2VybmFtZSB8fCB0aGlzLmRhdGEucmVjaXBpZW50ID09PSBzaG9ydFVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJJbnB1dFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsaW5rZWQgZmlsZSBvZiB0aGUgZG9jdW1lbnRcclxuICAgICAqIEByZXR1cm5zIFRGaWxlIG9mIHRoZSBsaW5rZWQgZmlsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RmlsZSgpOiBURmlsZSB7XHJcbiAgICAgICAgY29uc3QgZmlsZUxpbmtEYXRhID0gSGVscGVyLmV4dHJhY3REYXRhRnJvbVdpa2lsaW5rKHRoaXMuZGF0YS5maWxlKTtcclxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5maWxlQ2FjaGUuZmluZEZpbGVCeU5hbWUoZmlsZUxpbmtEYXRhLmZpbGVuYW1lID8/IFwiXCIpO1xyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbGU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpbGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYE11bHRpcGxlIGZpbGVzIGZvdW5kIGZvciAke2ZpbGVMaW5rRGF0YS5maWxlbmFtZX1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbGUuZmlyc3QoKSA/PyB0aGlzLmZpbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYE5vIGZpbGVzIGZvdW5kIGZvciAke2ZpbGVMaW5rRGF0YS5maWxlbmFtZX1gKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdGFncyBvZiB0aGUgZG9jdW1lbnQgYXMgYW4gYXJyYXkgb2Ygc3RyaW5nc1xyXG4gICAgICogQHJldHVybnMgQXJyYXkgb2Ygc3RyaW5ncyBjb250YWluaW5nIHRoZSB0YWdzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRUYWdzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICBjb25zdCB0YWdzID0gdGhpcy5kYXRhLnRhZ3M7XHJcbiAgICAgICAgbGV0IGZvcm1hdHRlZFRhZ3M6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgIGlmICh0YWdzICYmIHR5cGVvZiB0YWdzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRUYWdzID0gW3RhZ3NdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRhZ3MpKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZFRhZ3MgPSBbLi4udGFnc107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkVGFncztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNvcnRzIHRoZSBkb2N1bWVudHMgYnkgZGF0ZSBkZXNjZW5kaW5nXHJcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRzIEFycmF5IG9mIERvY3VtZW50TW9kZWxzIHRvIHNvcnRcclxuICAgICAqIEByZW1hcmtzIFRoaXMgZnVuY3Rpb24gc29ydHMgdGhlIGFycmF5IGluIHBsYWNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc29ydERvY3VtZW50c0J5RGF0ZURlc2MoZG9jdW1lbnRzOiBEb2N1bWVudE1vZGVsW10pOiB2b2lkIHtcclxuICAgICAgICBkb2N1bWVudHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYS5kYXRhLmRhdGUgJiYgYi5kYXRhLmRhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVBID0gbmV3IERhdGUoYS5kYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZUIgPSBuZXcgRGF0ZShiLmRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZUIuZ2V0VGltZSgpIC0gZGF0ZUEuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGEuZGF0YS5kYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYi5kYXRhLmRhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNvcnRzIHRoZSBkb2N1bWVudHMgYnkgZGF0ZSBhc2NlbmRpbmdcclxuICAgICAqIEBwYXJhbSBkb2N1bWVudHMgQXJyYXkgb2YgRG9jdW1lbnRNb2RlbHMgdG8gc29ydFxyXG4gICAgICogQHJlbWFya3MgVGhpcyBmdW5jdGlvbiBzb3J0cyB0aGUgYXJyYXkgaW4gcGxhY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzb3J0RG9jdW1lbnRzQnlEYXRlQXNjKGRvY3VtZW50czogRG9jdW1lbnRNb2RlbFtdKTogdm9pZCB7XHJcbiAgICAgICAgZG9jdW1lbnRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEuZGF0YS5kYXRlICYmIGIuZGF0YS5kYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlQSA9IG5ldyBEYXRlKGEuZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVCID0gbmV3IERhdGUoYi5kYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGVBLmdldFRpbWUoKSAtIGRhdGVCLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhLmRhdGEuZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYi5kYXRhLmRhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsICIvLyBOb3RlOiBUcmFuc2FjdGlvbk1vZGVsIGNsYXNzXHJcblxyXG5pbXBvcnQgR2xvYmFsIGZyb20gXCJzcmMvY2xhc3Nlcy9HbG9iYWxcIjtcclxuaW1wb3J0IExvZ2dpbmcgZnJvbSBcInNyYy9jbGFzc2VzL0xvZ2dpbmdcIjtcclxuXHJcbi8qKlxyXG4gKiBBIGNsYXNzIHRoYXQgaGFuZGxlcyB0cmFuc2FjdGlvbnMuXHJcbiAqIEByZW1hcmtzIC0gQSB0cmFuc2FjdGlvbiBpcyBhIHNldCBvZiBjaGFuZ2VzIHRoYXQgYXJlIGFwcGxpZWQgdG8gdGhlIG1vZGVsIGF0IG9uY2UuXHJcbiAqIC0gVGhpcyBpcyB1c2VmdWwgd2hlbiBtdWx0aXBsZSBjaGFuZ2VzIG5lZWQgdG8gYmUgYXBwbGllZCB0byB0aGUgbW9kZWwsIGJ1dCB0aGUgY2hhbmdlcyBzaG91bGQgb25seSBiZSB3cml0dGVuIHRvIHRoZSBmaWxlIG9uY2UgYWxsIGNoYW5nZXMgaGF2ZSBiZWVuIGFwcGxpZWQuXHJcbiAqIC0gVGhpcyBpcyBhbHNvIHVzZWZ1bCB3aGVuIHRoZSBjaGFuZ2VzIHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoZSBtb2RlbCwgYnV0IG5vdCB3cml0dGVuIHRvIHRoZSBmaWxlIHlldC5cclxuICogQHR1dG9yaWFsIC0gVG8gc3RhcnQgYSB0cmFuc2FjdGlvbiwgY2FsbCB0aGUgYHN0YXJ0VHJhbnNhY3Rpb25gIG1ldGhvZC5cclxuICogLSBUbyBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgbW9kZWwsIGNhbGwgdGhlIGBmaW5pc2hUcmFuc2FjdGlvbmAgbWV0aG9kLlxyXG4gKiAtIFRvIGRpc2NhcmQgdGhlIGNoYW5nZXMsIGNhbGwgdGhlIGBhYm9ydFRyYW5zYWN0aW9uYCBtZXRob2QuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVHJhbnNhY3Rpb25Nb2RlbDxUPiB7XHJcbiAgICBwcm90ZWN0ZWQgbG9nZ2VyOiBMb2dnaW5nID0gR2xvYmFsLmdldEluc3RhbmNlKCkubG9nZ2VyO1xyXG4gICAgcHJvdGVjdGVkIHRyYW5zYWN0aW9uQWN0aXZlID0gZmFsc2U7XHJcbiAgICBwcm90ZWN0ZWQgY2hhbmdlczogUGFydGlhbDxUPiA9IHt9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgd3JpdGVzIHRoZSBjaGFuZ2VzIHRvIHRoZSBmaWxlLlxyXG4gICAgICogQHJlbWFya3MgLSBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIHRoZSB0cmFuc2FjdGlvbiBpcyBmaW5pc2hlZCBvciB3aXRob3V0IGEgYWN0aXZlIHRyYW5zYWN0aW9uIGltbWVkaWF0ZWx5LlxyXG4gICAgICogQHBhcmFtIHVwZGF0ZSBUaGUgY2hhbmdlcyB0byB3cml0ZS5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHdyaXRlQ2hhbmdlczogKHVwZGF0ZTogVCkgPT4gdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFRyYW5zYWN0aW9uTW9kZWwgY2xhc3MuXHJcbiAgICAgKiBAcGFyYW0gd3JpdGVDaGFuZ2VzIEEgZnVuY3Rpb24gdGhhdCB3cml0ZXMgdGhlIGNoYW5nZXMgdG8gdGhlIGZpbGUuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHdyaXRlQ2hhbmdlczogKHVwZGF0ZTogVCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25BY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLndyaXRlQ2hhbmdlcyA9IHdyaXRlQ2hhbmdlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBhIHRyYW5zYWN0aW9uXHJcbiAgICAgKiBAcmVtYXJrcyAtIElmIGEgdHJhbnNhY3Rpb24gaXMgYWxyZWFkeSBhY3RpdmUsIHRoaXMgbWV0aG9kIGRvZXMgbm90aGluZyBhbmQgbG9ncyBhIHdhcm5pbmcuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGFydFRyYW5zYWN0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVHJhbnNhY3Rpb25BY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybignVHJhbnNhY3Rpb24gYWxyZWFkeSBhY3RpdmUnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uQWN0aXZlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbmlzaGVzIGEgdHJhbnNhY3Rpb25cclxuICAgICAqIEByZW1hcmtzIC0gSWYgbm8gdHJhbnNhY3Rpb24gaXMgYWN0aXZlLCB0aGlzIG1ldGhvZCBkb2VzIG5vdGhpbmcgYW5kIGxvZ3MgYSB3YXJuaW5nLlxyXG4gICAgICogLSBUaGlzIG1ldGhvZCB3cml0ZXMgdGhlIGNoYW5nZXMgdG8gdGhlIGZpbGUuXHJcbiAgICAgKiBAcmVtYXJrcyAtIElmIHRoZSBgd3JpdGVDaGFuZ2VzYCBtZXRob2QgdGhyb3dzIGFuIGVycm9yLCB0aGUgZXJyb3IgaXMgbG9nZ2VkIGFuZCB0aGUgdHJhbnNhY3Rpb24gaXMgYWJvcnRlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGZpbmlzaFRyYW5zYWN0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1RyYW5zYWN0aW9uQWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ05vIHRyYW5zYWN0aW9uIGFjdGl2ZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDaGFuZ2VzKHRoaXMuY2hhbmdlcyBhcyBUKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiYHdyaXRlQ2hhbmdlc2AgZmFpbGVkIHdpdGggZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlcyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWJvcnRzIGEgdHJhbnNhY3Rpb25cclxuICAgICAqIEByZW1hcmtzIC0gSWYgbm8gdHJhbnNhY3Rpb24gaXMgYWN0aXZlLCB0aGlzIG1ldGhvZCBkb2VzIG5vdGhpbmcgYW5kIGxvZ3MgYSB3YXJuaW5nLlxyXG4gICAgICogLSBUaGlzIG1ldGhvZCBkaXNjYXJkcyBhbGwgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFib3J0VHJhbnNhY3Rpb24oKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVHJhbnNhY3Rpb25BY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybignTm8gdHJhbnNhY3Rpb24gYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0ge307XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGtleS5cclxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byB1cGRhdGUgYXMgcGF0aC4gRXhhbXBsZTogYGRhdGEudGl0bGVgXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHVwZGF0ZUtleVZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBrZXkuc3BsaXQoJy4nKTtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuY2hhbmdlcyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuXHJcbiAgICAgICAga2V5cy5mb3JFYWNoKChrLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IGtleXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFtrXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFtrXSA9IGN1cnJlbnRba10gfHwge307XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudFtrXSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNUcmFuc2FjdGlvbkFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ2hhbmdlcyh0aGlzLmNoYW5nZXMgYXMgVCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlcyA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgd2hldGhlciBhIHRyYW5zYWN0aW9uIGlzIGFjdGl2ZS5cclxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiBhIHRyYW5zYWN0aW9uIGlzIGFjdGl2ZSwgb3RoZXJ3aXNlIGBmYWxzZWAuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0IGlzVHJhbnNhY3Rpb25BY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb25BY3RpdmU7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IEdsb2JhbCBmcm9tIFwiLi4vY2xhc3Nlcy9HbG9iYWxcIjtcclxuaW1wb3J0IHsgVHJhbnNhY3Rpb25Nb2RlbCB9IGZyb20gXCIuL1RyYW5zYWN0aW9uTW9kZWxcIjtcclxuaW1wb3J0IHsgWWFtbEtleU1hcCB9IGZyb20gXCIuLi90eXBlcy9ZYW1sS2V5TWFwXCI7XHJcbmltcG9ydCBMb2dnaW5nIGZyb20gXCJzcmMvY2xhc3Nlcy9Mb2dnaW5nXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzZU1vZGVsPFQgZXh0ZW5kcyBvYmplY3Q+IGV4dGVuZHMgVHJhbnNhY3Rpb25Nb2RlbDxUPiB7XHJcbiAgICBwcm90ZWN0ZWQgZ2xvYmFsID0gR2xvYmFsLmdldEluc3RhbmNlKCk7XHJcbiAgICBwcm90ZWN0ZWQgYXBwID0gR2xvYmFsLmdldEluc3RhbmNlKCkuYXBwO1xyXG4gICAgcHJvdGVjdGVkIGxvZ2dlcjogTG9nZ2luZyA9IEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlcjtcclxuICAgIHByaXZhdGUgX2ZpbGU6IFRGaWxlO1xyXG4gICAgcHVibGljIGdldCBmaWxlKCk6IFRGaWxlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgY3RvcjogbmV3IChkYXRhPzogUGFydGlhbDxUPikgPT4gVDtcclxuICAgIHByaXZhdGUgZGF0YVByb3h5OiBUO1xyXG4gICAgcHJpdmF0ZSB5YW1sS2V5TWFwOiBZYW1sS2V5TWFwIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBCYXNlTW9kZWwgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB0byBjcmVhdGUgdGhlIG1vZGVsIGZvci5cclxuICAgICAqIEBwYXJhbSBjdG9yIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZGF0YSBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0geWFtbEtleU1hcCBUaGUgeWFtbCBrZXkgbWFwIHRvIHVzZS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZmlsZTogVEZpbGUsIGN0b3I6IG5ldyAoZGF0YT86IFBhcnRpYWw8VD4pID0+IFQsIHlhbWxLZXlNYXA6IFlhbWxLZXlNYXAgfCB1bmRlZmluZWQpIHtcclxuICAgICAgICBzdXBlcigodXBkYXRlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJvbnRtYXR0ZXIgPSB1cGRhdGUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZmlsZSA9IGZpbGU7XHJcbiAgICAgICAgdGhpcy5jdG9yID0gY3RvcjtcclxuICAgICAgICB0aGlzLmluaXRZYW1sS2V5TWFwKHlhbWxLZXlNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZGF0YSBvYmplY3QgYXMgYSBwcm94eS5cclxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIG9iamVjdCBhcyBhIHByb3h5LlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IF9kYXRhKCk6IFBhcnRpYWw8VD4ge1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGFQcm94eSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhUHJveHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5nZXRNZXRhZGF0YSgpO1xyXG4gICAgICAgIGlmICghZnJvbnRtYXR0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ0Zyb250bWF0dGVyIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICBjb25zdCBlbXB0eU9iamVjdCA9IG5ldyB0aGlzLmN0b3IoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGVtcHR5T2JqZWN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMueWFtbEtleU1hcCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnlhbWxLZXlNYXApIHtcclxuICAgICAgICAgICAgICAgIGlmIChmcm9udG1hdHRlclt0aGlzLnlhbWxLZXlNYXBba2V5XV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltrZXldID0gZnJvbnRtYXR0ZXJbdGhpcy55YW1sS2V5TWFwW2tleV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmcm9udG1hdHRlclt0aGlzLnlhbWxLZXlNYXBba2V5XV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGFPYmplY3Q6IFQgPSBuZXcgdGhpcy5jdG9yKGZyb250bWF0dGVyIGFzIFBhcnRpYWw8VD4pO1xyXG4gICAgICAgIHRoaXMuZGF0YVByb3h5ID0gdGhpcy5jcmVhdGVQcm94eShkYXRhT2JqZWN0KSBhcyBUO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhUHJveHk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldCBfZGF0YSh2YWx1ZXM6IFBhcnRpYWw8VD4pIHtcclxuICAgICAgICBjb25zdCBkYXRhT2JqZWN0OiBUID0gbmV3IHRoaXMuY3Rvcih2YWx1ZXMpO1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGFPYmplY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGF0YVtrZXldID0gdmFsdWVzW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZnJvbnRtYXR0ZXIoKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKCkgPz8ge307XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBmcm9udG1hdHRlcih2YWx1ZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcclxuICAgICAgICAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKHRoaXMuX2ZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTmVzdGVkRnJvbnRtYXR0ZXJPYmplY3RzKGZyb250bWF0dGVyLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyb250bWF0dGVyO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgRnJvbnRtYXR0ZXIgZm9yIGZpbGUgJHt0aGlzLl9maWxlLnBhdGh9IHN1Y2Nlc3NmdWxseSB1cGRhdGVkLmApO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIHVwZGF0aW5nIHRoZSBmcm9udG1hdHRlciBmb3IgZmlsZSAke3RoaXMuX2ZpbGUucGF0aH06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBwcm94eSBmb3IgdGhlIGdpdmVuIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSBvYmogVGhlIG9iamVjdCB0byBjcmVhdGUgYSBwcm94eSBmb3IuXHJcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgb2JqZWN0LiBlLmcuIGBkYXRhLnRpdGxlYFxyXG4gICAgICogQHJldHVybnMgVGhlIHByb3h5IG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVQcm94eShvYmo6IFBhcnRpYWw8VD4sIHBhdGggPSBcIlwiKTogdW5rbm93biB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eShvYmosIHtcclxuICAgICAgICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5S2V5ID0gdGhpcy5nZXRQcm9wZXJ0eUtleShwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhdGggPSBwYXRoID8gYCR7cGF0aH0uJHtwcm9wZXJ0eUtleX1gIDogYCR7cHJvcGVydHlLZXl9YDtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUHJveHkodmFsdWUsIG5ld1BhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6ICh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5S2V5ID0gdGhpcy5nZXRQcm9wZXJ0eUtleShwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gcGF0aCA/IGAke3BhdGh9LiR7cHJvcGVydHlLZXl9YCA6IGAke3Byb3BlcnR5S2V5fWA7XHJcbiAgICAgICAgICAgICAgICBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVLZXlWYWx1ZShuZXdQYXRoLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGB5YW1sS2V5TWFwYCB3aXRoIHRoZSBnaXZlbiB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSB5YW1sS2V5TWFwIFRoZSBuZXcgYHlhbWxLZXlNYXBgIHRvIHNldC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpbml0WWFtbEtleU1hcCh5YW1sS2V5TWFwOiBZYW1sS2V5TWFwIHwgdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKHlhbWxLZXlNYXApIHtcclxuICAgICAgICAgICAgdGhpcy55YW1sS2V5TWFwID0geWFtbEtleU1hcDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRQcm9wZXJ0eUtleShwcm9wZXJ0eTogc3RyaW5nIHwgc3ltYm9sKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHByb3BlcnR5ID09PSAnc3ltYm9sJyA/IHByb3BlcnR5LnRvU3RyaW5nKCkgOiBwcm9wZXJ0eTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldE1ldGFkYXRhKCk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgY2FjaGVkTWV0YWRhdGEgPSB0aGlzLmFwcD8ubWV0YWRhdGFDYWNoZT8uZ2V0Q2FjaGUodGhpcy5fZmlsZS5wYXRoKTtcclxuXHJcbiAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhICYmIGNhY2hlZE1ldGFkYXRhLmZyb250bWF0dGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRNZXRhZGF0YS5mcm9udG1hdHRlciBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBObyBNZXRhZGF0YSBmb3VuZCBmb3IgJHt0aGlzLl9maWxlLnBhdGh9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU5lc3RlZEZyb250bWF0dGVyT2JqZWN0cyhmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sIHVwZGF0ZXM6IG9iamVjdCkge1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHVwZGF0ZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy55YW1sS2V5TWFwICYmIHRoaXMueWFtbEtleU1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICBrZXkgPSB0aGlzLnlhbWxLZXlNYXBba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsICYmIGZyb250bWF0dGVyW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTmVzdGVkRnJvbnRtYXR0ZXJPYmplY3RzKGZyb250bWF0dGVyW2tleV0gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4sIHZhbHVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgSVByakRhdGEgZnJvbSBcIi4uL2ludGVyZmFjZXMvSVByakRhdGFcIjtcclxuaW1wb3J0IElQcmpEb2N1bWVudCBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JUHJqRG9jdW1lbnRcIjtcclxuaW1wb3J0IHsgWWFtbEtleU1hcCB9IGZyb20gXCIuL1lhbWxLZXlNYXBcIjtcclxuaW1wb3J0IHsgRmlsZVR5cGUsIEZpbGVTdWJUeXBlIH0gZnJvbSBcIi4vUHJqVHlwZXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERvY3VtZW50RGF0YSBpbXBsZW1lbnRzIElQcmpEYXRhLCBJUHJqRG9jdW1lbnQge1xyXG4gICAgdHlwZTogRmlsZVR5cGUgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgc3ViVHlwZTogRmlsZVN1YlR5cGUgfCB1bmRlZmluZWQ7XHJcbiAgICB0aXRsZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIGRhdGU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHNlbmRlcjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHJlY2lwaWVudDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIGRhdGVPZkRlbGl2ZXJ5OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgaGlkZTogYm9vbGVhbiB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBmaWxlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgcmVsYXRlZEZpbGVzOiBzdHJpbmdbXSB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBjaXRhdGlvblRpdGxlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgdGFnczogc3RyaW5nIHwgc3RyaW5nW10gfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgYW5ub3RhdGlvblRhcmdldDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHN0YXRpYyB5YW1sS2V5TWFwOiBZYW1sS2V5TWFwID0ge1xyXG4gICAgICAgIFwiYW5ub3RhdGlvblRhcmdldFwiOiBcImFubm90YXRpb24tdGFyZ2V0XCJcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YTogUGFydGlhbDxEb2N1bWVudERhdGE+KSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IGRhdGEudGl0bGUgIT09IHVuZGVmaW5lZCA/IGRhdGEudGl0bGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0YS5kYXRlICE9PSB1bmRlZmluZWQgPyBkYXRhLmRhdGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCA/IGRhdGEuZGVzY3JpcHRpb24gOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zZW5kZXIgPSBkYXRhLnNlbmRlciAhPT0gdW5kZWZpbmVkID8gZGF0YS5zZW5kZXIgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5yZWNpcGllbnQgPSBkYXRhLnJlY2lwaWVudCAhPT0gdW5kZWZpbmVkID8gZGF0YS5yZWNpcGllbnQgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5kYXRlT2ZEZWxpdmVyeSA9IGRhdGEuZGF0ZU9mRGVsaXZlcnkgIT09IHVuZGVmaW5lZCA/IGRhdGEuZGF0ZU9mRGVsaXZlcnkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5oaWRlID0gZGF0YS5oaWRlICE9PSB1bmRlZmluZWQgPyBkYXRhLmhpZGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5maWxlID0gZGF0YS5maWxlICE9PSB1bmRlZmluZWQgPyBkYXRhLmZpbGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5yZWxhdGVkRmlsZXMgPSBkYXRhLnJlbGF0ZWRGaWxlcyAhPT0gdW5kZWZpbmVkID8gZGF0YS5yZWxhdGVkRmlsZXMgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5jaXRhdGlvblRpdGxlID0gZGF0YS5jaXRhdGlvblRpdGxlICE9PSB1bmRlZmluZWQgPyBkYXRhLmNpdGF0aW9uVGl0bGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy50YWdzID0gZGF0YS50YWdzICE9PSB1bmRlZmluZWQgPyBkYXRhLnRhZ3MgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy50eXBlID0gZGF0YS50eXBlICE9PSB1bmRlZmluZWQgPyBkYXRhLnR5cGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zdWJUeXBlID0gZGF0YS5zdWJUeXBlICE9PSB1bmRlZmluZWQgPyBkYXRhLnN1YlR5cGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGFyZ2V0ID0gZGF0YS5hbm5vdGF0aW9uVGFyZ2V0ICE9PSB1bmRlZmluZWQgPyBkYXRhLmFubm90YXRpb25UYXJnZXQgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7IG1vbWVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVscGVyIHtcclxuICAgIHByaXZhdGUgc3RhdGljIG1kNSA9IHJlcXVpcmUoJ2NyeXB0by1qcy9tZDUnKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dHJhY3RzIHRoZSBkYXRlLCBmaWxlbmFtZSwgZmlsZSBleHRlbnNpb24gYW5kIGRpc3BsYXkgdGV4dCBmcm9tIGEgd2lraWxpbmtcclxuICAgICAqIEBwYXJhbSB3aWtpbGluayBXaWtpbGluayB0byBleHRyYWN0IHRoZSBkYXRhIGZyb20sIGVnLiBbWzIwMjEuMDEuMDEgLSBmaWxlLnR4dHxEaXNwbGF5IHRleHRdXVxyXG4gICAgICogQHJldHVybnMge1dpa2lsaW5rRGF0YX0gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRhdGUsIGZpbGVuYW1lLCBmaWxlIGV4dGVuc2lvbiBhbmQgZGlzcGxheSB0ZXh0XHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGV4dHJhY3REYXRhRnJvbVdpa2lsaW5rKHdpa2lsaW5rOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogV2lraWxpbmtEYXRhIHtcclxuICAgICAgICBpZiAod2lraWxpbmsgJiYgdHlwZW9mIHdpa2lsaW5rID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBjb25zdCBkaXNtYW50bGVkTGlua01hdGNoID0gd2lraWxpbmsubWF0Y2goL1xcW1xcWyguKz8pKD86XFwuKFxcdyspKT8oPzpcXHwoLiopKT9cXF1cXF0vKTtcclxuICAgICAgICAgICAgbGV0IGRhdGUgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRpc21hbnRsZWRMaW5rTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VuYW1lOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gRXhwZWN0ZWQgZGF0ZSBmb3JtYXQgaXMgWVlZWS5NTS5ERFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZU1hdGNoID0gZGlzbWFudGxlZExpbmtNYXRjaFsxXS5tYXRjaCgvKFxcZHs0fSlcXC4oXFxkezJ9KVxcLihcXGR7Mn0pLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZU1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVNYXRjaFsxXX0tJHtkYXRlTWF0Y2hbMl19LSR7ZGF0ZU1hdGNoWzNdfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VuYW1lOiBkaXNtYW50bGVkTGlua01hdGNoWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogZGlzbWFudGxlZExpbmtNYXRjaFsyXSxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogYCR7ZGlzbWFudGxlZExpbmtNYXRjaFsxXX0uJHtkaXNtYW50bGVkTGlua01hdGNoWzJdfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQ6IGRpc21hbnRsZWRMaW5rTWF0Y2hbM11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZGF0ZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgYmFzZW5hbWU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYSBVSUQgZnJvbSB0aGUgZ2l2ZW4gaW5wdXRcclxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gZ2VuZXJhdGUgdGhlIFVJRCBmcm9tXHJcbiAgICAgKiBAcGFyYW0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgdGhlIFVJRFxyXG4gICAgICogQHJldHVybnMgVGhlIGdlbmVyYXRlZCBVSUQgd2l0aCB0aGUgZ2l2ZW4gbGVuZ3RoXHJcbiAgICAgKiBAcmVtYXJrcyAtIFRoaXMgbWV0aG9kIHVzZXMgdGhlIE1ENSBoYXNoIGFsZ29yaXRobSB0byBnZW5lcmF0ZSB0aGUgVUlEXHJcbiAgICAgKiAtIFRoZSBVSUQgaXMgcHJlZml4ZWQgd2l0aCBhIFwiVVwiIHRvIHByZXZlbnQgdGhlIFVJRCBmcm9tIHN0YXJ0aW5nIHdpdGggYSBudW1iZXIuIFRoZSBcIlVcIiBjb3VudHMgdG8gdGhlIGxlbmd0aCBvZiB0aGUgVUlEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZW5lcmF0ZVVJRChpbnB1dDogc3RyaW5nLCBsZW5ndGggPSA4KTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBoYXNoID0gJ1UnICsgdGhpcy5tZDUoaW5wdXQpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgcmV0dXJuIGhhc2guc3Vic3RyaW5nKDAsIGxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZvcm1hdERhdGUoZGF0ZTogc3RyaW5nLCBmb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgcmVnZXhEYXRlID0gL15cXGR7NH0tXFxkezJ9LVxcZHsyfSQvO1xyXG4gICAgICAgIGlmICghcmVnZXhEYXRlLnRlc3QoZGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZvcm1hdGVkRGF0ZSA9IG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTtcclxuICAgICAgICBpZiAoZm9ybWF0ZWREYXRlID09PSAnSW52YWxpZCBkYXRlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdGVkRGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNsZWVwcyBmb3IgdGhlIGdpdmVuIGFtb3VudCBvZiBtaWxsaXNlY29uZHNcclxuICAgICAqIEBwYXJhbSBtcyBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBzbGVlcFxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIGdpdmVuIGFtb3VudCBvZiBtaWxsaXNlY29uZHNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHRleHQgaXMgcG9zc2libHkgbWFya2Rvd25cclxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIGNoZWNrXHJcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoZSB0ZXh0IGlzIHBvc3NpYmx5IG1hcmtkb3duICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICogQHJlbWFya3MgLSBUaGlzIG1ldGhvZCBjaGVja3MgaWYgdGhlIHRleHQgY29udGFpbnMgYW55IG9mIHRoZSBmb2xsb3dpbmcgc3ltYm9sczpcclxuICAgICAqIC0gYCpgLCBgX2AsIGBbYCwgYF1gLCBgPWAgYW5kIGAtYCBpZiB0aGVyZSBpcyBhIGxpbmUgYnJlYWtcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzUG9zc2libHlNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgcmVnZXhNYXJrZG93blN5bWJvbHM7XHJcbiAgICAgICAgY29uc3QgcmVnZXhMaW5lQnJlYWsgPSAvXFxyP1xcbi87XHJcbiAgICAgICAgY29uc3QgbGluZUJyZWFrID0gcmVnZXhMaW5lQnJlYWsudGVzdCh0ZXh0KTtcclxuICAgICAgICBpZiAobGluZUJyZWFrKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgbGluZSBicmVhaywgd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlIGxpc3Qgc3ltYm9sXHJcbiAgICAgICAgICAgIHJlZ2V4TWFya2Rvd25TeW1ib2xzID0gL1sqX1xcLVtcXF09XS87XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gbGluZSBicmVhaywgd2UgZG8gbm90IG5lZWQgdG8gY2hlY2sgZm9yIHRoZSBsaXN0IHN5bWJvbFxyXG4gICAgICAgICAgICByZWdleE1hcmtkb3duU3ltYm9scyA9IC9bKl9bXFxdPV0vO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlZ2V4TWFya2Rvd25TeW1ib2xzLnRlc3QodGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgYW55IG9mIHRoZSB0YWdzIGluIGB0YWdzVG9DaGVja2AgaXMgYSBzdWJzdHJpbmcgb2YgYW55IHRhZyBpbiBgdGFnc1RvQmVDaGVja2VkYFxyXG4gICAgICogQHBhcmFtIHRhZ3NUb0NoZWNrIFRoZSB0YWdzIHRvIGNoZWNrIGFzIHN1YnN0cmluZ3NcclxuICAgICAqIEBwYXJhbSB0YWdzVG9CZUNoZWNrZWQgVGhlIHRhZ3MgdG8gYmUgY2hlY2tlZCBhZ2FpbnN0XHJcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFueSB0YWcgZnJvbSBgdGFnc1RvQ2hlY2tgIGlzIGEgc3Vic3RyaW5nIG9mIGFueSB0YWcgaW4gYHRhZ3NUb0JlQ2hlY2tlZGBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzVGFnSW5jbHVkZWQodGFnc1RvQ2hlY2s6IHN0cmluZyB8IHN0cmluZ1tdLCB0YWdzVG9CZUNoZWNrZWQ6IHN0cmluZyB8IHN0cmluZ1tdKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgX3RhZ3NUb0NoZWNrOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkodGFnc1RvQ2hlY2spID9cclxuICAgICAgICAgICAgdGFnc1RvQ2hlY2sgOiAodGFnc1RvQ2hlY2sgPyBbdGFnc1RvQ2hlY2tdIDogW10pO1xyXG4gICAgICAgIGNvbnN0IF90YWdzVG9CZUNoZWNrZWQ6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheSh0YWdzVG9CZUNoZWNrZWQpID9cclxuICAgICAgICAgICAgdGFnc1RvQmVDaGVja2VkIDogKHRhZ3NUb0JlQ2hlY2tlZCA/IFt0YWdzVG9CZUNoZWNrZWRdIDogW10pO1xyXG5cclxuICAgICAgICByZXR1cm4gX3RhZ3NUb0NoZWNrLnNvbWUodGFnVG9DaGVjayA9PlxyXG4gICAgICAgICAgICBfdGFnc1RvQmVDaGVja2VkLnNvbWUodGFnVG9CZUNoZWNrZWQgPT5cclxuICAgICAgICAgICAgICAgIHRhZ1RvQmVDaGVja2VkPy5pbmNsdWRlcyh0YWdUb0NoZWNrKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gc3RyaW5nIGlzIGFuIGVtb2ppXHJcbiAgICAgKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdG8gY2hlY2tcclxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgdGhlIHN0cmluZyBpcyBhbiBlbW9qaSAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzRW1vamkoc3RyOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBlbW9qaVJlZ2V4ID0gLyhcXHB7RW1vamlfUHJlc2VudGF0aW9ufXxcXHB7RW1vaml9XFx1RkUwRikvdTtcclxuICAgICAgICByZXR1cm4gZW1vamlSZWdleC50ZXN0KHN0cik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFdpa2lsaW5rRGF0YSA9IHtcclxuICAgIGRhdGU6IERhdGUgfCB1bmRlZmluZWQ7XHJcbiAgICBiYXNlbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgZXh0ZW5zaW9uOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICBmaWxlbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgZGlzcGxheVRleHQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxufTtcclxuXHJcbiIsICJpbXBvcnQgR2xvYmFsIGZyb20gXCJzcmMvY2xhc3Nlcy9HbG9iYWxcIjtcclxuaW1wb3J0IHsgSVByb2Nlc3NvclNldHRpbmdzIH0gZnJvbSBcIi4uLy4uL2ludGVyZmFjZXMvSVByb2Nlc3NvclNldHRpbmdzXCI7XHJcbmltcG9ydCB7IE1hcmtkb3duUmVuZGVyQ2hpbGQsIHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IFRhYmxlLCB7IFRhYmxlSGVhZGVyIH0gZnJvbSBcIi4uL1RhYmxlXCI7XHJcbmltcG9ydCBIZWxwZXIgZnJvbSBcIi4uL0hlbHBlclwiO1xyXG5pbXBvcnQgUmVkcmF3YWJsZUJsb2NrUmVuZGVyQ29tcG9uZW50IGZyb20gXCIuL1JlZHJhd2FibGVCbG9ja1JlbmRlckNvbXBvbmVudFwiO1xyXG5pbXBvcnQgSVByak1vZGVsIGZyb20gXCJzcmMvaW50ZXJmYWNlcy9JUHJqTW9kZWxcIjtcclxuaW1wb3J0IExuZyBmcm9tIFwic3JjL2NsYXNzZXMvTG5nXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBUYWJsZUJsb2NrUmVuZGVyQ29tcG9uZW50PFQgZXh0ZW5kcyBJUHJqTW9kZWw8dW5rbm93bj4+IGltcGxlbWVudHMgUmVkcmF3YWJsZUJsb2NrUmVuZGVyQ29tcG9uZW50IHtcclxuICAgIC8vI3JlZ2lvbiBHZW5lcmFsIHByb3BlcnRpZXNcclxuICAgIHByb3RlY3RlZCBnbG9iYWwgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKTtcclxuICAgIHByb3RlY3RlZCBsb2dnZXIgPSB0aGlzLmdsb2JhbC5sb2dnZXI7XHJcbiAgICBwcm90ZWN0ZWQgbWV0YWRhdGFDYWNoZSA9IHRoaXMuZ2xvYmFsLm1ldGFkYXRhQ2FjaGUuQ2FjaGU7XHJcbiAgICBwcm90ZWN0ZWQgZmlsZUNhY2hlID0gdGhpcy5nbG9iYWwuZmlsZUNhY2hlO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvLyNyZWdpb24gQ29tcG9uZW50IHByb3BlcnRpZXNcclxuICAgIHByb3RlY3RlZCBwcm9jZXNzb3JTZXR0aW5nczogSVByb2Nlc3NvclNldHRpbmdzO1xyXG4gICAgcHJvdGVjdGVkIGNvbXBvbmVudDogTWFya2Rvd25SZW5kZXJDaGlsZDtcclxuICAgIHByb3RlY3RlZCBzZXR0aW5nczogdW5rbm93bjtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLy8jcmVnaW9uIE1vZGVsc1xyXG4gICAgcHJvdGVjdGVkIG1vZGVsczogVFtdO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvLyNyZWdpb24gSFRNTCBwcm9wZXJ0aWVzXHJcbiAgICBwcm90ZWN0ZWQgdGFibGU6IFRhYmxlO1xyXG4gICAgcHJvdGVjdGVkIHRhYmxlSGVhZGVyczogVGFibGVIZWFkZXJbXVxyXG4gICAgcHJvdGVjdGVkIGhlYWRlckNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgdGFibGVDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IElQcm9jZXNzb3JTZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc29yU2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG5ldyBNYXJrZG93blJlbmRlckNoaWxkKHRoaXMucHJvY2Vzc29yU2V0dGluZ3MuY29udGFpbmVyKTtcclxuICAgICAgICAvL3RoaXMucGFyc2VTZXR0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGRzIHRoZSBjb21wb25lbnQgZmlyc3QgdGltZS5cclxuICAgICAqIEByZW1hcmtzIENhbGxzIHRoZSBgZHJhd2AgbWV0aG9kLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgYnVpbGQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhdygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGRzIHRoZSBgdGFibGVDb250YWluZXJgIGFuZCBgaGVhZGVyQ29udGFpbmVyYCBlbGVtZW50cy5cclxuICAgICAqIEByZW1hcmtzIC0gQ2FsbCB0aGlzIG1ldGhvZCB0byBidWlsZCB0aGUgYmFzZSBzdHJ1Y3R1cmUgZmlyc3QuXHJcbiAgICAgKiAtIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGJ1aWxkIHRoZSBvdGhlciBlbGVtZW50cy5cclxuICAgICAqIEByZW1hcmtzIC0gQnVpbGQgdGhlIGB0YWJsZUNvbnRhaW5lcmAgYW5kIGBoZWFkZXJDb250YWluZXJgIGVsZW1lbnRzLlxyXG4gICAgICogLSBCdWlsZCB0aGUgYGNvbnRyb2xlIGJsb2NrYCA9PiBhZGQgYSByZWZyZXNoIGJ1dHRvbiB3aGljaCBjYWxscyB0aGUgYHJlZHJhd2AgbWV0aG9kLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgZHJhdygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvL0NyZWF0ZSBoZWFkZXIgY29udGFpbmVyXHJcbiAgICAgICAgdGhpcy5oZWFkZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnByb2Nlc3NvclNldHRpbmdzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmhlYWRlckNvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5oZWFkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLWNvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICAvL0NyZWF0ZSBjb250cm9sZSBibG9ja1xyXG4gICAgICAgIGNvbnN0IGJsb2NrQ29udHJvbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmhlYWRlckNvbnRhaW5lci5hcHBlbmRDaGlsZChibG9ja0NvbnRyb2xlKTtcclxuICAgICAgICBibG9ja0NvbnRyb2xlLmNsYXNzTGlzdC5hZGQoJ2Jsb2NrLWNvbnRyb2xlJyk7XHJcblxyXG4gICAgICAgIC8vQ3JlYXRlIHJlZnJlc2ggQnV0dG9uXHJcbiAgICAgICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBibG9ja0NvbnRyb2xlLmFwcGVuZENoaWxkKHJlZnJlc2hCdXR0b24pO1xyXG4gICAgICAgIHJlZnJlc2hCdXR0b24uY2xhc3NMaXN0LmFkZCgncmVmcmVzaC1idXR0b24nKTtcclxuICAgICAgICByZWZyZXNoQnV0dG9uLnRpdGxlID0gTG5nLmd0KFwiUmVmcmVzaFwiKTtcclxuICAgICAgICByZWZyZXNoQnV0dG9uLmhyZWYgPSBcIiNcIjtcclxuICAgICAgICBzZXRJY29uKHJlZnJlc2hCdXR0b24sIFwicmVmcmVzaC1jd1wiKTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudC5yZWdpc3RlckRvbUV2ZW50KHJlZnJlc2hCdXR0b24sICdjbGljaycsIGFzeW5jIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZHJhdygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRhYmxlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzb3JTZXR0aW5ncy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50YWJsZUNvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy50YWJsZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0YWJsZS1jb250YWluZXInKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZHJhd3MgdGhlIGNvbXBvbmVudCBvbiByZXF1ZXN0LiBDbGVhcnMgdGhlIGNvbnRhaW5lciBhbmQgY2FsbHMgdGhlIGBkcmF3YCBtZXRob2QuXHJcbiAgICAgKiBAcmVtYXJrcyBUaGlzIG1ldGhvZGUgY2xlYXJzIHRoZSBjb250YWluZXIgYW5kIGNhbGxzIHRoZSBgZHJhd2AgbWV0aG9kZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIHJlZHJhdygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnByb2Nlc3NvclNldHRpbmdzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRyYXcoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbGl6ZXMgdGhlIGhlYWRlci5cclxuICAgICAqIEByZW1hcmtzIC0gUmVtb3ZlcyB0aGUgYGRpc2FibGVgIGNsYXNzIGZyb20gdGhlIGhlYWRlci5cclxuICAgICAqIC0gVGhlIGhlYWRlciBpcyBub3QgZ3JheWVkIG91dCBhbnltb3JlLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgbm9ybWFsaXplSGVhZGVyKCkge1xyXG4gICAgICAgIHRoaXMuaGVhZGVyQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdkaXNhYmxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHcmF5cyBvdXQgdGhlIGhlYWRlci5cclxuICAgICAqIEByZW1hcmtzIC0gQWRkcyB0aGUgYGRpc2FibGVgIGNsYXNzIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgKiAtIFRoZSBoZWFkZXIgaXMgZ3JheWVkIG91dC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGdyYXlPdXRIZWFkZXIoKSB7XHJcbiAgICAgICAgdGhpcy5oZWFkZXJDb250YWluZXIuYWRkQ2xhc3MoJ2Rpc2FibGUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlIHRoZSBzZXR0aW5ncyBmcm9tIHRoZSBNYXJrZG93biBjb2RlIGJsb2NrLlxyXG4gICAgICogQHJlbWFya3MgT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcGFyc2UgdGhlIHNldHRpbmdzLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcGFyc2VTZXR0aW5ncygpOiB2b2lkO1xyXG5cclxuICAgIHByb3RlY3RlZCBnZXRVSUQobW9kZWw6IFQpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBIZWxwZXIuZ2VuZXJhdGVVSUQobW9kZWwuZmlsZS5wYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG1vZGVscy5cclxuICAgICAqIEByZW1hcmtzIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHJldHVybiB0aGUgbW9kZWxzLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0TW9kZWxzKCk6IFByb21pc2U8VFtdPlxyXG59XHJcbiIsICJbXHJcbiAgICB7XHJcbiAgICAgICAgXCJsYW5nXCI6IFwiZW5cIixcclxuICAgICAgICBcInRyYW5zbGF0aW9uc1wiOiB7XHJcbiAgICAgICAgICAgIFwiRG9jdW1lbnRUeXBlXCI6IFwiVHlwZVwiLFxyXG4gICAgICAgICAgICBcIkRhdGVcIjogXCJEYXRlXCIsXHJcbiAgICAgICAgICAgIFwiU3ViamVjdFwiOiBcIlN1YmplY3RcIixcclxuICAgICAgICAgICAgXCJTZW5kZXJcIjogXCJTZW5kZXJcIixcclxuICAgICAgICAgICAgXCJSZWNpcGllbnRcIjogXCJSZWNpcGllbnRcIixcclxuICAgICAgICAgICAgXCJTZW5kUmVjaXBcIjogXCJTbmQuL1JjcC5cIixcclxuICAgICAgICAgICAgXCJDb250ZW50XCI6IFwiQ29udGVudFwiLFxyXG4gICAgICAgICAgICBcIkRlbGl2ZXJ5RGF0ZVwiOiBcIkRlbGl2ZXJ5IGRhdGVcIixcclxuICAgICAgICAgICAgXCJUYWdzXCI6IFwiVGFnc1wiLFxyXG4gICAgICAgICAgICBcIkZyb21cIjogXCJmcm9tOlwiLFxyXG4gICAgICAgICAgICBcIlRvXCI6IFwidG86XCIsXHJcbiAgICAgICAgICAgIFwiUmVmcmVzaFwiOiBcIlJlZnJlc2hcIixcclxuICAgICAgICAgICAgXCJEb2N1bWVudHNcIjogXCJEb2N1bWVudHNcIixcclxuICAgICAgICAgICAgXCJIaWRlRG9jdW1lbnRzXCI6IFwiSGlkZSBkb2N1bWVudHNcIixcclxuICAgICAgICAgICAgXCJDbHVzdGVyXCI6IFwiRG9jdW1lbnQgQ2x1c3RlclwiLFxyXG4gICAgICAgICAgICBcIkZpbHRlclwiOiBcIkZpbHRlcjpcIixcclxuICAgICAgICAgICAgXCJNYXhTaG93bkVudHJ5c1wiOiBcIk1heC4gc2hvd24gZW50cmllc1wiLFxyXG4gICAgICAgICAgICBcIlNlYXJjaFwiOiBcIlNlYXJjaFwiLFxyXG4gICAgICAgICAgICBcIkRvY3VtZW50RGF0ZVwiOiBcIkRvY3VtZW50IGRhdGVcIixcclxuICAgICAgICAgICAgXCJNZXRhZGF0YUZpbGVcIjogXCJNZXRhZGF0YSBmaWxlXCIsXHJcbiAgICAgICAgICAgIFwiUERGRmlsZVwiOiBcIlBERiBmaWxlXCIsXHJcbiAgICAgICAgICAgIFwiVHJhZmljTGlnaHRcIjogXCJcdUQ4M0RcdURFQTZcIixcclxuICAgICAgICAgICAgXCJEZXNjcmlwdGlvblwiOiBcIkRlc2NyaXB0aW9uXCIsXHJcbiAgICAgICAgICAgIFwiUHJpb3JpdHlcIjogXCJQcmlvLlwiLFxyXG4gICAgICAgICAgICBcIlN0YXR1c1wiOiBcIlN0YXR1c1wiLFxyXG4gICAgICAgICAgICBcIkR1ZURhdGVcIjogXCJEdWUgZGF0ZVwiLFxyXG4gICAgICAgICAgICBcIlByaW9yaXR5VGV4dFwiOiBcIlByaW9yaXR5XCIsXHJcbiAgICAgICAgICAgIFwiSGlnaFByaW9yaXR5XCI6IFwiSGlnaCBwcmlvcml0eVwiLFxyXG4gICAgICAgICAgICBcIk1lZGl1bVByaW9yaXR5XCI6IFwiTWVkaXVtIHByaW9yaXR5XCIsXHJcbiAgICAgICAgICAgIFwiTG93UHJpb3JpdHlcIjogXCJMb3cgcHJpb3JpdHlcIixcclxuICAgICAgICAgICAgXCJOb1ByaW9yaXR5XCI6IFwiTm8gcHJpb3JpdHlcIixcclxuICAgICAgICAgICAgXCJUaXRsZVwiOiBcIlRpdGxlXCIsXHJcbiAgICAgICAgICAgIFwiU3RhdHVzQWN0aXZlXCI6IFwiQWN0aXZlXCIsXHJcbiAgICAgICAgICAgIFwiU3RhdHVzV2FpdGluZ1wiOiBcIldhaXRpbmdcIixcclxuICAgICAgICAgICAgXCJTdGF0dXNMYXRlclwiOiBcIkxhdGVyXCIsXHJcbiAgICAgICAgICAgIFwiU3RhdHVzU29tZWRheVwiOiBcIlNvbWVkYXlcIixcclxuICAgICAgICAgICAgXCJTdGF0dXNEb25lXCI6IFwiRG9uZVwiLFxyXG4gICAgICAgICAgICBcIkRvbmVcIjogXCJEb25lXCIsXHJcbiAgICAgICAgICAgIFwiVG9waWNcIjogXCJUb3BpY1wiLFxyXG4gICAgICAgICAgICBcIlByb2plY3RcIjogXCJQcm9qZWN0XCIsXHJcbiAgICAgICAgICAgIFwiVGFza1wiOiBcIlRhc2tcIixcclxuICAgICAgICAgICAgXCJTaG93TWV0YWRhdGFGaWxlXCI6IFwiU2hvdyBtZXRhZGF0YSBmaWxlXCJcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibGFuZ1wiOiBcImRlXCIsXHJcbiAgICAgICAgXCJ0cmFuc2xhdGlvbnNcIjoge1xyXG4gICAgICAgICAgICBcIkRvY3VtZW50VHlwZVwiOiBcIlR5cFwiLFxyXG4gICAgICAgICAgICBcIkRhdGVcIjogXCJEYXR1bVwiLFxyXG4gICAgICAgICAgICBcIlN1YmplY3RcIjogXCJCZXRyZWZmXCIsXHJcbiAgICAgICAgICAgIFwiU2VuZGVyXCI6IFwiQWJzZW5kZXJcIixcclxuICAgICAgICAgICAgXCJSZWNpcGllbnRcIjogXCJFbXBmXHUwMEU0bmdlclwiLFxyXG4gICAgICAgICAgICBcIlNlbmRSZWNpcFwiOiBcIkFicy4vRW1wZi5cIixcclxuICAgICAgICAgICAgXCJDb250ZW50XCI6IFwiSW5oYWx0XCIsXHJcbiAgICAgICAgICAgIFwiRGVsaXZlcnlEYXRlXCI6IFwiWnVzdGVsbGRhdHVtXCIsXHJcbiAgICAgICAgICAgIFwiVGFnc1wiOiBcIlRhZ3NcIixcclxuICAgICAgICAgICAgXCJGcm9tXCI6IFwidm9uOlwiLFxyXG4gICAgICAgICAgICBcIlRvXCI6IFwiYW46XCIsXHJcbiAgICAgICAgICAgIFwiUmVmcmVzaFwiOiBcIkFrdHVhbGlzaWVyZW5cIixcclxuICAgICAgICAgICAgXCJEb2N1bWVudHNcIjogXCJEb2t1bWVudGVcIixcclxuICAgICAgICAgICAgXCJIaWRlRG9jdW1lbnRzXCI6IFwiQXVzZ2VibGVuZGV0ZSBEb2t1bWVudGVcIixcclxuICAgICAgICAgICAgXCJDbHVzdGVyXCI6IFwiRG9rdW1lbnRlbiBDbHVzdGVyXCIsXHJcbiAgICAgICAgICAgIFwiRmlsdGVyXCI6IFwiRmlsdGVyOlwiLFxyXG4gICAgICAgICAgICBcIk1heFNob3duRW50cnlzXCI6IFwiTWF4LiBhbmdlemVpZ3RlIEVpbnRyXHUwMEU0Z2VcIixcclxuICAgICAgICAgICAgXCJTZWFyY2hcIjogXCJTdWNoZVwiLFxyXG4gICAgICAgICAgICBcIkRvY3VtZW50RGF0ZVwiOiBcIkRva3VtZW50ZW4gRGF0dW1cIixcclxuICAgICAgICAgICAgXCJNZXRhZGF0YUZpbGVcIjogXCJNZXRhZGF0ZW4gRGF0ZWlcIixcclxuICAgICAgICAgICAgXCJQREZGaWxlXCI6IFwiUERGIERhdGVpXCIsXHJcbiAgICAgICAgICAgIFwiVHJhZmljTGlnaHRcIjogXCJcdUQ4M0RcdURFQTZcIixcclxuICAgICAgICAgICAgXCJEZXNjcmlwdGlvblwiOiBcIkJlc2NocmVpYnVuZ1wiLFxyXG4gICAgICAgICAgICBcIlByaW9yaXR5XCI6IFwiUHJpby5cIixcclxuICAgICAgICAgICAgXCJTdGF0dXNcIjogXCJTdGF0dXNcIixcclxuICAgICAgICAgICAgXCJEdWVEYXRlXCI6IFwiRlx1MDBFNGxsaWdrLi1EYXR1bVwiLFxyXG4gICAgICAgICAgICBcIlByaW9yaXR5VGV4dFwiOiBcIlByaW9yaXRcdTAwRTR0XCIsXHJcbiAgICAgICAgICAgIFwiSGlnaFByaW9yaXR5XCI6IFwiSG9oZSBQcmlvcml0XHUwMEU0dFwiLFxyXG4gICAgICAgICAgICBcIk1lZGl1bVByaW9yaXR5XCI6IFwiTWl0dGxlcmUgUHJpb3JpdFx1MDBFNHRcIixcclxuICAgICAgICAgICAgXCJMb3dQcmlvcml0eVwiOiBcIk5pZWRyaWdlIFByaW9yaXRcdTAwRTR0XCIsXHJcbiAgICAgICAgICAgIFwiTm9Qcmlvcml0eVwiOiBcIktlaW5lIFByaW9yaXRcdTAwRTR0XCIsXHJcbiAgICAgICAgICAgIFwiVGl0bGVcIjogXCJUaXRlbFwiLFxyXG4gICAgICAgICAgICBcIlN0YXR1c0FjdGl2ZVwiOiBcIkFrdGl2XCIsXHJcbiAgICAgICAgICAgIFwiU3RhdHVzV2FpdGluZ1wiOiBcIldhcnRlblwiLFxyXG4gICAgICAgICAgICBcIlN0YXR1c0xhdGVyXCI6IFwiU3BcdTAwRTR0ZXJcIixcclxuICAgICAgICAgICAgXCJTdGF0dXNTb21lZGF5XCI6IFwiSXJnZW5kd2FublwiLFxyXG4gICAgICAgICAgICBcIlN0YXR1c0RvbmVcIjogXCJFcmxlZGlndFwiLFxyXG4gICAgICAgICAgICBcIkRvbmVcIjogXCJFcmxlZGlndFwiLFxyXG4gICAgICAgICAgICBcIlRvcGljXCI6IFwiVGhlbWFcIixcclxuICAgICAgICAgICAgXCJQcm9qZWN0XCI6IFwiUHJvamVrdFwiLFxyXG4gICAgICAgICAgICBcIlRhc2tcIjogXCJBdWZnYWJlXCIsXHJcbiAgICAgICAgICAgIFwiU2hvd01ldGFkYXRhRmlsZVwiOiBcIk1ldGFkYXRlbiBEYXRlaSBhbnplaWdlblwiXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5dXHJcbiIsICJpbXBvcnQgVHJhbnNsYXRpb25zIGZyb20gJy4uL3RyYW5zbGF0aW9ucy5qc29uJztcclxuaW1wb3J0IEdsb2JhbCBmcm9tIFwiLi9HbG9iYWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExuZyB7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB0cmFuc2xhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cclxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byB0cmFuc2xhdGUuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgdHJhbnNsYXRpb24uXHJcbiAgICAgKiBAcmVtYXJrcyAtIElmIHRoZSB0cmFuc2xhdGlvbiBpcyBub3QgZm91bmQsIHRoZSBrZXkgaXMgcmV0dXJuZWQuXHJcbiAgICAgKiAtIExvb2sgYXQgdGhlIGB0cmFuc2xhdGlvbnMuanNvbmAgZmlsZSB0byBzZWUgYWxsIGF2YWlsYWJsZSB0cmFuc2xhdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ3Qoa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGxvZ2dlciA9IEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlclxyXG4gICAgICAgIGNvbnN0IGxhbmcgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5zZXR0aW5ncy5sYW5ndWFnZTtcclxuICAgICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IChUcmFuc2xhdGlvbnMgYXMgVHJhbnNsYXRpb25zKTtcclxuICAgICAgICBjb25zdCBsYW5ndWFnZSA9IHRyYW5zbGF0aW9uLmZpbmQoKHYpID0+IHYubGFuZyA9PT0gbGFuZyk7XHJcbiAgICAgICAgaWYgKGxhbmd1YWdlKSB7XHJcbiAgICAgICAgICAgIGlmIChsYW5ndWFnZS50cmFuc2xhdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhbmd1YWdlLnRyYW5zbGF0aW9uc1trZXldIGFzIHN0cmluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2FybihgVHJhbnNsYXRpb24gZm9yIGtleSAke2tleX0gbm90IGZvdW5kYCk7XHJcbiAgICAgICAgcmV0dXJuIGtleTtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIExhbmd1YWdlVHJhbnNsYXRpb25zIHtcclxuICAgIGxhbmc6IHN0cmluZztcclxuICAgIHRyYW5zbGF0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxufVxyXG50eXBlIFRyYW5zbGF0aW9ucyA9IExhbmd1YWdlVHJhbnNsYXRpb25zW107IiwgIi8vIE5vdGU6IFNlYXJjaExpYiBjbGFzc1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyB0aGUgc2VhcmNoIHRleHQgaW50byBhbiBhcnJheSBvZiBvYmplY3RzIHRoYXQgcmVwcmVzZW50IHRoZSBzZWFyY2ggdGVybXNcclxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IFRoZSBzZWFyY2ggdGV4dCB0byBwYXJzZVxyXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICAgICAqIC0gdGVybTogVGhlIHNlYXJjaCB0ZXJtXHJcbiAgICAgKiAtIG5lZ2F0ZTogV2hldGhlciB0aGUgdGVybSBzaG91bGQgYmUgbmVnYXRlZFxyXG4gICAgICogLSBpc09wZXJhdG9yOiBXaGV0aGVyIHRoZSB0ZXJtIGlzIGFuIG9wZXJhdG9yXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwYXJzZVNlYXJjaFRleHQoc2VhcmNoVGV4dDogc3RyaW5nKTogU2VhcmNoVGVybXNBcnJheSB7XHJcbiAgICAgICAgc2VhcmNoVGV4dCA9IHNlYXJjaFRleHQudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlYXJjaCB0ZXh0IGNvbnRhaW5zIHF1b3RlczogSWYgbm90LCByZXR1cm4gdGhlIHNlYXJjaCB0ZXh0IGFzIGEgc2luZ2xlIHRlcm0gKG5vIGNvbXBsZXggc2VhcmNoIGxvZ2ljKVxyXG4gICAgICAgIGlmICghc2VhcmNoVGV4dC5pbmNsdWRlcygnXCInKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gW3sgdGVybTogc2VhcmNoVGV4dC50cmltKCksIG5lZ2F0ZTogZmFsc2UsIGlzT3BlcmF0b3I6IGZhbHNlIH1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGVybXMgPSBbXTtcclxuICAgICAgICBsZXQgdGVybSA9ICcnO1xyXG4gICAgICAgIGxldCBpblF1b3RlcyA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBuZWdhdGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBjaGFyIG9mIHNlYXJjaFRleHQpIHtcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpblF1b3Rlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIHRlcm0gd2l0aCBuZWdhdGlvbiBzdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICB0ZXJtcy5wdXNoKHsgdGVybTogdGVybS50b0xvd2VyQ2FzZSgpLCBuZWdhdGU6IG5lZ2F0ZSwgaXNPcGVyYXRvcjogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVybSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZ2F0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5RdW90ZXMgPSAhaW5RdW90ZXM7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5RdW90ZXMpIHtcclxuICAgICAgICAgICAgICAgIHRlcm0gKz0gY2hhcjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFyID09PSAnICcpIHtcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBzcGFjZXMgb3V0c2lkZSBvZiBxdW90ZXNcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFsnJicsICd8JywgJyEnXS5pbmNsdWRlcyhjaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlcm0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlcm1zLnB1c2goeyB0ZXJtOiB0ZXJtLCBuZWdhdGU6IG5lZ2F0ZSwgaXNPcGVyYXRvcjogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVybSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZ2F0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09ICchJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZ2F0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlcm1zLnB1c2goeyB0ZXJtOiBjaGFyLCBuZWdhdGU6IGZhbHNlLCBpc09wZXJhdG9yOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVybSArPSBjaGFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGVybS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRlcm1zLnB1c2goeyB0ZXJtOiB0ZXJtLCBuZWdhdGU6IG5lZ2F0ZSwgaXNPcGVyYXRvcjogZmFsc2UgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBhbmQgYWRkIHRoZSBkZWZhdWx0IEFORCBvcGVyYXRvclxyXG4gICAgICAgIGlmICh0ZXJtcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCB0ZXJtcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRlcm1zW2ldLmlzT3BlcmF0b3IgJiYgIXRlcm1zW2kgKyAxXS5pc09wZXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IEFORCBvcGVyYXRvciBiZXR3ZWVuIHR3byBub24tb3BlcmF0b3IgdGVybXNcclxuICAgICAgICAgICAgICAgICAgICB0ZXJtcy5zcGxpY2UoaSArIDEsIDAsIHsgdGVybTogJyYnLCBuZWdhdGU6IGZhbHNlLCBpc09wZXJhdG9yOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaSArPSAyOyAvLyBKdW1wIHRvIHRoZSBuZXh0IHBhaXIgb2YgdGVybXNcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXJtcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgdGhlIHNlYXJjaCBsb2dpYyB0byB0aGUgZ2l2ZW4gdGV4dCBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gdGVybXMgVGhlIHNlYXJjaCB0ZXJtc1xyXG4gICAgICogQHBhcmFtIHRleHRDb250ZW50IFRoZSB0ZXh0IGNvbnRlbnQgdG8gYXBwbHkgdGhlIHNlYXJjaCBsb2dpYyB0b1xyXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGUgdGV4dCBjb250ZW50IG1hdGNoZXMgdGhlIHNlYXJjaCB0ZXJtcyAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFwcGx5U2VhcmNoTG9naWModGVybXM6IFNlYXJjaFRlcm1zQXJyYXksIHRleHRDb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICB0ZXh0Q29udGVudCA9IHRleHRDb250ZW50LnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIC8vIElmIG9ubHkgb25lIHRlcm0gaXMgcHJlc2VudC4uXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRlcm1zWzBdLm5lZ2F0ZSA/ICF0ZXh0Q29udGVudC5pbmNsdWRlcyh0ZXJtc1swXS50ZXJtKSA6IHRleHRDb250ZW50LmluY2x1ZGVzKHRlcm1zWzBdLnRlcm0pO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRlcm1zLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yT2JqID0gdGVybXNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRUZXJtT2JqID0gdGVybXNbaSArIDFdO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbmV4dFRlcm1NYXRjaCA9IG5leHRUZXJtT2JqLm5lZ2F0ZSA/ICF0ZXh0Q29udGVudC5pbmNsdWRlcyhuZXh0VGVybU9iai50ZXJtKSA6IHRleHRDb250ZW50LmluY2x1ZGVzKG5leHRUZXJtT2JqLnRlcm0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wZXJhdG9yT2JqLnRlcm0gPT09ICcmJykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmIG5leHRUZXJtTWF0Y2g7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3BlcmF0b3JPYmoudGVybSA9PT0gJ3wnKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgfHwgbmV4dFRlcm1NYXRjaDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBzZWFyY2ggdGVybVxyXG4gKiBAcHJvcGVydHkgdGVybSBUaGUgc2VhcmNoIHRlcm1cclxuICogQHByb3BlcnR5IG5lZ2F0ZSBXaGV0aGVyIHRoZSB0ZXJtIHNob3VsZCBiZSBuZWdhdGVkXHJcbiAqIEBwcm9wZXJ0eSBpc09wZXJhdG9yIFdoZXRoZXIgdGhlIHRlcm0gaXMgYW4gb3BlcmF0b3JcclxuICovXHJcbmV4cG9ydCB0eXBlIFNlYXJjaFRlcm0gPSB7XHJcbiAgICB0ZXJtOiBzdHJpbmc7XHJcbiAgICBuZWdhdGU6IGJvb2xlYW47XHJcbiAgICBpc09wZXJhdG9yOiBib29sZWFuO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gYXJyYXkgb2Ygc2VhcmNoIHRlcm1zXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBTZWFyY2hUZXJtc0FycmF5ID0gQXJyYXk8U2VhcmNoVGVybT47IiwgImltcG9ydCBHbG9iYWwgZnJvbSBcIi4uL2NsYXNzZXMvR2xvYmFsXCI7XHJcbmltcG9ydCBIZWxwZXIgZnJvbSBcIi4vSGVscGVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJsZSB7XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGEoKTogU3RydWN0ZWRUYWJsZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhYmxlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBsb2dnZXIgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5sb2dnZXI7XHJcbiAgICBwcml2YXRlIF90YWJsZTogU3RydWN0ZWRUYWJsZTtcclxuICAgIC8qKlxyXG4gICAgICogQSBsaXN0IG9mIHJvdyBwbGFjZWhvbGRlcnNcclxuICAgICAqIEByZW1hcmtzIC0gVGhlIHJvdyBwbGFjZWhvbGRlcnMgYXJlIHVzZWQgdG8ga2VlcCB0aGUgb3JkZXIgb2YgdGhlIHJvd3Mgd2hlbiBoaWRpbmcgYW5kIHNob3dpbmcgcm93cy5cclxuICAgICAqIC0gVGhlIHBsYWNlaG9sZGVycyByb3dzIGFyZSBlbXB0eSBhbmQgaGF2ZSB0aGUgaWQgYGRlZmF1bHRJZHMucGxhY2Vob2xkZXJgIChkZWZhdWx0OiBgcGxhY2Vob2xkZXItcm93YCkuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3Jvd1BsYWNlaG9sZGVyczogUm93UGxhY2Vob2xkZXJbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfaGVhZGVyczogVGFibGVIZWFkZXJbXTtcclxuICAgIHByaXZhdGUgX3RhYmxlSWQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3RhYmxlQ2xhc3NMaXN0OiBzdHJpbmdbXSB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgX3Zpc2libGVSb3dzID0gMDtcclxuICAgIHByaXZhdGUgX2hpZGRlblJvd3MgPSAwO1xyXG4gICAgLy8gICBEZWZhdWx0IGNsYXNzZXMgIC8vXHJcbiAgICBwcml2YXRlIGRlZmF1bHRDbGFzc2VzID0ge1xyXG4gICAgICAgIHRhYmxlOiBbJ3Byai10YWJsZSddLFxyXG4gICAgICAgIGhlYWRlcjogWydwcmotdGFibGUtaGVhZGVyJ10sXHJcbiAgICAgICAgaGVhZGVyUm93OiBbJ3Byai10YWJsZS1oZWFkZXItcm93J10sXHJcbiAgICAgICAgaGVhZGVyQ2VsbDogWydwcmotdGFibGUtaGVhZGVyLWNlbGwnXSxcclxuICAgICAgICBib2R5OiBbJ3Byai10YWJsZS1ib2R5J10sXHJcbiAgICAgICAgcm93OiBbJ3Byai10YWJsZS1yb3cnLCAncHJqLXRhYmxlLXJvdy1ob3ZlciddLFxyXG4gICAgICAgIGNlbGw6IFsncHJqLXRhYmxlLWNlbGwnXSxcclxuICAgICAgICBlbW9qaUNlbGw6IFsnZW1vamktY2VsbCddLFxyXG5cclxuICAgICAgICBoaWRkZW5Sb3c6ICdoaWRkZW4tcm93JyxcclxuICAgICAgICBldmVuUm93OiAnZXZlbi1yb3cnLFxyXG4gICAgICAgIG9kZFJvdzogJ29kZC1yb3cnXHJcbiAgICB9O1xyXG4gICAgLy8gRGVmYXVsdCBJRHMgXHJcbiAgICBwcml2YXRlIGRlZmF1bHRJZHMgPSB7XHJcbiAgICAgICAgcGxhY2Vob2xkZXI6IFwicGxhY2Vob2xkZXItcm93XCJcclxuICAgIH07XHJcbiAgICAvLyAvLyAvLy8vIC8vIC8vLy8gLy8gLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFibGVcclxuICAgICAqIEBwYXJhbSB0YWJsZUhlYWRlcnMgQSBsaXN0IG9mIHRhYmxlIGhlYWRlcnNcclxuICAgICAqIEBwYXJhbSBpZCBUaGUgSUQgb2YgdGhlIHRhYmxlXHJcbiAgICAgKiBAcGFyYW0gY2xhc3NMaXN0IFRoZSBjbGFzcyBsaXN0IG9mIHRoZSB0YWJsZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0YWJsZUhlYWRlcnM6IFRhYmxlSGVhZGVyW10sIGlkOiBzdHJpbmcsIGNsYXNzTGlzdDogc3RyaW5nW10gfCB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gdGFibGVIZWFkZXJzO1xyXG4gICAgICAgIHRoaXMuX3RhYmxlSWQgPSBpZDtcclxuICAgICAgICB0aGlzLl90YWJsZUNsYXNzTGlzdCA9IGNsYXNzTGlzdDtcclxuICAgICAgICB0aGlzLl90YWJsZSA9IHRoaXMuY3JlYXRlVGFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbHRlIHRoZSBjb21wbGV0ZSB0YWJsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVjb25zdHJ1Y3RvcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl90YWJsZS50YWJsZS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVRhYmxlKCk6IFN0cnVjdGVkVGFibGUge1xyXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgICB0YWJsZS5pZCA9IHRoaXMuX3RhYmxlSWQ7XHJcbiAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCguLi50aGlzLmRlZmF1bHRDbGFzc2VzLnRhYmxlKTtcclxuICAgICAgICBpZiAodGhpcy5fdGFibGVDbGFzc0xpc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFibGVDbGFzc0xpc3QuZm9yRWFjaChjbGFzc0l0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZChjbGFzc0l0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRhYmxlSGVhZGVyID0gdGFibGUuY3JlYXRlVEhlYWQoKTtcclxuICAgICAgICB0YWJsZUhlYWRlci5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuZGVmYXVsdENsYXNzZXMuaGVhZGVyKTtcclxuICAgICAgICBjb25zdCB0YWJsZUhlYWRlclJvdyA9IHRhYmxlSGVhZGVyLmluc2VydFJvdygpO1xyXG4gICAgICAgIHRhYmxlSGVhZGVyUm93LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5kZWZhdWx0Q2xhc3Nlcy5oZWFkZXJSb3cpO1xyXG5cclxuICAgICAgICBjb25zdCB0YWJsZUhlYWRlckNlbGxzOiBIVE1MVGFibGVDZWxsRWxlbWVudFtdID0gW107XHJcbiAgICAgICAgdGhpcy5faGVhZGVycy5mb3JFYWNoKGhlYWRlciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlSGVhZGVyQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XHJcbiAgICAgICAgICAgIHRhYmxlSGVhZGVyQ2VsbC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuZGVmYXVsdENsYXNzZXMuaGVhZGVyQ2VsbCk7XHJcbiAgICAgICAgICAgIHRhYmxlSGVhZGVyQ2VsbC5pZCA9IHRoaXMubWFrZVNhZmVGb3JJZChoZWFkZXIudGV4dCk7XHJcbiAgICAgICAgICAgIHRhYmxlSGVhZGVyQ2VsbC50ZXh0Q29udGVudCA9IGhlYWRlci50ZXh0O1xyXG4gICAgICAgICAgICBpZiAoaGVhZGVyLmhlYWRlckNsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXIuaGVhZGVyQ2xhc3MuZm9yRWFjaChjbGFzc0l0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlSGVhZGVyQ2VsbC5jbGFzc0xpc3QuYWRkKGNsYXNzSXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YWJsZUhlYWRlckNlbGxzLnB1c2godGFibGVIZWFkZXJDZWxsKTtcclxuICAgICAgICAgICAgdGFibGVIZWFkZXJSb3cuYXBwZW5kQ2hpbGQodGFibGVIZWFkZXJDZWxsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB0YWJsZUJvZHkgPSB0YWJsZS5jcmVhdGVUQm9keSgpO1xyXG4gICAgICAgIHRhYmxlQm9keS5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuZGVmYXVsdENsYXNzZXMuYm9keSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0cnVjdGVkVGFibGUgPSB7XHJcbiAgICAgICAgICAgIHRhYmxlOiB0YWJsZSxcclxuICAgICAgICAgICAgaGVhZGVyOiB0YWJsZUhlYWRlcixcclxuICAgICAgICAgICAgaGVhZGVyUm93OiB0YWJsZUhlYWRlclJvdyxcclxuICAgICAgICAgICAgaGVhZGVyQ2VsbHM6IHRhYmxlSGVhZGVyQ2VsbHMsXHJcbiAgICAgICAgICAgIGJvZHk6IHRhYmxlQm9keSxcclxuICAgICAgICAgICAgcm93czogW11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc3RydWN0ZWRUYWJsZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSByb3cgdG8gdGhlIHRhYmxlXHJcbiAgICAgKiBAcGFyYW0gcm93VWlkIFRoZSBVSUQgb2YgdGhlIG5ldyByb3dcclxuICAgICAqIEBwYXJhbSByb3dEYXRhIFRoZSBkYXRhIG9mIHRoZSBuZXcgcm93XHJcbiAgICAgKiBAcGFyYW0gcm93Q2xhc3NMaXN0IFRoZSBjbGFzcyBsaXN0IG9mIHRoZSBuZXcgcm93XHJcbiAgICAgKiBAcGFyYW0gaGlkZGVuIFdoZXRoZXIgdGhlIG5ldyByb3cgc2hvdWxkIGJlIGhpZGRlblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkUm93KHJvdzogUm93KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fYWRkUm93KHJvdy5yb3dVaWQsIHJvdy5yb3dEYXRhLCByb3cucm93Q2xhc3NMaXN0LCByb3cuaGlkZGVuKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgbXVsdGlwbGUgcm93cyB0byB0aGUgdGFibGVcclxuICAgICAqIEBwYXJhbSByb3dzIFRoZSByb3dzIHRvIGFkZFxyXG4gICAgICogQHBhcmFtIHJvd3Mucm93VWlkIFRoZSBVSUQgb2YgdGhlIG5ldyByb3dcclxuICAgICAqIEBwYXJhbSByb3dzLnJvd0RhdGEgVGhlIGRhdGEgb2YgdGhlIG5ldyByb3dcclxuICAgICAqIEBwYXJhbSByb3dzLnJvd0NsYXNzTGlzdCBUaGUgY2xhc3MgbGlzdCBvZiB0aGUgbmV3IHJvd1xyXG4gICAgICogQHBhcmFtIHJvd3MuaGlkZGVuIFdoZXRoZXIgdGhlIG5ldyByb3cgc2hvdWxkIGJlIGhpZGRlblxyXG4gICAgICogQHJlbWFya3MgLSBUaGUgcm93cyBhcmUgYWRkZWQgaW4gdGhlIG9yZGVyIG9mIHRoZSBhcnJheS5cclxuICAgICAqIC0gVGhlIHJvd3MgYXJlIGFkZGVkIHRvIHRoZSBpbnRlcm5hbCBhcnJheS5cclxuICAgICAqIC0gSWYgdGhlIHJvdyBpcyBoaWRkZW4sIHRoZSByb3cgY29udGVudCBpcyByZXBsYWNlZCB3aXRoIGEgcGxhY2Vob2xkZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRSb3dzKHJvd3M6IFJvd1tdKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY29sbGVjdGVkUm93cyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgcm93RnJhZ21lbnQgPSB0aGlzLmNyZWF0ZVJvdyhyb3cucm93VWlkLCByb3cucm93RGF0YSwgcm93LnJvd0NsYXNzTGlzdCwgcm93LmhpZGRlbik7XHJcbiAgICAgICAgICAgIGlmIChyb3dGcmFnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFibGUucm93cy5wdXNoKHJvd0ZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgIGlmIChyb3cuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGVkUm93cy5hcHBlbmQodGhpcy5fZ2V0UGxhY2Vob2xkZXIocm93LnJvd1VpZCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0ZWRSb3dzLmFwcGVuZChyb3dGcmFnbWVudClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3RhYmxlLmJvZHkuYXBwZW5kKGNvbGxlY3RlZFJvd3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHJvdyB0byB0aGUgdGFibGVcclxuICAgICAqIEBwYXJhbSByb3dVaWQgVGhlIFVJRCBvZiB0aGUgbmV3IHJvd1xyXG4gICAgICogQHBhcmFtIHJvd0RhdGEgVGhlIGRhdGEgb2YgdGhlIG5ldyByb3cgYXMgYW4gYXJyYXkgb2YgRG9jdW1lbnRGcmFnbWVudHMuIEVhY2ggRG9jdW1lbnRGcmFnbWVudCByZXByZXNlbnRzIGEgY2VsbC5cclxuICAgICAqIEBwYXJhbSByb3dDbGFzc0xpc3QgVGhlIGNsYXNzIGxpc3Qgb2YgdGhlIG5ldyByb3dcclxuICAgICAqIEBwYXJhbSBoaWRkZW4gV2hldGhlciB0aGUgbmV3IHJvdyBzaG91bGQgYmUgaGlkZGVuXHJcbiAgICAgKiBAcmVtYXJrcyAtIFRoZSByb3cgaXMgYWRkZWQgdG8gdGhlIGludGVybmFsIGFycmF5LlxyXG4gICAgICogLSBJZiB0aGUgcm93IGlzIGhpZGRlbiwgdGhlIHJvdyBjb250ZW50IGlzIHJlcGxhY2VkIHdpdGggYSBwbGFjZWhvbGRlci5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfYWRkUm93KHJvd1VpZDogc3RyaW5nLCByb3dEYXRhOiBEb2N1bWVudEZyYWdtZW50W10sIHJvd0NsYXNzTGlzdDogc3RyaW5nW10gfCB1bmRlZmluZWQsIGhpZGRlbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRhYmxlUm93ID0gdGhpcy5jcmVhdGVSb3cocm93VWlkLCByb3dEYXRhLCByb3dDbGFzc0xpc3QsIGhpZGRlbik7XHJcbiAgICAgICAgdGhpcy5fdGFibGUucm93cy5wdXNoKHRhYmxlUm93KTtcclxuXHJcbiAgICAgICAgaWYgKGhpZGRlbikge1xyXG4gICAgICAgICAgICB0aGlzLl90YWJsZS5ib2R5LmFwcGVuZCh0aGlzLl9nZXRQbGFjZWhvbGRlcihyb3dVaWQpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl90YWJsZS5ib2R5LmFwcGVuZCh0YWJsZVJvdylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcm93XHJcbiAgICAgKiBAcGFyYW0gcm93VWlkIFRoZSBVSUQgb2YgdGhlIHJvdyBcclxuICAgICAqIEBwYXJhbSByb3dEYXRhIFRoZSBkYXRhIG9mIHRoZSByb3cgYXMgYW4gYXJyYXkgb2YgRG9jdW1lbnRGcmFnbWVudHMuIEVhY2ggRG9jdW1lbnRGcmFnbWVudCByZXByZXNlbnRzIGEgY2VsbC5cclxuICAgICAqIEBwYXJhbSByb3dDbGFzc0xpc3QgVGhlIGNsYXNzIGxpc3Qgb2YgdGhlIHJvd1xyXG4gICAgICogQHBhcmFtIGhpZGRlbiBXaGV0aGVyIHRoZSByb3cgc2hvdWxkIGJlIGhpZGRlbi5cclxuICAgICAqIEByZW1hcmtzICoqSWYgdHJ1ZSwgdGhlIHJvdyBpcyBoaWRkZW4gYW5kIHRoZSByb3cgY29udGVudCBpcyBsYXRlciByZXBsYWNlZCB3aXRoIGEgcGxhY2Vob2xkZXIuKipcclxuICAgICAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHJvdyBhcyBhbiBIVE1MVGFibGVSb3dFbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlUm93KHJvd1VpZDogc3RyaW5nLCByb3dEYXRhOiBEb2N1bWVudEZyYWdtZW50W10sIHJvd0NsYXNzTGlzdDogc3RyaW5nW10gfCB1bmRlZmluZWQsIGhpZGRlbjogYm9vbGVhbik6IEhUTUxUYWJsZVJvd0VsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IHRhYmxlUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuXHJcbiAgICAgICAgdGFibGVSb3cuY2xhc3NMaXN0LmFkZCguLi50aGlzLmRlZmF1bHRDbGFzc2VzLnJvdyk7XHJcbiAgICAgICAgdGFibGVSb3cuc2V0QXR0cmlidXRlKCdyb3ctdWlkJywgcm93VWlkKTtcclxuICAgICAgICBpZiAocm93Q2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgIHJvd0NsYXNzTGlzdC5mb3JFYWNoKGNsYXNzSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZVJvdy5jbGFzc0xpc3QuYWRkKGNsYXNzSXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGlkZGVuKSB7XHJcbiAgICAgICAgICAgIHRhYmxlUm93LmNsYXNzTGlzdC5hZGQodGhpcy5kZWZhdWx0Q2xhc3Nlcy5oaWRkZW5Sb3cpO1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRkZW5Sb3dzKys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRSb3dPZGRPckV2ZW4odGFibGVSb3cpO1xyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlUm93cysrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByb3dEYXRhLmZvckVhY2goKGRhdGEsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ2VsbCA9IHRhYmxlUm93Lmluc2VydENlbGwoKTtcclxuICAgICAgICAgICAgdGFibGVDZWxsLmNsYXNzTGlzdC5hZGQoLi4udGhpcy5kZWZhdWx0Q2xhc3Nlcy5jZWxsKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2hlYWRlcnNbaW5kZXhdICE9PSB1bmRlZmluZWQgJiYgdGhpcy5faGVhZGVyc1tpbmRleF0uY29sdW1uQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hlYWRlcnNbaW5kZXhdLmNvbHVtbkNsYXNzPy5mb3JFYWNoKGNsYXNzSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVDZWxsLmNsYXNzTGlzdC5hZGQoY2xhc3NJdGVtKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFkZCBMYWJlbCBhdHRyaWJ1dGUgdG8gdGhlIGNlbGxcclxuICAgICAgICAgICAgdGFibGVDZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1sYWJlbCcsIHRoaXMuX2hlYWRlcnNbaW5kZXhdLnRleHQpO1xyXG4gICAgICAgICAgICBpZiAoSGVscGVyLmlzRW1vamkodGhpcy5faGVhZGVyc1tpbmRleF0udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlQ2VsbC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuZGVmYXVsdENsYXNzZXMuZW1vamlDZWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YWJsZUNlbGwuYXBwZW5kQ2hpbGQoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRhYmxlUm93O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgcm93IHRvIG9kZCBvciBldmVuXHJcbiAgICAgKiBAcGFyYW0gdGFibGVSb3cgVGhlIHJvdyB0byBzZXRcclxuICAgICAqIEByZW1hcmtzIC0gVGhlIHJvdyBpcyBzZXQgdG8gb2RkIG9yIGV2ZW4gYmFzZWQgb24gdGhlIGxhc3QgdmlzaWJsZSByb3cuXHJcbiAgICAgKiAtIElmIG5vIHZpc2libGUgcm93IGV4aXN0cywgdGhlIHJvdyBpcyBzZXQgdG8gZXZlbi5cclxuICAgICAqIEByZW1hcmtzIEl0IGRvZXMgbm90IHNlYXJjaCBmb3IgdGhlIGxhc3QgdmlzaWJsZSBsaW5lIGluIHRoZSBIVE1MIHRhYmxlIGl0c2VsZiwgYnV0IGluIGFuIGludGVybmFsIGFycmF5LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldFJvd09kZE9yRXZlbih0YWJsZVJvdzogSFRNTFRhYmxlUm93RWxlbWVudCkge1xyXG4gICAgICAgIGxldCBsYXN0VmlzaWJsZVJvdztcclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5fdGFibGUucm93cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3RhYmxlLnJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuZGVmYXVsdENsYXNzZXMuaGlkZGVuUm93KSkge1xyXG4gICAgICAgICAgICAgICAgbGFzdFZpc2libGVSb3cgPSB0aGlzLl90YWJsZS5yb3dzW2ldO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhc3RWaXNpYmxlUm93KSB7XHJcbiAgICAgICAgICAgIHRhYmxlUm93LmNsYXNzTGlzdC5hZGQobGFzdFZpc2libGVSb3cuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuZGVmYXVsdENsYXNzZXMuZXZlblJvdykgPyB0aGlzLmRlZmF1bHRDbGFzc2VzLm9kZFJvdyA6IHRoaXMuZGVmYXVsdENsYXNzZXMuZXZlblJvdyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFibGVSb3cuY2xhc3NMaXN0LmFkZCh0aGlzLmRlZmF1bHRDbGFzc2VzLmV2ZW5Sb3cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB2aXNpYmxlIGFuZCBoaWRkZW4gcm93c1xyXG4gICAgICogQHJldHVybnMgVGhlIG51bWJlciBvZiB2aXNpYmxlIGFuZCBoaWRkZW4gcm93c1xyXG4gICAgICogQHJldHVybnMgdmlzaWJsZVJvd3MgVGhlIG51bWJlciBvZiB2aXNpYmxlIHJvd3NcclxuICAgICAqIEByZXR1cm5zIGhpZGRlblJvd3MgVGhlIG51bWJlciBvZiBoaWRkZW4gcm93c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Um93U3RhdHMoKTogeyB2aXNpYmxlUm93czogbnVtYmVyLCBoaWRkZW5Sb3dzOiBudW1iZXIgfSB7XHJcbiAgICAgICAgcmV0dXJuIHsgdmlzaWJsZVJvd3M6IHRoaXMuX3Zpc2libGVSb3dzLCBoaWRkZW5Sb3dzOiB0aGlzLl9oaWRkZW5Sb3dzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGVzIHRoZSByb3cgd2l0aCB0aGUgZ2l2ZW4gVUlEXHJcbiAgICAgKiBAcGFyYW0gcm93VWlkIFRoZSBVSUQgb2YgdGhlIHJvd1xyXG4gICAgICogQHJlbWFya3MgLSBUaGUgcm93IGlzIGRlbGV0ZWQgZnJvbSB0aGUgdGFibGUgYm9keSBhbmQgdGhlIGludGVybmFsIGFycmF5LlxyXG4gICAgICogLSBJZiBhIHBsYWNlaG9sZGVyIGV4aXN0cywgaXQgaXMgYWxzbyBkZWxldGVkIGZyb20gdGhlIHRhYmxlIGJvZHkgYW5kIHRoZSBpbnRlcm5hbCBhcnJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZVJvdyhyb3dVaWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJvd1RvRGVsZXRlID0gdGhpcy5nZXRSb3cocm93VWlkKTtcclxuICAgICAgICBjb25zdCByb3dWaXNpYmxlID0gcm93VG9EZWxldGUgJiYgIXJvd1RvRGVsZXRlLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLmRlZmF1bHRDbGFzc2VzLmhpZGRlblJvdyk7XHJcbiAgICAgICAgaWYgKHJvd1Zpc2libGUpIHtcclxuICAgICAgICAgICAgaWYgKHJvd1RvRGVsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhYmxlLmJvZHkucmVtb3ZlQ2hpbGQocm93VG9EZWxldGUpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiUm93IG5vdCBhY3RpdmUgaW4gdGhlIHRhYmxlLiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFibGUucm93cyA9IHRoaXMuX3RhYmxlLnJvd3MuZmlsdGVyKHJvdyA9PiByb3cuZ2V0QXR0cmlidXRlKCdyb3ctdWlkJykgIT09IHJvd1VpZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVQbGFjZWhvbGRlcihyb3dVaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGVSb3dzLS07XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0V2ZW5PZGRDbGFzcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5fcmVtb3ZlUGxhY2Vob2xkZXIocm93VWlkKTtcclxuICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhYmxlLmJvZHkucmVtb3ZlQ2hpbGQocGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiUGxhY2Vob2xkZXIgcm93IG5vdCBhY3RpdmUgaW4gdGhlIHRhYmxlLiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGRlblJvd3MtLTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgYSByb3cgdG8gaGlkZGVuXHJcbiAgICAgKiBAcGFyYW0gcm93VWlkIFRoZSBVSUQgb2YgdGhlIHJvd1xyXG4gICAgICogQHJlbWFya3MgLSBUaGUgcm93IGlzIHNldCB0byBoaWRkZW4gYW5kIHRoZSByb3cgY29udGVudCBpcyByZXBsYWNlZCB3aXRoIGEgcGxhY2Vob2xkZXIuXHJcbiAgICAgKiAtIE9ubHkgaWYgdGhlIHN0YXRlIGhhcyBjaGFuZ2VkLCB0aGUgY2FsY3VsYXRpb24gb2YgdGhlIG9kZCBhbmQgZXZlbiByb3dzIGlzIHVwZGF0ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoaWRlUm93KHJvd1VpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuX2hpZGVSb3cocm93VWlkKTtcclxuICAgICAgICBpZiAoY2hhbmdlcylcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93RXZlbk9kZENsYXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgYSByb3cgdG8gaGlkZGVuLCByZXBsYWNlcyB0aGUgcm93IGNvbnRlbnQgd2l0aCBhIHBsYWNlaG9sZGVyIGFuZCB1cGRhdGVzIHRoZSByb3cgc3RhdHNcclxuICAgICAqIEBwYXJhbSByb3dVaWQgVGhlIFVJRCBvZiB0aGUgcm93XHJcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoZSBzdGF0ZSBoYXMgY2hhbmdlZC4gUmV0dXJucyBgZmFsc2VgIGlmIHRoZSByb3cgaXMgYWxyZWFkeSBoaWRkZW4uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2hpZGVSb3cocm93VWlkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgUm93ICR7cm93VWlkfSBzaG91bGQgYmUgaGlkZGVuLmApO1xyXG4gICAgICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLnRvZ2xlUm93Q2xhc3Mocm93VWlkLCBbdGhpcy5kZWZhdWx0Q2xhc3Nlcy5oaWRkZW5Sb3ddLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgUm93ICR7cm93VWlkfSBjaGFuZ2VzOiAke2NoYW5nZXN9YCk7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlUm93Q29udGVudChyb3dVaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlUm93cy0tO1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRkZW5Sb3dzKys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2hhbmdlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBhIHJvdyB0byB2aXNpYmxlXHJcbiAgICAgKiBAcGFyYW0gcm93VWlkIFRoZSBVSUQgb2YgdGhlIHJvd1xyXG4gICAgICogQHJlbWFya3MgLSBUaGUgcm93IGlzIHNldCB0byB2aXNpYmxlIGFuZCB0aGUgcm93IGNvbnRlbnQgaXMgcmVwbGFjZWQgd2l0aCB0aGUgb3JpZ2luYWwgY29udGVudC5cclxuICAgICAqIC0gT25seSBpZiB0aGUgc3RhdGUgaGFzIGNoYW5nZWQsIHRoZSBjYWxjdWxhdGlvbiBvZiB0aGUgb2RkIGFuZCBldmVuIHJvd3MgaXMgdXBkYXRlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNob3dSb3cocm93VWlkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjaGFuZ2VzID0gdGhpcy5fc2hvd1Jvdyhyb3dVaWQpO1xyXG4gICAgICAgIGlmIChjaGFuZ2VzKVxyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3dFdmVuT2RkQ2xhc3MoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBhIHJvdyB0byB2aXNpYmxlLCByZXBsYWNlcyB0aGUgcGxhY2Vob2xkZXIgd2l0aCB0aGUgb3JpZ2luYWwgcm93IGNvbnRlbnQgYW5kIHVwZGF0ZXMgdGhlIHJvdyBzdGF0c1xyXG4gICAgICogQHBhcmFtIHJvd1VpZCBUaGUgVUlEIG9mIHRoZSByb3dcclxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgdGhlIHN0YXRlIGhhcyBjaGFuZ2VkLiBSZXR1cm5zIGBmYWxzZWAgaWYgdGhlIHJvdyBpcyBhbHJlYWR5IHZpc2libGUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3Nob3dSb3cocm93VWlkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgUm93ICR7cm93VWlkfSBzaG91bGQgYmUgc2hvd24uYCk7XHJcbiAgICAgICAgY29uc3QgY2hhbmdlcyA9IHRoaXMudG9nbGVSb3dDbGFzcyhyb3dVaWQsIFt0aGlzLmRlZmF1bHRDbGFzc2VzLmhpZGRlblJvd10sIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgUm93ICR7cm93VWlkfSBjaGFuZ2VzOiAke2NoYW5nZXN9YCk7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fYWRkUm93Q29udGVudChyb3dVaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlUm93cysrO1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRkZW5Sb3dzLS07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2hhbmdlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgc3RhdGUgb2YgbXVsdGlwbGUgcm93cyB0byBoaWRkZW4gb3IgdmlzaWJsZVxyXG4gICAgICogQHBhcmFtIHJvd3MgVGhlIHJvd3MgdG8gY2hhbmdlXHJcbiAgICAgKiBAcGFyYW0gcm93cy5yb3dVaWQgVGhlIFVJRCBvZiB0aGUgcm93XHJcbiAgICAgKiBAcGFyYW0gcm93cy5oaWRkZW4gV2hldGhlciB0byBoaWRlIG9yIHNob3cgdGhlIHJvd1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgY2hhbmdlU2hvd0hpZGVTdGF0ZVJvd3Mocm93czogUm93c1N0YXRlW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShgQ2hhbmdlIFNob3cvSGlkZSBzdGF0ZSBvZiAke3Jvd3MubGVuZ3RofSByb3dzLmApO1xyXG4gICAgICAgIGxldCBjaGFuZ2VzID0gZmFsc2U7XHJcbiAgICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBDaGFuZ2UgU2hvdy9IaWRlIHN0YXRlIG9mIFJvdzogJHtyb3cucm93VWlkfSB0byAke3Jvdy5oaWRkZW59LmApO1xyXG4gICAgICAgICAgICBpZiAocm93LmhpZGRlbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYEhpZGUgUm93OiAke3Jvdy5yb3dVaWR9YCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9oaWRlUm93KHJvdy5yb3dVaWQpO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlcyB8fD0gcmVzdWx0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYFNob3cgUm93OiAke3Jvdy5yb3dVaWR9YCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9zaG93Um93KHJvdy5yb3dVaWQpO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlcyB8fD0gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMpXHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0V2ZW5PZGRDbGFzcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwbGFjZXMgdGhlIHJvdyBpbiB0YWJsZSBib2R5IHdpdGggYSBwbGFjZWhvbGRlclxyXG4gICAgICogQHBhcmFtIHJvd1VpZCBUaGUgVUlEIG9mIHRoZSByb3dcclxuICAgICAqIEByZW1hcmtzIC0gU2VhcmNoIHRoZSByb3cgaW4gdGhlIGludGVybmFsIGFycmF5LFxyXG4gICAgICogLSBJZiBmb3VuZCwgZ2V0IHRoZSBwbGFjZWhvbGRlciBmcm9tIHRoZSBpbnRlcm5hbCBhcnJheSBhbmQgcmVwbGFjZSB0aGUgcm93IGluIHRoZSB0YWJsZSBib2R5IHdpdGggdGhlIHBsYWNlaG9sZGVyLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZW1vdmVSb3dDb250ZW50KHJvd1VpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRSb3cocm93VWlkKTtcclxuICAgICAgICBpZiAocm93KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5fZ2V0UGxhY2Vob2xkZXIocm93VWlkKTtcclxuICAgICAgICAgICAgdGhpcy5fdGFibGUuYm9keS5yZXBsYWNlQ2hpbGQocGxhY2Vob2xkZXIsIHJvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwbGFjZXMgdGhlIHBsYWNlaG9sZGVyIGluIHRhYmxlIGJvZHkgd2l0aCB0aGUgcm93XHJcbiAgICAgKiBAcGFyYW0gcm93VWlkIFRoZSBVSUQgb2YgdGhlIHJvd1xyXG4gICAgICogQHJlbWFya3MgLSBTZWFyY2ggdGhlIHJvdyBpbiB0aGUgaW50ZXJuYWwgYXJyYXksXHJcbiAgICAgKiAtIElmIGZvdW5kLCBnZXQgdGhlIHBsYWNlaG9sZGVyIGZyb20gdGhlIGludGVybmFsIGFycmF5IGFuZCByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciBpbiB0aGUgdGFibGUgYm9keSB3aXRoIHRoZSByb3cuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2FkZFJvd0NvbnRlbnQocm93VWlkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldFJvdyhyb3dVaWQpO1xyXG4gICAgICAgIGlmIChyb3cpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB0aGlzLl9nZXRQbGFjZWhvbGRlcihyb3dVaWQpO1xyXG4gICAgICAgICAgICBpZiAocGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGFibGUuYm9keS5yZXBsYWNlQ2hpbGQocm93LCBwbGFjZWhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJQbGFjZWhvbGRlciByb3cgbm90IGFjdGl2ZSBpbiB0aGUgdGFibGUuIEVycm9yOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYSBwbGFjZWhvbGRlciByb3dcclxuICAgICAqIEBwYXJhbSByb3dVaWQgVGhlIFVJRCBvZiB0aGUgcm93XHJcbiAgICAgKiBAcmV0dXJucyBUaGUgZ2VuZXJhdGVkIHBsYWNlaG9sZGVyIHJvd1xyXG4gICAgICogQHJlbWFya3MgLSBUaGUgcGxhY2Vob2xkZXIgcm93IGlzIGVtcHR5IGFuZCBoYXMgdGhlIGlkIGBkZWZhdWx0SWRzLnBsYWNlaG9sZGVyYCAoZGVmYXVsdDogYHBsYWNlaG9sZGVyLXJvd2ApLlxyXG4gICAgICogLSBUaGUgcGxhY2Vob2xkZXIgcm93IGlzIGFkZGVkIHRvIHRoZSBpbnRlcm5hbCBhcnJheS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZ2VuZXJhdGVQbGFjZWhvbGRlcihyb3dVaWQ6IHN0cmluZyk6IEhUTUxUYWJsZVJvd0VsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgICBwbGFjZWhvbGRlci5pZCA9IHRoaXMuZGVmYXVsdElkcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICBwbGFjZWhvbGRlci5zZXRBdHRyaWJ1dGUoJ3Jvdy11aWQnLCByb3dVaWQpO1xyXG4gICAgICAgIHRoaXMuX3Jvd1BsYWNlaG9sZGVycy5wdXNoKHsgcm93VWlkOiByb3dVaWQsIHJvdzogcGxhY2Vob2xkZXIgfSk7XHJcbiAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgcGxhY2Vob2xkZXIgcm93IHdpdGggdGhlIGdpdmVuIFVJRCBmcm9tIHRoZSBpbnRlcm5hbCBhcnJheVxyXG4gICAgICogQHBhcmFtIHJvd1VpZCBUaGUgVUlEIG9mIHRoZSByb3dcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfcmVtb3ZlUGxhY2Vob2xkZXIocm93VWlkOiBzdHJpbmcpOiBIVE1MVGFibGVSb3dFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMuX3Jvd1BsYWNlaG9sZGVycy5maW5kKHJvd1BsYWNlaG9sZGVyID0+IHJvd1BsYWNlaG9sZGVyLnJvd1VpZCA9PT0gcm93VWlkKT8ucm93O1xyXG4gICAgICAgIGlmIChwbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9yb3dQbGFjZWhvbGRlcnMgPSB0aGlzLl9yb3dQbGFjZWhvbGRlcnMuZmlsdGVyKHJvd1BsYWNlaG9sZGVyID0+IHJvd1BsYWNlaG9sZGVyLnJvd1VpZCAhPT0gcm93VWlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcGxhY2Vob2xkZXIgcm93IHdpdGggdGhlIGdpdmVuIFVJRFxyXG4gICAgICogQHBhcmFtIHJvd1VpZCBUaGUgVUlEIG9mIHRoZSByb3dcclxuICAgICAqIEByZXR1cm5zIC0gVGhlIHBsYWNlaG9sZGVyIHJvdyB3aXRoIHRoZSBnaXZlbiBVSURcclxuICAgICAqIC0gb3IgYSBuZXcgcGxhY2Vob2xkZXIgcm93IGlmIG5vIHBsYWNlaG9sZGVyIHJvdyB3aXRoIHRoZSBnaXZlbiBVSUQgZXhpc3RzXHJcbiAgICAgKiBAcmVtYXJrcyAtIElmIGEgbmV3IHBsYWNlaG9sZGVyIHJvdyBpcyBnZW5lcmF0ZWQsIGl0IGlzIGFkZGVkIHRvIHRoZSBpbnRlcm5hbCBhcnJheS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZ2V0UGxhY2Vob2xkZXIocm93VWlkOiBzdHJpbmcpOiBIVE1MVGFibGVSb3dFbGVtZW50IHtcclxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMuX3Jvd1BsYWNlaG9sZGVycy5maW5kKHJvd1BsYWNlaG9sZGVyID0+IHJvd1BsYWNlaG9sZGVyLnJvd1VpZCA9PT0gcm93VWlkKT8ucm93O1xyXG4gICAgICAgIGlmIChwbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2VuZXJhdGVQbGFjZWhvbGRlcihyb3dVaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHJvdyB3aXRoIHRoZSBnaXZlbiBVSURcclxuICAgICAqIEBwYXJhbSByb3dVaWQgVGhlIFVJRCBvZiB0aGUgcm93XHJcbiAgICAgKiBAcmV0dXJucyBUaGUgcm93IHdpdGggdGhlIGdpdmVuIFVJRCBvciB1bmRlZmluZWQgaWYgbm8gcm93IHdpdGggdGhlIGdpdmVuIFVJRCBleGlzdHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJvdyhyb3dVaWQ6IHN0cmluZyk6IEhUTUxUYWJsZVJvd0VsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90YWJsZS5yb3dzLmZpbmQocm93ID0+IHJvdy5nZXRBdHRyaWJ1dGUoJ3Jvdy11aWQnKSA9PT0gcm93VWlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRvZ2dsZXMgdGhlIGNsYXNzIG9mIGEgcm93XHJcbiAgICAgKiBAcGFyYW0gcm93VWlkIFRoZSBVSUQgb2YgdGhlIHJvd1xyXG4gICAgICogQHBhcmFtIGNsYXNzTGlzdCBUaGUgY2xhc3MgbGlzdCB0byB0b2dnbGVcclxuICAgICAqIEBwYXJhbSBhZGQgV2hldGhlciB0byBhZGQgb3IgcmVtb3ZlIHRoZSBjbGFzc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9nbGVSb3dDbGFzcyhyb3dVaWQ6IHN0cmluZywgY2xhc3NMaXN0OiBzdHJpbmdbXSwgYWRkOiBib29sZWFuKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldFJvdyhyb3dVaWQpO1xyXG4gICAgICAgIGlmIChyb3cpIHtcclxuICAgICAgICAgICAgY2hhbmdlcyA9IHRoaXMudG9nZ2xlQ2xhc3Mocm93LCBjbGFzc0xpc3QsIGFkZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjaGFuZ2VzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaGVzIHRoZSBvZGQgYW5kIGV2ZW4gcm93cyB3aXRoIHRoZSBjb3Jvc3BvbmRpbmcgY2xhc3Nlc1xyXG4gICAgICogQHJlbWFya3MgLSBUaGUgb2RkIGFuZCBldmVuIHJvd3MgYXJlIGNhbGN1bGF0ZWQgYmFzZWQgb24gdGhlIHZpc2libGUgcm93cyBmcm9tIHRoZSBpbnRlcm5hbCBhcnJheS5cclxuICAgICAqIC0gQ2hhbmdlIHRoZSBjbGFzc2VzIG9ubHkgaWYgbmVjZXNzYXJ5LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlZnJlc2hSb3dFdmVuT2RkQ2xhc3MoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdmlzaWJsZVJvd3MgPSB0aGlzLl90YWJsZS5yb3dzLmZpbHRlcihyb3cgPT4gIXJvdy5jbGFzc0xpc3QuY29udGFpbnModGhpcy5kZWZhdWx0Q2xhc3Nlcy5oaWRkZW5Sb3cpKTtcclxuICAgICAgICB2aXNpYmxlUm93cy5mb3JFYWNoKChyb3csIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAlIDIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2xhc3Mocm93LCBbdGhpcy5kZWZhdWx0Q2xhc3Nlcy5ldmVuUm93XSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUNsYXNzKHJvdywgW3RoaXMuZGVmYXVsdENsYXNzZXMub2RkUm93XSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDbGFzcyhyb3csIFt0aGlzLmRlZmF1bHRDbGFzc2VzLmV2ZW5Sb3ddLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUNsYXNzKHJvdywgW3RoaXMuZGVmYXVsdENsYXNzZXMub2RkUm93XSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRvZ2dsZUNsYXNzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjbGFzc0xpc3Q6IHN0cmluZ1tdLCBhZGQ6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY2hhbmdlcyA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IHByZXNlbnRDbGFzc2VzID0gZWxlbWVudC5jbGFzc0xpc3Q7XHJcbiAgICAgICAgaWYgKGFkZCkge1xyXG4gICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChjbGFzc0l0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVzZW50Q2xhc3Nlcy5jb250YWlucyhjbGFzc0l0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGNsYXNzSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJlc2VudENsYXNzZXMuY29udGFpbnMoY2xhc3NJdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc0l0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNoYW5nZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2VzIHRoZSBoZWFkZXIgb2YgdGhlIHRhYmxlXHJcbiAgICAgKiBAcGFyYW0gaGVhZGVyIFRoZSBoZWFkZXIgdG8gY2hhbmdlOyB0aGUgaGVhZGVyIHRleHQgbXVzdCBtYXRjaCB0aGUgb3JpZ2luYWwgaGVhZGVyIHRleHRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNoYW5nZUhlYWRlcihoZWFkZXI6IFRhYmxlSGVhZGVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VIZWFkZXJDbGFzcyhoZWFkZXIpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlQ29sdW1uQ2xhc3MoaGVhZGVyKTtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzW3RoaXMuX2hlYWRlcnMuZmluZEluZGV4KGhlYWRlckl0ZW0gPT4gaGVhZGVySXRlbS50ZXh0ID09PSBoZWFkZXIudGV4dCldID0gaGVhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hhbmdlSGVhZGVyQ2xhc3MoaGVhZGVyOiBUYWJsZUhlYWRlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckluZGV4ID0gdGhpcy5faGVhZGVycy5maW5kSW5kZXgoaGVhZGVySXRlbSA9PiBoZWFkZXJJdGVtLnRleHQgPT09IGhlYWRlci50ZXh0KTtcclxuICAgICAgICBjb25zdCBvbGRIZWFkZXJDbGFzc2VzID0gdGhpcy5faGVhZGVyc1toZWFkZXJJbmRleF0uaGVhZGVyQ2xhc3M7XHJcbiAgICAgICAgY29uc3QgbmV3SGVhZGVyQ2xhc3NlcyA9IGhlYWRlci5oZWFkZXJDbGFzcztcclxuICAgICAgICBjb25zdCBoZWFkZXJDZWxsID0gdGhpcy5fdGFibGUuaGVhZGVyQ2VsbHNbaGVhZGVySW5kZXhdO1xyXG4gICAgICAgIGlmIChvbGRIZWFkZXJDbGFzc2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoaGVhZGVyQ2VsbCwgb2xkSGVhZGVyQ2xhc3NlcywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmV3SGVhZGVyQ2xhc3Nlcykge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUNsYXNzKGhlYWRlckNlbGwsIG5ld0hlYWRlckNsYXNzZXMsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoYW5nZUNvbHVtbkNsYXNzKGhlYWRlcjogVGFibGVIZWFkZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjb2x1bW5JbmRleCA9IHRoaXMuX2hlYWRlcnMuZmluZEluZGV4KGhlYWRlckl0ZW0gPT4gaGVhZGVySXRlbS50ZXh0ID09PSBoZWFkZXIudGV4dCk7XHJcbiAgICAgICAgY29uc3Qgb2xkSGVhZGVyQ2xhc3NlcyA9IHRoaXMuX2hlYWRlcnNbY29sdW1uSW5kZXhdLmhlYWRlckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX3RhYmxlLnJvd3MuZm9yRWFjaChyb3cgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsID0gcm93LmNlbGxzW2NvbHVtbkluZGV4XTtcclxuICAgICAgICAgICAgaWYgKGNlbGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvbGRIZWFkZXJDbGFzc2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDbGFzcyhjZWxsLCBvbGRIZWFkZXJDbGFzc2VzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLmNvbHVtbkNsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDbGFzcyhjZWxsLCBoZWFkZXIuY29sdW1uQ2xhc3MsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtYWtlU2FmZUZvcklkKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAnJztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGFyID0gaW5wdXRbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCAmJiAhaXNOYU4oTnVtYmVyKGNoYXIpKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gTGVhZGluZyBudW1iZXIgYmVjb21lcyBhbiB1bmRlcnNjb3JlXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ18nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIubWF0Y2goL1thLXpBLVpdLykpIHtcclxuICAgICAgICAgICAgICAgIC8vIExldHRlcnMgYmVjb21lIGxvd2VyIGNhc2UgbGV0dGVyc1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGNoYXIudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFyLm1hdGNoKC9bMC05XS8pKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaWd1cmVzIGFyZSBhZG9wdGVkXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gY2hhcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE90aGVyIGNoYXJhY3RlcnMgYmVjb21lIHVuZGVybGluZXNcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnXyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRhYmxlSGVhZGVyID0ge1xyXG4gICAgdGV4dDogc3RyaW5nO1xyXG4gICAgaGVhZGVyQ2xhc3M6IHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xyXG4gICAgY29sdW1uQ2xhc3M6IHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTdHJ1Y3RlZFRhYmxlID0ge1xyXG4gICAgdGFibGU6IEhUTUxUYWJsZUVsZW1lbnQ7XHJcbiAgICBoZWFkZXI6IEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O1xyXG4gICAgaGVhZGVyUm93OiBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG4gICAgaGVhZGVyQ2VsbHM6IEhUTUxUYWJsZUNlbGxFbGVtZW50W107XHJcbiAgICBib2R5OiBIVE1MVGFibGVTZWN0aW9uRWxlbWVudDtcclxuICAgIHJvd3M6IEhUTUxUYWJsZVJvd0VsZW1lbnRbXTtcclxufVxyXG5cclxudHlwZSBSb3dQbGFjZWhvbGRlciA9IHtcclxuICAgIHJvd1VpZDogc3RyaW5nO1xyXG4gICAgcm93OiBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBSb3cgPSB7XHJcbiAgICByb3dVaWQ6IHN0cmluZztcclxuICAgIHJvd0RhdGE6IERvY3VtZW50RnJhZ21lbnRbXTtcclxuICAgIHJvd0NsYXNzTGlzdDogc3RyaW5nW10gfCB1bmRlZmluZWQ7XHJcbiAgICBoaWRkZW46IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFJvd3NTdGF0ZSA9IHtcclxuICAgIHJvd1VpZDogc3RyaW5nO1xyXG4gICAgaGlkZGVuOiBib29sZWFuO1xyXG59IiwgImltcG9ydCB7IENvbXBvbmVudCwgc2V0SWNvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgR2xvYmFsIGZyb20gXCJzcmMvY2xhc3Nlcy9HbG9iYWxcIjtcclxuaW1wb3J0IExuZyBmcm9tIFwic3JjL2NsYXNzZXMvTG5nXCI7XHJcblxyXG4vKipcclxuICogTWF4IHNob3duIG1vZGVscyBpbnB1dCBjb21wb25lbnQgY2xhc3MgZm9yIGBUYWJsZUJsb2NrUmVuZGVyQ29tcG9uZW50YC5cclxuICogXHJcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgbWV0aG9kcyB0byBjcmVhdGUgYW5kIG1hbmFnZSBhIGZpbHRlciBidXR0b24gY29tcG9uZW50IHdpdGggYSBzeW1ib2wuXHJcbiAqIEl0IGluY2x1ZGVzIGZ1bmN0aW9uYWxpdHkgZm9yIHRvZ2dsaW5nIHRoZSBmaWx0ZXIgYnV0dG9uIGFuZCBoYW5kbGluZyBjbGljayBldmVudHMuXHJcbiAqIFxyXG4gKiBAc2VlIHtAbGluayBjcmVhdGV9IGZvciBkZXRhaWxzIGFib3V0IGNyZWF0aW5nIGEgZmlsdGVyIGJ1dHRvbiBjb21wb25lbnQuXHJcbiAqIEBzZWUge0BsaW5rIEZpbHRlckNhbGxiYWNrfSBmb3IgZGV0YWlscyBhYm91dCB0aGUgZmlsdGVyIGNhbGxiYWNrLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsdGVyQnV0dG9uIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgZmlsdGVyIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byByZWdpc3RlciB0aGUgZXZlbnRzIHRvLlxyXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGZpbHRlciBidXR0b24uXHJcbiAgICAgKiBAcGFyYW0gc3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIGZpbHRlciBidXR0b24uXHJcbiAgICAgKiBAcGFyYW0gc3RhdHVzIFRoZSBpbml0aWFsIHN0YXR1cyBvZiB0aGUgZmlsdGVyIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBvbkZpbHRlciBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSBmaWx0ZXIgYnV0dG9uIGlzIGNsaWNrZWQuIFBhc3NlcyB0aGUgdHlwZSBvZiB0aGUgZmlsdGVyIGJ1dHRvbiBhbmQgdGhlIHN0YXR1cyBvZiB0aGUgZmlsdGVyIGJ1dHRvbi5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGZpbHRlciBidXR0b24gYXMgYERvY3VtZW50RnJhZ21lbnRgLlxyXG4gICAgICogQHJlbWFya3MgLSBUaGUgZmlsdGVyIGJ1dHRvbiBjb25zaXN0cyBvZiBhIGZpbHRlciBidXR0b24gY29udGFpbmVyIGFuZCBhIGZpbHRlciBidXR0b24uXHJcbiAgICAgKiAtIENTUyBjbGFzc2VzOlxyXG4gICAgICogLSBgZmlsdGVyLXN5bWJvbGAgLSBUaGUgZmlsdGVyIGJ1dHRvbi5cclxuICAgICAqIC0gYGZpbHRlci1zeW1ib2wtaGlkZWAgLSBBZGRpdGlvbmFsIGNsYXNzIGZvciB0aGUgZmlsdGVyIGJ1dHRvbiB0byBoaWRlIGl0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICB0eXBlOiBzdHJpbmcsXHJcbiAgICAgICAgc3ltYm9sOiBzdHJpbmcsXHJcbiAgICAgICAgc3RhdHVzOiBib29sZWFuLFxyXG4gICAgICAgIG9uRmlsdGVyOiBGaWx0ZXJDYWxsYmFjayk6IERvY3VtZW50RnJhZ21lbnQge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbHRlckJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGhlYWRlckl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQoZmlsdGVyQnV0dG9uQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgZmlsdGVyID0gRmlsdGVyQnV0dG9uLmNyZWF0ZUZpbHRlckJ1dHRvbihzdGF0dXMsIHR5cGUsIHN5bWJvbCwgY29tcG9uZW50LCBvbkZpbHRlcik7XHJcbiAgICAgICAgZmlsdGVyQnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGZpbHRlcik7XHJcblxyXG4gICAgICAgIHJldHVybiBoZWFkZXJJdGVtQ29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyB0aGUgZmlsdGVyIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBzdGF0dXMgVGhlIGluaXRpYWwgc3RhdHVzIG9mIHRoZSBmaWx0ZXIgYnV0dG9uLlxyXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGZpbHRlciBidXR0b24uXHJcbiAgICAgKiBAcGFyYW0gc3ltYm9sIFRoZSBzeW1ib2wgb2YgdGhlIGZpbHRlciBidXR0b24uXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IFRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXIgdGhlIGV2ZW50cyB0by5cclxuICAgICAqIEBwYXJhbSBmaWx0ZXJDYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSBmaWx0ZXIgYnV0dG9uIGlzIGNsaWNrZWQuIFBhc3NlcyB0aGUgdHlwZSBvZiB0aGUgZmlsdGVyIGJ1dHRvbiBhbmQgdGhlIHN0YXR1cyBvZiB0aGUgZmlsdGVyIGJ1dHRvbi5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGZpbHRlciBidXR0b24gYXMgYERvY3VtZW50RnJhZ21lbnRgLlxyXG4gICAgICogQHJlbWFya3MgLSBUaGUgZmlsdGVyIGJ1dHRvbiBpcyBhIGBIVE1MQW5jaG9yRWxlbWVudGAuXHJcbiAgICAgKiAtIENTUyBjbGFzc2VzOlxyXG4gICAgICogLSBgZmlsdGVyLXN5bWJvbGAgLSBUaGUgZmlsdGVyIGJ1dHRvbi5cclxuICAgICAqIC0gYGZpbHRlci1zeW1ib2wtaGlkZWAgLSBBZGRpdGlvbmFsIGNsYXNzIGZvciB0aGUgZmlsdGVyIGJ1dHRvbiB0byBoaWRlIGl0LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjcmVhdGVGaWx0ZXJCdXR0b24oXHJcbiAgICAgICAgc3RhdHVzOiBib29sZWFuLFxyXG4gICAgICAgIHR5cGU6IHN0cmluZyxcclxuICAgICAgICBzeW1ib2w6IHN0cmluZyxcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICBmaWx0ZXJDYWxsYmFjazogRmlsdGVyQ2FsbGJhY2spOiBEb2N1bWVudEZyYWdtZW50IHtcclxuICAgICAgICBjb25zdCBsb2dnZXIgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5sb2dnZXI7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyQnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICBjb25zdCBmaWx0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgZmlsdGVyQnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGZpbHRlcik7XHJcbiAgICAgICAgZmlsdGVyLmNsYXNzTGlzdC5hZGQoJ2ZpbHRlci1zeW1ib2wnKTtcclxuICAgICAgICBpZiAoIXN0YXR1cykge1xyXG4gICAgICAgICAgICBmaWx0ZXIuY2xhc3NMaXN0LmFkZCgnZmlsdGVyLXN5bWJvbC1oaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbHRlci50aXRsZSA9IExuZy5ndCh0eXBlKTtcclxuICAgICAgICBmaWx0ZXIuaHJlZiA9IFwiI1wiO1xyXG4gICAgICAgIHNldEljb24oZmlsdGVyLCBzeW1ib2wpO1xyXG5cclxuICAgICAgICBjb21wb25lbnQucmVnaXN0ZXJEb21FdmVudChmaWx0ZXIsICdjbGljaycsIGFzeW5jIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBmaWx0ZXIuY2xhc3NMaXN0LnRvZ2dsZSgnZmlsdGVyLXN5bWJvbC1oaWRlJyk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBmaWx0ZXJDYWxsYmFjayh0eXBlLCBmaWx0ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWx0ZXItc3ltYm9sLWhpZGUnKSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJUaGUgYG9uRmlsdGVyYCBjYWxsYmFjayB0aHJldyBhbiBlcnJvciFcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmaWx0ZXJCdXR0b25Db250YWluZXI7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIHdoZW4gdGhlIGZpbHRlciBidXR0b24gaXMgY2xpY2tlZC5cclxuICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGZpbHRlciBidXR0b24uXHJcbiAqIEBwYXJhbSBzdGF0dXMgVGhlIHN0YXR1cyBvZiB0aGUgZmlsdGVyIGJ1dHRvbi4gYHRydWVgIGlmIHRoZSBmaWx0ZXIgYnV0dG9uIGlzIGFjdGl2ZSwgYGZhbHNlYCBpZiBub3QuXHJcbiAqIEByZW1hcmtzIC0gVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmaWx0ZXIgYnV0dG9uIGlzIGNsaWNrZWQuXHJcbiAqL1xyXG50eXBlIEZpbHRlckNhbGxiYWNrID0gKHR5cGU6IHN0cmluZywgc3RhdHVzOiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+OyIsICJpbXBvcnQgeyBDb21wb25lbnQsIHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IEdsb2JhbCBmcm9tIFwic3JjL2NsYXNzZXMvR2xvYmFsXCI7XHJcbmltcG9ydCBMbmcgZnJvbSBcInNyYy9jbGFzc2VzL0xuZ1wiO1xyXG5cclxuLyoqXHJcbiAqIE1heCBzaG93biBtb2RlbHMgaW5wdXQgY29tcG9uZW50IGNsYXNzIGZvciBgVGFibGVCbG9ja1JlbmRlckNvbXBvbmVudGAuXHJcbiAqIFxyXG4gKiBUaGlzIGNsYXNzIHByb3ZpZGVzIG1ldGhvZHMgdG8gY3JlYXRlIGFuZCBtYW5hZ2UgYSBtYXggc2hvd24gbW9kZWxzIGlucHV0IGNvbXBvbmVudC5cclxuICogSXQgaW5jbHVkZXMgZnVuY3Rpb25hbGl0eSBmb3Igc2V0dGluZyB1cCB0aGUgbWF4IHNob3duIG1vZGVscyBpbnB1dCBhbmQgaGFuZGxpbmcgaW5wdXQgZXZlbnRzLlxyXG4gKiBcclxuICogQHNlZSB7QGxpbmsgY3JlYXRlfSBmb3IgZGV0YWlscyBhYm91dCBjcmVhdGluZyBhIG1heCBzaG93biBtb2RlbHMgaW5wdXQgY29tcG9uZW50LlxyXG4gKiBAc2VlIHtAbGluayBNYXhTaG93bk1vZGVsc0NhbGxiYWNrfSBmb3IgZGV0YWlscyBhYm91dCB0aGUgbWF4IHNob3duIG1vZGVscyBjYWxsYmFjay5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1heFNob3duTW9kZWxzSW5wdXQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtYXggc2hvd24gbW9kZWxzIGlucHV0IGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byByZWdpc3RlciB0aGUgZXZlbnRzIHRvLlxyXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgbWF4IHNob3duIG1vZGVscyBudW1iZXIuXHJcbiAgICAgKiBAcGFyYW0gYmF0Y2hTaXplIFRoZSBiYXRjaCBzaXplIHRvIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAqIEBwYXJhbSBvbkNoYW5nZSBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSBtYXggc2hvd24gbW9kZWxzIG51bWJlciBjaGFuZ2VzLiBQYXNzZXMgdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyLiBZb3UgY2FuIHJldHVybiBhIG5ldyBtYXggc2hvd24gbW9kZWxzIG51bWJlci5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIG1heCBzaG93biBtb2RlbHMgaW5wdXQgY29tcG9uZW50IGFzIGBEb2N1bWVudEZyYWdtZW50YC5cclxuICAgICAqIEByZW1hcmtzIC0gVGhlIG1heCBzaG93biBtb2RlbHMgaW5wdXQgY29tcG9uZW50IGNvbnNpc3RzIG9mIGEgY29udGFpbmVyLCBhIG1pbnVzIHN5bWJvbCwgYSBwcmVzZW50YXRpb24gc3BhbiBhbmQgYSBwbHVzIHN5bWJvbC5cclxuICAgICAqIC0gQ1NTIGNsYXNzZXM6XHJcbiAgICAgKiAtIGBmaWx0ZXItbWF4LW1vZGVsc2AgLSBUaGUgY29udGFpbmVyIG9mIHRoZSBtYXggc2hvd24gbW9kZWxzIGlucHV0IGNvbXBvbmVudC5cclxuICAgICAqIC0gYGZpbHRlci1tYXgtbnVtYmVyYCAtIFRoZSBwcmVzZW50YXRpb24gc3BhbiBvZiB0aGUgbWF4IHNob3duIG1vZGVscyBpbnB1dCBjb21wb25lbnQuXHJcbiAgICAgKiAtIGBtaW51cy1iYXRjaC1idXR0b25gIC0gVGhlIG1pbnVzIHN5bWJvbCBvZiB0aGUgbWF4IHNob3duIG1vZGVscyBpbnB1dCBjb21wb25lbnQuXHJcbiAgICAgKiAtIGBwbHVzLWJhdGNoLWJ1dHRvbmAgLSBUaGUgcGx1cyBzeW1ib2wgb2YgdGhlIG1heCBzaG93biBtb2RlbHMgaW5wdXQgY29tcG9uZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShjb21wb25lbnQ6IENvbXBvbmVudCwgZGVmYXVsdFZhbHVlOiBudW1iZXIsIGJhdGNoU2l6ZTogbnVtYmVyLCBvbkNoYW5nZTogTWF4U2hvd25Nb2RlbHNDYWxsYmFjayk6IERvY3VtZW50RnJhZ21lbnQge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgY29uc3QgbG9nZ2VyID0gR2xvYmFsLmdldEluc3RhbmNlKCkubG9nZ2VyO1xyXG4gICAgICAgIGxldCBkZWJvdW5jZVRpbWVyOiBOb2RlSlMuVGltZW91dDtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4U2hvd25Nb2RlbHM6IE1heFNob3duTW9kZWxOdW1iZXIgPSB7XHJcbiAgICAgICAgICAgIG1heFNob3duTW9kZWxzOiAhaXNOYU4ocGFyc2VGbG9hdChkZWZhdWx0VmFsdWUgYXMgdW5rbm93biBhcyBzdHJpbmcpKSAmJiBpc0Zpbml0ZShkZWZhdWx0VmFsdWUpID8gTnVtYmVyKGRlZmF1bHRWYWx1ZSkgOiAwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgZmlsdGVyTWF4TW9kZWxzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgaGVhZGVySXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChmaWx0ZXJNYXhNb2RlbHNDb250YWluZXIpO1xyXG4gICAgICAgIGZpbHRlck1heE1vZGVsc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmaWx0ZXItbWF4LW1vZGVscycpO1xyXG5cclxuICAgICAgICBjb25zdCBudW1iZXIgPSB0aGlzLmNyZWF0ZU51bWJlclByZXNlbnRhdGlvbihtYXhTaG93bk1vZGVscywgY29tcG9uZW50LCBiYXRjaFNpemUpO1xyXG5cclxuICAgICAgICBjb25zdCBkZWJvdW5jZU9uQ2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZGVib3VuY2VUaW1lcik7XHJcbiAgICAgICAgICAgIGRlYm91bmNlVGltZXIgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4U2hvd25Nb2RlbHMubWF4U2hvd25Nb2RlbHMgPSAoYXdhaXQgb25DaGFuZ2UobWF4U2hvd25Nb2RlbHMubWF4U2hvd25Nb2RlbHMpKSA/PyBtYXhTaG93bk1vZGVscy5tYXhTaG93bk1vZGVscztcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiVGhlIGBvbkNoYW5nZWAgY2FsbGJhY2sgdGhyZXcgYW4gZXJyb3IhXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyLm51bWJlci50ZXh0Q29udGVudCA9IG1heFNob3duTW9kZWxzLm1heFNob3duTW9kZWxzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgTWF4U2hvd25Nb2RlbHNJbnB1dC5jcmVhdGVOdW1iZXJQcmVzZW50YXRpb25FdmVudChcclxuICAgICAgICAgICAgY29tcG9uZW50LFxyXG4gICAgICAgICAgICBudW1iZXIubnVtYmVyLFxyXG4gICAgICAgICAgICBtYXhTaG93bk1vZGVscyxcclxuICAgICAgICAgICAgYmF0Y2hTaXplLFxyXG4gICAgICAgICAgICBkZWJvdW5jZU9uQ2hhbmdlKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWludXMgPSB0aGlzLmNyZWF0ZVN5bWJvbChcclxuICAgICAgICAgICAgXCJtaW51c1wiLFxyXG4gICAgICAgICAgICBudW1iZXIubnVtYmVyLFxyXG4gICAgICAgICAgICBjb21wb25lbnQsXHJcbiAgICAgICAgICAgIG1heFNob3duTW9kZWxzLFxyXG4gICAgICAgICAgICBiYXRjaFNpemUsXHJcbiAgICAgICAgICAgIGRlYm91bmNlT25DaGFuZ2UpO1xyXG4gICAgICAgIGNvbnN0IHBsdXMgPSB0aGlzLmNyZWF0ZVN5bWJvbChcclxuICAgICAgICAgICAgXCJwbHVzXCIsXHJcbiAgICAgICAgICAgIG51bWJlci5udW1iZXIsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudCxcclxuICAgICAgICAgICAgbWF4U2hvd25Nb2RlbHMsXHJcbiAgICAgICAgICAgIGJhdGNoU2l6ZSxcclxuICAgICAgICAgICAgZGVib3VuY2VPbkNoYW5nZSk7XHJcblxyXG4gICAgICAgIGZpbHRlck1heE1vZGVsc0NvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51cyk7XHJcbiAgICAgICAgZmlsdGVyTWF4TW9kZWxzQ29udGFpbmVyLmFwcGVuZENoaWxkKG51bWJlci5jb250YWluZXIpO1xyXG4gICAgICAgIGZpbHRlck1heE1vZGVsc0NvbnRhaW5lci5hcHBlbmRDaGlsZChwbHVzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGhlYWRlckl0ZW1Db250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgdGhlIHByZXNlbnRhdGlvbiBzcGFuIGZvciB0aGUgbWF4IHNob3duIG1vZGVscyBudW1iZXIuXHJcbiAgICAgKiBAcGFyYW0gbWF4U2hvd25Nb2RlbHMgVGhlIGNvbnRhaW5lciBmb3IgdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyLlxyXG4gICAgICogQHJldHVybnMgLSBUaGUgY3JlYXRlZCBwcmVzZW50YXRpb24gc3BhbiBhcyBgRG9jdW1lbnRGcmFnbWVudGBcclxuICAgICAqIC0gVGhlIGNyZWF0ZWQgcHJlc2VudGF0aW9uIHNwYW4gYXMgYEhUTUxTcGFuRWxlbWVudGBcclxuICAgICAqIC0gVGhlIHNwYW4gZWxlbWVudCBoYXMgdGhlIGNsYXNzIGBmaWx0ZXItbWF4LW51bWJlcmAuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZU51bWJlclByZXNlbnRhdGlvbihcclxuICAgICAgICBtYXhTaG93bk1vZGVsczogTWF4U2hvd25Nb2RlbE51bWJlcixcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICBiYXRjaFNpemU6IG51bWJlcik6IHsgY29udGFpbmVyOiBEb2N1bWVudEZyYWdtZW50LCBudW1iZXI6IEhUTUxTcGFuRWxlbWVudCB9IHtcclxuICAgICAgICBjb25zdCBmaWx0ZXJNYXhNb2RlbHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heFNob3duTnVtYmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGZpbHRlck1heE1vZGVsc0NvbnRhaW5lci5hcHBlbmRDaGlsZChtYXhTaG93bk51bWJlcik7XHJcbiAgICAgICAgbWF4U2hvd25OdW1iZXIuY2xhc3NMaXN0LmFkZCgnZmlsdGVyLW1heC1udW1iZXInKTtcclxuICAgICAgICBtYXhTaG93bk51bWJlci50aXRsZSA9IExuZy5ndChcIk1heFNob3duRW50cnlzXCIpO1xyXG4gICAgICAgIG1heFNob3duTnVtYmVyLnRleHRDb250ZW50ID0gbWF4U2hvd25Nb2RlbHMubWF4U2hvd25Nb2RlbHMudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgY29udGFpbmVyOiBmaWx0ZXJNYXhNb2RlbHNDb250YWluZXIsIG51bWJlcjogbWF4U2hvd25OdW1iZXIgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhlIG1vdXNlIHdoZWVsIGV2ZW50cyBmb3IgdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyIHByZXNlbnRhdGlvbiBzcGFuLlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyIHRoZSBldmVudHMgdG8uXHJcbiAgICAgKiBAcGFyYW0gbWF4U2hvd25OdW1iZXIgVGhlIHByZXNlbnRhdGlvbiBzcGFuIG9mIHRoZSBtYXggc2hvd24gbW9kZWxzIG51bWJlci5cclxuICAgICAqIEBwYXJhbSBtYXhTaG93bk1vZGVscyBUaGUgY29udGFpbmVyIGZvciB0aGUgbWF4IHNob3duIG1vZGVscyBudW1iZXIuXHJcbiAgICAgKiBAcGFyYW0gYmF0Y2hTaXplIFRoZSBiYXRjaCBzaXplIHRvIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAqIEBwYXJhbSBvbk1heFNob3duTW9kZWxzQ2hhbmdlIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW4gdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyIGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZU51bWJlclByZXNlbnRhdGlvbkV2ZW50KGNvbXBvbmVudDogQ29tcG9uZW50LCBtYXhTaG93bk51bWJlcjogSFRNTFNwYW5FbGVtZW50LCBtYXhTaG93bk1vZGVsczogTWF4U2hvd25Nb2RlbE51bWJlciwgYmF0Y2hTaXplOiBudW1iZXIsIG9uTWF4U2hvd25Nb2RlbHNDaGFuZ2U6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBjb21wb25lbnQucmVnaXN0ZXJEb21FdmVudChtYXhTaG93bk51bWJlciwgJ3doZWVsJywgYXN5bmMgKGV2ZW50OiBXaGVlbEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5kZWx0YVkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVZhbHVlKFwibWludXNcIiwgbWF4U2hvd25Nb2RlbHMsIGJhdGNoU2l6ZSwgbWF4U2hvd25OdW1iZXIsIG9uTWF4U2hvd25Nb2RlbHNDaGFuZ2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VWYWx1ZShcInBsdXNcIiwgbWF4U2hvd25Nb2RlbHMsIGJhdGNoU2l6ZSwgbWF4U2hvd25OdW1iZXIsIG9uTWF4U2hvd25Nb2RlbHNDaGFuZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBzeW1ib2wgZm9yIHRoZSBtYXggc2hvd24gbW9kZWxzIG51bWJlci5cclxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBzeW1ib2wuIENhbiBiZSBgcGx1c2Agb3IgYG1pbnVzYC5cclxuICAgICAqIEBwYXJhbSBtYXhTaG93bk51bWJlciBUaGUgcHJlc2VudGF0aW9uIHNwYW4gb2YgdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyLlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyIHRoZSBldmVudHMgdG8uXHJcbiAgICAgKiBAcGFyYW0gbWF4U2hvd25Nb2RlbHMgVGhlIGNvbnRhaW5lciBmb3IgdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyLlxyXG4gICAgICogQHBhcmFtIGJhdGNoU2l6ZSBUaGUgYmF0Y2ggc2l6ZSB0byBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgKiBAcGFyYW0gb25NYXhTaG93bk1vZGVsc0NoYW5nZSBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSBtYXggc2hvd24gbW9kZWxzIG51bWJlciBjaGFuZ2VzLlxyXG4gICAgICogQHJldHVybnMgVGhlIGNyZWF0ZWQgc3ltYm9sIGFzIGBEb2N1bWVudEZyYWdtZW50YC5cclxuICAgICAqIEByZW1hcmtzIC0gVGhlIHN5bWJvbCBpcyBhIGBIVE1MQW5jaG9yRWxlbWVudGAuXHJcbiAgICAgKiAtIFRoZSBzeW1ib2wgaGFzIHRoZSBjbGFzcyBgcGx1cy1iYXRjaC1idXR0b25gIG9yIGBtaW51cy1iYXRjaC1idXR0b25gLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjcmVhdGVTeW1ib2woXHJcbiAgICAgICAgdHlwZTogXCJwbHVzXCIgfCBcIm1pbnVzXCIsXHJcbiAgICAgICAgbWF4U2hvd25OdW1iZXI6IEhUTUxTcGFuRWxlbWVudCxcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICBtYXhTaG93bk1vZGVsczogTWF4U2hvd25Nb2RlbE51bWJlcixcclxuICAgICAgICBiYXRjaFNpemU6IG51bWJlcixcclxuICAgICAgICBvbk1heFNob3duTW9kZWxzQ2hhbmdlOiAoKSA9PiB2b2lkKTogRG9jdW1lbnRGcmFnbWVudCB7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyTWF4TW9kZWxzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhTaG93bkRvY01pbnVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIGZpbHRlck1heE1vZGVsc0NvbnRhaW5lci5hcHBlbmRDaGlsZChtYXhTaG93bkRvY01pbnVzKTtcclxuICAgICAgICBtYXhTaG93bkRvY01pbnVzLmNsYXNzTGlzdC5hZGQoYCR7dHlwZX0tYmF0Y2gtYnV0dG9uYCk7XHJcbiAgICAgICAgbWF4U2hvd25Eb2NNaW51cy50aXRsZSA9IHR5cGU7XHJcbiAgICAgICAgbWF4U2hvd25Eb2NNaW51cy5ocmVmID0gXCIjXCI7XHJcbiAgICAgICAgc2V0SWNvbihtYXhTaG93bkRvY01pbnVzLCB0eXBlKTtcclxuXHJcbiAgICAgICAgY29tcG9uZW50LnJlZ2lzdGVyRG9tRXZlbnQobWF4U2hvd25Eb2NNaW51cywgJ2NsaWNrJywgYXN5bmMgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVmFsdWUodHlwZSwgbWF4U2hvd25Nb2RlbHMsIGJhdGNoU2l6ZSwgbWF4U2hvd25OdW1iZXIsIG9uTWF4U2hvd25Nb2RlbHNDaGFuZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmaWx0ZXJNYXhNb2RlbHNDb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2VzIHRoZSBtYXggc2hvd24gbW9kZWxzIG51bWJlci5cclxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBzeW1ib2wuIENhbiBiZSBgcGx1c2Agb3IgYG1pbnVzYC5cclxuICAgICAqIEBwYXJhbSBtYXhTaG93bk1vZGVscyBUaGUgY29udGFpbmVyIGZvciB0aGUgbWF4IHNob3duIG1vZGVscyBudW1iZXIuXHJcbiAgICAgKiBAcGFyYW0gYmF0Y2hTaXplIFRoZSBiYXRjaCBzaXplIHRvIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAqIEBwYXJhbSBtYXhTaG93bk51bWJlciBUaGUgcHJlc2VudGF0aW9uIHNwYW4gb2YgdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyLlxyXG4gICAgICogQHBhcmFtIG9uTWF4U2hvd25Nb2RlbHNDaGFuZ2UgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbiB0aGUgbWF4IHNob3duIG1vZGVscyBudW1iZXIgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2hhbmdlVmFsdWUodHlwZTogc3RyaW5nLCBtYXhTaG93bk1vZGVsczogTWF4U2hvd25Nb2RlbE51bWJlciwgYmF0Y2hTaXplOiBudW1iZXIsIG1heFNob3duTnVtYmVyOiBIVE1MU3BhbkVsZW1lbnQsIG9uTWF4U2hvd25Nb2RlbHNDaGFuZ2U6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJtaW51c1wiKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXhTaG93bk1vZGVscy5tYXhTaG93bk1vZGVscyA+PSBiYXRjaFNpemUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0cyBlaXRoZXIgdGhlIHJlbWFpbmRlciAodG8gYXJyaXZlIGF0IHRoZSBuZXh0IG11bHRpcGxlIG9mIGBiYXRjaFNpemVgKSBvciBgYmF0Y2hTaXplYCBpdHNlbGZcclxuICAgICAgICAgICAgICAgIG1heFNob3duTW9kZWxzLm1heFNob3duTW9kZWxzIC09IChtYXhTaG93bk1vZGVscy5tYXhTaG93bk1vZGVscyAlIGJhdGNoU2l6ZSkgfHwgYmF0Y2hTaXplO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWF4U2hvd25Nb2RlbHMubWF4U2hvd25Nb2RlbHMgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQWRkcyBlaXRoZXIgdGhlIHJlbWFpbmRlciAodG8gYXJyaXZlIGF0IHRoZSBuZXh0IG11bHRpcGxlIG9mIGBiYXRjaFNpemVgKSBvciBgYmF0Y2hTaXplYCBpdHNlbGZcclxuICAgICAgICAgICAgbWF4U2hvd25Nb2RlbHMubWF4U2hvd25Nb2RlbHMgKz0gYmF0Y2hTaXplIC0gKG1heFNob3duTW9kZWxzLm1heFNob3duTW9kZWxzICUgYmF0Y2hTaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWF4U2hvd25OdW1iZXIudGV4dENvbnRlbnQgPSBtYXhTaG93bk1vZGVscy5tYXhTaG93bk1vZGVscy50b1N0cmluZygpO1xyXG4gICAgICAgIG9uTWF4U2hvd25Nb2RlbHNDaGFuZ2UoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBjYWxsYmFjayBmb3IgYSBjaGFuZ2Ugb2YgdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyLlxyXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGN1cnJlbnQgbWF4IHNob3duIG1vZGVscyBudW1iZXIuXHJcbiAqIEByZXR1cm5zIC0gVGhlIG5ldyBtYXggc2hvd24gbW9kZWxzIG51bWJlci5cclxuICogLSBJZiB5b3UgcmV0dXJuIGB1bmRlZmluZWRgIHRoZSBtYXggc2hvd24gbW9kZWxzIG51bWJlciBpcyBub3QgY2hhbmdlZC5cclxuICogQHJlbWFya3MgVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBtYXggc2hvd24gbW9kZWxzIG51bWJlciBpcyBjaGFuZ2VkLlxyXG4gKi9cclxudHlwZSBNYXhTaG93bk1vZGVsc0NhbGxiYWNrID0gKHZhbHVlOiBudW1iZXIpID0+IFByb21pc2U8bnVtYmVyIHwgdW5kZWZpbmVkPjtcclxuXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgdGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyLlxyXG4gKiBAcGFyYW0gbWF4U2hvd25Nb2RlbHMgVGhlIG1heCBzaG93biBtb2RlbHMgbnVtYmVyLlxyXG4gKiBAcmVtYXJrcyBUaGUgY29udGFpbmVyIGlzIHVzZWQgdG8gcGFzcyB0aGUgbWF4IHNob3duIG1vZGVscyBudW1iZXIgYnkgcmVmZXJlbmNlLlxyXG4gKi9cclxudHlwZSBNYXhTaG93bk1vZGVsTnVtYmVyID0geyBtYXhTaG93bk1vZGVsczogbnVtYmVyIH0iLCAiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBHbG9iYWwgZnJvbSBcInNyYy9jbGFzc2VzL0dsb2JhbFwiO1xyXG5pbXBvcnQgTG5nIGZyb20gXCJzcmMvY2xhc3Nlcy9MbmdcIjtcclxuXHJcbi8qKlxyXG4gKiBTZWFyY2ggaW5wdXQgY29tcG9uZW50IGNsYXNzIGZvciBgVGFibGVCbG9ja1JlbmRlckNvbXBvbmVudGAuXHJcbiAqXHJcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgbWV0aG9kcyB0byBjcmVhdGUgYW5kIG1hbmFnZSBhIHNlYXJjaCBpbnB1dCBjb21wb25lbnQuXHJcbiAqIEl0IGluY2x1ZGVzIGZ1bmN0aW9uYWxpdHkgZm9yIHNldHRpbmcgdXAgdGhlIHNlYXJjaCBib3ggYW5kIGhhbmRsaW5nIGlucHV0IGV2ZW50cy5cclxuICpcclxuICogQHNlZSB7QGxpbmsgY3JlYXRlfSBmb3IgZGV0YWlscyBhYm91dCBjcmVhdGluZyBhIHNlYXJjaCBpbnB1dCBjb21wb25lbnQuXHJcbiAqIEBzZWUge0BsaW5rIFNlYXJjaENhbGxiYWNrfSBmb3IgZGV0YWlscyBhYm91dCB0aGUgc2VhcmNoIGNhbGxiYWNrLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoSW5wdXQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHNlYXJjaCBpbnB1dCBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IFRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXIgdGhlIGV2ZW50cyB0by5cclxuICAgICAqIEBwYXJhbSBvblNlYXJjaCBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSBzZWFyY2ggYm94IHZhbHVlIGNoYW5nZXMuIFBhc3NlcyB0aGUgc2VhcmNoIGJveCB2YWx1ZSBhbmQgdGhlIGtleSB0aGF0IHdhcyBwcmVzc2VkLlxyXG4gICAgICogQHJldHVybnMgVGhlIGNyZWF0ZWQgc2VhcmNoIGlucHV0IGNvbXBvbmVudCBhcyBgRG9jdW1lbnRGcmFnbWVudGAuXHJcbiAgICAgKiBAcmVtYXJrcyAtIFRoZSBzZWFyY2ggaW5wdXQgY29tcG9uZW50IGNvbnNpc3RzIG9mIGEgbGFiZWwsIGFuIGlucHV0IHNpemVyIGFuZCBhIHNlYXJjaCBib3guXHJcbiAgICAgKiAtIENTUyBjbGFzc2VzOlxyXG4gICAgICogIC0gYGZpbHRlci1zZWFyY2hgIC0gVGhlIGNvbnRhaW5lciBvZiB0aGUgc2VhcmNoIGlucHV0IGNvbXBvbmVudC5cclxuICAgICAqICAtIGBmaWx0ZXItdGV4dGAgLSBUaGUgbGFiZWwgb2YgdGhlIHNlYXJjaCBpbnB1dCBjb21wb25lbnQuXHJcbiAgICAgKiAgLSBgc2VhcmNoLWJveC1zaXplcmAgLSBUaGUgc2l6ZXIgb2YgdGhlIHNlYXJjaCBpbnB1dCBjb21wb25lbnQuXHJcbiAgICAgKiAgLSBgc2VhcmNoLWJveGAgLSBUaGUgc2VhcmNoIGJveCBvZiB0aGUgc2VhcmNoIGlucHV0IGNvbXBvbmVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGUoY29tcG9uZW50OiBDb21wb25lbnQsIG9uU2VhcmNoOiBTZWFyY2hDYWxsYmFjayk6IERvY3VtZW50RnJhZ21lbnQge1xyXG4gICAgICAgIGNvbnN0IGxvZ2dlciA9IEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlcjtcclxuICAgICAgICBjb25zdCBoZWFkZXJJdGVtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICBjb25zdCBzZWFyY2hMYWJlbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGhlYWRlckl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQoc2VhcmNoTGFiZWxDb250YWluZXIpO1xyXG4gICAgICAgIHNlYXJjaExhYmVsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2ZpbHRlci1zZWFyY2gnKTtcclxuXHJcbiAgICAgICAgU2VhcmNoSW5wdXQuY3JlYXRlU2VhcmNoTGFiZWwoc2VhcmNoTGFiZWxDb250YWluZXIpO1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaEJveFNpemVyID0gU2VhcmNoSW5wdXQuY3JlYXRlU2VhcmNoQm94U2l6ZXIoc2VhcmNoTGFiZWxDb250YWluZXIpO1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaEJveElucHV0ID0gU2VhcmNoSW5wdXQuY3JlYXRlU2VhcmNoQm94SW5wdXQoc2VhcmNoQm94U2l6ZXIpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciBpbnB1dCBldmVudCB0byBzZXQgdGhlIHNlYXJjaCBib3ggc2l6ZXIgdmFsdWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29tcG9uZW50LnJlZ2lzdGVyRG9tRXZlbnQoc2VhcmNoQm94SW5wdXQsICdpbnB1dCcsIGFzeW5jIChldmVudDogSW5wdXRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldFNlYXJjaEJveFNpemVyVmFsdWUoc2VhcmNoQm94U2l6ZXIsIHNlYXJjaEJveElucHV0LnZhbHVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXIga2V5ZG93biBldmVudCB0byBjYWxsIHRoZSBzZWFyY2ggY2FsbGJhY2suXHJcbiAgICAgICAgICogQHJlbWFya3MgLSBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBjYWxsYmFjayBpcyB1c2VkIHRvIHNldCB0aGUgc2VhcmNoIGJveCB2YWx1ZSBhbmQgdGhlIHNlYXJjaCBib3ggc2l6ZXIgdmFsdWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29tcG9uZW50LnJlZ2lzdGVyRG9tRXZlbnQoc2VhcmNoQm94SW5wdXQsICdrZXlkb3duJywgYXN5bmMgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHNlYXJjaEJveElucHV0LnZhbHVlO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBhd2FpdCBvblNlYXJjaChzZWFyY2hCb3hJbnB1dC52YWx1ZSwgZXZlbnQua2V5KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlRoZSBgb25TZWFyY2hgIGNhbGxiYWNrIHRocmV3IGFuIGVycm9yIVwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlYXJjaEJveFNpemVyVmFsdWUoc2VhcmNoQm94U2l6ZXIsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VhcmNoQm94SW5wdXRWYWx1ZShzZWFyY2hCb3hJbnB1dCwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBoZWFkZXJJdGVtQ29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyB0aGUgc2VhcmNoIGxhYmVsLlxyXG4gICAgICogQHBhcmFtIHNlYXJjaExhYmVsQ29udGFpbmVyIFRoZSBjb250YWluZXIgdG8gYXBwZW5kIHRoZSBsYWJlbCB0by4gXHJcbiAgICAgKiBAcmVtYXJrcyAtIFRoZSBsYWJlbCBpcyBhIGBIVE1MU3BhbkVsZW1lbnRgLlxyXG4gICAgICogLSBUaGUgbGFiZWwgdGV4dCBpcyBgU2VhcmNoYC12YWx1ZSBvZiB0aGUgdHJhbnNsYXRpb24uXHJcbiAgICAgKiAtIFRoZSBsYWJlbCBlbGVtZW50IGhhcyB0aGUgY2xhc3MgYGZpbHRlci10ZXh0YC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlU2VhcmNoTGFiZWwoc2VhcmNoTGFiZWxDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgc2VhcmNoTGFiZWxDb250YWluZXIuYXBwZW5kQ2hpbGQoZmlsdGVyTGFiZWwpO1xyXG4gICAgICAgIGZpbHRlckxhYmVsLmNsYXNzTGlzdC5hZGQoJ2ZpbHRlci10ZXh0Jyk7XHJcbiAgICAgICAgZmlsdGVyTGFiZWwudGV4dENvbnRlbnQgPSBMbmcuZ3QoXCJTZWFyY2hcIikgKyBcIjpcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhlIHNlYXJjaCBib3ggc2l6ZXIuXHJcbiAgICAgKiBAcGFyYW0gc2VhcmNoTGFiZWxDb250YWluZXIgVGhlIGNvbnRhaW5lciB0byBhcHBlbmQgdGhlIHNpemVyIHRvLlxyXG4gICAgICogQHJldHVybnMgVGhlIGNyZWF0ZWQgc2VhcmNoIGJveCBzaXplci5cclxuICAgICAqIEByZW1hcmtzIC0gVGhlIHNpemVyIGlzIGEgYEhUTUxMYWJlbEVsZW1lbnRgLlxyXG4gICAgICogLSBUaGUgc2l6ZXIgaGFzIHRoZSBjbGFzcyBgc2VhcmNoLWJveC1zaXplcmAuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZVNlYXJjaEJveFNpemVyKHNlYXJjaExhYmVsQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaEJveFNpemVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICBzZWFyY2hMYWJlbENvbnRhaW5lci5hcHBlbmRDaGlsZChzZWFyY2hCb3hTaXplcik7XHJcbiAgICAgICAgc2VhcmNoQm94U2l6ZXIuY2xhc3NMaXN0LmFkZCgnc2VhcmNoLWJveC1zaXplcicpO1xyXG4gICAgICAgIHJldHVybiBzZWFyY2hCb3hTaXplcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhlIHNlYXJjaCBib3ggaW5wdXQuXHJcbiAgICAgKiBAcGFyYW0gc2VhcmNoQm94U2l6ZXIgVGhlIGNvbnRhaW5lciB0byBhcHBlbmQgdGhlIGlucHV0IHRvLlxyXG4gICAgICogQHJldHVybnMgVGhlIGNyZWF0ZWQgc2VhcmNoIGJveCBpbnB1dC5cclxuICAgICAqIEByZW1hcmtzIC0gVGhlIGlucHV0IGlzIGEgYEhUTUxJbnB1dEVsZW1lbnRgLlxyXG4gICAgICogLSBUaGUgaW5wdXQgdHlwZSBpcyBgdGV4dGAuXHJcbiAgICAgKiAtIFRoZSBpbnB1dCBwbGFjZWhvbGRlciBpcyBgU2VhcmNoYC12YWx1ZSBvZiB0aGUgdHJhbnNsYXRpb24uXHJcbiAgICAgKiAtIFRoZSBpbnB1dCBlbGVtZW50IGhhcyB0aGUgY2xhc3MgYHNlYXJjaC1ib3hgLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjcmVhdGVTZWFyY2hCb3hJbnB1dChzZWFyY2hCb3hTaXplcjogSFRNTExhYmVsRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaEJveElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICBzZWFyY2hCb3hTaXplci5hcHBlbmRDaGlsZChzZWFyY2hCb3hJbnB1dCk7XHJcbiAgICAgICAgc2VhcmNoQm94SW5wdXQuY2xhc3NMaXN0LmFkZCgnc2VhcmNoLWJveCcpO1xyXG4gICAgICAgIHNlYXJjaEJveElucHV0LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICBzZWFyY2hCb3hJbnB1dC5wbGFjZWhvbGRlciA9IExuZy5ndChcIlNlYXJjaFwiKTtcclxuICAgICAgICBzZWFyY2hCb3hJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgcmV0dXJuIHNlYXJjaEJveElucHV0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc2VhcmNoIGJveCBzaXplciB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSBzZWFyY2hCb3hTaXplciBUaGUgc2VhcmNoIGJveCBzaXplciB0byBzZXQgdGhlIHZhbHVlIHRvLlxyXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHNldFNlYXJjaEJveFNpemVyVmFsdWUoc2VhcmNoQm94U2l6ZXI6IEhUTUxFbGVtZW50LCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgc2VhcmNoQm94U2l6ZXIuZGF0YXNldC52YWx1ZSA9IFwiX1wiICsgdmFsdWUgKyBcIl9cIjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHNlYXJjaCBib3ggaW5wdXQgdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0gc2VhcmNoQm94SW5wdXQgVGhlIHNlYXJjaCBib3ggaW5wdXQgdG8gc2V0IHRoZSB2YWx1ZSB0by5cclxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzZXRTZWFyY2hCb3hJbnB1dFZhbHVlKHNlYXJjaEJveElucHV0OiBIVE1MSW5wdXRFbGVtZW50LCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgc2VhcmNoQm94SW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBzZWFyY2ggY2FsbGJhY2suXHJcbiAqIEBwYXJhbSBzZWFyY2hib3hWYWx1ZSBUaGUgdmFsdWUgb2YgdGhlIHNlYXJjaCBib3guXHJcbiAqIEBwYXJhbSBldmVudEtleSBUaGUga2V5IHRoYXQgd2FzIHByZXNzZWQuXHJcbiAqIEByZXR1cm5zIFRoZSB2YWx1ZSB0byBzZXQgdG8gdGhlIHNlYXJjaCBib3ggYW5kIHRoZSBzZWFyY2ggYm94IHNpemVyLlxyXG4gKiBAcmVtYXJrcyAtIFVzZSB0aGUgYGV2ZW50S2V5YCB0byBkZXRlcm1pbmUgd2hpY2gga2V5IHdhcyBwcmVzc2VkLlxyXG4gKiAtIFN0YXJ0IHNlYXJjaCBvbiBgRW50ZXJgIGtleS5cclxuICogLSBDbGVhciBzZWFyY2ggb24gYEVzY2FwZWAga2V5LlxyXG4gKi9cclxudHlwZSBTZWFyY2hDYWxsYmFjayA9IChzZWFyY2hib3hWYWx1ZTogc3RyaW5nLCBldmVudEtleTogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZz47IiwgImltcG9ydCB7IENvbXBvbmVudCwgTWFya2Rvd25SZW5kZXJlciwgVEZpbGUsIHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IEdsb2JhbCBmcm9tIFwic3JjL2NsYXNzZXMvR2xvYmFsXCI7XHJcbmltcG9ydCBMbmcgZnJvbSBcInNyYy9jbGFzc2VzL0xuZ1wiO1xyXG5pbXBvcnQgRWRpdGFibGVEYXRhVmlldyBmcm9tIFwic3JjL2xpYnMvRWRpdGFibGVEYXRhVmlldy9FZGl0YWJsZURhdGFWaWV3XCI7XHJcbmltcG9ydCBIZWxwZXIgZnJvbSBcInNyYy9saWJzL0hlbHBlclwiO1xyXG5pbXBvcnQgeyBEb2N1bWVudE1vZGVsIH0gZnJvbSBcInNyYy9tb2RlbHMvRG9jdW1lbnRNb2RlbFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRG9jdW1lbnRDb21wb25lbnRzIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlQ2VsbFRhZ3MoXHJcbiAgICAgICAgdGFnQ29udGFpbmVyOiBEb2N1bWVudEZyYWdtZW50LFxyXG4gICAgICAgIGNvbXBvbmVudDogQ29tcG9uZW50LFxyXG4gICAgICAgIHRhZ3M6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBFZGl0YWJsZURhdGFWaWV3KHRhZ0NvbnRhaW5lciwgY29tcG9uZW50KVxyXG4gICAgICAgICAgICAgICAgLmFkZExpbmsobGluayA9PiBsaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRhZylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJUYWdcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TGlua1R5cGUoXCJ0YWdcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0Rm9ybWF0b3IoKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaHJlZjogYCMke3ZhbHVlfWAsIHRleHQ6IGAjJHt2YWx1ZX1gIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVDZWxsU3VtbWFyeShcclxuICAgICAgICBkb2N1bWVudE1vZGVsOiBEb2N1bWVudE1vZGVsLFxyXG4gICAgICAgIGNvbXBvbmVudDogQ29tcG9uZW50LFxyXG4gICAgICAgIHN1bW1hcnlSZWxhdGVkRmlsZXM6IERvY3VtZW50RnJhZ21lbnQpIHtcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50TW9kZWwuZ2V0RGVzY3JpcHRpb24oKTtcclxuICAgICAgICBuZXcgRWRpdGFibGVEYXRhVmlldyhzdW1tYXJ5UmVsYXRlZEZpbGVzLCBjb21wb25lbnQpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0YXJlYSh0ZXh0YXJlYSA9PiB0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKGRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiU3VtbWFyeVwiKVxyXG4gICAgICAgICAgICAgICAgLmVuYWJsZUVkaXRhYmlsaXR5KClcclxuICAgICAgICAgICAgICAgIC5zZXRSZW5kZXJNYXJrZG93bigpXHJcbiAgICAgICAgICAgICAgICAub25TYXZlKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRNb2RlbC5kYXRhLmRlc2NyaXB0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZVJlbGF0ZWRGaWxlc0xpc3QoXHJcbiAgICAgICAgcmVsYXRlZEZpbGVzTGlzdDogRG9jdW1lbnRGcmFnbWVudCxcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICBkb2N1bWVudE1vZGVsOiBEb2N1bWVudE1vZGVsLFxyXG4gICAgICAgIG5vbmVEb2NTeW1ib2w6IHN0cmluZyxcclxuICAgICAgICBkYXRlRm9ybWF0U2hvcnQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHJlbGF0ZWRGaWxlcyA9IGRvY3VtZW50TW9kZWwucmVsYXRlZEZpbGVzO1xyXG4gICAgICAgIGlmICghcmVsYXRlZEZpbGVzIHx8IHJlbGF0ZWRGaWxlcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICByZWxhdGVkRmlsZXNMaXN0LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3JlbGF0ZWQtZmlsZXMtY29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJyZWFrTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJyk7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJyZWFrTGluZSk7XHJcbiAgICAgICAgYnJlYWtMaW5lLmNsYXNzTGlzdC5hZGQoJ3JlbGF0ZWQtZmlsZXMtYnJlYWtsaW5lJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0KTtcclxuICAgICAgICBsaXN0LmNsYXNzTGlzdC5hZGQoJ3JlbGF0ZWQtZmlsZXMtbGlzdCcpO1xyXG5cclxuICAgICAgICByZWxhdGVkRmlsZXMuZm9yRWFjaChyZWxhdGVkRmlsZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3RFbnRyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgIGxpc3QuYXBwZW5kKGxpc3RFbnRyeSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBncmlkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGxpc3RFbnRyeS5hcHBlbmRDaGlsZChncmlkQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgZ3JpZENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdncmlkLWNvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgZ3JpZENvbnRhaW5lci5hcHBlbmQoaWNvbkNvbnRhaW5lcilcclxuICAgICAgICAgICAgaWNvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdpY29uLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dE91dHB1dFN0YXRlID0gcmVsYXRlZEZpbGUuZ2V0SW5wdXRPdXRwdXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAvL0lucHV0LCBPdXRwdXQgb3IgZGVmYXVsdCBpY29uXHJcbiAgICAgICAgICAgIGxldCBsaXN0SWNvblN0cmluZyA9IG5vbmVEb2NTeW1ib2w7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dE91dHB1dFN0YXRlID09PSBcIklucHV0XCIpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RJY29uU3RyaW5nID0gXCJjb3JuZXItbGVmdC1kb3duXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRPdXRwdXRTdGF0ZSA9PT0gXCJPdXRwdXRcIikge1xyXG4gICAgICAgICAgICAgICAgbGlzdEljb25TdHJpbmcgPSBcImNvcm5lci1yaWdodC11cFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldEljb24oaWNvbkNvbnRhaW5lciwgbGlzdEljb25TdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgLy9NZXRhZGF0YSBGaWxlIExpbmtcclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGFDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIGdyaWRDb250YWluZXIuYXBwZW5kKG1ldGFkYXRhQ29udGFpbmVyKVxyXG4gICAgICAgICAgICBtZXRhZGF0YUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtZXRhZGF0YS1maWxlLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YUZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNlbGxNZXRhZGF0YWxpbmsobWV0YWRhdGFGcmFnbWVudCwgY29tcG9uZW50LCByZWxhdGVkRmlsZSk7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhQ29udGFpbmVyLmFwcGVuZENoaWxkKG1ldGFkYXRhRnJhZ21lbnQpO1xyXG5cclxuICAgICAgICAgICAgLy9EYXRlXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIGdyaWRDb250YWluZXIuYXBwZW5kKGRhdGVDb250YWluZXIpXHJcbiAgICAgICAgICAgIGRhdGVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGF0ZS1jb250YWluZXInKTtcclxuICAgICAgICAgICAgbmV3IEVkaXRhYmxlRGF0YVZpZXcoZGF0ZUNvbnRhaW5lciwgY29tcG9uZW50KVxyXG4gICAgICAgICAgICAgICAgLmFkZERhdGUoZGF0ZSA9PiBkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHJlbGF0ZWRGaWxlLmRhdGEuZGF0ZSA/PyBcIm5hXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiRG9jdW1lbnQgRGF0ZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRGb3JtYXRvcigodmFsdWU6IHN0cmluZykgPT4gSGVscGVyLmZvcm1hdERhdGUodmFsdWUsIEhlbHBlci5mb3JtYXREYXRlKHZhbHVlLCBkYXRlRm9ybWF0U2hvcnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGV4dENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgZ3JpZENvbnRhaW5lci5hcHBlbmQodGV4dENvbnRhaW5lcilcclxuICAgICAgICAgICAgdGV4dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdkYXRhLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgICAgIC8vVGl0bGUgYW5kIExpbmtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVDZWxsRmlsZUxpbmsobGlua0ZyYWdtZW50LCBjb21wb25lbnQsIHJlbGF0ZWRGaWxlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHRleHRDb250YWluZXIuYXBwZW5kKGxpbmtGcmFnbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVDZWxsU2VuZGVyUmVjaXBpZW50KFxyXG4gICAgICAgIGRvY3VtZW50TW9kZWw6IERvY3VtZW50TW9kZWwsXHJcbiAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnQsXHJcbiAgICAgICAgbW9kZWxzOiBEb2N1bWVudE1vZGVsW10pOiBEb2N1bWVudEZyYWdtZW50IHtcclxuICAgICAgICBjb25zdCBzZW5kZXJSZWNpcGllbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgc2VuZGVyUmVjaXBpZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3NlbmRlclJlY2lwaWVudCcpO1xyXG5cclxuICAgICAgICBjb25zdCBpbnB1dE91dHB1dFN0YXRlID0gZG9jdW1lbnRNb2RlbC5nZXRJbnB1dE91dHB1dFN0YXRlKCk7XHJcbiAgICAgICAgY29uc3Qgc2VuZGVyID0gZG9jdW1lbnRNb2RlbC5kYXRhLnNlbmRlciA/PyBudWxsO1xyXG4gICAgICAgIGNvbnN0IHJlY2lwaWVudCA9IGRvY3VtZW50TW9kZWwuZGF0YS5yZWNpcGllbnQgPz8gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKHNlbmRlciAmJiBpbnB1dE91dHB1dFN0YXRlICE9PSBcIk91dHB1dFwiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbmRlckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBzZW5kZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBmcm9tVG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIGZyb21Uby5jbGFzc0xpc3QuYWRkKCdmcm9tVG8nKTtcclxuICAgICAgICAgICAgZnJvbVRvLnRleHRDb250ZW50ID0gTG5nLmd0KFwiRnJvbVwiKTtcclxuICAgICAgICAgICAgc2VuZGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyb21Ubyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICBuYW1lLmNsYXNzTGlzdC5hZGQoJ25hbWUnKTtcclxuICAgICAgICAgICAgc2VuZGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKG5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUVEVlNlbmRlclJlY2lwaWVudChuYW1lLCBjb21wb25lbnQsIHNlbmRlciwgXCJTZW5kZXJcIiwgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50TW9kZWwuZGF0YS5zZW5kZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSwgbW9kZWxzKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzZW5kZXJDb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVjaXBpZW50ICYmIGlucHV0T3V0cHV0U3RhdGUgIT09IFwiSW5wdXRcIikge1xyXG4gICAgICAgICAgICBjb25zdCByZWNpcGllbnRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmVjaXBpZW50Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZnJvbVRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICBmcm9tVG8uY2xhc3NMaXN0LmFkZCgnZnJvbVRvJyk7XHJcbiAgICAgICAgICAgIGZyb21Uby50ZXh0Q29udGVudCA9IExuZy5ndChcIlRvXCIpO1xyXG4gICAgICAgICAgICByZWNpcGllbnRDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJvbVRvKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIG5hbWUuY2xhc3NMaXN0LmFkZCgnbmFtZScpO1xyXG4gICAgICAgICAgICByZWNpcGllbnRDb250YWluZXIuYXBwZW5kQ2hpbGQobmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRURWU2VuZGVyUmVjaXBpZW50KG5hbWUsIGNvbXBvbmVudCwgcmVjaXBpZW50LCBcIlJlY2lwaWVudFwiLCAodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRNb2RlbC5kYXRhLnJlY2lwaWVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9LCBtb2RlbHMpO1xyXG5cclxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJlY2lwaWVudENvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZW5kZXJSZWNpcGllbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlRURWU2VuZGVyUmVjaXBpZW50KFxyXG4gICAgICAgIG5hbWU6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudCxcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICB2YWx1ZTogc3RyaW5nLFxyXG4gICAgICAgIHRpdGxlOiBzdHJpbmcsXHJcbiAgICAgICAgb25TYXZlQ2FsbGJhY2s6ICh2YWx1ZTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+LFxyXG4gICAgICAgIG1vZGVsczogRG9jdW1lbnRNb2RlbFtdID0gW10pIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVkaXRhYmxlRGF0YVZpZXcobmFtZSwgY29tcG9uZW50KVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZSh0aXRsZSlcclxuICAgICAgICAgICAgICAgIC5lbmFibGVFZGl0YWJpbGl0eSgpXHJcbiAgICAgICAgICAgICAgICAuc2V0U3VnZ2VzdGVyKChpbnB1dFZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IG1vZGVsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmxhdE1hcChkb2N1bWVudCA9PiBbZG9jdW1lbnQuZGF0YS5zZW5kZXIsIGRvY3VtZW50LmRhdGEucmVjaXBpZW50XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigodik6IHYgaXMgc3RyaW5nID0+IHYgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigodiwgaW5kZXgsIHNlbGYpID0+IHNlbGYuaW5kZXhPZih2KSA9PT0gaW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodiA9PiB2LmluY2x1ZGVzKGlucHV0VmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc29ydCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpY2UoMCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWdnZXN0aW9ucztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub25TYXZlKChuZXdWYWx1ZTogc3RyaW5nKSA9PiBvblNhdmVDYWxsYmFjayhuZXdWYWx1ZSkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVDZWxsRmlsZUxpbmsoXHJcbiAgICAgICAgZmlsZUxpbms6IERvY3VtZW50RnJhZ21lbnQsXHJcbiAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnQsXHJcbiAgICAgICAgZG9jdW1lbnRNb2RlbDogRG9jdW1lbnRNb2RlbCxcclxuICAgICAgICBlZGl0YWJpbGl0eSA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBmaWxlQ2FjaGUgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5maWxlQ2FjaGU7XHJcbiAgICAgICAgY29uc3QgYXBwID0gR2xvYmFsLmdldEluc3RhbmNlKCkuYXBwO1xyXG4gICAgICAgIG5ldyBFZGl0YWJsZURhdGFWaWV3KGZpbGVMaW5rLCBjb21wb25lbnQpXHJcbiAgICAgICAgICAgIC5hZGRMaW5rKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGluay5zZXRWYWx1ZShkb2N1bWVudE1vZGVsLmRhdGEudGl0bGUgPz8gXCJcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoTG5nLmd0KFwiUERGRmlsZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TGlua1R5cGUoXCJmaWxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEZvcm1hdG9yKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VGaWxlRGF0YSA9IEhlbHBlci5leHRyYWN0RGF0YUZyb21XaWtpbGluayhkb2N1bWVudE1vZGVsLmRhdGEuZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VGaWxlID0gZmlsZUNhY2hlLmZpbmRGaWxlQnlOYW1lKGJhc2VGaWxlRGF0YS5maWxlbmFtZSA/PyBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJhc2VGaWxlUGF0aCA9IGJhc2VGaWxlRGF0YS5maWxlbmFtZSA/PyBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZUZpbGUgJiYgYmFzZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZUZpbGVQYXRoID0gYmFzZUZpbGUucGF0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZG9jRnJhZ21lbnQ6IERvY3VtZW50RnJhZ21lbnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChIZWxwZXIuaXNQb3NzaWJseU1hcmtkb3duKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKGFwcCwgdmFsdWUgPz8gXCJcIiwgZGl2LCBcIlwiLCBjb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jRnJhZ21lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBocmVmOiBgJHtiYXNlRmlsZVBhdGh9YCwgdGV4dDogYCR7dmFsdWV9YCwgaHRtbDogZG9jRnJhZ21lbnQgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChlZGl0YWJpbGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmsuZW5hYmxlRWRpdGFiaWxpdHkoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25TYXZlKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudE1vZGVsLmRhdGEudGl0bGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlQ2VsbE1ldGFkYXRhbGluayhcclxuICAgICAgICBtZXRhZGF0YUxpbms6IERvY3VtZW50RnJhZ21lbnQsXHJcbiAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnQsXHJcbiAgICAgICAgZG9jdW1lbnRNb2RlbDogRG9jdW1lbnRNb2RlbCkge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gR2xvYmFsLmdldEluc3RhbmNlKCkuc2V0dGluZ3M7XHJcbiAgICAgICAgbmV3IEVkaXRhYmxlRGF0YVZpZXcobWV0YWRhdGFMaW5rLCBjb21wb25lbnQpXHJcbiAgICAgICAgICAgIC5hZGRMaW5rKGxpbmsgPT4gbGlua1xyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKGRvY3VtZW50TW9kZWwuZmlsZS5wYXRoKVxyXG4gICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBtZXRhZGF0YSBmaWxlXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0TGlua1R5cGUoXCJmaWxlXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Rm9ybWF0b3IoKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpY29uU3RyaW5nID0gXCJ4LWNpcmNsZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudE1vZGVsLmRhdGEuaGlkZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uU3RyaW5nID0gc2V0dGluZ3MuZG9jdW1lbnRTZXR0aW5ncy5oaWRlU3ltYm9sO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudE1vZGVsLmRhdGEuc3ViVHlwZSA9PT0gXCJDbHVzdGVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBzZXR0aW5ncy5kb2N1bWVudFNldHRpbmdzLmNsdXN0ZXJTeW1ib2w7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU3RyaW5nID0gc2V0dGluZ3MuZG9jdW1lbnRTZXR0aW5ncy5zeW1ib2w7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihpY29uIGFzIHVua25vd24gYXMgSFRNTERpdkVsZW1lbnQsIGljb25TdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGhyZWY6IGAke3ZhbHVlfWAsIHRleHQ6IGAke3ZhbHVlfWAsIGh0bWw6IGljb24gfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICkpO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFBsYXRmb3JtLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBHbG9iYWwgZnJvbSBcInNyYy9jbGFzc2VzL0dsb2JhbFwiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIEJhc2VDb21wb25lbnQge1xyXG4gICAgcHVibGljIGdldCBjb250YWluZXIoKTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoaXBwaW5nQ29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIGNvbXBvbmVudDogQ29tcG9uZW50O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgYHRydWVgLCB0aGUgY29tcG9uZW50IHdpbGwgYmUgY3JlYXRlZCB0byBhbGxvdyBlZGl0aW5nLlxyXG4gICAgICogQHJlbWFya3MgQ3JlYXRlIGEgY29uZmlndXJhdGlvbiBvcHRpb24gZm9yIHRoaXMgcHJvcGVydHkgaW4gdGhlIGNoaWxkIGNsYXNzLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZWRpdGFiaWxpdHlFbmFibGVkOiBib29sZWFuO1xyXG4gICAgLy8jcmVnaW9uIEhUTUwgRWxlbWVudHNcclxuICAgIHByaXZhdGUgc2hpcHBpbmdDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgLyoqIFxyXG4gICAgICogVGhlIGNvbnRhaW5lciB0aGF0IGhvbGRzIHRoZSBpbnB1dCBlbGVtZW50cy5cclxuICAgICAqIEByZW1hcmtzIEhhcyB0aGUgQ1NTIGNsYXNzZXMgYGVkaXRhYmxlLWRhdGEtdmlld2AgJiBgZGF0YS1pbnB1dC1jb250YWluZXJgLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgZGF0YUlucHV0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbnRhaW5lciB0aGF0IGhvbGRzIHRoZSBlbGVtZW50cyB3aGljaCBzaG93IHRoZSBkYXRhIGluIGBub3QtZWRpdGAgbW9kZS5cclxuICAgICAqIEByZW1hcmtzIEhhcyB0aGUgQ1NTIGNsYXNzZXMgYGVkaXRhYmxlLWRhdGEtdmlld2AgJiBgcHJlc2VudGF0aW9uLWNvbnRhaW5lcmAuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBwcmVzZW50YXRpb25Db250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBidXR0b25Db250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBlZGl0QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHByaXZhdGUgY2FuY2VsQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgc2F2ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBDYWxsYmFja3NcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGBlZGl0YCBidXR0b24uXHJcbiAgICAgKiBUaGUgYGRhdGFJbnB1dENvbnRhaW5lcmAgaXMgdmlzaWJsZSBhbmQgdGhlIGBwcmVzZW50YXRpb25Db250YWluZXJgIGlzIGhpZGRlbi5cclxuICAgICAqIEZpbGwgdGhlIGBkYXRhSW5wdXRDb250YWluZXJgIHdpdGggdGhlIGlucHV0IGVsZW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBvbkVuYWJsZUVkaXRDYWxsYmFjazogKCgpID0+IHZvaWQpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGUgYGNhbmNlbGAgYnV0dG9uIG9yIFxyXG4gICAgICogYWZ0ZXIgdGhlIGBzYXZlQ2hhbmdlc2AtbWV0aG9kZSBpcyBjbGlja2VkLlxyXG4gICAgICogVGhlIGBkYXRhSW5wdXRDb250YWluZXJgIGlzIGhpZGRlbiBhbmQgdGhlIGBwcmVzZW50YXRpb25Db250YWluZXJgIGlzIHZpc2libGUuXHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IG9uRGlzYWJsZUVkaXRDYWxsYmFjazogKCgpID0+IHZvaWQpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGUgYHNhdmVgIGJ1dHRvbi5cclxuICAgICAqIFRoZSBgZGF0YUlucHV0Q29udGFpbmVyYCBpcyBoaWRkZW4gYW5kIHRoZSBgcHJlc2VudGF0aW9uQ29udGFpbmVyYCBpcyB2aXNpYmxlLlxyXG4gICAgICogVGhlIGNoYW5nZXMgc2hvdWxkIGJlIHNhdmVkIGFuZCB0aGUgYHByZXNlbnRhdGlvbkNvbnRhaW5lcmAgc2hvdWxkIGJlIGZpbGxlZCB3aXRoIHRoZSBuZXcgZGF0YS5cclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3Qgb25TYXZlQ2FsbGJhY2s6ICgoKSA9PiBQcm9taXNlPHZvaWQ+KTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGBlZGl0YCBidXR0b24gZm9yIHRoZSBmaXJzdCB0aW1lLlxyXG4gICAgICogVGhlIGBkYXRhSW5wdXRDb250YWluZXJgIGlzIHZpc2libGUgYW5kIHRoZSBgcHJlc2VudGF0aW9uQ29udGFpbmVyYCBpcyBoaWRkZW4uXHJcbiAgICAgKiBGaWxsIHRoZSBgZGF0YUlucHV0Q29udGFpbmVyYCB3aXRoIHRoZSBpbnB1dCBlbGVtZW50cy5cclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3Qgb25GaXJzdEVkaXQ6ICgoKSA9PiB2b2lkKTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGZpbmFsaXplZC5cclxuICAgICAqIFRoZSBgZGF0YUlucHV0Q29udGFpbmVyYCBpcyBoaWRkZW4gYW5kIHRoZSBgcHJlc2VudGF0aW9uQ29udGFpbmVyYCBpcyB2aXNpYmxlLlxyXG4gICAgICogRmlsbCB0aGUgYHByZXNlbnRhdGlvbkNvbnRhaW5lcmAgd2l0aCB0aGUgZGF0YS5cclxuICAgICAqIEByZW1hcmtzIERvbid0IGZpbGwgdGhlIGBkYXRhSW5wdXRDb250YWluZXJgIHdpdGggdGhlIGlucHV0IGVsZW1lbnRzIVxyXG4gICAgICogQHJlbWFya3MgVGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGNvbXBvbmVudCBpcyBmaW5pc2hlZCB3aGVuIHRoZSBgb25GaW5hbGl6ZWAtY2FsbGJhY2sgaXMgY2FsbGVkLlxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBvbkZpbmFsaXplOiAoKCkgPT4gdm9pZCk7XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnQ6IENvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIHRoaXMuc2hpcHBpbmdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnNoaXBwaW5nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycsICdjb250YWluZXInKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhlIGJhc2Ugc3RydWN0dXJlIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gZWRpdGFiaWxpdHlFbmFibGVkIElmIGB0cnVlYCwgdGhlIGNvbXBvbmVudCB3aWxsIGJlIGNyZWF0ZWQgdG8gYWxsb3cgZWRpdGluZy5cclxuICAgICAqIEB0dXRvcmlhbCBSdW4gdGhpcyBtZXRob2RlIGluIHRoZSBgZmluYWxpemVgLW1ldGhvZGUgb2YgdGhlIGNoaWxkIGNsYXNzIGJlZm9yZSBjcmVhdGluZyB5b3VyIGVsZW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlQmFzZVN0cnVjdHVyZShlZGl0YWJpbGl0eUVuYWJsZWQ6IGJvb2xlYW4gPSB0aGlzLmVkaXRhYmlsaXR5RW5hYmxlZCk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycsICdwcmVzZW50YXRpb24tY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5zaGlwcGluZ0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnByZXNlbnRhdGlvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgaWYgKGVkaXRhYmlsaXR5RW5hYmxlZCAmJiAoUGxhdGZvcm0uaXNNb2JpbGUgPyBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5zZXR0aW5ncy5tb2JpbGUgOiB0cnVlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdlZGl0YWJsZS1kYXRhLXZpZXcnLCAnYnV0dG9uLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUVkaXRCdXR0b24oKTtcclxuICAgICAgICAgICAgdGhpcy5zaGlwcGluZ0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhlIGBlZGl0YCBidXR0b24gYW5kIGFkZHMgaXQgdG8gdGhlIGBidXR0b25Db250YWluZXJgLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZUVkaXRCdXR0b24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5idXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lZGl0QnV0dG9uKTtcclxuICAgICAgICB0aGlzLmVkaXRCdXR0b24uY2xhc3NMaXN0LmFkZCgnZWRpdGFibGUtZGF0YS12aWV3Jyk7XHJcbiAgICAgICAgdGhpcy5lZGl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbicpO1xyXG4gICAgICAgIHNldEljb24odGhpcy5lZGl0QnV0dG9uLCAncGVuJyk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQucmVnaXN0ZXJEb21FdmVudCh0aGlzLmVkaXRCdXR0b24sICdjbGljaycsICgpID0+IHRoaXMuZW5hYmxlRWRpdE1vZGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIHRoZSBgc2F2ZWAgYW5kIGBjYW5jZWxgIGJ1dHRvbnMgYW5kIHRoZSBgaW5wdXRgIGNvbnRhaW5lciBhbmQgYWRkcyB0aGVtIHRvIHRoZSBgYnV0dG9uQ29udGFpbmVyYC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVDb21wb25lbnRzRm9yRWRpdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRhdGFJbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuZGF0YUlucHV0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycsICdkYXRhLWlucHV0LWNvbnRhaW5lcicsICdoaWRkZW4nKTtcclxuICAgICAgICB0aGlzLnNoaXBwaW5nQ29udGFpbmVyLmluc2VydEJlZm9yZSh0aGlzLmRhdGFJbnB1dENvbnRhaW5lciwgdGhpcy5wcmVzZW50YXRpb25Db250YWluZXIpO1xyXG5cclxuICAgICAgICB0aGlzLmNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uQ29udGFpbmVyLmluc2VydEFmdGVyKHRoaXMuY2FuY2VsQnV0dG9uLCB0aGlzLmVkaXRCdXR0b24pO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycpO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgIHNldEljb24odGhpcy5jYW5jZWxCdXR0b24sICd4Jyk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQucmVnaXN0ZXJEb21FdmVudCh0aGlzLmNhbmNlbEJ1dHRvbiwgJ2NsaWNrJywgKCkgPT4gdGhpcy5kaXNhYmxlRWRpdE1vZGUoKSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2F2ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uQ29udGFpbmVyLmluc2VydEFmdGVyKHRoaXMuc2F2ZUJ1dHRvbiwgdGhpcy5jYW5jZWxCdXR0b24pO1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdlZGl0YWJsZS1kYXRhLXZpZXcnKTtcclxuICAgICAgICB0aGlzLnNhdmVCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5zYXZlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgIHNldEljb24odGhpcy5zYXZlQnV0dG9uLCAnY2hlY2snKTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudC5yZWdpc3RlckRvbUV2ZW50KHRoaXMuc2F2ZUJ1dHRvbiwgJ2NsaWNrJywgKCkgPT4gdGhpcy5zYXZlQ2hhbmdlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBhZnRlciB0aGUgZmluYWwgY29uZmlndXJhdGlvbiBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZmluYWxpemUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCYXNlU3RydWN0dXJlKCk7XHJcbiAgICAgICAgdGhpcy5vbkZpbmFsaXplPy4oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGUgYGVkaXRgIGJ1dHRvbi5cclxuICAgICAqIEl0IHNob3VsZCBzd2l0Y2ggdGhlIGNvbXBvbmVudCB0byBlZGl0IG1vZGUgYW5kIFxyXG4gICAgICogY3JlYXRlIHRoZSBgc2F2ZWAgYW5kIGBjYW5jZWxgIGJ1dHRvbnMgaWYgbm90IGFscmVhZHkgY3JlYXRlZC5cclxuICAgICAqIEByZW1hcmtzIFlvdSBjYW4gY2FsbCB0aGlzIG1ldGhvZGUgdG8gc2ltdWxhdGUgYSBjbGljayBvbiB0aGUgYGVkaXRgIGJ1dHRvbi5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGVuYWJsZUVkaXRNb2RlKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIElmIHRoZSBgc2F2ZWAgb3IgdGhlIGBjYW5jZWxgIGJ1dHRvbiBpcyBub3QgY3JlYXRlZCwgY3JlYXRlIHRoZW0uXHJcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbEJ1dHRvbiB8fCAhdGhpcy5zYXZlQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ29tcG9uZW50c0ZvckVkaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5vbkZpcnN0RWRpdD8uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFN3aXRjaCBtb2RlIHRvIEVkaXQ6IGhpZGUgdGhlIGBlZGl0YCBidXR0b24gYW5kIHNob3cgdGhlIGBzYXZlYCBhbmQgYGNhbmNlbGAgYnV0dG9ucy5cclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxCdXR0b24gJiYgdGhpcy5zYXZlQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlc2VudGF0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgdGhpcy5lZGl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB0aGlzLm9uRW5hYmxlRWRpdENhbGxiYWNrPy4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGBjYW5jZWxgIGJ1dHRvbiBvciBcclxuICAgICAqIGFmdGVyIHRoZSBgc2F2ZUNoYW5nZXNgLW1ldGhvZGUgaXMgY2xpY2tlZC5cclxuICAgICAqIEByZW1hcmtzIFlvdSBjYW4gY2FsbCB0aGlzIG1ldGhvZGUgdG8gc2ltdWxhdGUgYSBjbGljayBvbiB0aGUgYGNhbmNlbGAgYnV0dG9uLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgZGlzYWJsZUVkaXRNb2RlKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFN3aXRjaCBtb2RlIHRvIFZpZXc6IGhpZGUgdGhlIGBzYXZlYCBhbmQgYGNhbmNlbGAgYnV0dG9ucyBhbmQgc2hvdyB0aGUgYGVkaXRgIGJ1dHRvbi5cclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxCdXR0b24gJiYgdGhpcy5zYXZlQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlc2VudGF0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFJbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgdGhpcy5lZGl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB0aGlzLm9uRGlzYWJsZUVkaXRDYWxsYmFjaz8uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIHRoZSBgc2F2ZWAgYnV0dG9uLlxyXG4gICAgICogQHJlbWFya3MgWW91IGNhbiBjYWxsIHRoaXMgbWV0aG9kZSB0byBzaW11bGF0ZSBhIGNsaWNrIG9uIHRoZSBgc2F2ZWAgYnV0dG9uLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgc2F2ZUNoYW5nZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gUnVuIHRoZSBjYWxsYmFjayBhbmQgZGlzYWJsZSBlZGl0IG1vZGUuXHJcbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsQnV0dG9uICYmIHRoaXMuc2F2ZUJ1dHRvbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9uU2F2ZUNhbGxiYWNrPy4oKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNhYmxlRWRpdE1vZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBCYXNlQ29tcG9uZW50IGZyb20gXCIuL0Jhc2VDb21wb25lbnRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhdGVDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcclxuICAgIC8vI3JlZ2lvbiBiYXNlIHByb3BlcnRpZXNcclxuICAgIHByb3RlY3RlZCBlZGl0YWJpbGl0eUVuYWJsZWQgPSBmYWxzZTtcclxuICAgIG9uRW5hYmxlRWRpdENhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgb25EaXNhYmxlRWRpdENhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgb25TYXZlQ2FsbGJhY2s6ICgpID0+IFByb21pc2U8dm9pZD47XHJcbiAgICBvbkZpcnN0RWRpdDogKCkgPT4gdm9pZDtcclxuICAgIG9uRmluYWxpemU6ICgpID0+IHZvaWQ7XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBleHRlbmRlZCBwcm9wZXJ0aWVzXHJcbiAgICBwcml2YXRlIF9vblByZXNlbnRhdGlvbjogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZztcclxuICAgIHByaXZhdGUgX29uU2F2ZTogKCh2YWx1ZTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+KTtcclxuICAgIHByaXZhdGUgX3ZhbHVlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF90aXRsZTogc3RyaW5nO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvLyNyZWdpb24gSFRNTCBFbGVtZW50c1xyXG4gICAgcHJpdmF0ZSBwcmVzZW50YXRpb25TcGFuOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnQ6IENvbXBvbmVudCkge1xyXG4gICAgICAgIHN1cGVyKGNvbXBvbmVudCk7XHJcbiAgICAgICAgdGhpcy5vbkZpbmFsaXplID0gdGhpcy5idWlsZFxyXG4gICAgICAgIHRoaXMub25GaXJzdEVkaXQgPSB0aGlzLmJ1aWxkSW5wdXQ7XHJcbiAgICAgICAgdGhpcy5vbkVuYWJsZUVkaXRDYWxsYmFjayA9IHRoaXMuZW5hYmxlRWRpdDtcclxuICAgICAgICB0aGlzLm9uU2F2ZUNhbGxiYWNrID0gdGhpcy5zYXZlO1xyXG4gICAgICAgIHRoaXMub25EaXNhYmxlRWRpdENhbGxiYWNrID0gdGhpcy5kaXNhYmxlRWRpdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gQ29uZmlndXJhdGlvbiBtZXRob2RzXHJcbiAgICAvKipcclxuICAgICAqIEVuYWJsZXMgdGhlIGVkaXRhYmlsaXR5IG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGVuYWJsZUVkaXRhYmlsaXR5KCk6IERhdGVDb21wb25lbnQge1xyXG4gICAgICAgIHRoaXMuZWRpdGFiaWxpdHlFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VmFsdWUodmFsdWU6IHN0cmluZyk6IERhdGVDb21wb25lbnQge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB0aXRsZSBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHRpdGxlIFRoZSB0aXRsZSB0byBzZXQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFRpdGxlKHRpdGxlOiBzdHJpbmcpOiBEYXRlQ29tcG9uZW50IHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZm9ybWF0b3Igb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBmb3JtYXRvciBUaGUgZm9ybWF0b3IgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKiBAcmVtYXJrcyBUaGUgZm9ybWF0b3IgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2UgaW4gYG5vdC1lZGl0YCBtb2RlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0Rm9ybWF0b3IoZm9ybWF0b3I6ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcpOiBEYXRlQ29tcG9uZW50IHtcclxuICAgICAgICB0aGlzLl9vblByZXNlbnRhdGlvbiA9IGZvcm1hdG9yO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc2F2ZXIgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgc2F2ZXIgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKiBAcmVtYXJrcyBUaGUgc2F2ZXIgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25TYXZlKGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPikge1xyXG4gICAgICAgIHRoaXMuX29uU2F2ZSA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIEJhc2UgQ2FsbGJhY2tzXHJcbiAgICBwcml2YXRlIGJ1aWxkKCkge1xyXG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnByZXNlbnRhdGlvblNwYW4pO1xyXG5cclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4udGl0bGUgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4uY2xhc3NMaXN0LmFkZCgnZWRpdGFibGUtZGF0YS12aWV3Jyk7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLmNsYXNzTGlzdC5hZGQoJ2RhdGUtcHJlc2VudGF0aW9uJyk7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLnRleHRDb250ZW50ID0gdGhpcy5fb25QcmVzZW50YXRpb24gPyB0aGlzLl9vblByZXNlbnRhdGlvbih0aGlzLl92YWx1ZSkgOiB0aGlzLl92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJ1aWxkSW5wdXQoKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5kYXRhSW5wdXRDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5pbnB1dCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC50eXBlID0gJ2RhdGUnO1xyXG4gICAgICAgIHRoaXMuaW5wdXQudGl0bGUgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLmlucHV0LmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LmFkZCgnZGF0ZS1pbnB1dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW5hYmxlRWRpdCgpIHtcclxuICAgICAgICB0aGlzLmlucHV0LnZhbHVlID0gdGhpcy5fdmFsdWUgPyB0aGlzLl92YWx1ZSA6ICcnO1xyXG4gICAgICAgIHRoaXMuaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICB0aGlzLmlucHV0LnNlbGVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGlzYWJsZUVkaXQoKSB7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLnRleHRDb250ZW50ID0gdGhpcy5fb25QcmVzZW50YXRpb24gPyB0aGlzLl9vblByZXNlbnRhdGlvbih0aGlzLl92YWx1ZSkgOiB0aGlzLl92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNhdmUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB0aGlzLmlucHV0LnZhbHVlO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29uU2F2ZT8uKHRoaXMuX3ZhbHVlKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG59XHJcbiIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IEJhc2VDb21wb25lbnQgZnJvbSBcIi4vQmFzZUNvbXBvbmVudFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25Db21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcclxuICAgIC8vI3JlZ2lvbiBiYXNlIHByb3BlcnRpZXNcclxuICAgIHByb3RlY3RlZCBlZGl0YWJpbGl0eUVuYWJsZWQgPSBmYWxzZTtcclxuICAgIG9uRW5hYmxlRWRpdENhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgb25EaXNhYmxlRWRpdENhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgb25TYXZlQ2FsbGJhY2s6ICgpID0+IFByb21pc2U8dm9pZD47XHJcbiAgICBvbkZpcnN0RWRpdDogKCkgPT4gdm9pZDtcclxuICAgIG9uRmluYWxpemU6ICgpID0+IHZvaWQ7XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBleHRlbmRlZCBwcm9wZXJ0aWVzXHJcbiAgICBwcml2YXRlIF9vblByZXNlbnRhdGlvbjogKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIF9vblNhdmU6ICgodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPik7XHJcbiAgICBwcml2YXRlIF92YWx1ZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfb3B0aW9uczogeyB2YWx1ZTogc3RyaW5nOyB0ZXh0OiBzdHJpbmc7IH1bXTtcclxuICAgIHByaXZhdGUgZ2V0IF9zZWxlY3RlZE9wdGlvbigpOiB7IHZhbHVlOiBzdHJpbmc7IHRleHQ6IHN0cmluZzsgfSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb24gPSB0aGlzLl9vcHRpb25zLmZpbmQobyA9PiBvLnZhbHVlID09PSB0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uKVxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRPcHRpb247XHJcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHRoaXMuX3ZhbHVlLCB0ZXh0OiB0aGlzLl92YWx1ZSB9O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfdGl0bGU6IHN0cmluZztcclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLy8jcmVnaW9uIEhUTUwgRWxlbWVudHNcclxuICAgIHByaXZhdGUgcHJlc2VudGF0aW9uU3BhbjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnQ6IENvbXBvbmVudCkge1xyXG4gICAgICAgIHN1cGVyKGNvbXBvbmVudCk7XHJcbiAgICAgICAgdGhpcy5vbkZpbmFsaXplID0gdGhpcy5idWlsZFxyXG4gICAgICAgIHRoaXMub25GaXJzdEVkaXQgPSB0aGlzLmJ1aWxkSW5wdXQ7XHJcbiAgICAgICAgdGhpcy5vbkVuYWJsZUVkaXRDYWxsYmFjayA9IHRoaXMuZW5hYmxlRWRpdDtcclxuICAgICAgICB0aGlzLm9uU2F2ZUNhbGxiYWNrID0gdGhpcy5zYXZlO1xyXG4gICAgICAgIHRoaXMub25EaXNhYmxlRWRpdENhbGxiYWNrID0gdGhpcy5kaXNhYmxlRWRpdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gQ29uZmlndXJhdGlvbiBtZXRob2RzXHJcbiAgICAvKipcclxuICAgICAqIEVuYWJsZXMgdGhlIGVkaXRhYmlsaXR5IG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGVuYWJsZUVkaXRhYmlsaXR5KCkge1xyXG4gICAgICAgIHRoaXMuZWRpdGFiaWxpdHlFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VmFsdWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBvcHRpb25zIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyB0byBzZXQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczogeyB2YWx1ZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcgfVtdKSB7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB0aXRsZSBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHRpdGxlIFRoZSB0aXRsZSB0byBzZXQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFRpdGxlKHRpdGxlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZm9ybWF0b3Igb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBmb3JtYXRvciBUaGUgZm9ybWF0b3IgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKiBAcmVtYXJrcyAtIFRoZSBmb3JtYXRvciBpcyBjYWxsZWQgd2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZSBpbiBgbm90LWVkaXRgIG1vZGUuXHJcbiAgICAgKiAtIGB2YWx1ZWAgaXMgdGhlIHZhbHVlIG9mIHRoZSBzZWxlY3RlZCBvcHRpb24uIChOb3QgdGhlIHRleHQhKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0Rm9ybWF0b3IoZm9ybWF0b3I6ICh2YWx1ZTogc3RyaW5nKSA9PiB7IHRleHQ6IHN0cmluZywgaHRtbD86IERvY3VtZW50RnJhZ21lbnQgfSkge1xyXG4gICAgICAgIHRoaXMuX29uUHJlc2VudGF0aW9uID0gYXN5bmMgKHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyB0ZXh0LCBodG1sIH0gPSBmb3JtYXRvcih2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChodG1sKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4uaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4uYXBwZW5kQ2hpbGQoaHRtbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4udGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHNhdmVyIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIHNhdmVyIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICogQHJlbWFya3MgLSBUaGUgc2F2ZXIgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkLlxyXG4gICAgICogLSBgdmFsdWVgIGlzIHRoZSB2YWx1ZSBvZiB0aGUgc2VsZWN0ZWQgb3B0aW9uLiAoTm90IHRoZSB0ZXh0ISlcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uU2F2ZShjYWxsYmFjazogKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHtcclxuICAgICAgICB0aGlzLl9vblNhdmUgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgZW5hYmxlT3B0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25Gb3VuZCA9IHRoaXMuX29wdGlvbnMuZmluZChvID0+IG8udmFsdWUgPT09IHRoaXMuX3ZhbHVlKTtcclxuICAgICAgICBpZiAoIW9wdGlvbkZvdW5kKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgb3B0aW9uRWxlbWVudC52YWx1ZSA9IHRoaXMuX3ZhbHVlO1xyXG4gICAgICAgICAgICBvcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gYCR7dGhpcy5fdmFsdWV9IChub3QgaW4gb3B0aW9ucylgO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb25FbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgb3B0aW9uRWxlbWVudC52YWx1ZSA9IG9wdGlvbi52YWx1ZTtcclxuICAgICAgICAgICAgb3B0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbi50ZXh0O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb25FbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRpc2FibGVPcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0LmlubmVySFRNTCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBCYXNlIENhbGxiYWNrc1xyXG4gICAgcHJpdmF0ZSBidWlsZCgpIHtcclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5wcmVzZW50YXRpb25TcGFuKTtcclxuXHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLnRpdGxlID0gdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycpO1xyXG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3Bhbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LXByZXNlbnRhdGlvbicpO1xyXG4gICAgICAgIHRoaXMuX29uUHJlc2VudGF0aW9uPy4odGhpcy5fc2VsZWN0ZWRPcHRpb24udmFsdWUpO1xyXG4gICAgICAgIC8vdGhpcy5wcmVzZW50YXRpb25TcGFuLnRleHRDb250ZW50ID0gdGhpcy5fb25QcmVzZW50YXRpb24gPyB0aGlzLl9vblByZXNlbnRhdGlvbih0aGlzLl9zZWxlY3RlZE9wdGlvbi52YWx1ZSkgOiB0aGlzLl9zZWxlY3RlZE9wdGlvbi50ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRJbnB1dCgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xyXG4gICAgICAgIHRoaXMuZGF0YUlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc2VsZWN0KTtcclxuICAgICAgICB0aGlzLnNlbGVjdC50aXRsZSA9IHRoaXMuX3RpdGxlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdC1pbnB1dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW5hYmxlRWRpdCgpIHtcclxuICAgICAgICB0aGlzLmVuYWJsZU9wdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdC52YWx1ZSA9IHRoaXMuX3ZhbHVlID8gdGhpcy5fdmFsdWUgOiAnJztcclxuICAgICAgICB0aGlzLnNlbGVjdC5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGlzYWJsZUVkaXQoKSB7XHJcbiAgICAgICAgdGhpcy5fb25QcmVzZW50YXRpb24/Lih0aGlzLl9zZWxlY3RlZE9wdGlvbi52YWx1ZSk7XHJcbiAgICAgICAgLy90aGlzLnByZXNlbnRhdGlvblNwYW4udGV4dENvbnRlbnQgPSB0aGlzLl9vblByZXNlbnRhdGlvbiA/IHRoaXMuX29uUHJlc2VudGF0aW9uKHRoaXMuX3NlbGVjdGVkT3B0aW9uLnZhbHVlKSA6IHRoaXMuX3NlbGVjdGVkT3B0aW9uLnRleHQ7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlT3B0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHRoaXMuc2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29uU2F2ZT8uKHRoaXMuX3ZhbHVlKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG59XHJcbiIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IEJhc2VDb21wb25lbnQgZnJvbSBcIi4vQmFzZUNvbXBvbmVudFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlua0NvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xyXG4gICAgLy8jcmVnaW9uIGJhc2UgcHJvcGVydGllc1xyXG4gICAgcHJvdGVjdGVkIGVkaXRhYmlsaXR5RW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgb25FbmFibGVFZGl0Q2FsbGJhY2s6ICgpID0+IHZvaWQ7XHJcbiAgICBvbkRpc2FibGVFZGl0Q2FsbGJhY2s6ICgpID0+IHZvaWQ7XHJcbiAgICBvblNhdmVDYWxsYmFjazogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICAgIG9uRmlyc3RFZGl0OiAoKSA9PiB2b2lkO1xyXG4gICAgb25GaW5hbGl6ZTogKCkgPT4gdm9pZDtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLy8jcmVnaW9uIGV4dGVuZGVkIHByb3BlcnRpZXNcclxuICAgIHByaXZhdGUgX29uUHJlc2VudGF0aW9uOiAoKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBfb25TYXZlOiAoKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBfc3VnZ2VzdGVyOiAoKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZ1tdKSB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgX3ZhbHVlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9wbGFjZWhvbGRlcjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfc3VnZ2VzdGlvbnM6IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSBfdGl0bGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgbGlua1R5cGU6ICd0YWcnIHwgJ2ZpbGUnIHwgJ2V4dGVybmFsJyA9ICdleHRlcm5hbCc7XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICAgIC8vI3JlZ2lvbiBIVE1MIEVsZW1lbnRzXHJcbiAgICBwcml2YXRlIGxpbms6IEhUTUxBbmNob3JFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBsYWJlbDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBkYXRhbGlzdDogSFRNTERhdGFMaXN0RWxlbWVudDtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudDogQ29tcG9uZW50KSB7XHJcbiAgICAgICAgc3VwZXIoY29tcG9uZW50KTtcclxuICAgICAgICB0aGlzLm9uRmluYWxpemUgPSB0aGlzLmJ1aWxkXHJcbiAgICAgICAgdGhpcy5vbkZpcnN0RWRpdCA9IHRoaXMuYnVpbGRJbnB1dDtcclxuICAgICAgICB0aGlzLm9uRW5hYmxlRWRpdENhbGxiYWNrID0gdGhpcy5lbmFibGVFZGl0O1xyXG4gICAgICAgIHRoaXMub25TYXZlQ2FsbGJhY2sgPSB0aGlzLnNhdmU7XHJcbiAgICAgICAgdGhpcy5vbkRpc2FibGVFZGl0Q2FsbGJhY2sgPSB0aGlzLmRpc2FibGVFZGl0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBDb25maWd1cmF0aW9uIG1ldGhvZHNcclxuICAgIC8qKlxyXG4gICAgICogRW5hYmxlcyB0aGUgZWRpdGFiaWxpdHkgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZW5hYmxlRWRpdGFiaWxpdHkoKSB7XHJcbiAgICAgICAgdGhpcy5lZGl0YWJpbGl0eUVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHBsYWNlaG9sZGVyIG9mIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAgICogQHBhcmFtIHBsYWNlaG9sZGVyIFRoZSBwbGFjZWhvbGRlciB0byBzZXQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBzdWdnZXN0aW9ucyBmb3IgdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gc3VnZ2VzdGlvbnMgVGhlIHN1Z2dlc3Rpb25zIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0U3VnZ2VzdGlvbnMoc3VnZ2VzdGlvbnM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5fc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHRpdGxlIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gdGl0bGUgVGhlIHRpdGxlIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VGl0bGUodGl0bGU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB0eXBlIG9mIHRoZSBsaW5rLlxyXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgdG8gc2V0LiBDYW4gYmUgYHRhZ2AsIGBmaWxlYCBvciBgZXh0ZXJuYWxgLlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRMaW5rVHlwZSh0eXBlOiAndGFnJyB8ICdmaWxlJyB8ICdleHRlcm5hbCcpIHtcclxuICAgICAgICB0aGlzLmxpbmtUeXBlID0gdHlwZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHN1Z2dlc3RlciBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHN1Z2dlc3RlciBUaGUgc3VnZ2VzdGVyIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICogQHJlbWFya3MgVGhlIHN1Z2dlc3RlciBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciB0eXBlcyBpbiB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFN1Z2dlc3RlcihzdWdnZXN0ZXI6ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMuX3N1Z2dlc3RlciA9IHN1Z2dlc3RlcjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGZvcm1hdG9yIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gZm9ybWF0b3IgVGhlIGZvcm1hdG9yIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICogQHJlbWFya3MgVGhlIGZvcm1hdG9yIGlzIGNhbGxlZCB3aGVuIHRoZSBjb21wb25lbnQgY2hhbmdlIGluIGBub3QtZWRpdGAgbW9kZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEZvcm1hdG9yKGZvcm1hdG9yOiAodmFsdWU6IHN0cmluZykgPT4geyBocmVmOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgaHRtbD86IERvY3VtZW50RnJhZ21lbnQgfSkge1xyXG4gICAgICAgIHRoaXMuX29uUHJlc2VudGF0aW9uID0gYXN5bmMgKHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGlua0NvbnRlbnQgPSBmb3JtYXRvcih2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubGluay5ocmVmID0gbGlua0NvbnRlbnQuaHJlZjtcclxuICAgICAgICAgICAgaWYgKGxpbmtDb250ZW50Lmh0bWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluay5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMubGluay5hcHBlbmRDaGlsZChsaW5rQ29udGVudC5odG1sKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHRoaXMubGluay50ZXh0Q29udGVudCA9IGxpbmtDb250ZW50LnRleHQ7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMubGlua1R5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3RhZyc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdmaWxlJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmsuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbGlua0NvbnRlbnQuaHJlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rLnNldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJywgbGlua0NvbnRlbnQuaHJlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdleHRlcm5hbCc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0ICYmIHRoaXMubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQudmFsdWUgPSBsaW5rQ29udGVudC50ZXh0ID8gbGlua0NvbnRlbnQudGV4dCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYWJlbC5kYXRhc2V0LnZhbHVlID0gbGlua0NvbnRlbnQudGV4dCA/IGxpbmtDb250ZW50LnRleHQgOiB0aGlzLl9wbGFjZWhvbGRlciA/IHRoaXMuX3BsYWNlaG9sZGVyIDogJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc2F2ZXIgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgc2F2ZXIgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKiBAcmVtYXJrcyBUaGUgc2F2ZXIgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25TYXZlKGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPikge1xyXG4gICAgICAgIHRoaXMuX29uU2F2ZSA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTdWdnZXN0aW9uc0xpc3Qoc3VnZ2VzdGlvbnM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGFsaXN0KSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5kYXRhbGlzdC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBzdWdnZXN0aW9ucy5mb3JFYWNoKHN1Z2dlc3Rpb24gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gc3VnZ2VzdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5kYXRhbGlzdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBCYXNlIENhbGxiYWNrc1xyXG4gICAgcHJpdmF0ZSBidWlsZCgpIHtcclxuICAgICAgICB0aGlzLmxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5saW5rKTtcclxuXHJcbiAgICAgICAgdGhpcy5saW5rLnRpdGxlID0gdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgdGhpcy5saW5rLmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycpO1xyXG4gICAgICAgIHRoaXMubGluay5jbGFzc0xpc3QuYWRkKCdsaW5rLXByZXNlbnRhdGlvbicpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMubGlua1R5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAndGFnJzpcclxuICAgICAgICAgICAgICAgIHRoaXMubGluay5jbGFzc0xpc3QuYWRkKCd0YWcnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluay50YXJnZXQgPSAnX2JsYW5rJztcclxuICAgICAgICAgICAgICAgIHRoaXMubGluay5yZWwgPSAnbm9vcGVuZXInO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ZpbGUnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5rLnNldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLXBvc2l0aW9uJywgJ3RvcCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5rLmNsYXNzTGlzdC5hZGQoJ2ludGVybmFsLWxpbmsnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluay50YXJnZXQgPSAnX2JsYW5rJztcclxuICAgICAgICAgICAgICAgIHRoaXMubGluay5yZWwgPSAnbm9vcGVuZXInO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2V4dGVybmFsJzpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fb25QcmVzZW50YXRpb24/Lih0aGlzLl92YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBidWlsZElucHV0KCkge1xyXG4gICAgICAgIHRoaXMubGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICAgIHRoaXMubGFiZWwudGl0bGUgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLmRhdGFJbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmxhYmVsKTtcclxuICAgICAgICB0aGlzLmxhYmVsLmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycpO1xyXG4gICAgICAgIHRoaXMubGFiZWwuY2xhc3NMaXN0LmFkZCgndGV4dC1pbnB1dC1zaXplcicpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICB0aGlzLmxhYmVsLmFwcGVuZENoaWxkKHRoaXMuaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LmFkZCgnZWRpdGFibGUtZGF0YS12aWV3Jyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWlucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5wbGFjZWhvbGRlciA9IHRoaXMuX3BsYWNlaG9sZGVyID8gdGhpcy5fcGxhY2Vob2xkZXIgOiAnJztcclxuICAgICAgICB0aGlzLmNvbXBvbmVudC5yZWdpc3RlckRvbUV2ZW50KHRoaXMuaW5wdXQsICdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbC5kYXRhc2V0LnZhbHVlID0gdGhpcy5pbnB1dC52YWx1ZSA/IHRoaXMuaW5wdXQudmFsdWUgOiB0aGlzLl9wbGFjZWhvbGRlciA/IHRoaXMuX3BsYWNlaG9sZGVyIDogJyc7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdWdnZXN0ZXIgJiYgdGhpcy5sYWJlbC5kYXRhc2V0LnZhbHVlICE9PSB0aGlzLl9wbGFjZWhvbGRlciAmJiB0aGlzLmxhYmVsLmRhdGFzZXQudmFsdWUgIT09IFwiXCIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN1Z2dlc3Rpb25zTGlzdCh0aGlzLl9zdWdnZXN0ZXIodGhpcy5pbnB1dC52YWx1ZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50LnJlZ2lzdGVyRG9tRXZlbnQodGhpcy5pbnB1dCwgJ2tleWRvd24nLCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUVkaXRNb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCh0aGlzLl9zdWdnZXN0aW9ucyAmJiB0aGlzLl9zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB8fCB0aGlzLl9zdWdnZXN0ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApO1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0LnNldEF0dHJpYnV0ZSgnbGlzdCcsIGlkKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RhdGFsaXN0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWxpc3QuaWQgPSBpZDtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dC5hcHBlbmRDaGlsZCh0aGlzLmRhdGFsaXN0KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdWdnZXN0aW9uc0xpc3QodGhpcy5fc3VnZ2VzdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuYWJsZUVkaXQoKSB7XHJcbiAgICAgICAgdGhpcy5fb25QcmVzZW50YXRpb24/Lih0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5mb2N1cygpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQuc2VsZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkaXNhYmxlRWRpdCgpIHtcclxuICAgICAgICB0aGlzLl9vblByZXNlbnRhdGlvbj8uKHRoaXMuX3ZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNhdmUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB0aGlzLmlucHV0LnZhbHVlO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29uU2F2ZT8uKHRoaXMuX3ZhbHVlKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG59XHJcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIE1hcmtkb3duUmVuZGVyZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IEJhc2VDb21wb25lbnQgZnJvbSBcIi4vQmFzZUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgR2xvYmFsIGZyb20gXCJzcmMvY2xhc3Nlcy9HbG9iYWxcIjtcclxuaW1wb3J0IEhlbHBlciBmcm9tIFwic3JjL2xpYnMvSGVscGVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXh0Q29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XHJcbiAgICAvLyNyZWdpb24gYmFzZSBwcm9wZXJ0aWVzXHJcbiAgICBwcm90ZWN0ZWQgZWRpdGFiaWxpdHlFbmFibGVkID0gZmFsc2U7XHJcbiAgICBvbkVuYWJsZUVkaXRDYWxsYmFjazogKCkgPT4gdm9pZDtcclxuICAgIG9uRGlzYWJsZUVkaXRDYWxsYmFjazogKCkgPT4gdm9pZDtcclxuICAgIG9uU2F2ZUNhbGxiYWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgb25GaXJzdEVkaXQ6ICgpID0+IHZvaWQ7XHJcbiAgICBvbkZpbmFsaXplOiAoKSA9PiB2b2lkO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvLyNyZWdpb24gZXh0ZW5kZWQgcHJvcGVydGllc1xyXG4gICAgcHJpdmF0ZSBfb25QcmVzZW50YXRpb246ICgodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPikgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIF9vbk1hcmtkb3duUHJlc2VudGF0aW9uOiAoKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBfb25TYXZlOiAoKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBfc3VnZ2VzdGVyOiAoKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZ1tdKSB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgX3ZhbHVlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9wbGFjZWhvbGRlcjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfc3VnZ2VzdGlvbnM6IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSBfdGl0bGU6IHN0cmluZztcclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLy8jcmVnaW9uIEhUTUwgRWxlbWVudHNcclxuICAgIHByaXZhdGUgcHJlc2VudGF0aW9uU3BhbjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGxhYmVsOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGRhdGFsaXN0OiBIVE1MRGF0YUxpc3RFbGVtZW50O1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50OiBDb21wb25lbnQpIHtcclxuICAgICAgICBzdXBlcihjb21wb25lbnQpO1xyXG4gICAgICAgIHRoaXMub25GaW5hbGl6ZSA9IHRoaXMuYnVpbGRcclxuICAgICAgICB0aGlzLm9uRmlyc3RFZGl0ID0gdGhpcy5idWlsZElucHV0O1xyXG4gICAgICAgIHRoaXMub25FbmFibGVFZGl0Q2FsbGJhY2sgPSB0aGlzLmVuYWJsZUVkaXQ7XHJcbiAgICAgICAgdGhpcy5vblNhdmVDYWxsYmFjayA9IHRoaXMuc2F2ZTtcclxuICAgICAgICB0aGlzLm9uRGlzYWJsZUVkaXRDYWxsYmFjayA9IHRoaXMuZGlzYWJsZUVkaXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIENvbmZpZ3VyYXRpb24gbWV0aG9kc1xyXG4gICAgLyoqXHJcbiAgICAgKiBFbmFibGVzIHRoZSBlZGl0YWJpbGl0eSBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBlbmFibGVFZGl0YWJpbGl0eSgpIHtcclxuICAgICAgICB0aGlzLmVkaXRhYmlsaXR5RW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgcGxhY2Vob2xkZXIgb2YgdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gcGxhY2Vob2xkZXIgVGhlIHBsYWNlaG9sZGVyIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXI6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHN1Z2dlc3Rpb25zIGZvciB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgICAqIEBwYXJhbSBzdWdnZXN0aW9ucyBUaGUgc3VnZ2VzdGlvbnMgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRTdWdnZXN0aW9ucyhzdWdnZXN0aW9uczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLl9zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25zO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGl0bGUgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRUaXRsZSh0aXRsZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHN1Z2dlc3RlciBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHN1Z2dlc3RlciBUaGUgc3VnZ2VzdGVyIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICogQHJlbWFya3MgVGhlIHN1Z2dlc3RlciBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciB0eXBlcyBpbiB0aGUgaW5wdXQgZWxlbWVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFN1Z2dlc3RlcihzdWdnZXN0ZXI6ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMuX3N1Z2dlc3RlciA9IHN1Z2dlc3RlcjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGZvcm1hdG9yIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gZm9ybWF0b3IgVGhlIGZvcm1hdG9yIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICogQHJlbWFya3MgVGhlIGZvcm1hdG9yIGlzIGNhbGxlZCB3aGVuIHRoZSBjb21wb25lbnQgY2hhbmdlIGluIGBub3QtZWRpdGAgbW9kZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEZvcm1hdG9yKGZvcm1hdG9yOiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTxzdHJpbmc+KSB7XHJcbiAgICAgICAgdGhpcy5fb25QcmVzZW50YXRpb24gPSBhc3luYyAodmFsdWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4udGV4dENvbnRlbnQgPSBhd2FpdCBmb3JtYXRvcih0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIG1hcmtkb3duIGZvcm1hdG9yIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgZmlsZSB0byByZXNvbHZlIGludGVybmFsIGxpbmtzLlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKiBAcmVtYXJrcyBUaGUgZm9ybWF0b3IgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2UgaW4gYG5vdC1lZGl0YCBtb2RlLlxyXG4gICAgICogLSBUaGUgY3VzdG9tIGZvcm1hdG9yIGlzIGlnbm9yZWQgaWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkIVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0UmVuZGVyTWFya2Rvd24ocGF0aCA9IFwiXCIpIHtcclxuICAgICAgICB0aGlzLl9vbk1hcmtkb3duUHJlc2VudGF0aW9uID0gKHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgICAgICAgaWYgKEhlbHBlci5pc1Bvc3NpYmx5TWFya2Rvd24odmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHAgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5hcHA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWFya2Rvd25SZW5kZXJlci5yZW5kZXIoYXBwLCB2YWx1ZSwgdGhpcy5wcmVzZW50YXRpb25TcGFuLCBwYXRoLCB0aGlzLmNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3Bhbi50ZXh0Q29udGVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc2F2ZXIgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgc2F2ZXIgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKiBAcmVtYXJrcyBUaGUgc2F2ZXIgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25TYXZlKGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPikge1xyXG4gICAgICAgIHRoaXMuX29uU2F2ZSA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTdWdnZXN0aW9uc0xpc3Qoc3VnZ2VzdGlvbnM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGFsaXN0KSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5kYXRhbGlzdC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBpZiAoIXN1Z2dlc3Rpb25zKSByZXR1cm47XHJcbiAgICAgICAgc3VnZ2VzdGlvbnMuZm9yRWFjaChzdWdnZXN0aW9uID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHN1Z2dlc3Rpb247XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWxpc3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gQmFzZSBDYWxsYmFja3NcclxuICAgIHByaXZhdGUgYnVpbGQoKSB7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucHJlc2VudGF0aW9uU3Bhbik7XHJcblxyXG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3Bhbi50aXRsZSA9IHRoaXMuX3RpdGxlO1xyXG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3Bhbi5jbGFzc0xpc3QuYWRkKCdlZGl0YWJsZS1kYXRhLXZpZXcnKTtcclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4uY2xhc3NMaXN0LmFkZCgndGV4dC1wcmVzZW50YXRpb24nKTtcclxuICAgICAgICBpZiAodGhpcy5fb25NYXJrZG93blByZXNlbnRhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4udGV4dENvbnRlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9vbk1hcmtkb3duUHJlc2VudGF0aW9uKHRoaXMuX3ZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX29uUHJlc2VudGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUHJlc2VudGF0aW9uKHRoaXMuX3ZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4udGV4dENvbnRlbnQgPSB0aGlzLl92YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBidWlsZElucHV0KCkge1xyXG4gICAgICAgIHRoaXMubGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICAgIHRoaXMubGFiZWwudGl0bGUgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLmRhdGFJbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmxhYmVsKTtcclxuICAgICAgICB0aGlzLmxhYmVsLmNsYXNzTGlzdC5hZGQoJ2VkaXRhYmxlLWRhdGEtdmlldycpO1xyXG4gICAgICAgIHRoaXMubGFiZWwuY2xhc3NMaXN0LmFkZCgndGV4dC1pbnB1dC1zaXplcicpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICB0aGlzLmxhYmVsLmFwcGVuZENoaWxkKHRoaXMuaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LmFkZCgnZWRpdGFibGUtZGF0YS12aWV3Jyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWlucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5wbGFjZWhvbGRlciA9IHRoaXMuX3BsYWNlaG9sZGVyID8gdGhpcy5fcGxhY2Vob2xkZXIgOiAnJztcclxuICAgICAgICB0aGlzLmNvbXBvbmVudC5yZWdpc3RlckRvbUV2ZW50KHRoaXMuaW5wdXQsICdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbC5kYXRhc2V0LnZhbHVlID0gdGhpcy5pbnB1dC52YWx1ZSA/IHRoaXMuaW5wdXQudmFsdWUgOiB0aGlzLl9wbGFjZWhvbGRlciA/IHRoaXMuX3BsYWNlaG9sZGVyIDogJyc7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdWdnZXN0ZXIgJiYgdGhpcy5sYWJlbC5kYXRhc2V0LnZhbHVlICE9PSB0aGlzLl9wbGFjZWhvbGRlciAmJiB0aGlzLmxhYmVsLmRhdGFzZXQudmFsdWUgIT09IFwiXCIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN1Z2dlc3Rpb25zTGlzdCh0aGlzLl9zdWdnZXN0ZXIodGhpcy5pbnB1dC52YWx1ZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50LnJlZ2lzdGVyRG9tRXZlbnQodGhpcy5pbnB1dCwgJ2tleWRvd24nLCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUVkaXRNb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCh0aGlzLl9zdWdnZXN0aW9ucyAmJiB0aGlzLl9zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB8fCB0aGlzLl9zdWdnZXN0ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApO1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0LnNldEF0dHJpYnV0ZSgnbGlzdCcsIGlkKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RhdGFsaXN0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWxpc3QuaWQgPSBpZDtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dC5hcHBlbmRDaGlsZCh0aGlzLmRhdGFsaXN0KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdWdnZXN0aW9uc0xpc3QodGhpcy5fc3VnZ2VzdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuYWJsZUVkaXQoKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9IHRoaXMuX3ZhbHVlID8gdGhpcy5fdmFsdWUgOiAnJztcclxuICAgICAgICB0aGlzLmxhYmVsLmRhdGFzZXQudmFsdWUgPSB0aGlzLl92YWx1ZSA/IHRoaXMuX3ZhbHVlIDogdGhpcy5fcGxhY2Vob2xkZXIgPyB0aGlzLl9wbGFjZWhvbGRlciA6ICcnO1xyXG4gICAgICAgIHRoaXMuaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICB0aGlzLmlucHV0LnNlbGVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGlzYWJsZUVkaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX29uTWFya2Rvd25QcmVzZW50YXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLnRleHRDb250ZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fb25NYXJrZG93blByZXNlbnRhdGlvbih0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9vblByZXNlbnRhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9vblByZXNlbnRhdGlvbih0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLnRleHRDb250ZW50ID0gdGhpcy5fdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHRoaXMuaW5wdXQudmFsdWU7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5fb25TYXZlPy4odGhpcy5fdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbn1cclxuIiwgImltcG9ydCB7IENvbXBvbmVudCwgTWFya2Rvd25SZW5kZXJlciB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tIFwiLi9CYXNlQ29tcG9uZW50XCI7XHJcbmltcG9ydCBHbG9iYWwgZnJvbSBcInNyYy9jbGFzc2VzL0dsb2JhbFwiO1xyXG5pbXBvcnQgSGVscGVyIGZyb20gXCJzcmMvbGlicy9IZWxwZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRleHRhcmVhQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XHJcbiAgICAvLyNyZWdpb24gYmFzZSBwcm9wZXJ0aWVzXHJcbiAgICBwcm90ZWN0ZWQgZWRpdGFiaWxpdHlFbmFibGVkID0gZmFsc2U7XHJcbiAgICBvbkVuYWJsZUVkaXRDYWxsYmFjazogKCkgPT4gdm9pZDtcclxuICAgIG9uRGlzYWJsZUVkaXRDYWxsYmFjazogKCkgPT4gdm9pZDtcclxuICAgIG9uU2F2ZUNhbGxiYWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgb25GaXJzdEVkaXQ6ICgpID0+IHZvaWQ7XHJcbiAgICBvbkZpbmFsaXplOiAoKSA9PiB2b2lkO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvLyNyZWdpb24gZXh0ZW5kZWQgcHJvcGVydGllc1xyXG4gICAgcHJpdmF0ZSBfb25QcmVzZW50YXRpb246ICgodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPikgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIF9vbk1hcmtkb3duUHJlc2VudGF0aW9uOiAoKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBfb25TYXZlOiAoKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBfdmFsdWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3BsYWNlaG9sZGVyOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF90aXRsZTogc3RyaW5nO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgICAvLyNyZWdpb24gSFRNTCBFbGVtZW50c1xyXG4gICAgcHJpdmF0ZSBwcmVzZW50YXRpb25TcGFuOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgbGFiZWw6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudDtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudDogQ29tcG9uZW50KSB7XHJcbiAgICAgICAgc3VwZXIoY29tcG9uZW50KTtcclxuICAgICAgICB0aGlzLm9uRmluYWxpemUgPSB0aGlzLmJ1aWxkXHJcbiAgICAgICAgdGhpcy5vbkZpcnN0RWRpdCA9IHRoaXMuYnVpbGRJbnB1dDtcclxuICAgICAgICB0aGlzLm9uRW5hYmxlRWRpdENhbGxiYWNrID0gdGhpcy5lbmFibGVFZGl0O1xyXG4gICAgICAgIHRoaXMub25TYXZlQ2FsbGJhY2sgPSB0aGlzLnNhdmU7XHJcbiAgICAgICAgdGhpcy5vbkRpc2FibGVFZGl0Q2FsbGJhY2sgPSB0aGlzLmRpc2FibGVFZGl0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBDb25maWd1cmF0aW9uIG1ldGhvZHNcclxuICAgIC8qKlxyXG4gICAgICogRW5hYmxlcyB0aGUgZWRpdGFiaWxpdHkgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZW5hYmxlRWRpdGFiaWxpdHkoKSB7XHJcbiAgICAgICAgdGhpcy5lZGl0YWJpbGl0eUVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHBsYWNlaG9sZGVyIG9mIHRoZSBpbnB1dCBlbGVtZW50LlxyXG4gICAgICogQHBhcmFtIHBsYWNlaG9sZGVyIFRoZSBwbGFjZWhvbGRlciB0byBzZXQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGl0bGUgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRUaXRsZSh0aXRsZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGZvcm1hdG9yIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gZm9ybWF0b3IgVGhlIGZvcm1hdG9yIHRvIHNldC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgaXRzZWxmLlxyXG4gICAgICogQHJlbWFya3MgVGhlIGZvcm1hdG9yIGlzIGNhbGxlZCB3aGVuIHRoZSBjb21wb25lbnQgY2hhbmdlIGluIGBub3QtZWRpdGAgbW9kZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEZvcm1hdG9yKGZvcm1hdG9yOiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTxzdHJpbmc+KSB7XHJcbiAgICAgICAgdGhpcy5fb25QcmVzZW50YXRpb24gPSBhc3luYyAodmFsdWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4udGV4dENvbnRlbnQgPSBhd2FpdCBmb3JtYXRvcih0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIG1hcmtkb3duIGZvcm1hdG9yIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgZmlsZSB0byByZXNvbHZlIGludGVybmFsIGxpbmtzLlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKiBAcmVtYXJrcyBUaGUgZm9ybWF0b3IgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2UgaW4gYG5vdC1lZGl0YCBtb2RlLlxyXG4gICAgICogLSBUaGUgY3VzdG9tIGZvcm1hdG9yIGlzIGlnbm9yZWQgaWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkIVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0UmVuZGVyTWFya2Rvd24ocGF0aCA9IFwiXCIpIHtcclxuICAgICAgICB0aGlzLl9vbk1hcmtkb3duUHJlc2VudGF0aW9uID0gKHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgICAgICAgaWYgKEhlbHBlci5pc1Bvc3NpYmx5TWFya2Rvd24odmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHAgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5hcHA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWFya2Rvd25SZW5kZXJlci5yZW5kZXIoYXBwLCB2YWx1ZSwgdGhpcy5wcmVzZW50YXRpb25TcGFuLCBwYXRoLCB0aGlzLmNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3Bhbi50ZXh0Q29udGVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc2F2ZXIgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgc2F2ZXIgdG8gc2V0LlxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpdHNlbGYuXHJcbiAgICAgKiBAcmVtYXJrcyBUaGUgc2F2ZXIgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25TYXZlKGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPikge1xyXG4gICAgICAgIHRoaXMuX29uU2F2ZSA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIEJhc2UgQ2FsbGJhY2tzXHJcbiAgICBwcml2YXRlIGJ1aWxkKCkge1xyXG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnByZXNlbnRhdGlvblNwYW4pO1xyXG5cclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4udGl0bGUgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLnByZXNlbnRhdGlvblNwYW4uY2xhc3NMaXN0LmFkZCgnZWRpdGFibGUtZGF0YS12aWV3Jyk7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLmNsYXNzTGlzdC5hZGQoJ3RleHRhcmVhLXByZXNlbnRhdGlvbicpO1xyXG4gICAgICAgIGlmICh0aGlzLl9vbk1hcmtkb3duUHJlc2VudGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3Bhbi50ZXh0Q29udGVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX29uTWFya2Rvd25QcmVzZW50YXRpb24odGhpcy5fdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fb25QcmVzZW50YXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5fb25QcmVzZW50YXRpb24odGhpcy5fdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlc2VudGF0aW9uU3Bhbi50ZXh0Q29udGVudCA9IHRoaXMuX3ZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJ1aWxkSW5wdXQoKSB7XHJcbiAgICAgICAgdGhpcy5sYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICAgICAgdGhpcy5sYWJlbC50aXRsZSA9IHRoaXMuX3RpdGxlO1xyXG4gICAgICAgIHRoaXMuZGF0YUlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMubGFiZWwpO1xyXG4gICAgICAgIHRoaXMubGFiZWwuY2xhc3NMaXN0LmFkZCgnZWRpdGFibGUtZGF0YS12aWV3Jyk7XHJcbiAgICAgICAgdGhpcy5sYWJlbC5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYS1pbnB1dC1zaXplcicpO1xyXG5cclxuICAgICAgICB0aGlzLnRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcclxuICAgICAgICB0aGlzLmxhYmVsLmFwcGVuZENoaWxkKHRoaXMudGV4dGFyZWEpO1xyXG4gICAgICAgIHRoaXMudGV4dGFyZWEuY2xhc3NMaXN0LmFkZCgnZWRpdGFibGUtZGF0YS12aWV3Jyk7XHJcbiAgICAgICAgdGhpcy50ZXh0YXJlYS5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYS1pbnB1dCcpO1xyXG4gICAgICAgIHRoaXMudGV4dGFyZWEucGxhY2Vob2xkZXIgPSB0aGlzLl9wbGFjZWhvbGRlciA/IHRoaXMuX3BsYWNlaG9sZGVyIDogJyc7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQucmVnaXN0ZXJEb21FdmVudCh0aGlzLnRleHRhcmVhLCAnaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWwuZGF0YXNldC52YWx1ZSA9IHRoaXMudGV4dGFyZWEudmFsdWUgPyB0aGlzLnRleHRhcmVhLnZhbHVlIDogdGhpcy5fcGxhY2Vob2xkZXIgPyB0aGlzLl9wbGFjZWhvbGRlciA6ICcnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50LnJlZ2lzdGVyRG9tRXZlbnQodGhpcy50ZXh0YXJlYSwgJ2tleWRvd24nLCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUVkaXRNb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuYWJsZUVkaXQoKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0YXJlYS52YWx1ZSA9IHRoaXMuX3ZhbHVlID8gdGhpcy5fdmFsdWUgOiAnJztcclxuICAgICAgICB0aGlzLmxhYmVsLmRhdGFzZXQudmFsdWUgPSB0aGlzLl92YWx1ZSA/IHRoaXMuX3ZhbHVlIDogdGhpcy5fcGxhY2Vob2xkZXIgPyB0aGlzLl9wbGFjZWhvbGRlciA6ICcnO1xyXG4gICAgICAgIHRoaXMudGV4dGFyZWEuZm9jdXMoKTtcclxuICAgICAgICB0aGlzLnRleHRhcmVhLnNlbGVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGlzYWJsZUVkaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX29uTWFya2Rvd25QcmVzZW50YXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLnRleHRDb250ZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fb25NYXJrZG93blByZXNlbnRhdGlvbih0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9vblByZXNlbnRhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9vblByZXNlbnRhdGlvbih0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmVzZW50YXRpb25TcGFuLnRleHRDb250ZW50ID0gdGhpcy5fdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHRoaXMudGV4dGFyZWEudmFsdWU7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5fb25TYXZlPy4odGhpcy5fdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbn1cclxuIiwgImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgRGF0ZUNvbXBvbmVudCBmcm9tIFwiLi9Db21wb25lbnRzL0RhdGVDb21wb25lbnRcIjtcclxuaW1wb3J0IERyb3Bkb3duQ29tcG9uZW50IGZyb20gXCIuL0NvbXBvbmVudHMvRHJvcGRvd25Db21wb25lbnRcIjtcclxuaW1wb3J0IExpbmtDb21wb25lbnQgZnJvbSBcIi4vQ29tcG9uZW50cy9MaW5rQ29tcG9uZW50XCI7XHJcbmltcG9ydCBUZXh0Q29tcG9uZW50IGZyb20gXCIuL0NvbXBvbmVudHMvVGV4dENvbXBvbmVudFwiO1xyXG5pbXBvcnQgVGV4dGFyZWFDb21wb25lbnQgZnJvbSBcIi4vQ29tcG9uZW50cy9UZXh0YXJlYUNvbXBvbmVudFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRpdGFibGVEYXRhVmlldyB7XHJcbiAgICBwcml2YXRlIF9jb250YWluZXI6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudDtcclxuICAgIHByaXZhdGUgY29tcG9uZW50OiBDb21wb25lbnQ7XHJcbiAgICBwcml2YXRlIGF0dHJpYnV0ZXNMaXN0OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnQsIGNvbXBvbmVudDogQ29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgYWRkVGV4dChjb25maWd1cmU6IChjb21wb25lbnQ6IFRleHRDb21wb25lbnQpID0+IHZvaWQpOiBFZGl0YWJsZURhdGFWaWV3IHtcclxuICAgICAgICBjb25zdCB0ZXh0Q29tcG9uZW50ID0gbmV3IFRleHRDb21wb25lbnQodGhpcy5jb21wb25lbnQpO1xyXG4gICAgICAgIGNvbmZpZ3VyZSh0ZXh0Q29tcG9uZW50KTtcclxuICAgICAgICB0ZXh0Q29tcG9uZW50LmZpbmFsaXplKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQodGV4dENvbXBvbmVudC5jb250YWluZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVGV4dGFyZWEoY29uZmlndXJlOiAoY29tcG9uZW50OiBUZXh0YXJlYUNvbXBvbmVudCkgPT4gdm9pZCk6IEVkaXRhYmxlRGF0YVZpZXcge1xyXG4gICAgICAgIGNvbnN0IHRleHRDb21wb25lbnQgPSBuZXcgVGV4dGFyZWFDb21wb25lbnQodGhpcy5jb21wb25lbnQpO1xyXG4gICAgICAgIGNvbmZpZ3VyZSh0ZXh0Q29tcG9uZW50KTtcclxuICAgICAgICB0ZXh0Q29tcG9uZW50LmZpbmFsaXplKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQodGV4dENvbXBvbmVudC5jb250YWluZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkTGluayhjb25maWd1cmU6IChjb21wb25lbnQ6IExpbmtDb21wb25lbnQpID0+IHZvaWQpOiBFZGl0YWJsZURhdGFWaWV3IHtcclxuICAgICAgICBjb25zdCBsaW5rQ29tcG9uZW50ID0gbmV3IExpbmtDb21wb25lbnQodGhpcy5jb21wb25lbnQpO1xyXG4gICAgICAgIGNvbmZpZ3VyZShsaW5rQ29tcG9uZW50KTtcclxuICAgICAgICBsaW5rQ29tcG9uZW50LmZpbmFsaXplKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChsaW5rQ29tcG9uZW50LmNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGREYXRlKGNvbmZpZ3VyZTogKGNvbXBvbmVudDogRGF0ZUNvbXBvbmVudCkgPT4gdm9pZCk6IEVkaXRhYmxlRGF0YVZpZXcge1xyXG4gICAgICAgIGNvbnN0IGRhdGVDb21wb25lbnQgPSBuZXcgRGF0ZUNvbXBvbmVudCh0aGlzLmNvbXBvbmVudCk7XHJcbiAgICAgICAgY29uZmlndXJlKGRhdGVDb21wb25lbnQpO1xyXG4gICAgICAgIGRhdGVDb21wb25lbnQuZmluYWxpemUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChkYXRlQ29tcG9uZW50LmNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGREcm9wZG93bihjb25maWd1cmU6IChjb21wb25lbnQ6IERyb3Bkb3duQ29tcG9uZW50KSA9PiB2b2lkKTogRWRpdGFibGVEYXRhVmlldyB7XHJcbiAgICAgICAgY29uc3QgZHJvcGRvd25Db21wb25lbnQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQodGhpcy5jb21wb25lbnQpO1xyXG4gICAgICAgIGNvbmZpZ3VyZShkcm9wZG93bkNvbXBvbmVudCk7XHJcbiAgICAgICAgZHJvcGRvd25Db21wb25lbnQuZmluYWxpemUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGRyb3Bkb3duQ29tcG9uZW50LmNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IExuZyBmcm9tIFwic3JjL2NsYXNzZXMvTG5nXCI7XHJcbmltcG9ydCBFZGl0YWJsZURhdGFWaWV3IGZyb20gXCJzcmMvbGlicy9FZGl0YWJsZURhdGFWaWV3L0VkaXRhYmxlRGF0YVZpZXdcIjtcclxuaW1wb3J0IEhlbHBlciBmcm9tIFwic3JjL2xpYnMvSGVscGVyXCI7XHJcbmltcG9ydCB7IEZpbGVUeXBlIH0gZnJvbSBcInNyYy90eXBlcy9QcmpUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2VuZXJhbENvbXBvbmVudHMge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGxpbmsgdG8gdGhlIGZpbGUgYXQgYHBhdGhgIHdpdGggdGhlIGBjb3Jvc3BvbmRpbmdTeW1ib2xgIGFzIGljb24uXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyIFRoZSBjb250YWluZXIgdG8gYXBwZW5kIHRoZSBsaW5rIHRvLlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyIHRoZSBldmVudHMgdG8uXHJcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCB0byB0aGUgZmlsZS5cclxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBmaWxlLlxyXG4gICAgICogQHBhcmFtIGNvcm9zcG9uZGluZ1N5bWJvbCBUaGUgY29yb3Nwb25kaW5nIHN5bWJvbCBmb3IgdGhlIGZpbGUgdHlwZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVNZXRhZGF0YUxpbmsoXHJcbiAgICAgICAgY29udGFpbmVyOiBEb2N1bWVudEZyYWdtZW50LFxyXG4gICAgICAgIGNvbXBvbmVudDogQ29tcG9uZW50LFxyXG4gICAgICAgIHBhdGg6IHN0cmluZyxcclxuICAgICAgICB0eXBlOiBGaWxlVHlwZSB8IHVuZGVmaW5lZCB8IG51bGwsXHJcbiAgICAgICAgY29yb3Nwb25kaW5nU3ltYm9sOiBzdHJpbmcpIHtcclxuICAgICAgICBuZXcgRWRpdGFibGVEYXRhVmlldyhjb250YWluZXIsIGNvbXBvbmVudClcclxuICAgICAgICAgICAgLmFkZExpbmsobGluayA9PiBsaW5rXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGF0aClcclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShMbmcuZ3QodHlwZSA/PyBcIkZpbGVcIikpXHJcbiAgICAgICAgICAgICAgICAuc2V0TGlua1R5cGUoXCJmaWxlXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Rm9ybWF0b3IoKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGljb25TdHJpbmcgPSBjb3Jvc3BvbmRpbmdTeW1ib2w7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihpY29uIGFzIHVua25vd24gYXMgSFRNTERpdkVsZW1lbnQsIGljb25TdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGhyZWY6IGAke3ZhbHVlfWAsIHRleHQ6IGAke3ZhbHVlfWAsIGh0bWw6IGljb24gfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlQ2VsbERhdGUoXHJcbiAgICAgICAgZGF0ZTogRG9jdW1lbnRGcmFnbWVudCxcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICB0aXRsZTogc3RyaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc3RyaW5nLFxyXG4gICAgICAgIG9uUmVhZDogKCkgPT4gc3RyaW5nLFxyXG4gICAgICAgIG9uV3JpdGU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgbmV3IEVkaXRhYmxlRGF0YVZpZXcoZGF0ZSwgY29tcG9uZW50KVxyXG4gICAgICAgICAgICAuYWRkRGF0ZShkYXRlID0+IGRhdGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShvblJlYWQoKSlcclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZSh0aXRsZSlcclxuICAgICAgICAgICAgICAgIC5lbmFibGVFZGl0YWJpbGl0eSgpXHJcbiAgICAgICAgICAgICAgICAuc2V0Rm9ybWF0b3IoKHZhbHVlOiBzdHJpbmcpID0+IEhlbHBlci5mb3JtYXREYXRlKHZhbHVlLCBmb3JtYXQpKVxyXG4gICAgICAgICAgICAgICAgLm9uU2F2ZSgodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uV3JpdGUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsICJpbXBvcnQgeyBEb2N1bWVudE1vZGVsIH0gZnJvbSBcInNyYy9tb2RlbHMvRG9jdW1lbnRNb2RlbFwiO1xyXG5pbXBvcnQgVGFibGVCbG9ja1JlbmRlckNvbXBvbmVudCBmcm9tIFwiLi9UYWJsZUJsb2NrUmVuZGVyQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7IElQcm9jZXNzb3JTZXR0aW5ncyB9IGZyb20gXCIuLi8uLi9pbnRlcmZhY2VzL0lQcm9jZXNzb3JTZXR0aW5nc1wiO1xyXG5pbXBvcnQgU2VhcmNoLCB7IFNlYXJjaFRlcm1zQXJyYXkgfSBmcm9tIFwiLi4vU2VhcmNoXCI7XHJcbmltcG9ydCBUYWJsZSwgeyBSb3csIFJvd3NTdGF0ZSwgVGFibGVIZWFkZXIgfSBmcm9tIFwiLi4vVGFibGVcIjtcclxuaW1wb3J0IExuZyBmcm9tIFwic3JjL2NsYXNzZXMvTG5nXCI7XHJcbmltcG9ydCBGaWx0ZXJCdXR0b24gZnJvbSBcIi4vSW5uZXJDb21wb25lbnRzL0ZpbHRlckJ1dHRvblwiO1xyXG5pbXBvcnQgTWF4U2hvd25Nb2RlbHNJbnB1dCBmcm9tIFwiLi9Jbm5lckNvbXBvbmVudHMvTWF4U2hvd25Nb2RlbHNJbnB1dFwiO1xyXG5pbXBvcnQgU2VhcmNoSW5wdXQgZnJvbSBcIi4vSW5uZXJDb21wb25lbnRzL1NlYXJjaElucHV0XCI7XHJcbmltcG9ydCBIZWxwZXIgZnJvbSBcIi4uL0hlbHBlclwiO1xyXG5pbXBvcnQgRG9jdW1lbnRDb21wb25lbnRzIGZyb20gXCIuL0lubmVyQ29tcG9uZW50cy9Eb2N1bWVudENvbXBvbmVudHNcIjtcclxuaW1wb3J0IEdlbmVyYWxDb21wb25lbnRzIGZyb20gXCIuL0lubmVyQ29tcG9uZW50cy9HZW5lcmFsQ29tcG9uZW50c1wiO1xyXG5cclxuLyoqXHJcbiAqIERvY3VtZW50IGJsb2NrIHJlbmRlciBjb21wb25lbnQgY2xhc3MgZm9yIGBUYWJsZUJsb2NrUmVuZGVyQ29tcG9uZW50YC5cclxuICogQHJlbWFya3MgVGhpcyBjbGFzcyBwcm92aWRlcyBtZXRob2RzIHRvIGNyZWF0ZSBhbmQgbWFuYWdlIGEgZG9jdW1lbnQgYmxvY2sgcmVuZGVyIGNvbXBvbmVudC5cclxuICogQHNlZSB7QGxpbmsgY3JlYXRlfSBmb3IgZGV0YWlscyBhYm91dCBjcmVhdGluZyBhIGRvY3VtZW50IGJsb2NrIHJlbmRlciBjb21wb25lbnQuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEb2N1bWVudEJsb2NrUmVuZGVyQ29tcG9uZW50IGV4dGVuZHMgVGFibGVCbG9ja1JlbmRlckNvbXBvbmVudDxEb2N1bWVudE1vZGVsPiB7XHJcbiAgICBwcm90ZWN0ZWQgc2V0dGluZ3M6IERvY3VtZW50QmxvY2tSZW5kZXJTZXR0aW5ncyA9IHtcclxuICAgICAgICB0YWdzOiBbXSxcclxuICAgICAgICBkb2NTeW1ib2w6IHRoaXMuZ2xvYmFsLnNldHRpbmdzLmRvY3VtZW50U2V0dGluZ3Muc3ltYm9sLFxyXG4gICAgICAgIGhpZGVEb2NTeW1ib2w6IHRoaXMuZ2xvYmFsLnNldHRpbmdzLmRvY3VtZW50U2V0dGluZ3MuaGlkZVN5bWJvbCxcclxuICAgICAgICBjbHVzdGVyU3ltYm9sOiB0aGlzLmdsb2JhbC5zZXR0aW5ncy5kb2N1bWVudFNldHRpbmdzLmNsdXN0ZXJTeW1ib2wsXHJcbiAgICAgICAgbm9uZURvY1N5bWJvbDogXCJkaWFtb25kXCIsXHJcbiAgICAgICAgZmlsdGVyOiBbXCJEb2N1bWVudHNcIl0sXHJcbiAgICAgICAgbWF4RG9jdW1lbnRzOiB0aGlzLmdsb2JhbC5zZXR0aW5ncy5kZWZhdWx0TWF4U2hvdyxcclxuICAgICAgICBzZWFyY2g6IHVuZGVmaW5lZCxcclxuICAgICAgICBiYXRjaFNpemU6IDgsXHJcbiAgICAgICAgc2xlZXBCZXR3ZWVuQmF0Y2hlczogMTBcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdGFibGUgaGVhZGVycy5cclxuICAgICAqIEByZW1hcmtzIFRoZSB0YWJsZSBoZWFkZXJzIGFyZSB1c2VkIHRvIGNyZWF0ZSB0aGUgdGFibGUuXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHRhYmxlSGVhZGVyczogVGFibGVIZWFkZXJbXSA9IFtcclxuICAgICAgICB7IHRleHQ6IExuZy5ndChcIkRvY3VtZW50VHlwZVwiKSwgaGVhZGVyQ2xhc3M6IFtdLCBjb2x1bW5DbGFzczogW1wiZG9udC1kZWNvcmF0ZS1saW5rXCIsIFwiZm9udC1tZWRpdW1cIl0gfSxcclxuICAgICAgICB7IHRleHQ6IExuZy5ndChcIkRhdGVcIiksIGhlYWRlckNsYXNzOiBbXSwgY29sdW1uQ2xhc3M6IFtcImZvbnQteHNtYWxsXCJdIH0sXHJcbiAgICAgICAgeyB0ZXh0OiBMbmcuZ3QoXCJTdWJqZWN0XCIpLCBoZWFkZXJDbGFzczogW10sIGNvbHVtbkNsYXNzOiBbXSB9LFxyXG4gICAgICAgIHsgdGV4dDogTG5nLmd0KFwiU2VuZFJlY2lwXCIpLCBoZWFkZXJDbGFzczogW10sIGNvbHVtbkNsYXNzOiBbXCJmb250LXhzbWFsbFwiXSB9LFxyXG4gICAgICAgIHsgdGV4dDogTG5nLmd0KFwiQ29udGVudFwiKSwgaGVhZGVyQ2xhc3M6IFtdLCBjb2x1bW5DbGFzczogW1wiZm9udC14c21hbGxcIl0gfSxcclxuICAgICAgICB7IHRleHQ6IExuZy5ndChcIkRlbGl2ZXJ5RGF0ZVwiKSwgaGVhZGVyQ2xhc3M6IFtdLCBjb2x1bW5DbGFzczogW1wiZm9udC14c21hbGxcIl0gfSxcclxuICAgICAgICB7IHRleHQ6IExuZy5ndChcIlRhZ3NcIiksIGhlYWRlckNsYXNzOiBbXSwgY29sdW1uQ2xhc3M6IFtcInRhZ3NcIl0gfVxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogSVByb2Nlc3NvclNldHRpbmdzKSB7XHJcbiAgICAgICAgc3VwZXIoc2V0dGluZ3MpO1xyXG4gICAgICAgIHRoaXMucGFyc2VTZXR0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBidWlsZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuYnVpbGQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSBjb21wb25lbnQgYW5kIGFkZHMgdGhlIGRvY3VtZW50cyB0byB0aGUgdGFibGUuXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2Ugd2hpY2ggaXMgcmVzb2x2ZWQgd2hlbiB0aGUgZG9jdW1lbnRzIGFyZSBhZGRlZCB0byB0aGUgdGFibGUuXHJcbiAgICAgKiBAcmVtYXJrcyAtIENhbGxzIHRoZSBgc3VwZXIuZHJhd2AgbWV0aG9kLlxyXG4gICAgICogLSBDYWxscyB0aGUgYGJ1aWxkVGFibGVgIG1ldGhvZC5cclxuICAgICAqIC0gQ2FsbHMgdGhlIGBidWlsZEhlYWRlcmAgbWV0aG9kLlxyXG4gICAgICogLSBDYWxscyB0aGUgYGFkZERvY3VtZW50c1RvVGFibGVgIG1ldGhvZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFzeW5jIGRyYXcoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgY29uc3QgZG9jdW1lbnRzUHJvbWlzZSA9IHRoaXMuZ2V0TW9kZWxzKCk7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIuZHJhdygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRUYWJsZSgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRIZWFkZXIoKTtcclxuICAgICAgICB0aGlzLmdyYXlPdXRIZWFkZXIoKTtcclxuICAgICAgICB0aGlzLm1vZGVscyA9IChhd2FpdCBkb2N1bWVudHNQcm9taXNlKTtcclxuXHJcbiAgICAgICAgRG9jdW1lbnRNb2RlbC5zb3J0RG9jdW1lbnRzQnlEYXRlRGVzYyh0aGlzLm1vZGVscyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hZGREb2N1bWVudHNUb1RhYmxlKCk7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxpemVIZWFkZXIoKTtcclxuICAgICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgUmVkcmF3IERvY3VtZW50cyAoZm9yICR7dGhpcy5tb2RlbHMubGVuZ3RofSBEb2NzLikgcnVucyBmb3IgJHtlbmRUaW1lIC0gc3RhcnRUaW1lfW1zYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZHMgdGhlIGhlYWRlci5cclxuICAgICAqIEByZW1hcmtzIC0gVGhlIGhlYWRlciBpcyBzYXZlZCBpbiB0aGUgYGhlYWRlckNvbnRhaW5lcmAgcHJvcGVydHkuXHJcbiAgICAgKiAtIENyZWF0ZXMgdGhlIGBmaWx0ZXIgY29udGFpbmVyYC5cclxuICAgICAqIC0gQ3JlYXRlcyB0aGUgYGZpbHRlciBsYWJlbGAuXHJcbiAgICAgKiAtIENyZWF0ZXMgdGhlIGBmaWx0ZXIgYnV0dG9uc2A6IGBEb2N1bWVudHNgLCBgSGlkZURvY3VtZW50c2AgYW5kIGBDbHVzdGVyYC5cclxuICAgICAqIC0gQ3JlYXRlcyB0aGUgYG1heCBkb2N1bWVudHMgaW5wdXRgLlxyXG4gICAgICogLSBDcmVhdGVzIHRoZSBgc2VhcmNoIGJveGAuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgYnVpbGRIZWFkZXIoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gRmlsdGVyIGNvbnRhaW5lclxyXG4gICAgICAgIGNvbnN0IGhlYWRlckZpbHRlckJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmhlYWRlckNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXJGaWx0ZXJCdXR0b25zKTtcclxuICAgICAgICBoZWFkZXJGaWx0ZXJCdXR0b25zLmNsYXNzTGlzdC5hZGQoJ2hlYWRlci1pdGVtJyk7XHJcbiAgICAgICAgaGVhZGVyRmlsdGVyQnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdmaWx0ZXItc3ltYm9scycpO1xyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgbGFiZWxcclxuICAgICAgICBjb25zdCBmaWx0ZXJMYWJlbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGhlYWRlckZpbHRlckJ1dHRvbnMuYXBwZW5kQ2hpbGQoZmlsdGVyTGFiZWxDb250YWluZXIpO1xyXG4gICAgICAgIGNvbnN0IGZpbHRlckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGZpbHRlckxhYmVsQ29udGFpbmVyLmFwcGVuZENoaWxkKGZpbHRlckxhYmVsKTtcclxuICAgICAgICBmaWx0ZXJMYWJlbC5jbGFzc0xpc3QuYWRkKCdmaWx0ZXItc3ltYm9sJyk7XHJcbiAgICAgICAgZmlsdGVyTGFiZWwudGV4dENvbnRlbnQgPSBMbmcuZ3QoXCJGaWx0ZXJcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGRvY3VtZW50RmlsdGVyQnV0dG9uID0gRmlsdGVyQnV0dG9uLmNyZWF0ZShcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgIFwiRG9jdW1lbnRzXCIsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZG9jU3ltYm9sLFxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZpbHRlci5pbmNsdWRlcyhcIkRvY3VtZW50c1wiKSxcclxuICAgICAgICAgICAgdGhpcy5vbkZpbHRlckJ1dHRvbi5iaW5kKHRoaXMpKTtcclxuICAgICAgICBoZWFkZXJGaWx0ZXJCdXR0b25zLmFwcGVuZENoaWxkKGRvY3VtZW50RmlsdGVyQnV0dG9uKTtcclxuXHJcbiAgICAgICAgY29uc3QgaGlkZURvY3VtZW50RmlsdGVyQnV0dG9uID0gRmlsdGVyQnV0dG9uLmNyZWF0ZShcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgIFwiSGlkZURvY3VtZW50c1wiLFxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmhpZGVEb2NTeW1ib2wsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyLmluY2x1ZGVzKFwiSGlkZURvY3VtZW50c1wiKSxcclxuICAgICAgICAgICAgdGhpcy5vbkZpbHRlckJ1dHRvbi5iaW5kKHRoaXMpKTtcclxuICAgICAgICBoZWFkZXJGaWx0ZXJCdXR0b25zLmFwcGVuZENoaWxkKGhpZGVEb2N1bWVudEZpbHRlckJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsdXN0ZXJGaWx0ZXJCdXR0b24gPSBGaWx0ZXJCdXR0b24uY3JlYXRlKFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgXCJDbHVzdGVyXCIsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY2x1c3RlclN5bWJvbCxcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maWx0ZXIuaW5jbHVkZXMoXCJDbHVzdGVyXCIpLFxyXG4gICAgICAgICAgICB0aGlzLm9uRmlsdGVyQnV0dG9uLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGhlYWRlckZpbHRlckJ1dHRvbnMuYXBwZW5kQ2hpbGQoY2x1c3RlckZpbHRlckJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heERvY3VtZW50cyA9IE1heFNob3duTW9kZWxzSW5wdXQuY3JlYXRlKFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5tYXhEb2N1bWVudHMsXHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsLnNldHRpbmdzLmRlZmF1bHRNYXhTaG93LFxyXG4gICAgICAgICAgICB0aGlzLm9uTWF4RG9jdW1lbnRzQ2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGhlYWRlckZpbHRlckJ1dHRvbnMuYXBwZW5kQ2hpbGQobWF4RG9jdW1lbnRzKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VhcmNoQm94ID0gU2VhcmNoSW5wdXQuY3JlYXRlKFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgdGhpcy5vblNlYXJjaC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBoZWFkZXJGaWx0ZXJCdXR0b25zLmFwcGVuZENoaWxkKHNlYXJjaEJveCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiB0aGUgZmlsdGVyIGJ1dHRvbiBpcyBjbGlja2VkLlxyXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGZpbHRlciBidXR0b24uXHJcbiAgICAgKiBAcGFyYW0gc3RhdHVzIFRoZSBuZXcgc3RhdHVzIG9mIHRoZSBmaWx0ZXIgYnV0dG9uLlxyXG4gICAgICogQHJlbWFya3MgUnVucyB0aGUgYG9uRmlsdGVyYCBtZXRob2QuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgb25GaWx0ZXJCdXR0b24odHlwZTogc3RyaW5nLCBzdGF0dXM6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5maWx0ZXIuaW5jbHVkZXModHlwZSBhcyBGaWx0ZXJlZERvY3VtZW50KSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZpbHRlciA9IHRoaXMuc2V0dGluZ3MuZmlsdGVyLmZpbHRlcih2ID0+IHYgIT09IHR5cGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyLnB1c2godHlwZSBhcyBGaWx0ZXJlZERvY3VtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkZpbHRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdGhlIG1heCBkb2N1bWVudHMgaW5wdXQgaXMgY2hhbmdlZC5cclxuICAgICAqIEBwYXJhbSBtYXhEb2N1bWVudHMgVGhlIG5ldyBtYXggZG9jdW1lbnRzIHZhbHVlLlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkIHdoZW4gdGhlIGRvY3VtZW50cyBhcmUgZmlsdGVyZWQuXHJcbiAgICAgKiBAcmVtYXJrcyBSdW5zIHRoZSBgb25GaWx0ZXJgIG1ldGhvZC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBvbk1heERvY3VtZW50c0NoYW5nZShtYXhEb2N1bWVudHM6IG51bWJlcik6IFByb21pc2U8dW5kZWZpbmVkPiB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5tYXhEb2N1bWVudHMgPSBtYXhEb2N1bWVudHM7XHJcbiAgICAgICAgdGhpcy5vbkZpbHRlcigpO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiB0aGUgc2VhcmNoIGJveCBpcyB1c2VkLlxyXG4gICAgICogQHBhcmFtIHNlYXJjaCBUaGUgc2VhcmNoIHRleHQuXHJcbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdGhhdCB3YXMgcHJlc3NlZC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBzZWFyY2ggdGV4dC5cclxuICAgICAqIEByZW1hcmtzIC0gSWYgdGhlIGBFbnRlcmAga2V5IHdhcyBwcmVzc2VkLCB0aGUgc2VhcmNoIGlzIGFwcGxpZWQuXHJcbiAgICAgKiAtIElmIHRoZSBgRXNjYXBlYCBrZXkgd2FzIHByZXNzZWQsIHRoZSBzZWFyY2ggaXMgcmVzZXQuXHJcbiAgICAgKiAtIEFmdGVyIHRoZSBzZWFyY2ggaXMgYXBwbGllZCwgdGhlIGBvbkZpbHRlcmAgbWV0aG9kIGlzIGNhbGxlZC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBvblNlYXJjaChzZWFyY2g6IHN0cmluZywga2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGlmIChrZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgICAgICBpZiAoc2VhcmNoICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnNlYXJjaCA9IFNlYXJjaC5wYXJzZVNlYXJjaFRleHQoc2VhcmNoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25GaWx0ZXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2VhcmNoID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbHRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zZWFyY2ggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25GaWx0ZXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWFyY2g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaWx0ZXJzIHRoZSBkb2N1bWVudHMgYW5kIHNob3dzL2hpZGVzIHRoZW0gaW4gdGhlIHRhYmxlLlxyXG4gICAgICogQHJlbWFya3MgLSBUaGUgZG9jdW1lbnRzIGFyZSBmaWx0ZXJlZCBieSB0aGUgYGZpbHRlcmAgc2V0dGluZyxcclxuICAgICAqIHNlYXJjaGVkIGJ5IHRoZSBgc2VhcmNoYCBzZXR0aW5nIFxyXG4gICAgICogYW5kIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIGlzIGxpbWl0ZWQgYnkgdGhlIGBtYXhEb2N1bWVudHNgIGlmIG5vIHNlYXJjaCBpcyBhcHBsaWVkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIG9uRmlsdGVyKCkge1xyXG4gICAgICAgIHRoaXMuZ3JheU91dEhlYWRlcigpO1xyXG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IHRoaXMuc2V0dGluZ3MuYmF0Y2hTaXplO1xyXG4gICAgICAgIGNvbnN0IHNsZWVwQmV0d2VlbkJhdGNoZXMgPSB0aGlzLnNldHRpbmdzLnNsZWVwQmV0d2VlbkJhdGNoZXM7XHJcbiAgICAgICAgbGV0IHNsZWVwUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGNvbnN0IGRvY3VtZW50c0xlbmd0aCA9IHRoaXMubW9kZWxzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCByb3dzOiBSb3dzU3RhdGVbXSA9IFtdO1xyXG4gICAgICAgIGxldCB2aXNpYmxlUm93cyA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnRzTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnQgPSB0aGlzLm1vZGVsc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJvd1VpZCA9IHRoaXMuZ2V0VUlEKGRvY3VtZW50KTtcclxuICAgICAgICAgICAgbGV0IGhpZGUgPSB0aGlzLmdldEhpZGVTdGF0ZShkb2N1bWVudCwgdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYERvY3VtZW50ICR7cm93VWlkfSBpcyBoaWRkZW4gYnkgc3RhdGU6ICR7aGlkZX1gKTtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYFZpc2libGUgcm93czogJHt2aXNpYmxlUm93c307IE1heCBzaG93biBEb2NzOiAke3RoaXMuc2V0dGluZ3MubWF4RG9jdW1lbnRzfWApO1xyXG4gICAgICAgICAgICBpZiAodmlzaWJsZVJvd3MgPj0gdGhpcy5zZXR0aW5ncy5tYXhEb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgICAgIGhpZGUgPSB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYERvY3VtZW50ICR7cm93VWlkfSBpcyBoaWRkZW4gYnkgbWF4IGNvdW50czogJHtoaWRlfWApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGhpZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7IHJvd1VpZCwgaGlkZGVuOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmlzaWJsZVJvd3MrKztcclxuICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7IHJvd1VpZCwgaGlkZGVuOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKChpICE9PSAwICYmIGkgJSBiYXRjaFNpemUgPT09IDApIHx8IGkgPT09IGRvY3VtZW50c0xlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKGBCYXRjaHNpemUgcmVhY2hlZC4gQ2hhbmdlIHJvd3M6ICR7cm93cy5sZW5ndGh9YCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRhYmxlLmNoYW5nZVNob3dIaWRlU3RhdGVSb3dzKHJvd3MpO1xyXG4gICAgICAgICAgICAgICAgcm93cy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgc2xlZXBQcm9taXNlID0gSGVscGVyLnNsZWVwKHNsZWVwQmV0d2VlbkJhdGNoZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm5vcm1hbGl6ZUhlYWRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgZG9jdW1lbnRzIHRvIHRoZSB0YWJsZS5cclxuICAgICAqIEBwYXJhbSBiYXRjaFNpemUgVGhlIGJhdGNoIHNpemUuXHJcbiAgICAgKiBAcGFyYW0gc2xlZXBCZXR3ZWVuQmF0Y2hlcyBUaGUgc2xlZXAgdGltZSBiZXR3ZWVuIHRoZSBiYXRjaGVzLlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkIHdoZW4gdGhlIGRvY3VtZW50cyBhcmUgYWRkZWQgdG8gdGhlIHRhYmxlLlxyXG4gICAgICogQHJlbWFya3MgLSBUaGUgZG9jdW1lbnRzIGFyZSBhZGRlZCB0byB0aGUgdGFibGUgaW4gYmF0Y2hlcy5cclxuICAgICAqIC0gVGhlIGJhdGNoIHNpemUgaXMgZGVmaW5lZCBpbiB0aGUgYGJhdGNoU2l6ZWAgcGFyYW1ldGVyLiBEZWZhdWx0IGlzIGBzZXR0aW5ncy5iYXRjaFNpemVgLlxyXG4gICAgICogLSBUaGUgc2xlZXAgdGltZSBiZXR3ZWVuIHRoZSBiYXRjaGVzIGlzIGRlZmluZWQgaW4gdGhlIGBzbGVlcEJldHdlZW5CYXRjaGVzYCBwYXJhbWV0ZXIuIERlZmF1bHQgaXMgYHNldHRpbmdzLnNsZWVwQmV0d2VlbkJhdGNoZXNgLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZERvY3VtZW50c1RvVGFibGUoYmF0Y2hTaXplID0gdGhpcy5zZXR0aW5ncy5iYXRjaFNpemUsIHNsZWVwQmV0d2VlbkJhdGNoZXMgPSB0aGlzLnNldHRpbmdzLnNsZWVwQmV0d2VlbkJhdGNoZXMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBsZXQgc2xlZXBQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgY29uc3QgZG9jdW1lbnRzTGVuZ3RoID0gdGhpcy5tb2RlbHMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHJvd3M6IFJvd1tdID0gW107XHJcbiAgICAgICAgbGV0IHJvd1Byb21pc2U6IFByb21pc2U8Um93PiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKGRvY3VtZW50c0xlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcm93UHJvbWlzZSA9IHRoaXMuZ2VuZXJhdGVUYWJsZVJvdyh0aGlzLm1vZGVsc1swXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHZpc2libGVSb3dzID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudHNMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGkgKyAxIDwgZG9jdW1lbnRzTGVuZ3RoID8gdGhpcy5tb2RlbHNbaSArIDFdIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGF3YWl0IHJvd1Byb21pc2U7XHJcbiAgICAgICAgICAgIHJvd1Byb21pc2UgPSBkb2N1bWVudCA/IHRoaXMuZ2VuZXJhdGVUYWJsZVJvdyhkb2N1bWVudCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAocm93ICYmICFyb3cuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmlzaWJsZVJvd3MgPCB0aGlzLnNldHRpbmdzLm1heERvY3VtZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVSb3dzKys7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocm93KVxyXG4gICAgICAgICAgICAgICAgcm93cy5wdXNoKHJvdyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoKGkgIT09IDAgJiYgaSAlIGJhdGNoU2l6ZSA9PT0gMCkgfHwgaSA9PT0gZG9jdW1lbnRzTGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2xlZXBQcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJsZS5hZGRSb3dzKHJvd3MpO1xyXG4gICAgICAgICAgICAgICAgcm93cy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgc2xlZXBQcm9taXNlID0gSGVscGVyLnNsZWVwKHNsZWVwQmV0d2VlbkJhdGNoZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGEgdGFibGUgcm93IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRNb2RlbCBUaGUgZG9jdW1lbnQgdG8gZ2VuZXJhdGUgdGhlIHRhYmxlIHJvdyBmb3IuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgZ2VuZXJhdGVkIHRhYmxlIHJvdy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVRhYmxlUm93KGRvY3VtZW50TW9kZWw6IERvY3VtZW50TW9kZWwpOiBQcm9taXNlPFJvdz4ge1xyXG4gICAgICAgIGNvbnN0IHJvd0NsYXNzTGlzdDogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCByb3dEYXRhOiBEb2N1bWVudEZyYWdtZW50W10gPSBbXTtcclxuICAgICAgICBjb25zdCByb3dVaWQgPSB0aGlzLmdldFVJRChkb2N1bWVudE1vZGVsKTtcclxuXHJcbiAgICAgICAgLy8gUm93IDAgLS0gTWV0YWRhdGEgTGlua1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhTGluayA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgICByb3dEYXRhLnB1c2gobWV0YWRhdGFMaW5rKTtcclxuICAgICAgICBEb2N1bWVudENvbXBvbmVudHMuY3JlYXRlQ2VsbE1ldGFkYXRhbGluayhcclxuICAgICAgICAgICAgbWV0YWRhdGFMaW5rLFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgZG9jdW1lbnRNb2RlbCk7XHJcblxyXG4gICAgICAgIC8vIFJvdyAxIC0tIERhdGVcclxuICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIHJvd0RhdGEucHVzaChkYXRlKTtcclxuICAgICAgICBHZW5lcmFsQ29tcG9uZW50cy5jcmVhdGVDZWxsRGF0ZShcclxuICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgIExuZy5ndChcIkRvY3VtZW50RGF0ZVwiKSxcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWwuc2V0dGluZ3MuZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgKCkgPT4gZG9jdW1lbnRNb2RlbC5kYXRhLmRhdGUgPz8gXCJuYVwiLFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWU6IHN0cmluZykgPT4gZG9jdW1lbnRNb2RlbC5kYXRhLmRhdGUgPSB2YWx1ZSk7XHJcblxyXG4gICAgICAgIC8vIFJvdyAyIC0tIEZpbGUgTGlua1xyXG4gICAgICAgIGNvbnN0IGZpbGVMaW5rID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIHJvd0RhdGEucHVzaChmaWxlTGluayk7XHJcbiAgICAgICAgRG9jdW1lbnRDb21wb25lbnRzLmNyZWF0ZUNlbGxGaWxlTGluayhcclxuICAgICAgICAgICAgZmlsZUxpbmssXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICBkb2N1bWVudE1vZGVsKTtcclxuXHJcbiAgICAgICAgLy8gUm93IDMgLS0gU2VuZGVyIFJlY2lwaWVudFxyXG4gICAgICAgIGNvbnN0IHNlbmRlclJlY2lwaWVudCA9IERvY3VtZW50Q29tcG9uZW50cy5jcmVhdGVDZWxsU2VuZGVyUmVjaXBpZW50KFxyXG4gICAgICAgICAgICBkb2N1bWVudE1vZGVsLFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgdGhpcy5tb2RlbHMpO1xyXG4gICAgICAgIHJvd0RhdGEucHVzaChzZW5kZXJSZWNpcGllbnQpO1xyXG5cclxuICAgICAgICAvLyBSb3cgNCAtLSBTdW1tYXJ5ICYgUmVsYXRlZCBGaWxlc1xyXG4gICAgICAgIGNvbnN0IHN1bW1hcnlSZWxhdGVkRmlsZXMgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgcm93RGF0YS5wdXNoKHN1bW1hcnlSZWxhdGVkRmlsZXMpO1xyXG4gICAgICAgIERvY3VtZW50Q29tcG9uZW50cy5jcmVhdGVDZWxsU3VtbWFyeShcclxuICAgICAgICAgICAgZG9jdW1lbnRNb2RlbCxcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgIHN1bW1hcnlSZWxhdGVkRmlsZXMpO1xyXG4gICAgICAgIERvY3VtZW50Q29tcG9uZW50cy5jcmVhdGVSZWxhdGVkRmlsZXNMaXN0KFxyXG4gICAgICAgICAgICBzdW1tYXJ5UmVsYXRlZEZpbGVzLFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgZG9jdW1lbnRNb2RlbCxcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5ub25lRG9jU3ltYm9sLFxyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbC5zZXR0aW5ncy5kYXRlRm9ybWF0U2hvcnQpO1xyXG5cclxuICAgICAgICAvLyBSb3cgNSAtLSBEYXRlIG9mIGRlbGl2ZXJ5XHJcbiAgICAgICAgY29uc3QgZGVsaXZlcnlEYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIHJvd0RhdGEucHVzaChkZWxpdmVyeURhdGUpO1xyXG4gICAgICAgIEdlbmVyYWxDb21wb25lbnRzLmNyZWF0ZUNlbGxEYXRlKFxyXG4gICAgICAgICAgICBkZWxpdmVyeURhdGUsXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICBMbmcuZ3QoXCJEZWxpdmVyeURhdGVcIiksXHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsLnNldHRpbmdzLmRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICgpID0+IGRvY3VtZW50TW9kZWwuZGF0YS5kYXRlT2ZEZWxpdmVyeSA/PyBcIm5hXCIsXHJcbiAgICAgICAgICAgIGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiBkb2N1bWVudE1vZGVsLmRhdGEuZGF0ZU9mRGVsaXZlcnkgPSB2YWx1ZSk7XHJcblxyXG4gICAgICAgIC8vIFJvdyA2IC0tIFRhZ3NcclxuICAgICAgICBjb25zdCB0YWdzID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIHJvd0RhdGEucHVzaCh0YWdzKTtcclxuICAgICAgICBEb2N1bWVudENvbXBvbmVudHMuY3JlYXRlQ2VsbFRhZ3MoXHJcbiAgICAgICAgICAgIHRhZ3MsXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICBkb2N1bWVudE1vZGVsLmdldFRhZ3MoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGhpZGUgPSB0aGlzLmdldEhpZGVTdGF0ZShkb2N1bWVudE1vZGVsLCB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICBjb25zdCByb3cgPSB7XHJcbiAgICAgICAgICAgIHJvd1VpZCxcclxuICAgICAgICAgICAgcm93RGF0YSxcclxuICAgICAgICAgICAgcm93Q2xhc3NMaXN0LFxyXG4gICAgICAgICAgICBoaWRkZW46IGhpZGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiByb3c7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRIaWRlU3RhdGUoZG9jdW1lbnQ6IERvY3VtZW50TW9kZWwsIG1heFZpc2libGVSb3dzOiBudW1iZXIgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgc2VhcmNoUmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IG1heFJvd3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBzZWFyY2hSZXN1bHQgPSBTZWFyY2guYXBwbHlTZWFyY2hMb2dpYyh0aGlzLnNldHRpbmdzLnNlYXJjaCwgdGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWF4VmlzaWJsZVJvd3MgJiYgbWF4VmlzaWJsZVJvd3MgPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd1N0YXRzID0gdGhpcy50YWJsZS5nZXRSb3dTdGF0cygpO1xyXG4gICAgICAgICAgICBtYXhSb3dzID0gcm93U3RhdHMudmlzaWJsZVJvd3MgPj0gbWF4VmlzaWJsZVJvd3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBoaWRlID0gdGhpcy5kZXRlcm1pbmVIaWRlU3RhdGUoZG9jdW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAoc2VhcmNoUmVzdWx0ICYmICFoaWRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2hvd3MgdGhlIGRvY3VtZW50LCBpZiBpdCBpcyBub3QgaGlkZGVuIGFuZCB0aGUgc2VhcmNoIHdhcyBzdWNjZXNzZnVsXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLnNlYXJjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gSGlkZSB0aGUgZG9jdW1lbnQsIGlmIHRoZSBzZWFyY2ggd2FzIG5vdCBzdWNjZXNzZnVsIGFuZCBhcGxpY2FibGVcclxuICAgICAgICB9IGVsc2UgaWYgKCFzZWFyY2hSZXN1bHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1heFJvd3MgfHwgaGlkZTsgLy8gRWxzZSB0aGUgZG9jdW1lbnQgaXMgaGlkZGVuLCBpZiB0aGUgbWF4IHJvd3MgYXJlIHJlYWNoZWQgb3IgdGhlIGRvY3VtZW50IHR5cGUgaXMgaGlkZGVuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGlkZTsgLy8gU3RhbmRhcmQtVmVyaGFsdGVuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgaGlkZGVuLlxyXG4gICAgICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBjaGVjay5cclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgaGlkZGVuIHJldHVybnMgYHRydWVgLCBlbHNlIGBmYWxzZWAuXHJcbiAgICAgKiBAcmVtYXJrcyAtIFRoZSBkb2N1bWVudCBpcyBoaWRkZW4gaWYgdGhlIGBmaWx0ZXJgIHNldHRpbmcgbm90IGluY2x1ZGVzIHRoZSBkb2N1bWVudCB0eXBlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGRldGVybWluZUhpZGVTdGF0ZShkb2N1bWVudDogRG9jdW1lbnRNb2RlbCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmZpbHRlci5pbmNsdWRlcyhcIkRvY3VtZW50c1wiKSAmJiBkb2N1bWVudC5kYXRhLmhpZGUgIT09IHRydWUgJiYgZG9jdW1lbnQuZGF0YS5zdWJUeXBlICE9PSBcIkNsdXN0ZXJcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmZpbHRlci5pbmNsdWRlcyhcIkNsdXN0ZXJcIikgJiYgZG9jdW1lbnQuZGF0YS5zdWJUeXBlID09PSBcIkNsdXN0ZXJcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmZpbHRlci5pbmNsdWRlcyhcIkhpZGVEb2N1bWVudHNcIikgJiYgZG9jdW1lbnQuZGF0YS5oaWRlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZHMgdGhlIHRhYmxlLlxyXG4gICAgICogQHJlbWFya3MgLSBUaGUgdGFibGUgaXMgc2F2ZWQgaW4gdGhlIGB0YWJsZWAgcHJvcGVydHkuXHJcbiAgICAgKiAtIFRoZSB0YWJsZSBpcyBhcHBlbmRlZCB0byB0aGUgYHRhYmxlQ29udGFpbmVyYC5cclxuICAgICAqIC0gVGhlIHRhYmxlIGhhcyB0aGUgQ1NTIGNsYXNzIGBkb2N1bWVudC10YWJsZWAuXHJcbiAgICAgKiAtIFRoZSB0YWJsZSBoYXMgdGhlIGhlYWRlcnMgZnJvbSB0aGUgYHRhYmxlSGVhZGVyc2AgcHJvcGVydHkuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgYnVpbGRUYWJsZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnRhYmxlID0gbmV3IFRhYmxlKHRoaXMudGFibGVIZWFkZXJzLCBcImRvY3VtZW50LXRhYmxlXCIsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgdGhpcy50YWJsZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlLmRhdGEudGFibGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWRyYXcoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnJlZHJhdygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIHRoZSBzZXR0aW5ncyBnaXZlbiBieSB0aGUgdXNlciBwZXIgWUFNTCBpbiBjb2RlIGJsb2NrLlxyXG4gICAgICogQHJlbWFya3MgVGhlIHNldHRpbmdzIGFyZSBwYXJzZWQgYW5kIHNhdmVkIGluIHRoZSBgc2V0dGluZ3NgIHByb3BlcnR5LlxyXG4gICAgICogQHJlbWFya3MgU2V0dGluZ3M6XHJcbiAgICAgKiAtIGB0YWdzYDogQ2FuIGJlIGBhbGxgLCBgdGhpc2Agb3IgYSBsaXN0IG9mIHRhZ3MuXHJcbiAgICAgKiBgdGhpc2AgbWVhbnMgdGhlIHRhZ3Mgb2YgdGhlIGN1cnJlbnQgZG9jdW1lbnQuXHJcbiAgICAgKiAtIGBtYXhEb2N1bWVudHNgOiBUaGUgbWF4aW11bSBudW1iZXIgb2YgZG9jdW1lbnRzIHRvIHNob3cgb24gc2FtZSB0aW1lLlxyXG4gICAgICogLSBgZmlsdGVyYDogTXVzdCBiZSBhbiBhcnJheS4gWW91IGNhbiBhZGQgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XHJcbiAgICAgKiBgRG9jdW1lbnRzYCwgYEhpZGVEb2N1bWVudHNgIG9yIGBDbHVzdGVyYC4gVGhlIHZhbHVlcyBwcmVzZW50IHRoZSBkb2N1bWVudCB0eXBlcy5cclxuICAgICAqIEFsbCB2YWx1ZXMgdGhhdCBhcmUgaW4gdGhlIGFycmF5IGFyZSBzaG93bi5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHBhcnNlU2V0dGluZ3MoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzb3JTZXR0aW5ncy5vcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuICAgICAgICAgICAgc3dpdGNoIChvcHRpb24ubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0YWdzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi52YWx1ZSA9PT0gXCJhbGxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRhZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbi52YWx1ZSA9PT0gXCJ0aGlzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFncyA9IHRoaXMucHJvY2Vzc29yU2V0dGluZ3M/LmZyb250bWF0dGVyPy50YWdzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0YWdzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50YWdzLnB1c2goLi4udGFncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50YWdzLnB1c2godGFncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRhZ3MgPSBvcHRpb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1heERvY3VtZW50c1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MubWF4RG9jdW1lbnRzID0gb3B0aW9uLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZpbHRlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyID0gb3B0aW9uLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbW9kZWxzIGZvciB0aGUgdGFibGUuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgbW9kZWxzIGZvciB0aGUgdGFibGUuXHJcbiAgICAgKiBAcmVtYXJrcyAtIFRoZSBtb2RlbHMgYXJlIHRoZSBkb2N1bWVudHMuXHJcbiAgICAgKiAtIFRoZSBkb2N1bWVudHMgYXJlIGZpbHRlcmVkIGJ5IHRoZSBgdGFnc2Agc2V0dGluZy4gXHJcbiAgICAgKiBJZiB0YWdzIGFyZSBlbXB0eSwgYWxsIGRvY3VtZW50cyBhcmUgcmV0dXJuZWQsIFxyXG4gICAgICogZWxzZSBvbmx5IHRoZSBkb2N1bWVudHMgd2l0aCB0aGUgdGFncyBhcmUgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBnZXRNb2RlbHMoKTogUHJvbWlzZTxEb2N1bWVudE1vZGVsW10+IHtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZUZvbGRlciA9IHRoaXMuZ2xvYmFsLnNldHRpbmdzLnRlbXBsYXRlRm9sZGVyO1xyXG4gICAgICAgIGNvbnN0IGFsbERvY3VtZW50RmlsZXMgPSB0aGlzLm1ldGFkYXRhQ2FjaGUuZmlsdGVyKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0RmlsdGVyID0gZmlsZS5tZXRhZGF0YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJNZXRhZGF0YVwiICYmXHJcbiAgICAgICAgICAgICAgICBmaWxlLmZpbGUucGF0aCAhPT0gdGhpcy5wcm9jZXNzb3JTZXR0aW5ncy5zb3VyY2UgJiZcclxuICAgICAgICAgICAgICAgICFmaWxlLmZpbGUucGF0aC5zdGFydHNXaXRoKHRlbXBsYXRlRm9sZGVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudGFncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdGaWx0ZXIgPSBIZWxwZXIuaXNUYWdJbmNsdWRlZCh0aGlzLnNldHRpbmdzLnRhZ3MsIGZpbGUubWV0YWRhdGEuZnJvbnRtYXR0ZXI/LnRhZ3MpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRGaWx0ZXIgJiYgdGFnRmlsdGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0RmlsdGVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGFsbERvY3VtZW50RmlsZXMubWFwKGZpbGUgPT4gbmV3IERvY3VtZW50TW9kZWwoZmlsZS5maWxlKSk7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgaWYgdGhlIGZpbGUgdGFncyBhcmUgaW5jbHVkZWQgaW4gdGhlIHNldHRpbmcgdGFncy5cclxuICAgICAqIEBwYXJhbSBmaWxlVGFncyBUaGUgdGFncyBvZiB0aGUgZmlsZS5cclxuICAgICAqIEBwYXJhbSBzZXR0aW5nVGFncyBUaGUgdGFncyBvZiB0aGUgc2V0dGluZ3MuXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgZmlsZSB0YWdzIGFyZSBpbmNsdWRlZCBpbiB0aGUgc2V0dGluZyB0YWdzLlxyXG4gICAgICogQHJlbWFya3MgLSBJZiB0aGUgZmlsZSB0YWdzIGFyZSBhbiBhcnJheSwgb25lIHRhZyBtdXN0IGJlIGluY2x1ZGVkLlxyXG4gICAgICogLSBJZiB0aGUgZmlsZSB0YWdzIGFyZSBhIHN0cmluZywgdGhlIHN0cmluZyBtdXN0IGJlIGluY2x1ZGVkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzVGFnSW5jbHVkZWQoZmlsZVRhZ3M6IHN0cmluZyB8IHN0cmluZ1tdLCBzZXR0aW5nVGFnczogc3RyaW5nW10pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWxlVGFncykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbGVUYWdzLnNvbWUodGFnID0+IHNldHRpbmdUYWdzLmluY2x1ZGVzKHRhZykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXR0aW5nVGFncy5pbmNsdWRlcyhmaWxlVGFncyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSB0eXBlcyBvZiBkb2N1bWVudHMgdG8gc2hvdy5cclxuICogQHJlbWFya3MgLSBgRG9jdW1lbnRzYCAtIFNob3cgZG9jdW1lbnRzLlxyXG4gKiAtIGBIaWRlRG9jdW1lbnRzYCAtIFNob3cgaGlkZGVuIGRvY3VtZW50cy5cclxuICogLSBgQ2x1c3RlcmAgLSBTaG93IGNsdXN0ZXJzLlxyXG4gKi9cclxudHlwZSBGaWx0ZXJlZERvY3VtZW50ID0gXCJEb2N1bWVudHNcIiB8IFwiSGlkZURvY3VtZW50c1wiIHwgXCJDbHVzdGVyXCI7XHJcblxyXG4vKipcclxuICogVGhlIHNldHRpbmdzIGZvciB0aGUgZG9jdW1lbnQgYmxvY2sgcmVuZGVyIGNvbXBvbmVudC5cclxuICogQHJlbWFya3MgVGhlIHNldHRpbmdzIGFyZSBwYXJzZWQgZnJvbSB0aGUgWUFNTCBvcHRpb25zIGluIHRoZSBjb2RlIGJsb2NrLlxyXG4gKi9cclxudHlwZSBEb2N1bWVudEJsb2NrUmVuZGVyU2V0dGluZ3MgPSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0YWdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZG9jdW1lbnRzLlxyXG4gICAgICogQ2FuIGJlIGBhbGxgLCBgdGhpc2Agb3IgYSBsaXN0IG9mIHNwZWNpZmljIHRhZ3MuXHJcbiAgICAgKiBgYWxsYCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIHJlZ2FyZGxlc3Mgb2YgdGhlaXIgdGFncy5cclxuICAgICAqIGB0aGlzYCBpbmNsdWRlcyBkb2N1bWVudHMgdGhhdCBoYXZlIHRoZSBzYW1lIHRhZ3MgYXMgdGhlIGN1cnJlbnQgZG9jdW1lbnQuXHJcbiAgICAgKi9cclxuICAgIHRhZ3M6IHN0cmluZ1tdLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3ltYm9sIHJlcHJlc2VudGluZyBhIGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICBkb2NTeW1ib2w6IHN0cmluZyxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN5bWJvbCB1c2VkIHRvIGluZGljYXRlIGhpZGRlbiBkb2N1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIGhpZGVEb2NTeW1ib2w6IHN0cmluZyxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN5bWJvbCByZXByZXNlbnRpbmcgYSBjbHVzdGVyIG9mIGRvY3VtZW50cy5cclxuICAgICAqL1xyXG4gICAgY2x1c3RlclN5bWJvbDogc3RyaW5nLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3ltYm9sIHVzZWQgZm9yIGRvY3VtZW50cyB0aGF0IGRvbid0IGZpdCBhbnkgb3RoZXIgY2F0ZWdvcnkuXHJcbiAgICAgKi9cclxuICAgIG5vbmVEb2NTeW1ib2w6IHN0cmluZyxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbHRlciBmb3IgdGhlIGRvY3VtZW50IHR5cGVzIHRvIGRpc3BsYXkuXHJcbiAgICAgKiBNdXN0IGJlIGFuIGFycmF5IGNvbnRhaW5pbmcgYW55IG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxyXG4gICAgICogYERvY3VtZW50c2AsIGBIaWRlRG9jdW1lbnRzYCwgYENsdXN0ZXJgLlxyXG4gICAgICogT25seSB0aGUgZG9jdW1lbnQgdHlwZXMgbGlzdGVkIGluIHRoZSBhcnJheSB3aWxsIGJlIHNob3duLlxyXG4gICAgICovXHJcbiAgICBmaWx0ZXI6IEZpbHRlcmVkRG9jdW1lbnRbXSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBkb2N1bWVudHMgdG8gc2hvdyBhdCB0aGUgc2FtZSB0aW1lLlxyXG4gICAgICovXHJcbiAgICBtYXhEb2N1bWVudHM6IG51bWJlcixcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlYXJjaCB0ZXJtcyBhcnJheSB1c2VkIHRvIGZpbHRlciB0aGUgZG9jdW1lbnRzLlxyXG4gICAgICogSWYgdW5kZWZpbmVkLCBubyBzZWFyY2ggZmlsdGVyIGlzIGFwcGxpZWQuXHJcbiAgICAgKi9cclxuICAgIHNlYXJjaDogU2VhcmNoVGVybXNBcnJheSB8IHVuZGVmaW5lZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRvIHByb2Nlc3MgaW4gb25lIGJhdGNoLlxyXG4gICAgICovXHJcbiAgICBiYXRjaFNpemU6IG51bWJlcixcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0aW1lIHRvIHdhaXQgKGluIG1pbGxpc2Vjb25kcykgYmV0d2VlbiBwcm9jZXNzaW5nIGJhdGNoZXMgb2YgZG9jdW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBzbGVlcEJldHdlZW5CYXRjaGVzOiBudW1iZXJcclxufTtcclxuIiwgImltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEJhc2VNb2RlbCB9IGZyb20gXCIuL0Jhc2VNb2RlbFwiO1xyXG5pbXBvcnQgSVByak1vZGVsIGZyb20gXCIuLi9pbnRlcmZhY2VzL0lQcmpNb2RlbFwiO1xyXG5pbXBvcnQgSVByakRhdGEgZnJvbSBcIi4uL2ludGVyZmFjZXMvSVByakRhdGFcIjtcclxuaW1wb3J0IElQcmpUYXNrTWFuYWdlbWVudCBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JUHJqVGFza01hbmFnZW1lbnRcIjtcclxuaW1wb3J0IHsgU3RhdHVzIH0gZnJvbSBcInNyYy90eXBlcy9QcmpUeXBlc1wiO1xyXG5pbXBvcnQgUHJvamVjdERhdGEgZnJvbSBcInNyYy90eXBlcy9Qcm9qZWN0RGF0YVwiO1xyXG5pbXBvcnQgVGFza0RhdGEgZnJvbSBcInNyYy90eXBlcy9UYXNrRGF0YVwiO1xyXG5pbXBvcnQgVG9waWNEYXRhIGZyb20gXCJzcmMvdHlwZXMvVG9waWNEYXRhXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJqVGFza01hbmFnZW1lbnRNb2RlbDxUIGV4dGVuZHMgSVByakRhdGEgJiBJUHJqVGFza01hbmFnZW1lbnQ+IGV4dGVuZHMgQmFzZU1vZGVsPFQ+IGltcGxlbWVudHMgSVByak1vZGVsPFQ+IHtcclxuICAgIGNvbnN0cnVjdG9yKGZpbGU6IFRGaWxlLCBjdG9yOiBuZXcgKGRhdGE/OiBQYXJ0aWFsPFQ+KSA9PiBUKSB7XHJcbiAgICAgICAgc3VwZXIoZmlsZSwgY3RvciwgdW5kZWZpbmVkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGRhdGEoKTogUGFydGlhbDxUPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBkYXRhKHZhbHVlOiBQYXJ0aWFsPFQ+KSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBhbGxUZXh0ID0gdGhpcy5kYXRhLnRpdGxlID8/IFwiXCI7XHJcbiAgICAgICAgYWxsVGV4dCArPSB0aGlzLmRhdGEuZGVzY3JpcHRpb24gPz8gXCJcIjtcclxuICAgICAgICBhbGxUZXh0ICs9IHRoaXMuZGF0YS5zdGF0dXMgPz8gXCJcIjtcclxuICAgICAgICBhbGxUZXh0ICs9IHRoaXMuZGF0YS5kdWUgPz8gXCJcIjtcclxuICAgICAgICBhbGxUZXh0ICs9IHRoaXMuZGF0YS50YWdzID8/IFwiXCI7XHJcbiAgICAgICAgcmV0dXJuIGFsbFRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvcm9zcG9uZGluZ1N5bWJvbCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5kYXRhLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnVG9waWMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsLnNldHRpbmdzLnByalNldHRpbmdzLnRvcGljU3ltYm9sO1xyXG4gICAgICAgICAgICBjYXNlICdQcm9qZWN0JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdsb2JhbC5zZXR0aW5ncy5wcmpTZXR0aW5ncy5wcm9qZWN0U3ltYm9sO1xyXG4gICAgICAgICAgICBjYXNlICdUYXNrJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdsb2JhbC5zZXR0aW5ncy5wcmpTZXR0aW5ncy50YXNrU3ltYm9sO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICd4LWNpcmNsZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU29ydHMgdGhlIG1vZGVscyBieSB1cmdlbmN5IGRlc2NlbmRpbmdcclxuICAgICAqIEBwYXJhbSBkb2N1bWVudHMgQXJyYXkgb2YgRG9jdW1lbnRNb2RlbHMgdG8gc29ydFxyXG4gICAgICogQHJlbWFya3MgVGhpcyBmdW5jdGlvbiBzb3J0cyB0aGUgYXJyYXkgaW4gcGxhY2VcclxuICAgICAqIEBzZWUge0BsaW5rIHN0YXR1c1RvTnVtYmVyfVxyXG4gICAgICogQHNlZSB7QGxpbmsgY2FsY3VsYXRlVXJnZW5jeX1cclxuICAgICAqIEBzZWUge0BsaW5rIGdldExhc3RIaXN0b3J5RGF0ZX1cclxuICAgICAqIEByZW1hcmtzIFRoZSBzb3J0aW5nIGlzIGRvbmUgYXMgZm9sbG93czpcclxuICAgICAqIC0gSWYgYm90aCBhcmUgYGRvbmVgLCBzb3J0IGJ5IGxhc3QgaGlzdG9yeSBlbnRyeVxyXG4gICAgICogLSBJZiBgYWAgb3IgYGJgIGlzIGRvbmUsIHNvcnQgaXQgbG93ZXJcclxuICAgICAqIC0gQm90aCBhcmUgbm90IGRvbmUsIHNvcnQgYnkgdXJnZW5jeVxyXG4gICAgICogLSBCb3RoIGhhdmUgdGhlIHNhbWUgdXJnZW5jeSwgc29ydCBieSBzdGF0dXNcclxuICAgICAqIC0gQm90aCBoYXZlIHRoZSBzYW1lIHN0YXR1cywgc29ydCBieSBwcmlvcml0eVxyXG4gICAgICogLSBGYWxsYmFjayB0byBzb3J0aW5nIGJ5IGxhc3QgaGlzdG9yeSBlbnRyeVxyXG4gICAgICogLSBGYWxsYmFjayB0byBzdG9wIHNvcnRpbmdcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzb3J0TW9kZWxzQnlVcmdlbmN5KG1vZGVsczogKFByalRhc2tNYW5hZ2VtZW50TW9kZWw8VGFza0RhdGEgfCBUb3BpY0RhdGEgfCBQcm9qZWN0RGF0YT4pW10pOiB2b2lkIHtcclxuICAgICAgICBtb2RlbHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAvLyBJZiBib3RoIGFyZSBgZG9uZWAsIHNvcnQgYnkgbGFzdCBoaXN0b3J5IGVudHJ5XHJcbiAgICAgICAgICAgIGNvbnN0IGFEYXRlID0gUHJqVGFza01hbmFnZW1lbnRNb2RlbC5nZXRMYXN0SGlzdG9yeURhdGUoYSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJEYXRlID0gUHJqVGFza01hbmFnZW1lbnRNb2RlbC5nZXRMYXN0SGlzdG9yeURhdGUoYik7XHJcbiAgICAgICAgICAgIGlmIChhLmRhdGEuc3RhdHVzID09PSAnRG9uZScgJiYgYi5kYXRhLnN0YXR1cyA9PT0gJ0RvbmUnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYURhdGUgJiYgYkRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYkRhdGUuZ2V0VGltZSgpIC0gYURhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBgYWAgaXMgZG9uZSwgc29ydCBpdCBsb3dlclxyXG4gICAgICAgICAgICBpZiAoYS5kYXRhLnN0YXR1cyA9PT0gJ0RvbmUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBgYmAgaXMgZG9uZSwgc29ydCBpdCBsb3dlclxyXG4gICAgICAgICAgICBpZiAoYi5kYXRhLnN0YXR1cyA9PT0gJ0RvbmUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEJvdGggYXJlIG5vdCBkb25lLCBzb3J0IGJ5IHVyZ2VuY3lcclxuICAgICAgICAgICAgY29uc3QgYVVyZ2VuY3kgPSBQcmpUYXNrTWFuYWdlbWVudE1vZGVsLmNhbGN1bGF0ZVVyZ2VuY3koYSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJVcmdlbmN5ID0gUHJqVGFza01hbmFnZW1lbnRNb2RlbC5jYWxjdWxhdGVVcmdlbmN5KGIpO1xyXG4gICAgICAgICAgICBpZiAoYlVyZ2VuY3kgIT09IGFVcmdlbmN5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYlVyZ2VuY3kgLSBhVXJnZW5jeTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQm90aCBoYXZlIHRoZSBzYW1lIHVyZ2VuY3ksIHNvcnQgYnkgc3RhdHVzXHJcbiAgICAgICAgICAgIGNvbnN0IGFTdGF0dXMgPSBQcmpUYXNrTWFuYWdlbWVudE1vZGVsLnN0YXR1c1RvTnVtYmVyKGEuZGF0YS5zdGF0dXMpO1xyXG4gICAgICAgICAgICBjb25zdCBiU3RhdHVzID0gUHJqVGFza01hbmFnZW1lbnRNb2RlbC5zdGF0dXNUb051bWJlcihiLmRhdGEuc3RhdHVzKTtcclxuICAgICAgICAgICAgaWYgKGJTdGF0dXMgIT09IGFTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiU3RhdHVzIC0gYVN0YXR1cztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQm90aCBoYXZlIHRoZSBzYW1lIHN0YXR1cywgc29ydCBieSBwcmlvcml0eVxyXG4gICAgICAgICAgICBjb25zdCBhUHJpcm9yaXR5ID0gYS5kYXRhLnByaW9yaXR5ID8/IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGJQcmlyb3JpdHkgPSBiLmRhdGEucHJpb3JpdHkgPz8gMDtcclxuICAgICAgICAgICAgaWYgKGJQcmlyb3JpdHkgIT09IGFQcmlyb3JpdHkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiUHJpcm9yaXR5IC0gYVByaXJvcml0eTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gc29ydGluZyBieSBsYXN0IGhpc3RvcnkgZW50cnlcclxuICAgICAgICAgICAgaWYgKGFEYXRlICYmIGJEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYkRhdGUuZ2V0VGltZSgpIC0gYURhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBGYWxsYmFjayB0byBzdG9wIHNvcnRpbmdcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHN0YXR1cy5cclxuICAgICAqIEBwYXJhbSBzdGF0dXMgVGhlIHN0YXR1cyB0byBjb252ZXJ0LlxyXG4gICAgICogQHJldHVybnMgVGhlIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3RhdHVzLlxyXG4gICAgICogQHJlbWFya3MgVGhlIG51bWJlciByZXByZXNlbnRhdGlvbiBpczpcclxuICAgICAqIC0gYEFjdGl2ZWAgPSAzXHJcbiAgICAgKiAtIGBXYWl0aW5nYCA9IDJcclxuICAgICAqIC0gYExhdGVyYCA9IDFcclxuICAgICAqIC0gYFNvbWVkYXlgID0gMFxyXG4gICAgICogLSBgdW5kZWZpbmVkYCA9IC0xXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHN0YXR1c1RvTnVtYmVyKHN0YXR1czogU3RhdHVzIHwgdW5kZWZpbmVkIHwgbnVsbCk6IG51bWJlciB7XHJcbiAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcclxuICAgICAgICAgICAgY2FzZSAnQWN0aXZlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAzO1xyXG4gICAgICAgICAgICBjYXNlICdXYWl0aW5nJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgICAgICBjYXNlICdMYXRlcic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgY2FzZSAnU29tZWRheSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFVyZ2VuY3koKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gUHJqVGFza01hbmFnZW1lbnRNb2RlbC5jYWxjdWxhdGVVcmdlbmN5KHRoaXMgYXMgKFByalRhc2tNYW5hZ2VtZW50TW9kZWw8VGFza0RhdGEgfCBUb3BpY0RhdGEgfCBQcm9qZWN0RGF0YT4pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHRhZ3Mgb2YgdGhlIG1vZGVsIGFzIGFuIGFycmF5IG9mIHN0cmluZ3NcclxuICAgICAqIEByZXR1cm5zIEFycmF5IG9mIHN0cmluZ3MgY29udGFpbmluZyB0aGUgdGFnc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VGFncygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgY29uc3QgdGFncyA9IHRoaXMuZGF0YS50YWdzO1xyXG4gICAgICAgIGxldCBmb3JtYXR0ZWRUYWdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGFncyAmJiB0eXBlb2YgdGFncyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9ybWF0dGVkVGFncyA9IFt0YWdzXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWdzKSkge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRUYWdzID0gWy4uLnRhZ3NdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFRhZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSB1cmdlbmN5IG9mIHRoZSBtb2RlbC5cclxuICAgICAqIEBwYXJhbSBtb2RlbCBUaGUgbW9kZWwgdG8gY2FsY3VsYXRlIHRoZSB1cmdlbmN5IGZvci5cclxuICAgICAqIEByZXR1cm5zIFRoZSB1cmdlbmN5IG9mIHRoZSBtb2RlbC5cclxuICAgICAqIEByZW1hcmtzIFRoZSB1cmdlbmN5IGlzIGNhbGN1bGF0ZWQgYXMgZm9sbG93czpcclxuICAgICAqIC0gTm8gYHN0YXR1c2Agb3IgYHN0YXR1c2AgaXMgJ0RvbmUnID0gLTJcclxuICAgICAqIC0gTm8gYGR1ZWAgb3IgYHN0YXR1c2AgaXMgJ1NvbWVkYXknID0gLTFcclxuICAgICAqIC0gRHVlIGRhdGUgaXMgdG9kYXkgb3IgaW4gdGhlIHBhc3QgPSAzXHJcbiAgICAgKiAtIER1ZSBkYXRlIGlzIGluIHRoZSBuZXh0IDMgZGF5cyA9IDJcclxuICAgICAqIC0gRHVlIGRhdGUgaXMgaW4gdGhlIG5leHQgNyBkYXlzID0gMVxyXG4gICAgICogLSBEdWUgZGF0ZSBpcyBpbiBtb3JlIHRoZSBmdXR1cmUgPSAwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZVVyZ2VuY3kobW9kZWw6IChQcmpUYXNrTWFuYWdlbWVudE1vZGVsPFRhc2tEYXRhIHwgVG9waWNEYXRhIHwgUHJvamVjdERhdGE+KSk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCFtb2RlbC5kYXRhLnN0YXR1cyB8fCBtb2RlbC5kYXRhLnN0YXR1cyA9PT0gJ0RvbmUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFtb2RlbC5kYXRhLmR1ZSB8fCBtb2RlbC5kYXRhLnN0YXR1cyA9PT0gJ1NvbWVkYXknKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBuZXcgRGF0ZShtb2RlbC5kYXRhLmR1ZSk7XHJcbiAgICAgICAgZHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG5cclxuICAgICAgICBjb25zdCBkaWZmZXJlbmNlSW5EYXlzID0gKGR1ZURhdGUuZ2V0VGltZSgpIC0gdG9kYXkuZ2V0VGltZSgpKSAvICgxMDAwICogMzYwMCAqIDI0KTtcclxuXHJcbiAgICAgICAgbGV0IHVyZ2VuY3kgPSAwO1xyXG5cclxuICAgICAgICBpZiAoZGlmZmVyZW5jZUluRGF5cyA8PSAwKSB7XHJcbiAgICAgICAgICAgIHVyZ2VuY3kgPSAzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZmVyZW5jZUluRGF5cyA8PSAzKSB7XHJcbiAgICAgICAgICAgIHVyZ2VuY3kgPSAyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZmVyZW5jZUluRGF5cyA8PSA3KSB7XHJcbiAgICAgICAgICAgIHVyZ2VuY3kgPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVyZ2VuY3k7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBkYXRlIG9mIHRoZSBsYXN0IGhpc3RvcnkgZW50cnkuXHJcbiAgICAgKiBAcGFyYW0gbW9kZWwgVGhlIG1vZGVsIHRvIGdldCB0aGUgbGFzdCBoaXN0b3J5IGVudHJ5IGRhdGUgZnJvbS5cclxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRlIG9mIHRoZSBsYXN0IGhpc3RvcnkgZW50cnkuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldExhc3RIaXN0b3J5RGF0ZShtb2RlbDogKFByalRhc2tNYW5hZ2VtZW50TW9kZWw8VGFza0RhdGEgfCBUb3BpY0RhdGEgfCBQcm9qZWN0RGF0YT4pKTogRGF0ZSB8IG51bGwge1xyXG4gICAgICAgIGlmIChtb2RlbC5kYXRhLmhpc3RvcnkgJiYgQXJyYXkuaXNBcnJheShtb2RlbC5kYXRhLmhpc3RvcnkpICYmIG1vZGVsLmRhdGEuaGlzdG9yeS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpc3RvcnkgPSBtb2RlbC5kYXRhLmhpc3Rvcnk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RFbnRyeSA9IGhpc3RvcnlbaGlzdG9yeS5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGxhc3RFbnRyeS5kYXRlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCBJUHJqRGF0YSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JUHJqRGF0YVwiO1xyXG5pbXBvcnQgSVByalRhc2tNYW5hZ2VtZW50IGZyb20gXCIuLi9pbnRlcmZhY2VzL0lQcmpUYXNrTWFuYWdlbWVudFwiO1xyXG5pbXBvcnQgeyBTdGF0dXMsIFByaW9yaXR5LCBFbmVyZ3ksIEZpbGVUeXBlLCBGaWxlU3ViVHlwZSwgSGlzdG9yeUVudHJpZXMgfSBmcm9tIFwiLi9QcmpUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9waWNEYXRhIGltcGxlbWVudHMgSVByakRhdGEsIElQcmpUYXNrTWFuYWdlbWVudCB7XHJcbiAgICB0eXBlOiBGaWxlVHlwZSB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBzdWJUeXBlOiBGaWxlU3ViVHlwZSB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICB0aXRsZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgc3RhdHVzOiBTdGF0dXMgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpb3JpdHk6IFByaW9yaXR5IHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIGVuZXJneTogRW5lcmd5IHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIGR1ZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHRhZ3M6IHN0cmluZ1tdIHwgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIGhpc3Rvcnk6IEhpc3RvcnlFbnRyaWVzIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBQYXJ0aWFsPFRvcGljRGF0YT4pIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gZGF0YS50aXRsZSAhPT0gdW5kZWZpbmVkID8gZGF0YS50aXRsZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkID8gZGF0YS5kZXNjcmlwdGlvbiA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IGRhdGEuc3RhdHVzICE9PSB1bmRlZmluZWQgPyBkYXRhLnN0YXR1cyA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnByaW9yaXR5ID0gZGF0YS5wcmlvcml0eSAhPT0gdW5kZWZpbmVkID8gZGF0YS5wcmlvcml0eSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmVuZXJneSA9IGRhdGEuZW5lcmd5ICE9PSB1bmRlZmluZWQgPyBkYXRhLmVuZXJneSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmR1ZSA9IGRhdGEuZHVlICE9PSB1bmRlZmluZWQgPyBkYXRhLmR1ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnRhZ3MgPSBkYXRhLnRhZ3MgIT09IHVuZGVmaW5lZCA/IGRhdGEudGFncyA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnR5cGUgPSBkYXRhLnR5cGUgIT09IHVuZGVmaW5lZCA/IGRhdGEudHlwZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnN1YlR5cGUgPSBkYXRhLnN1YlR5cGUgIT09IHVuZGVmaW5lZCA/IGRhdGEuc3ViVHlwZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBkYXRhLmhpc3RvcnkgIT09IHVuZGVmaW5lZCA/IGRhdGEuaGlzdG9yeSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbn1cclxuIiwgImltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBUb3BpY0RhdGEgZnJvbSBcInNyYy90eXBlcy9Ub3BpY0RhdGFcIjtcclxuaW1wb3J0IHsgUHJqVGFza01hbmFnZW1lbnRNb2RlbCB9IGZyb20gXCIuL1ByalRhc2tNYW5hZ2VtZW50TW9kZWxcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUb3BpY01vZGVsIGV4dGVuZHMgUHJqVGFza01hbmFnZW1lbnRNb2RlbDxUb3BpY0RhdGE+IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWxlOiBURmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGZpbGUsIFRvcGljRGF0YSk7XHJcbiAgICB9XHJcblxyXG59IiwgImltcG9ydCBJUHJqRGF0YSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JUHJqRGF0YVwiO1xyXG5pbXBvcnQgSVByalRhc2tNYW5hZ2VtZW50IGZyb20gXCIuLi9pbnRlcmZhY2VzL0lQcmpUYXNrTWFuYWdlbWVudFwiO1xyXG5pbXBvcnQgeyBTdGF0dXMsIFByaW9yaXR5LCBFbmVyZ3ksIEZpbGVUeXBlLCBGaWxlU3ViVHlwZSwgSGlzdG9yeUVudHJpZXMgfSBmcm9tIFwiLi9QcmpUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdERhdGEgaW1wbGVtZW50cyBJUHJqRGF0YSwgSVByalRhc2tNYW5hZ2VtZW50IHtcclxuICAgIHR5cGU6IEZpbGVUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHN1YlR5cGU6IEZpbGVTdWJUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHRpdGxlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBzdGF0dXM6IFN0YXR1cyB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBwcmlvcml0eTogUHJpb3JpdHkgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgZW5lcmd5OiBFbmVyZ3kgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgZHVlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgdGFnczogc3RyaW5nW10gfCBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgaGlzdG9yeTogSGlzdG9yeUVudHJpZXMgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGE6IFBhcnRpYWw8UHJvamVjdERhdGE+KSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IGRhdGEudGl0bGUgIT09IHVuZGVmaW5lZCA/IGRhdGEudGl0bGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCA/IGRhdGEuZGVzY3JpcHRpb24gOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBkYXRhLnN0YXR1cyAhPT0gdW5kZWZpbmVkID8gZGF0YS5zdGF0dXMgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IGRhdGEucHJpb3JpdHkgIT09IHVuZGVmaW5lZCA/IGRhdGEucHJpb3JpdHkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5lbmVyZ3kgPSBkYXRhLmVuZXJneSAhPT0gdW5kZWZpbmVkID8gZGF0YS5lbmVyZ3kgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5kdWUgPSBkYXRhLmR1ZSAhPT0gdW5kZWZpbmVkID8gZGF0YS5kdWUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy50YWdzID0gZGF0YS50YWdzICE9PSB1bmRlZmluZWQgPyBkYXRhLnRhZ3MgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy50eXBlID0gZGF0YS50eXBlICE9PSB1bmRlZmluZWQgPyBkYXRhLnR5cGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zdWJUeXBlID0gZGF0YS5zdWJUeXBlICE9PSB1bmRlZmluZWQgPyBkYXRhLnN1YlR5cGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gZGF0YS5oaXN0b3J5ICE9PSB1bmRlZmluZWQgPyBkYXRhLmhpc3RvcnkgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgUHJvamVjdERhdGEgZnJvbSBcInNyYy90eXBlcy9Qcm9qZWN0RGF0YVwiO1xyXG5pbXBvcnQgeyBQcmpUYXNrTWFuYWdlbWVudE1vZGVsIH0gZnJvbSBcIi4vUHJqVGFza01hbmFnZW1lbnRNb2RlbFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RNb2RlbCBleHRlbmRzIFByalRhc2tNYW5hZ2VtZW50TW9kZWw8UHJvamVjdERhdGE+IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWxlOiBURmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGZpbGUsIFByb2plY3REYXRhKTtcclxuICAgIH1cclxuXHJcbn0iLCAiaW1wb3J0IElQcmpEYXRhIGZyb20gXCIuLi9pbnRlcmZhY2VzL0lQcmpEYXRhXCI7XHJcbmltcG9ydCBJUHJqVGFza01hbmFnZW1lbnQgZnJvbSBcIi4uL2ludGVyZmFjZXMvSVByalRhc2tNYW5hZ2VtZW50XCI7XHJcbmltcG9ydCB7IFN0YXR1cywgUHJpb3JpdHksIEVuZXJneSwgRmlsZVR5cGUsIEZpbGVTdWJUeXBlLCBIaXN0b3J5RW50cmllcyB9IGZyb20gXCIuL1ByalR5cGVzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrRGF0YSBpbXBsZW1lbnRzIElQcmpEYXRhLCBJUHJqVGFza01hbmFnZW1lbnQge1xyXG4gICAgdHlwZTogRmlsZVR5cGUgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgc3ViVHlwZTogRmlsZVN1YlR5cGUgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgdGl0bGU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHN0YXR1czogU3RhdHVzIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHByaW9yaXR5OiBQcmlvcml0eSB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBlbmVyZ3k6IEVuZXJneSB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBkdWU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICB0YWdzOiBzdHJpbmdbXSB8IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBoaXN0b3J5OiBIaXN0b3J5RW50cmllcyB8IG51bGwgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YTogUGFydGlhbDxUYXNrRGF0YT4pIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gZGF0YS50aXRsZSAhPT0gdW5kZWZpbmVkID8gZGF0YS50aXRsZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkID8gZGF0YS5kZXNjcmlwdGlvbiA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IGRhdGEuc3RhdHVzICE9PSB1bmRlZmluZWQgPyBkYXRhLnN0YXR1cyA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnByaW9yaXR5ID0gZGF0YS5wcmlvcml0eSAhPT0gdW5kZWZpbmVkID8gZGF0YS5wcmlvcml0eSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmVuZXJneSA9IGRhdGEuZW5lcmd5ICE9PSB1bmRlZmluZWQgPyBkYXRhLmVuZXJneSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmR1ZSA9IGRhdGEuZHVlICE9PSB1bmRlZmluZWQgPyBkYXRhLmR1ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnRhZ3MgPSBkYXRhLnRhZ3MgIT09IHVuZGVmaW5lZCA/IGRhdGEudGFncyA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnR5cGUgPSBkYXRhLnR5cGUgIT09IHVuZGVmaW5lZCA/IGRhdGEudHlwZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnN1YlR5cGUgPSBkYXRhLnN1YlR5cGUgIT09IHVuZGVmaW5lZCA/IGRhdGEuc3ViVHlwZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBkYXRhLmhpc3RvcnkgIT09IHVuZGVmaW5lZCA/IGRhdGEuaGlzdG9yeSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbn1cclxuIiwgImltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBUYXNrRGF0YSBmcm9tIFwic3JjL3R5cGVzL1Rhc2tEYXRhXCI7XHJcbmltcG9ydCB7IFByalRhc2tNYW5hZ2VtZW50TW9kZWwgfSBmcm9tIFwiLi9QcmpUYXNrTWFuYWdlbWVudE1vZGVsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFza01vZGVsIGV4dGVuZHMgUHJqVGFza01hbmFnZW1lbnRNb2RlbDxUYXNrRGF0YT4ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZpbGU6IFRGaWxlKSB7XHJcbiAgICAgICAgc3VwZXIoZmlsZSwgVGFza0RhdGEpO1xyXG4gICAgfVxyXG5cclxuXHJcbn0iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBNYXJrZG93blJlbmRlcmVyLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBHbG9iYWwgZnJvbSBcInNyYy9jbGFzc2VzL0dsb2JhbFwiO1xyXG5pbXBvcnQgTG5nIGZyb20gXCJzcmMvY2xhc3Nlcy9MbmdcIjtcclxuaW1wb3J0IEVkaXRhYmxlRGF0YVZpZXcgZnJvbSBcInNyYy9saWJzL0VkaXRhYmxlRGF0YVZpZXcvRWRpdGFibGVEYXRhVmlld1wiO1xyXG5pbXBvcnQgSGVscGVyIGZyb20gXCJzcmMvbGlicy9IZWxwZXJcIjtcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xyXG5pbXBvcnQgeyBQcmpUYXNrTWFuYWdlbWVudE1vZGVsIH0gZnJvbSBcInNyYy9tb2RlbHMvUHJqVGFza01hbmFnZW1lbnRNb2RlbFwiO1xyXG5pbXBvcnQgeyBGaWxlVHlwZSwgU3RhdHVzLCBVcmdlbmN5U3ltYm9scyB9IGZyb20gXCJzcmMvdHlwZXMvUHJqVHlwZXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3RDb21wb25lbnRzIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB0aXRsZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyIFRoZSBjb250YWluZXIgdG8gYXBwZW5kIHRoZSB0aXRsZSB0by5cclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byByZWdpc3RlciB0aGUgZXZlbnRzIHRvLlxyXG4gICAgICogQHBhcmFtIHBhdGggVGhlIHBhdGggdG8gdGhlIGZpbGUuXHJcbiAgICAgKiBAcGFyYW0gb25SZWFkIE9uIHJlYWQgY2FsbGJhY2suIFJldHVybnMgdGhlIHRpdGxlLlxyXG4gICAgICogQHBhcmFtIG9uV3JpdGUgT24gd3JpdGUgY2FsbGJhY2suIFBhc3NlcyB0aGUgbmV3IHRpdGxlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZVRpdGxlKFxyXG4gICAgICAgIGNvbnRhaW5lcjogRG9jdW1lbnRGcmFnbWVudCxcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICBwYXRoOiBzdHJpbmcsXHJcbiAgICAgICAgb25SZWFkOiAoKSA9PiBzdHJpbmcsXHJcbiAgICAgICAgb25Xcml0ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuICAgICAgICBuZXcgRWRpdGFibGVEYXRhVmlldyhjb250YWluZXIsIGNvbXBvbmVudClcclxuICAgICAgICAgICAgLmFkZExpbmsobGluayA9PiB7XHJcbiAgICAgICAgICAgICAgICBsaW5rLnNldFZhbHVlKG9uUmVhZCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShMbmcuZ3QoXCJUaXRsZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoTG5nLmd0KFwiVGl0bGVcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldExpbmtUeXBlKFwiZmlsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRGb3JtYXRvcigodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGl0bGU6IERvY3VtZW50RnJhZ21lbnQgfCB1bmRlZmluZWQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbih0aXRsZSBhcyB1bmtub3duIGFzIEhUTUxEaXZFbGVtZW50LCBcInBhcGVyY2xpcFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChIZWxwZXIuaXNQb3NzaWJseU1hcmtkb3duKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihHbG9iYWwuZ2V0SW5zdGFuY2UoKS5hcHAsIHZhbHVlID8/IFwiXCIsIGRpdiwgXCJcIiwgY29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGhyZWY6IGAke3BhdGh9YCwgdGV4dDogYCR7dmFsdWV9YCwgaHRtbDogdGl0bGUgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbmFibGVFZGl0YWJpbGl0eSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uU2F2ZSgodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbldyaXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBzdW1tYXJ5IGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXIgVGhlIGNvbnRhaW5lciB0byBhcHBlbmQgdGhlIHN1bW1hcnkgdG8uXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IFRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXIgdGhlIGV2ZW50cyB0by5cclxuICAgICAqIEBwYXJhbSBkZXNjcmlwdGlvbiBUaGUgZGVzY3JpcHRpb24gdG8gZGlzcGxheS5cclxuICAgICAqIEBwYXJhbSBvbldyaXRlIE9uIHdyaXRlIGNhbGxiYWNrLiBQYXNzZXMgdGhlIG5ldyBkZXNjcmlwdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVTdW1tYXJ5KFxyXG4gICAgICAgIGNvbnRhaW5lcjogRG9jdW1lbnRGcmFnbWVudCxcclxuICAgICAgICBjb21wb25lbnQ6IENvbXBvbmVudCxcclxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gICAgICAgIG9uV3JpdGU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgbmV3IEVkaXRhYmxlRGF0YVZpZXcoY29udGFpbmVyLCBjb21wb25lbnQpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKGRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgICAgICAgLnNldFRpdGxlKExuZy5ndChcIkRlc2NyaXB0aW9uXCIpKVxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKExuZy5ndChcIkRlc2NyaXB0aW9uXCIpKVxyXG4gICAgICAgICAgICAgICAgLmVuYWJsZUVkaXRhYmlsaXR5KClcclxuICAgICAgICAgICAgICAgIC5zZXRSZW5kZXJNYXJrZG93bigpXHJcbiAgICAgICAgICAgICAgICAub25TYXZlKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25Xcml0ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZVN0YXR1cyhcclxuICAgICAgICBjb250YWluZXI6IERvY3VtZW50RnJhZ21lbnQsXHJcbiAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnQsXHJcbiAgICAgICAgb25SZWFkOiAoKSA9PiBzdHJpbmcsXHJcbiAgICAgICAgb25Xcml0ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuICAgICAgICBuZXcgRWRpdGFibGVEYXRhVmlldyhjb250YWluZXIsIGNvbXBvbmVudClcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuc2V0T3B0aW9ucyhbXHJcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogXCJBY3RpdmVcIiwgdGV4dDogTG5nLmd0KFwiU3RhdHVzQWN0aXZlXCIpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogXCJXYWl0aW5nXCIsIHRleHQ6IExuZy5ndChcIlN0YXR1c1dhaXRpbmdcIikgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiBcIkxhdGVyXCIsIHRleHQ6IExuZy5ndChcIlN0YXR1c0xhdGVyXCIpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogXCJTb21lZGF5XCIsIHRleHQ6IExuZy5ndChcIlN0YXR1c1NvbWVkYXlcIikgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiBcIkRvbmVcIiwgdGV4dDogTG5nLmd0KFwiU3RhdHVzRG9uZVwiKSB9XHJcbiAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgLnNldFRpdGxlKExuZy5ndChcIlN0YXR1c1wiKSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShvblJlYWQoKSlcclxuICAgICAgICAgICAgICAgIC5vblNhdmUoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25Xcml0ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVuYWJsZUVkaXRhYmlsaXR5KClcclxuICAgICAgICAgICAgICAgIC5zZXRGb3JtYXRvcigodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHZhbHVlIGFzIFN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaWNvblN0cmluZzogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBY3RpdmVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcIlx1MjZBMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJXYWl0aW5nXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU3RyaW5nID0gXCJcdTIzRjNcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTGF0ZXJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcIlx1RDgzRFx1REQxQ1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTb21lZGF5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU3RyaW5nID0gXCJcdUQ4M0RcdURDQzZcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiRG9uZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblN0cmluZyA9IFwiXHUyNzE0XHVGRTBGXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcIlx1MjZBMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHRleHQ6IGAke2ljb25TdHJpbmd9YCwgaHRtbDogdW5kZWZpbmVkIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBwcmlvcml0eSBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyIFRoZSBjb250YWluZXIgdG8gYXBwZW5kIHRoZSBwcmlvcml0eSB0by5cclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byByZWdpc3RlciB0aGUgZXZlbnRzIHRvLlxyXG4gICAgICogQHBhcmFtIG9uUmVhZCBPbiByZWFkIGNhbGxiYWNrLiBSZXR1cm5zIHRoZSBwcmlvcml0eS5cclxuICAgICAqIEBwYXJhbSBvbldyaXRlIE9uIHdyaXRlIGNhbGxiYWNrLiBQYXNzZXMgdGhlIG5ldyBwcmlvcml0eS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVQcmlvcml0eShcclxuICAgICAgICBjb250YWluZXI6IERvY3VtZW50RnJhZ21lbnQsXHJcbiAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnQsXHJcbiAgICAgICAgb25SZWFkOiAoKSA9PiBzdHJpbmcsXHJcbiAgICAgICAgb25Xcml0ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuICAgICAgICBuZXcgRWRpdGFibGVEYXRhVmlldyhjb250YWluZXIsIGNvbXBvbmVudClcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuc2V0T3B0aW9ucyhbXHJcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogXCIzXCIsIHRleHQ6IExuZy5ndChcIkhpZ2hQcmlvcml0eVwiKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IFwiMlwiLCB0ZXh0OiBMbmcuZ3QoXCJNZWRpdW1Qcmlvcml0eVwiKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IFwiMVwiLCB0ZXh0OiBMbmcuZ3QoXCJMb3dQcmlvcml0eVwiKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IFwiMFwiLCB0ZXh0OiBMbmcuZ3QoXCJOb1ByaW9yaXR5XCIpIH1cclxuICAgICAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICAgICAuc2V0VGl0bGUoTG5nLmd0KFwiUHJpb3JpdHlUZXh0XCIpKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKG9uUmVhZCgpKVxyXG4gICAgICAgICAgICAgICAgLm9uU2F2ZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBvbldyaXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZW5hYmxlRWRpdGFiaWxpdHkoKVxyXG4gICAgICAgICAgICAgICAgLnNldEZvcm1hdG9yKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaWNvblN0cmluZzogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjNcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcInNpZ25hbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU3RyaW5nID0gXCJzaWduYWwtbWVkaXVtXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjFcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcInNpZ25hbC1sb3dcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblN0cmluZyA9IFwic2lnbmFsLXplcm9cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblN0cmluZyA9IFwic2lnbmFsLXplcm9cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZXRJY29uKGljb24gYXMgdW5rbm93biBhcyBIVE1MRGl2RWxlbWVudCwgaWNvblN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogYCR7dmFsdWV9YCwgaHRtbDogaWNvbiB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbGluayB0byB0aGUgZmlsZSBhdCBgcGF0aGAgd2l0aCB0aGUgYGNvcm9zcG9uZGluZ1N5bWJvbGAgYXMgaWNvbi5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXIgVGhlIGNvbnRhaW5lciB0byBhcHBlbmQgdGhlIGxpbmsgdG8uXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IFRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXIgdGhlIGV2ZW50cyB0by5cclxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBmaWxlLlxyXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGZpbGUuXHJcbiAgICAgKiBAcGFyYW0gY29yb3Nwb25kaW5nU3ltYm9sIFRoZSBjb3Jvc3BvbmRpbmcgc3ltYm9sIGZvciB0aGUgZmlsZSB0eXBlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZU1ldGFkYXRhTGluayhcclxuICAgICAgICBjb250YWluZXI6IERvY3VtZW50RnJhZ21lbnQsXHJcbiAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnQsXHJcbiAgICAgICAgcGF0aDogc3RyaW5nLFxyXG4gICAgICAgIHR5cGU6IEZpbGVUeXBlIHwgdW5kZWZpbmVkIHwgbnVsbCxcclxuICAgICAgICBjb3Jvc3BvbmRpbmdTeW1ib2w6IHN0cmluZykge1xyXG4gICAgICAgIG5ldyBFZGl0YWJsZURhdGFWaWV3KGNvbnRhaW5lciwgY29tcG9uZW50KVxyXG4gICAgICAgICAgICAuYWRkTGluayhsaW5rID0+IGxpbmtcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShwYXRoKVxyXG4gICAgICAgICAgICAgICAgLnNldFRpdGxlKExuZy5ndCh0eXBlID8/IFwiRmlsZVwiKSlcclxuICAgICAgICAgICAgICAgIC5zZXRMaW5rVHlwZShcImZpbGVcIilcclxuICAgICAgICAgICAgICAgIC5zZXRGb3JtYXRvcigodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvblN0cmluZyA9IGNvcm9zcG9uZGluZ1N5bWJvbDtcclxuICAgICAgICAgICAgICAgICAgICBzZXRJY29uKGljb24gYXMgdW5rbm93biBhcyBIVE1MRGl2RWxlbWVudCwgaWNvblN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaHJlZjogYCR7dmFsdWV9YCwgdGV4dDogYCR7dmFsdWV9YCwgaHRtbDogaWNvbiB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgc3BhbiB3aXRoIHRoZSB0byBgdXJnZW5jeWAgY29ycmVzcG9uZGluZyB1cmdlbmN5IHN5bWJvbC5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXIgVGhlIGNvbnRhaW5lciB0byBhcHBlbmQgdGhlIHNwYW4gdG8uXHJcbiAgICAgKiBAcGFyYW0gdXJnZW5jeSBUaGUgdXJnZW5jeSB0byBnZXQgdGhlIHN5bWJvbCBmb3IuICgzIHRvIC0yKVxyXG4gICAgICogQHNlZSB7QGxpbmsgUHJqVGFza01hbmFnZW1lbnRNb2RlbC5jYWxjdWxhdGVVcmdlbmN5fVxyXG4gICAgICogQHNlZSB7QGxpbmsgVXJnZW5jeVN5bWJvbHN9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlVHJhZmljTGlnaHQoXHJcbiAgICAgICAgY29udGFpbmVyOiBEb2N1bWVudEZyYWdtZW50LFxyXG4gICAgICAgIHVyZ2VuY3k6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHRyYWZpY0xpZ2h0U3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodHJhZmljTGlnaHRTcGFuKTtcclxuICAgICAgICBsZXQgaWNvblN0cmluZzogVXJnZW5jeVN5bWJvbHM7XHJcbiAgICAgICAgc3dpdGNoICh1cmdlbmN5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcIlx1RDgzRFx1REQzNFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcIlx1RDgzRFx1REZFMFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcIlx1RDgzRFx1REZFMVwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcIlx1RDgzRFx1REZFMlwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgLTE6XHJcbiAgICAgICAgICAgICAgICBpY29uU3RyaW5nID0gXCJcdUQ4M0RcdURGRTJcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIC0yOlxyXG4gICAgICAgICAgICAgICAgaWNvblN0cmluZyA9IFwiXHVEODNEXHVERDM1XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGljb25TdHJpbmcgPSBcIlx1RDgzRFx1REQzNFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyYWZpY0xpZ2h0U3Bhbi50ZXh0Q29udGVudCA9IGljb25TdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCBUYWJsZUJsb2NrUmVuZGVyQ29tcG9uZW50IGZyb20gXCIuL1RhYmxlQmxvY2tSZW5kZXJDb21wb25lbnRcIjtcclxuaW1wb3J0IHsgUHJqVGFza01hbmFnZW1lbnRNb2RlbCB9IGZyb20gXCJzcmMvbW9kZWxzL1ByalRhc2tNYW5hZ2VtZW50TW9kZWxcIjtcclxuaW1wb3J0IFRhc2tEYXRhIGZyb20gXCJzcmMvdHlwZXMvVGFza0RhdGFcIjtcclxuaW1wb3J0IFRvcGljRGF0YSBmcm9tIFwic3JjL3R5cGVzL1RvcGljRGF0YVwiO1xyXG5pbXBvcnQgUHJvamVjdERhdGEgZnJvbSBcInNyYy90eXBlcy9Qcm9qZWN0RGF0YVwiO1xyXG5pbXBvcnQgeyBJUHJvY2Vzc29yU2V0dGluZ3MgfSBmcm9tIFwic3JjL2ludGVyZmFjZXMvSVByb2Nlc3NvclNldHRpbmdzXCI7XHJcbmltcG9ydCBTZWFyY2gsIHsgU2VhcmNoVGVybXNBcnJheSB9IGZyb20gXCIuLi9TZWFyY2hcIjtcclxuaW1wb3J0IFRhYmxlLCB7IFJvdywgUm93c1N0YXRlLCBUYWJsZUhlYWRlciB9IGZyb20gXCIuLi9UYWJsZVwiO1xyXG5pbXBvcnQgTG5nIGZyb20gXCJzcmMvY2xhc3Nlcy9MbmdcIjtcclxuaW1wb3J0IEZpbHRlckJ1dHRvbiBmcm9tIFwiLi9Jbm5lckNvbXBvbmVudHMvRmlsdGVyQnV0dG9uXCI7XHJcbmltcG9ydCBNYXhTaG93bk1vZGVsc0lucHV0IGZyb20gXCIuL0lubmVyQ29tcG9uZW50cy9NYXhTaG93bk1vZGVsc0lucHV0XCI7XHJcbmltcG9ydCBTZWFyY2hJbnB1dCBmcm9tIFwiLi9Jbm5lckNvbXBvbmVudHMvU2VhcmNoSW5wdXRcIjtcclxuaW1wb3J0IEhlbHBlciBmcm9tIFwiLi4vSGVscGVyXCI7XHJcbmltcG9ydCB7IFRvcGljTW9kZWwgfSBmcm9tIFwic3JjL21vZGVscy9Ub3BpY01vZGVsXCI7XHJcbmltcG9ydCB7IFByb2plY3RNb2RlbCB9IGZyb20gXCJzcmMvbW9kZWxzL1Byb2plY3RNb2RlbFwiO1xyXG5pbXBvcnQgeyBUYXNrTW9kZWwgfSBmcm9tIFwic3JjL21vZGVscy9UYXNrTW9kZWxcIjtcclxuaW1wb3J0IHsgUHJpb3JpdHksIFN0YXR1cyB9IGZyb20gXCJzcmMvdHlwZXMvUHJqVHlwZXNcIjtcclxuaW1wb3J0IERvY3VtZW50Q29tcG9uZW50cyBmcm9tIFwiLi9Jbm5lckNvbXBvbmVudHMvRG9jdW1lbnRDb21wb25lbnRzXCI7XHJcbmltcG9ydCBQcm9qZWN0Q29tcG9uZW50cyBmcm9tIFwiLi9Jbm5lckNvbXBvbmVudHMvUHJvamVjdENvbXBvbmVudHNcIjtcclxuaW1wb3J0IEdlbmVyYWxDb21wb25lbnRzIGZyb20gXCIuL0lubmVyQ29tcG9uZW50cy9HZW5lcmFsQ29tcG9uZW50c1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdEJsb2NrUmVuZGVyQ29tcG9uZW50IGV4dGVuZHMgVGFibGVCbG9ja1JlbmRlckNvbXBvbmVudDxQcmpUYXNrTWFuYWdlbWVudE1vZGVsPFRhc2tEYXRhIHwgVG9waWNEYXRhIHwgUHJvamVjdERhdGE+PiB7XHJcbiAgICBwcm90ZWN0ZWQgc2V0dGluZ3M6IFByb2plY3RCbG9ja1JlbmRlclNldHRpbmdzID0ge1xyXG4gICAgICAgIHRhZ3M6IFtdLFxyXG4gICAgICAgIHRvcGljU3ltYm9sOiB0aGlzLmdsb2JhbC5zZXR0aW5ncy5wcmpTZXR0aW5ncy50b3BpY1N5bWJvbCxcclxuICAgICAgICBwcm9qZWN0U3ltYm9sOiB0aGlzLmdsb2JhbC5zZXR0aW5ncy5wcmpTZXR0aW5ncy5wcm9qZWN0U3ltYm9sLFxyXG4gICAgICAgIHRhc2tTeW1ib2w6IHRoaXMuZ2xvYmFsLnNldHRpbmdzLnByalNldHRpbmdzLnRhc2tTeW1ib2wsXHJcbiAgICAgICAgb3RoZXJTeW1ib2w6IFwiZGlhbW9uZFwiLFxyXG4gICAgICAgIGZpbHRlcjogW1wiVG9waWNcIiwgXCJQcm9qZWN0XCIsIFwiVGFza1wiXSxcclxuICAgICAgICBtYXhEb2N1bWVudHM6IHRoaXMuZ2xvYmFsLnNldHRpbmdzLmRlZmF1bHRNYXhTaG93LFxyXG4gICAgICAgIHNlYXJjaDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGJhdGNoU2l6ZTogOCxcclxuICAgICAgICBzbGVlcEJldHdlZW5CYXRjaGVzOiAxMFxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0YWJsZSBoZWFkZXJzLlxyXG4gICAgICogQHJlbWFya3MgVGhlIHRhYmxlIGhlYWRlcnMgYXJlIHVzZWQgdG8gY3JlYXRlIHRoZSB0YWJsZS5cclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdGFibGVIZWFkZXJzOiBUYWJsZUhlYWRlcltdID0gW1xyXG4gICAgICAgIHsgdGV4dDogTG5nLmd0KFwiRG9jdW1lbnRUeXBlXCIpLCBoZWFkZXJDbGFzczogW10sIGNvbHVtbkNsYXNzOiBbXCJkb250LWRlY29yYXRlLWxpbmtcIiwgXCJmb250LW1lZGl1bVwiXSB9LFxyXG4gICAgICAgIHsgdGV4dDogTG5nLmd0KFwiVHJhZmljTGlnaHRcIiksIGhlYWRlckNsYXNzOiBbXSwgY29sdW1uQ2xhc3M6IFtdIH0sXHJcbiAgICAgICAgeyB0ZXh0OiBMbmcuZ3QoXCJEZXNjcmlwdGlvblwiKSwgaGVhZGVyQ2xhc3M6IFtdLCBjb2x1bW5DbGFzczogW1wiZG9udC1kZWNvcmF0ZS1saW5rXCIsIFwibGluay13ZWlnaHQtYm9sZFwiXSB9LFxyXG4gICAgICAgIHsgdGV4dDogTG5nLmd0KFwiUHJpb3JpdHlcIiksIGhlYWRlckNsYXNzOiBbXSwgY29sdW1uQ2xhc3M6IFtdIH0sXHJcbiAgICAgICAgeyB0ZXh0OiBMbmcuZ3QoXCJEdWVEYXRlXCIpLCBoZWFkZXJDbGFzczogW10sIGNvbHVtbkNsYXNzOiBbXCJmb250LXhzbWFsbFwiXSB9LFxyXG4gICAgICAgIHsgdGV4dDogTG5nLmd0KFwiU3RhdHVzXCIpLCBoZWFkZXJDbGFzczogW10sIGNvbHVtbkNsYXNzOiBbXSB9LFxyXG4gICAgICAgIHsgdGV4dDogTG5nLmd0KFwiVGFnc1wiKSwgaGVhZGVyQ2xhc3M6IFtdLCBjb2x1bW5DbGFzczogW1widGFnc1wiXSB9XHJcbiAgICBdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBJUHJvY2Vzc29yU2V0dGluZ3MpIHtcclxuICAgICAgICBzdXBlcihzZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5wYXJzZVNldHRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJ1aWxkKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5idWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBkcmF3KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGdldE1vZGVsc1Byb21pc2UgPSB0aGlzLmdldE1vZGVscygpO1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLmRyYXcoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkVGFibGUoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkSGVhZGVyKCk7XHJcbiAgICAgICAgdGhpcy5ncmF5T3V0SGVhZGVyKCk7XHJcbiAgICAgICAgdGhpcy5tb2RlbHMgPSAoYXdhaXQgZ2V0TW9kZWxzUHJvbWlzZSk7XHJcblxyXG4gICAgICAgIFByalRhc2tNYW5hZ2VtZW50TW9kZWwuc29ydE1vZGVsc0J5VXJnZW5jeSh0aGlzLm1vZGVscyBhcyAoUHJqVGFza01hbmFnZW1lbnRNb2RlbDxUYXNrRGF0YSB8IFRvcGljRGF0YSB8IFByb2plY3REYXRhPilbXSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hZGREb2N1bWVudHNUb1RhYmxlKCk7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxpemVIZWFkZXIoKTtcclxuICAgICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgUmVkcmF3IChmb3IgJHt0aGlzLm1vZGVscy5sZW5ndGh9IE1vZGVscykgcnVucyBmb3IgJHtlbmRUaW1lIC0gc3RhcnRUaW1lfW1zYCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBidWlsZFRhYmxlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMudGFibGUgPSBuZXcgVGFibGUodGhpcy50YWJsZUhlYWRlcnMsIFwicHJvamVjdC10YWJsZVwiLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIHRoaXMudGFibGVDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50YWJsZS5kYXRhLnRhYmxlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGJ1aWxkSGVhZGVyKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vIEZpbHRlciBjb250YWluZXJcclxuICAgICAgICBjb25zdCBoZWFkZXJGaWx0ZXJCdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5oZWFkZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZGVyRmlsdGVyQnV0dG9ucyk7XHJcbiAgICAgICAgaGVhZGVyRmlsdGVyQnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdoZWFkZXItaXRlbScpO1xyXG4gICAgICAgIGhlYWRlckZpbHRlckJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgnZmlsdGVyLXN5bWJvbHMnKTtcclxuXHJcbiAgICAgICAgLy8gRmlsdGVyIGxhYmVsXHJcbiAgICAgICAgY29uc3QgZmlsdGVyTGFiZWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBoZWFkZXJGaWx0ZXJCdXR0b25zLmFwcGVuZENoaWxkKGZpbHRlckxhYmVsQ29udGFpbmVyKTtcclxuICAgICAgICBjb25zdCBmaWx0ZXJMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBmaWx0ZXJMYWJlbENvbnRhaW5lci5hcHBlbmRDaGlsZChmaWx0ZXJMYWJlbCk7XHJcbiAgICAgICAgZmlsdGVyTGFiZWwuY2xhc3NMaXN0LmFkZCgnZmlsdGVyLXN5bWJvbCcpO1xyXG4gICAgICAgIGZpbHRlckxhYmVsLnRleHRDb250ZW50ID0gTG5nLmd0KFwiRmlsdGVyXCIpO1xyXG5cclxuICAgICAgICBjb25zdCB0b3BpY0ZpbHRlckJ1dHRvbiA9IEZpbHRlckJ1dHRvbi5jcmVhdGUoXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICBcIlRvcGljXCIsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudG9waWNTeW1ib2wsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyLmluY2x1ZGVzKFwiVG9waWNcIiksXHJcbiAgICAgICAgICAgIHRoaXMub25GaWx0ZXJCdXR0b24uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgaGVhZGVyRmlsdGVyQnV0dG9ucy5hcHBlbmRDaGlsZCh0b3BpY0ZpbHRlckJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb2plY3RGaWx0ZXJCdXR0b24gPSBGaWx0ZXJCdXR0b24uY3JlYXRlKFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgXCJQcm9qZWN0XCIsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucHJvamVjdFN5bWJvbCxcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maWx0ZXIuaW5jbHVkZXMoXCJQcm9qZWN0XCIpLFxyXG4gICAgICAgICAgICB0aGlzLm9uRmlsdGVyQnV0dG9uLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGhlYWRlckZpbHRlckJ1dHRvbnMuYXBwZW5kQ2hpbGQocHJvamVjdEZpbHRlckJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhc2tGaWx0ZXJCdXR0b24gPSBGaWx0ZXJCdXR0b24uY3JlYXRlKFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgXCJUYXNrXCIsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudGFza1N5bWJvbCxcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maWx0ZXIuaW5jbHVkZXMoXCJUYXNrXCIpLFxyXG4gICAgICAgICAgICB0aGlzLm9uRmlsdGVyQnV0dG9uLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGhlYWRlckZpbHRlckJ1dHRvbnMuYXBwZW5kQ2hpbGQodGFza0ZpbHRlckJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IGRvbmVGaWx0ZXJCdXR0b24gPSBGaWx0ZXJCdXR0b24uY3JlYXRlKFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgXCJEb25lXCIsXHJcbiAgICAgICAgICAgIFwiY2hlY2stc3F1YXJlXCIsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyLmluY2x1ZGVzKFwiRG9uZVwiKSxcclxuICAgICAgICAgICAgdGhpcy5vbkZpbHRlckJ1dHRvbi5iaW5kKHRoaXMpKTtcclxuICAgICAgICBoZWFkZXJGaWx0ZXJCdXR0b25zLmFwcGVuZENoaWxkKGRvbmVGaWx0ZXJCdXR0b24pO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhEb2N1bWVudHMgPSBNYXhTaG93bk1vZGVsc0lucHV0LmNyZWF0ZShcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MubWF4RG9jdW1lbnRzLFxyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbC5zZXR0aW5ncy5kZWZhdWx0TWF4U2hvdyxcclxuICAgICAgICAgICAgdGhpcy5vbk1heERvY3VtZW50c0NoYW5nZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBoZWFkZXJGaWx0ZXJCdXR0b25zLmFwcGVuZENoaWxkKG1heERvY3VtZW50cyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlYXJjaEJveCA9IFNlYXJjaElucHV0LmNyZWF0ZShcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgIHRoaXMub25TZWFyY2guYmluZCh0aGlzKSk7XHJcbiAgICAgICAgaGVhZGVyRmlsdGVyQnV0dG9ucy5hcHBlbmRDaGlsZChzZWFyY2hCb3gpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkRG9jdW1lbnRzVG9UYWJsZShiYXRjaFNpemUgPSB0aGlzLnNldHRpbmdzLmJhdGNoU2l6ZSwgc2xlZXBCZXR3ZWVuQmF0Y2hlcyA9IHRoaXMuc2V0dGluZ3Muc2xlZXBCZXR3ZWVuQmF0Y2hlcyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGxldCBzbGVlcFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICBjb25zdCBtb2RlbHNMZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3Qgcm93czogUm93W10gPSBbXTtcclxuICAgICAgICBsZXQgcm93UHJvbWlzZTogUHJvbWlzZTxSb3c+IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAobW9kZWxzTGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByb3dQcm9taXNlID0gdGhpcy5nZW5lcmF0ZVRhYmxlUm93KHRoaXMubW9kZWxzWzBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmlzaWJsZVJvd3MgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZGVsc0xlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gaSArIDEgPCBtb2RlbHNMZW5ndGggPyB0aGlzLm1vZGVsc1tpICsgMV0gOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gYXdhaXQgcm93UHJvbWlzZTtcclxuICAgICAgICAgICAgcm93UHJvbWlzZSA9IG1vZGVsID8gdGhpcy5nZW5lcmF0ZVRhYmxlUm93KG1vZGVsKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChyb3cgJiYgIXJvdy5oaWRkZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmICh2aXNpYmxlUm93cyA8IHRoaXMuc2V0dGluZ3MubWF4RG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVJvd3MrKztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyb3cpXHJcbiAgICAgICAgICAgICAgICByb3dzLnB1c2gocm93KTtcclxuXHJcbiAgICAgICAgICAgIGlmICgoaSAhPT0gMCAmJiBpICUgYmF0Y2hTaXplID09PSAwKSB8fCBpID09PSBtb2RlbHNMZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcFByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlLmFkZFJvd3Mocm93cyk7XHJcbiAgICAgICAgICAgICAgICByb3dzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICBzbGVlcFByb21pc2UgPSBIZWxwZXIuc2xlZXAoc2xlZXBCZXR3ZWVuQmF0Y2hlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVRhYmxlUm93KG1vZGVsOiAoUHJqVGFza01hbmFnZW1lbnRNb2RlbDxUYXNrRGF0YSB8IFRvcGljRGF0YSB8IFByb2plY3REYXRhPikpOiBQcm9taXNlPFJvdz4ge1xyXG4gICAgICAgIGNvbnN0IHJvd0NsYXNzTGlzdDogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCByb3dEYXRhOiBEb2N1bWVudEZyYWdtZW50W10gPSBbXTtcclxuICAgICAgICBjb25zdCByb3dVaWQgPSB0aGlzLmdldFVJRChtb2RlbCk7XHJcblxyXG4gICAgICAgIC8vIFJvdyAwIC0tIE1ldGFkYXRhIExpbmtcclxuICAgICAgICBjb25zdCBtZXRhZGF0YUxpbmsgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgcm93RGF0YS5wdXNoKG1ldGFkYXRhTGluayk7XHJcbiAgICAgICAgR2VuZXJhbENvbXBvbmVudHMuY3JlYXRlTWV0YWRhdGFMaW5rKFxyXG4gICAgICAgICAgICBtZXRhZGF0YUxpbmssXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICBtb2RlbC5maWxlLnBhdGgsXHJcbiAgICAgICAgICAgIG1vZGVsLmRhdGEudHlwZSxcclxuICAgICAgICAgICAgbW9kZWwuZ2V0Q29yb3Nwb25kaW5nU3ltYm9sKCkpO1xyXG5cclxuICAgICAgICAvLyBSb3cgMSAtLSBUcmFmaWMgTGlnaHRcclxuICAgICAgICBjb25zdCB0cmFmaWNMaWdodCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgICByb3dEYXRhLnB1c2godHJhZmljTGlnaHQpO1xyXG4gICAgICAgIFByb2plY3RDb21wb25lbnRzLmNyZWF0ZVRyYWZpY0xpZ2h0KHRyYWZpY0xpZ2h0LCBtb2RlbC5nZXRVcmdlbmN5KCkpO1xyXG5cclxuICAgICAgICAvLyBSb3cgMiAtLSBUaXRsZSAmIERlc2NyaXB0aW9uXHJcbiAgICAgICAgY29uc3QgdGl0bGVBbmRTdW1tYXJ5ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIHJvd0RhdGEucHVzaCh0aXRsZUFuZFN1bW1hcnkpO1xyXG4gICAgICAgIFByb2plY3RDb21wb25lbnRzLmNyZWF0ZVRpdGxlKFxyXG4gICAgICAgICAgICB0aXRsZUFuZFN1bW1hcnksXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICBtb2RlbC5maWxlLnBhdGgsXHJcbiAgICAgICAgICAgICgpID0+IG1vZGVsLmRhdGEudGl0bGUgPz8gXCJcIixcclxuICAgICAgICAgICAgYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IG1vZGVsLmRhdGEudGl0bGUgPSB2YWx1ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxpbmVCcmVhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7XHJcbiAgICAgICAgdGl0bGVBbmRTdW1tYXJ5LmFwcGVuZENoaWxkKGxpbmVCcmVhayk7XHJcblxyXG4gICAgICAgIFByb2plY3RDb21wb25lbnRzLmNyZWF0ZVN1bW1hcnkoXHJcbiAgICAgICAgICAgIHRpdGxlQW5kU3VtbWFyeSxcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgIG1vZGVsLmRhdGEuZGVzY3JpcHRpb24gPz8gXCJcIixcclxuICAgICAgICAgICAgKHZhbHVlOiBzdHJpbmcpID0+IG1vZGVsLmRhdGEuZGVzY3JpcHRpb24gPSB2YWx1ZSk7XHJcblxyXG4gICAgICAgIC8vIFJvdyAzIC0tIFByaW9yaXR5XHJcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgcm93RGF0YS5wdXNoKHByaW9yaXR5KTtcclxuICAgICAgICBQcm9qZWN0Q29tcG9uZW50cy5jcmVhdGVQcmlvcml0eShcclxuICAgICAgICAgICAgcHJpb3JpdHksXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICAoKSA9PiBtb2RlbC5kYXRhLnByaW9yaXR5Py50b1N0cmluZygpID8/IFwiMFwiLFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWU6IHN0cmluZykgPT4gbW9kZWwuZGF0YS5wcmlvcml0eSA9IHZhbHVlIGFzIHVua25vd24gYXMgUHJpb3JpdHkpO1xyXG5cclxuICAgICAgICAvLyBSb3cgNCAtLSBEdWUgRGF0ZVxyXG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgcm93RGF0YS5wdXNoKGR1ZURhdGUpO1xyXG4gICAgICAgIEdlbmVyYWxDb21wb25lbnRzLmNyZWF0ZUNlbGxEYXRlKFxyXG4gICAgICAgICAgICBkdWVEYXRlLFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgTG5nLmd0KFwiRHVlRGF0ZVwiKSxcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWwuc2V0dGluZ3MuZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgKCkgPT4gbW9kZWwuZGF0YS5kdWUgPz8gXCJuYVwiLFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWU6IHN0cmluZykgPT4gbW9kZWwuZGF0YS5kdWUgPSB2YWx1ZSk7XHJcblxyXG4gICAgICAgIC8vIFJvdyA1IC0tIFN0YXR1c1xyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgICByb3dEYXRhLnB1c2goc3RhdHVzKTtcclxuICAgICAgICBQcm9qZWN0Q29tcG9uZW50cy5jcmVhdGVTdGF0dXMoXHJcbiAgICAgICAgICAgIHN0YXR1cyxcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgICgpID0+IG1vZGVsLmRhdGEuc3RhdHVzID8/IFwiQWN0aXZlXCIsXHJcbiAgICAgICAgICAgIGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiBtb2RlbC5kYXRhLnN0YXR1cyA9IHZhbHVlIGFzIHVua25vd24gYXMgU3RhdHVzKTtcclxuXHJcbiAgICAgICAgLy8gUm93IDYgLS0gVGFnc1xyXG4gICAgICAgIGNvbnN0IHRhZ3MgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgcm93RGF0YS5wdXNoKHRhZ3MpO1xyXG4gICAgICAgIERvY3VtZW50Q29tcG9uZW50cy5jcmVhdGVDZWxsVGFncyhcclxuICAgICAgICAgICAgdGFncyxcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgIG1vZGVsLmdldFRhZ3MoKSk7XHJcblxyXG5cclxuICAgICAgICBjb25zdCBoaWRlID0gdGhpcy5nZXRIaWRlU3RhdGUobW9kZWwsIHRoaXMuc2V0dGluZ3MubWF4RG9jdW1lbnRzKTtcclxuXHJcbiAgICAgICAgY29uc3Qgcm93ID0ge1xyXG4gICAgICAgICAgICByb3dVaWQsXHJcbiAgICAgICAgICAgIHJvd0RhdGEsXHJcbiAgICAgICAgICAgIHJvd0NsYXNzTGlzdCxcclxuICAgICAgICAgICAgaGlkZGVuOiBoaWRlXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgb25GaWx0ZXJCdXR0b24odHlwZTogc3RyaW5nLCBzdGF0dXM6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5maWx0ZXIuaW5jbHVkZXModHlwZSBhcyBGaWx0ZXJlZE1vZGVscykpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maWx0ZXIgPSB0aGlzLnNldHRpbmdzLmZpbHRlci5maWx0ZXIodiA9PiB2ICE9PSB0eXBlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZpbHRlci5wdXNoKHR5cGUgYXMgRmlsdGVyZWRNb2RlbHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uRmlsdGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBvbk1heERvY3VtZW50c0NoYW5nZShtYXhEb2N1bWVudHM6IG51bWJlcik6IFByb21pc2U8dW5kZWZpbmVkPiB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5tYXhEb2N1bWVudHMgPSBtYXhEb2N1bWVudHM7XHJcbiAgICAgICAgdGhpcy5vbkZpbHRlcigpO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBvblNlYXJjaChzZWFyY2g6IHN0cmluZywga2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGlmIChrZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgICAgICBpZiAoc2VhcmNoICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnNlYXJjaCA9IFNlYXJjaC5wYXJzZVNlYXJjaFRleHQoc2VhcmNoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25GaWx0ZXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2VhcmNoID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbHRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zZWFyY2ggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25GaWx0ZXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWFyY2g7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBvbkZpbHRlcigpIHtcclxuICAgICAgICB0aGlzLmdyYXlPdXRIZWFkZXIoKTtcclxuICAgICAgICBjb25zdCBiYXRjaFNpemUgPSB0aGlzLnNldHRpbmdzLmJhdGNoU2l6ZTtcclxuICAgICAgICBjb25zdCBzbGVlcEJldHdlZW5CYXRjaGVzID0gdGhpcy5zZXR0aW5ncy5zbGVlcEJldHdlZW5CYXRjaGVzO1xyXG4gICAgICAgIGxldCBzbGVlcFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICBjb25zdCBkb2N1bWVudHNMZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3Qgcm93czogUm93c1N0YXRlW10gPSBbXTtcclxuICAgICAgICBsZXQgdmlzaWJsZVJvd3MgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50c0xlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gdGhpcy5tb2RlbHNbaV07XHJcblxyXG4gICAgICAgICAgICBjb25zdCByb3dVaWQgPSB0aGlzLmdldFVJRChkb2N1bWVudCk7XHJcbiAgICAgICAgICAgIGxldCBoaWRlID0gdGhpcy5nZXRIaWRlU3RhdGUoZG9jdW1lbnQsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIGlmICh2aXNpYmxlUm93cyA+PSB0aGlzLnNldHRpbmdzLm1heERvY3VtZW50cykge1xyXG4gICAgICAgICAgICAgICAgaGlkZSA9IHRydWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhpZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7IHJvd1VpZCwgaGlkZGVuOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmlzaWJsZVJvd3MrKztcclxuICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7IHJvd1VpZCwgaGlkZGVuOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKChpICE9PSAwICYmIGkgJSBiYXRjaFNpemUgPT09IDApIHx8IGkgPT09IGRvY3VtZW50c0xlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFibGUuY2hhbmdlU2hvd0hpZGVTdGF0ZVJvd3Mocm93cyk7XHJcbiAgICAgICAgICAgICAgICByb3dzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICBzbGVlcFByb21pc2UgPSBIZWxwZXIuc2xlZXAoc2xlZXBCZXR3ZWVuQmF0Y2hlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubm9ybWFsaXplSGVhZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRIaWRlU3RhdGUobW9kZWw6IChQcmpUYXNrTWFuYWdlbWVudE1vZGVsPFRhc2tEYXRhIHwgVG9waWNEYXRhIHwgUHJvamVjdERhdGE+KSwgbWF4VmlzaWJsZVJvd3M6IG51bWJlciB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBzZWFyY2hSZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgbWF4Um93cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZmlsdGVyLmluY2x1ZGVzKFwiRG9uZVwiKSAmJiBtb2RlbC5kYXRhLnN0YXR1cyA9PT0gXCJEb25lXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zZWFyY2gpIHtcclxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IG1vZGVsLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdCA9IFNlYXJjaC5hcHBseVNlYXJjaExvZ2ljKHRoaXMuc2V0dGluZ3Muc2VhcmNoLCB0ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtYXhWaXNpYmxlUm93cyAmJiBtYXhWaXNpYmxlUm93cyA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93U3RhdHMgPSB0aGlzLnRhYmxlLmdldFJvd1N0YXRzKCk7XHJcbiAgICAgICAgICAgIG1heFJvd3MgPSByb3dTdGF0cy52aXNpYmxlUm93cyA+PSBtYXhWaXNpYmxlUm93cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGhpZGUgPSB0aGlzLmRldGVybWluZUhpZGVTdGF0ZShtb2RlbCk7XHJcblxyXG4gICAgICAgIGlmIChzZWFyY2hSZXN1bHQgJiYgIWhpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBTaG93cyB0aGUgZG9jdW1lbnQsIGlmIGl0IGlzIG5vdCBoaWRkZW4gYW5kIHRoZSBzZWFyY2ggd2FzIHN1Y2Nlc3NmdWxcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2V0dGluZ3Muc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBIaWRlIHRoZSBkb2N1bWVudCwgaWYgdGhlIHNlYXJjaCB3YXMgbm90IHN1Y2Nlc3NmdWwgYW5kIGFwbGljYWJsZVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIXNlYXJjaFJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF4Um93cyB8fCBoaWRlOyAvLyBFbHNlIHRoZSBkb2N1bWVudCBpcyBoaWRkZW4sIGlmIHRoZSBtYXggcm93cyBhcmUgcmVhY2hlZCBvciB0aGUgZG9jdW1lbnQgdHlwZSBpcyBoaWRkZW5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoaWRlOyAvLyBTdGFuZGFyZC1WZXJoYWx0ZW5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRldGVybWluZUhpZGVTdGF0ZShtb2RlbDogKFByalRhc2tNYW5hZ2VtZW50TW9kZWw8VGFza0RhdGEgfCBUb3BpY0RhdGEgfCBQcm9qZWN0RGF0YT4pKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZmlsdGVyLmluY2x1ZGVzKFwiVG9waWNcIikgJiYgbW9kZWwuZGF0YS50eXBlID09PSBcIlRvcGljXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5maWx0ZXIuaW5jbHVkZXMoXCJQcm9qZWN0XCIpICYmIG1vZGVsLmRhdGEudHlwZSA9PT0gXCJQcm9qZWN0XCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5maWx0ZXIuaW5jbHVkZXMoXCJUYXNrXCIpICYmIG1vZGVsLmRhdGEudHlwZSA9PT0gXCJUYXNrXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcGFyc2VTZXR0aW5ncygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnByb2Nlc3NvclNldHRpbmdzLm9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wdGlvbi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInRhZ3NcIjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnZhbHVlID09PSBcImFsbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudGFncyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9uLnZhbHVlID09PSBcInRoaXNcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdzID0gdGhpcy5wcm9jZXNzb3JTZXR0aW5ncz8uZnJvbnRtYXR0ZXI/LnRhZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhZ3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRhZ3MucHVzaCguLi50YWdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRhZ3MucHVzaCh0YWdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudGFncyA9IG9wdGlvbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWF4RG9jdW1lbnRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5tYXhEb2N1bWVudHMgPSBvcHRpb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmlsdGVyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maWx0ZXIgPSBvcHRpb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIGdldE1vZGVscygpOiBQcm9taXNlPChQcmpUYXNrTWFuYWdlbWVudE1vZGVsPFRhc2tEYXRhIHwgVG9waWNEYXRhIHwgUHJvamVjdERhdGE+KVtdPiB7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGVGb2xkZXIgPSB0aGlzLmdsb2JhbC5zZXR0aW5ncy50ZW1wbGF0ZUZvbGRlcjtcclxuICAgICAgICBjb25zdCBhbGxNb2RlbEZpbGVzID0gdGhpcy5tZXRhZGF0YUNhY2hlLmZpbHRlcihmaWxlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdEZpbHRlciA9IChmaWxlLm1ldGFkYXRhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlRvcGljXCIgfHwgZmlsZS5tZXRhZGF0YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQcm9qZWN0XCIgfHwgZmlsZS5tZXRhZGF0YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJUYXNrXCIpICYmXHJcbiAgICAgICAgICAgICAgICBmaWxlLmZpbGUucGF0aCAhPT0gdGhpcy5wcm9jZXNzb3JTZXR0aW5ncy5zb3VyY2UgJiZcclxuICAgICAgICAgICAgICAgICFmaWxlLmZpbGUucGF0aC5zdGFydHNXaXRoKHRlbXBsYXRlRm9sZGVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudGFncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdGaWx0ZXIgPSBIZWxwZXIuaXNUYWdJbmNsdWRlZCh0aGlzLnNldHRpbmdzLnRhZ3MsIGZpbGUubWV0YWRhdGEuZnJvbnRtYXR0ZXI/LnRhZ3MpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRGaWx0ZXIgJiYgdGFnRmlsdGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0RmlsdGVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG1vZGVsczogKFByalRhc2tNYW5hZ2VtZW50TW9kZWw8VGFza0RhdGEgfCBUb3BpY0RhdGEgfCBQcm9qZWN0RGF0YT4pW10gPSBbXTtcclxuICAgICAgICBhbGxNb2RlbEZpbGVzLmZvckVhY2goZmlsZSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZmlsZS5tZXRhZGF0YS5mcm9udG1hdHRlcj8udHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlRvcGljXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxzLnB1c2gobmV3IFRvcGljTW9kZWwoZmlsZS5maWxlKSBhcyBQcmpUYXNrTWFuYWdlbWVudE1vZGVsPFRvcGljRGF0YT4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlByb2plY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbHMucHVzaChuZXcgUHJvamVjdE1vZGVsKGZpbGUuZmlsZSkgYXMgUHJqVGFza01hbmFnZW1lbnRNb2RlbDxQcm9qZWN0RGF0YT4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlRhc2tcIjpcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbHMucHVzaChuZXcgVGFza01vZGVsKGZpbGUuZmlsZSkgYXMgUHJqVGFza01hbmFnZW1lbnRNb2RlbDxUYXNrRGF0YT4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBtb2RlbHM7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgdHlwZXMgb2YgbW9kZWxzIHRvIHNob3cuXHJcbiAqIEByZW1hcmtzIC0gYFRvcGljYCBpbmNsdWRlcyBhbGwgdG9waWNzLlxyXG4gKiAtIGBQcm9qZWN0YCBpbmNsdWRlcyBhbGwgcHJvamVjdHMuXHJcbiAqIC0gYFRhc2tgIGluY2x1ZGVzIGFsbCB0YXNrcy5cclxuICovXHJcbnR5cGUgRmlsdGVyZWRNb2RlbHMgPSBcIlRvcGljXCIgfCBcIlByb2plY3RcIiB8IFwiVGFza1wiIHwgXCJEb25lXCI7XHJcblxyXG4vKipcclxuICogVGhlIHNldHRpbmdzIGZvciB0aGUgcHJvamVjdCBibG9jayByZW5kZXIgY29tcG9uZW50LlxyXG4gKiBAcmVtYXJrcyBUaGUgc2V0dGluZ3MgYXJlIHBhcnNlZCBmcm9tIHRoZSBZQU1MIG9wdGlvbnMgaW4gdGhlIGNvZGUgYmxvY2suXHJcbiAqL1xyXG50eXBlIFByb2plY3RCbG9ja1JlbmRlclNldHRpbmdzID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdGFncyBhc3NvY2lhdGVkIHdpdGggdGhlIGRvY3VtZW50cy5cclxuICAgICAqIENhbiBiZSBgYWxsYCwgYHRoaXNgIG9yIGEgbGlzdCBvZiBzcGVjaWZpYyB0YWdzLlxyXG4gICAgICogYGFsbGAgaW5jbHVkZXMgYWxsIGRvY3VtZW50cyByZWdhcmRsZXNzIG9mIHRoZWlyIHRhZ3MuXHJcbiAgICAgKiBgdGhpc2AgaW5jbHVkZXMgZG9jdW1lbnRzIHRoYXQgaGF2ZSB0aGUgc2FtZSB0YWdzIGFzIHRoZSBjdXJyZW50IGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICB0YWdzOiBzdHJpbmdbXSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN5bWJvbCByZXByZXNlbnRpbmcgYSB0b3BpYy5cclxuICAgICAqL1xyXG4gICAgdG9waWNTeW1ib2w6IHN0cmluZyxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN5bWJvbCByZXByZXNlbnRpbmcgYSBwcm9qZWN0LlxyXG4gICAgICovXHJcbiAgICBwcm9qZWN0U3ltYm9sOiBzdHJpbmcsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTeW1ib2wgcmVwcmVzZW50aW5nIGEgdGFzay5cclxuICAgICAqL1xyXG4gICAgdGFza1N5bWJvbDogc3RyaW5nLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3ltYm9sIHVzZWQgZm9yIGRvY3VtZW50cyB0aGF0IGRvbid0IGZpdCBhbnkgb3RoZXIgY2F0ZWdvcnkuXHJcbiAgICAgKi9cclxuICAgIG90aGVyU3ltYm9sOiBzdHJpbmcsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaWx0ZXIgZm9yIHRoZSBtb2RlbCB0eXBlcyB0byBkaXNwbGF5LlxyXG4gICAgICogTXVzdCBiZSBhbiBhcnJheSBjb250YWluaW5nIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcclxuICAgICAqIGBUb3BpY2AsIGBQcm9qZWN0YCwgYFRhc2tgLlxyXG4gICAgICogT25seSB0aGUgdHlwZXMgbGlzdGVkIGluIHRoZSBhcnJheSB3aWxsIGJlIHNob3duLlxyXG4gICAgICovXHJcbiAgICBmaWx0ZXI6IEZpbHRlcmVkTW9kZWxzW10sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgbW9kZWxzIHRvIHNob3cgYXQgdGhlIHNhbWUgdGltZS5cclxuICAgICAqL1xyXG4gICAgbWF4RG9jdW1lbnRzOiBudW1iZXIsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2ggdGVybXMgYXJyYXkgdXNlZCB0byBmaWx0ZXIgdGhlIG1vZGVscy5cclxuICAgICAqIElmIHVuZGVmaW5lZCwgbm8gc2VhcmNoIGZpbHRlciBpcyBhcHBsaWVkLlxyXG4gICAgICovXHJcbiAgICBzZWFyY2g6IFNlYXJjaFRlcm1zQXJyYXkgfCB1bmRlZmluZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG1vZGVscyB0byBwcm9jZXNzIGluIG9uZSBiYXRjaC5cclxuICAgICAqL1xyXG4gICAgYmF0Y2hTaXplOiBudW1iZXIsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdGltZSB0byB3YWl0IChpbiBtaWxsaXNlY29uZHMpIGJldHdlZW4gcHJvY2Vzc2luZyBiYXRjaGVzIG9mIG1vZGVscy5cclxuICAgICAqL1xyXG4gICAgc2xlZXBCZXR3ZWVuQmF0Y2hlczogbnVtYmVyXHJcbn07XHJcbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBQcmogZnJvbSAnc3JjL21haW4nO1xyXG5pbXBvcnQgR2xvYmFsIGZyb20gJy4vR2xvYmFsJztcclxuaW1wb3J0IHsgTG9nZ2luZ0xldmVsIH0gZnJvbSAnLi9Mb2dnaW5nJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBQcmo7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUHJqKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgLy8gTG9nIExldmVsXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdMb2cgTGV2ZWwnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIGxvZyBsZXZlbCB0byB1c2UnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICAnbm9uZSc6ICdub25lJyxcclxuICAgICAgICAgICAgICAgICAgICAndHJhY2UnOiAndHJhY2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICdkZWJ1Zyc6ICdkZWJ1ZycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2luZm8nOiAnaW5mbycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3dhcm4nOiAnd2FybicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJzogJ2Vycm9yJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dMZXZlbClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dMZXZlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIEdsb2JhbC5nZXRJbnN0YW5jZSgpLmxvZ2dlci5zZXRMb2dMZXZlbCh2YWx1ZSBhcyBMb2dnaW5nTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBFZGl0YWJpbGl0eVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnUGVyZm9ybWFuY2UgTW9kZSAob25seSBNb2JpbGUpJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBwZXJmb3JtYW5jZSBvZiB0aGUgcGx1Z2luIGlzIGFmZmVjdGVkIGJ5IHRoaXMgc2V0dGluZy4gSWYgZGlzYWJsZWQsIHRoZSBlZGl0YWJpbGl0eSBvZiB0aGUgYmxvY2tzIGlzIGRpc2FibGVkLiBObyBlZmZlY3Qgb24gRGVza3RvcCEnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIExvY2FsaXNhdGlvblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0SGVhZGluZygpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdMb2NhbGlzYXRpb24nKTtcclxuXHJcbiAgICAgICAgLy8gTGFuZ3VhZ2VcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0xhbmd1YWdlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBsYW5ndWFnZSB0byB1c2UnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignZW4gfCBkZScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFuZ3VhZ2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFuZ3VhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gRGF0ZSBmb3JtYXRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0RhdGUgRm9ybWF0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBEYXRlIGZvcm1hdCB0byB1c2UnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignREQuTU0uWVlZWScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIERhdGUgZm9ybWF0IHNob3J0XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdTaG9ydCBkYXRlIGZvcm1hdCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdUaGUgc2hvcnQgRGF0ZSBmb3JtYXQgdG8gdXNlJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0RELk1NLllZJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0U2hvcnQpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdFNob3J0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEJhc2UgdGFnIGZvciBhbGwgcmVsYXRlZCBmaWxlc1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQmFzZSBUYWcnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIEJhc2UgVGFnIGZvciBhbGwgRWxlbWVudHMnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignI1lvdXJCYXNlVGFnJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYXNlVGFnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmJhc2VUYWcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gVGVtcGxhdGUgRm9sZGVyXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdUZW1wbGF0ZSBGb2xkZXInKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIEZvbGRlciB3aGVyZSBhbGwgVGVtcGxhdGVzIGFyZSBzdG9yZWQnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWW91clRlbXBsYXRlRm9sZGVyJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUZvbGRlcilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUZvbGRlciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBVc2VyIGluZm9ybWF0aW9uXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXRIZWFkaW5nKClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1VzZXIgSW5mb3JtYXRpb24nKTtcclxuXHJcbiAgICAgICAgLy8gVXNlciBOYW1lXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdVc2VyOiBOYW1lJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgbmFtZScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3VyIG5hbWUnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZXIubmFtZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VyLm5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gVXNlciBOYW1lIFNob3J0XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdVc2VyOiBTaG9ydCBuYW1lJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgbmFtZSBzaG9ydCBuYW1lJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lvdXIgbmFtZSBzaG9ydGVuZWQnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZXIuc2hvcnROYW1lKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZXIuc2hvcnROYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIFVzZXIgRW1haWxcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1VzZXI6IEVtYWlsJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgRS1NYWlsIGFkcmVzcycpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3VyIGVtYWlsJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VyLmVtYWlsKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZXIuZW1haWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gVXNlciBTdHJlZXRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1VzZXI6IFN0cmVldCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdZb3VyIHN0cmVldCcpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3VyIHN0cmVldCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlci5zdHJlZXQpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlci5zdHJlZXQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gVXNlciBDaXR5XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdVc2VyOiBDaXR5JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgY2l0eScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3VyIGNpdHknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZXIuY2l0eSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VyLmNpdHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gVXNlciBaaXBcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1VzZXI6IFppcCBDb2RlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgemlwIGNvZGUnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWW91ciB6aXAnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZXIuemlwKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZXIuemlwID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIFVzZXIgQ291bnRyeVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVXNlcjogQ291bnRyeScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdZb3VyIGNvdW50cnknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWW91ciBjb3VudHJ5JylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VyLmNvdW50cnkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlci5jb3VudHJ5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIERvY3VtZW50IFNldHRpbmdzXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXRIZWFkaW5nKClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0RvY3VtZW50IFNldHRpbmdzJyk7XHJcblxyXG4gICAgICAgIC8vIERlZmF1bHQgTWF4IFNob3dcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgTWF4IFNob3cnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIGRlZmF1bHQgbWF4IHNob3cgZm9yIFRhYmxlIEVudHJ5cycpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcyMDAnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRNYXhTaG93LnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE1heFNob3cgPSB2YWx1ZSBhcyB1bmtub3duIGFzIG51bWJlcjtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gU3ltYm9sXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdEb2N1bWVudCBTeW1ib2wnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIFN5bWJvbCBmb3IgcmVndWxhciBEb2N1bWVudHMnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignZmlsZS10ZXh0JylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kb2N1bWVudFNldHRpbmdzLnN5bWJvbClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kb2N1bWVudFNldHRpbmdzLnN5bWJvbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBIaWRlIFN5bWJvbFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnSGlkZSBTeW1ib2wnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIFN5bWJvbCBmb3IgaGlkZGVuIERvY3VtZW50cycpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdmaWxlLW1pbnVzLTInKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRvY3VtZW50U2V0dGluZ3MuaGlkZVN5bWJvbClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kb2N1bWVudFNldHRpbmdzLmhpZGVTeW1ib2wgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQ2x1c3RlciBTeW1ib2xcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0NsdXN0ZXIgU3ltYm9sJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBTeW1ib2wgZm9yIENsdXN0ZXIgRG9jdW1lbnRzJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2xpYnJhcnknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRvY3VtZW50U2V0dGluZ3MuY2x1c3RlclN5bWJvbClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kb2N1bWVudFNldHRpbmdzLmNsdXN0ZXJTeW1ib2wgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxufVxyXG4iLCAiZXhwb3J0IGludGVyZmFjZSBQcmpTZXR0aW5ncyB7XHJcbiAgICBsb2dMZXZlbDogc3RyaW5nO1xyXG4gICAgbW9iaWxlOiBib29sZWFuO1xyXG4gICAgbGFuZ3VhZ2U6IHN0cmluZztcclxuICAgIHVzZXI6IHtcclxuICAgICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgc2hvcnROYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgZW1haWw6IHN0cmluZztcclxuICAgICAgICBzdHJlZXQ6IHN0cmluZztcclxuICAgICAgICBjaXR5OiBzdHJpbmc7XHJcbiAgICAgICAgemlwOiBzdHJpbmc7XHJcbiAgICAgICAgY291bnRyeTogc3RyaW5nO1xyXG4gICAgfTtcclxuICAgIGRhdGVGb3JtYXQ6IHN0cmluZztcclxuICAgIGRhdGVGb3JtYXRTaG9ydDogc3RyaW5nO1xyXG4gICAgZGVmYXVsdE1heFNob3c6IG51bWJlcjtcclxuICAgIGJhdGNoU2l6ZVNob3c6IG51bWJlcjtcclxuICAgIGRvY3VtZW50U2V0dGluZ3M6IHtcclxuICAgICAgICBzeW1ib2w6IHN0cmluZztcclxuICAgICAgICBoaWRlU3ltYm9sOiBzdHJpbmc7XHJcbiAgICAgICAgY2x1c3RlclN5bWJvbDogc3RyaW5nO1xyXG4gICAgfTtcclxuICAgIHByalNldHRpbmdzOiB7XHJcbiAgICAgICAgdG9waWNTeW1ib2w6IHN0cmluZztcclxuICAgICAgICBwcm9qZWN0U3ltYm9sOiBzdHJpbmc7XHJcbiAgICAgICAgdGFza1N5bWJvbDogc3RyaW5nO1xyXG4gICAgfTtcclxuICAgIGJhc2VUYWc6IHN0cmluZztcclxuICAgIHRlbXBsYXRlRm9sZGVyOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQcmpTZXR0aW5ncyA9IHtcclxuICAgIGxvZ0xldmVsOiBcIm5vbmVcIixcclxuICAgIG1vYmlsZTogZmFsc2UsXHJcbiAgICBsYW5ndWFnZTogXCJlblwiLFxyXG4gICAgZGF0ZUZvcm1hdDogXCJERC5NTS5ZWVlZXCIsXHJcbiAgICBkYXRlRm9ybWF0U2hvcnQ6IFwiREQuTU0uWVlcIixcclxuICAgIHVzZXI6IHtcclxuICAgICAgICBcIm5hbWVcIjogXCJcIixcclxuICAgICAgICBcInNob3J0TmFtZVwiOiBcIlwiLFxyXG4gICAgICAgIFwiZW1haWxcIjogXCJcIixcclxuICAgICAgICBcInN0cmVldFwiOiBcIlwiLFxyXG4gICAgICAgIFwiY2l0eVwiOiBcIlwiLFxyXG4gICAgICAgIFwiemlwXCI6IFwiXCIsXHJcbiAgICAgICAgXCJjb3VudHJ5XCI6IFwiXCIsXHJcbiAgICB9LFxyXG4gICAgXCJkZWZhdWx0TWF4U2hvd1wiOiAyMDAsXHJcbiAgICBcImJhdGNoU2l6ZVNob3dcIjogMjUsXHJcbiAgICBkb2N1bWVudFNldHRpbmdzOiB7XHJcbiAgICAgICAgXCJzeW1ib2xcIjogXCJmaWxlLXRleHRcIixcclxuICAgICAgICBcImhpZGVTeW1ib2xcIjogXCJmaWxlLW1pbnVzLTJcIixcclxuICAgICAgICBcImNsdXN0ZXJTeW1ib2xcIjogXCJsaWJyYXJ5XCJcclxuICAgIH0sXHJcbiAgICBwcmpTZXR0aW5nczoge1xyXG4gICAgICAgIFwidG9waWNTeW1ib2xcIjogXCJhbGJ1bVwiLFxyXG4gICAgICAgIFwicHJvamVjdFN5bWJvbFwiOiBcImxheW91dC1saXN0XCIsXHJcbiAgICAgICAgXCJ0YXNrU3ltYm9sXCI6IFwiY2xpcGJvYXJkXCJcclxuICAgIH0sXHJcbiAgICBiYXNlVGFnOiAnUFJKJyxcclxuICAgIHRlbXBsYXRlRm9sZGVyOiAnVm9ybGFnZW4vJ1xyXG59O1xyXG4iLCAiaW1wb3J0IHsgTWVudSwgVEFic3RyYWN0RmlsZSwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IEdsb2JhbCBmcm9tIFwic3JjL2NsYXNzZXMvR2xvYmFsXCI7XHJcbmltcG9ydCBMbmcgZnJvbSBcInNyYy9jbGFzc2VzL0xuZ1wiO1xyXG5pbXBvcnQgeyBEb2N1bWVudE1vZGVsIH0gZnJvbSBcInNyYy9tb2RlbHMvRG9jdW1lbnRNb2RlbFwiO1xyXG5pbXBvcnQgeyBGaWxlVHlwZSB9IGZyb20gXCJzcmMvdHlwZXMvUHJqVHlwZXNcIjtcclxuaW1wb3J0IHsgRmlsZU1ldGFkYXRhIH0gZnJvbSBcIi4uL01ldGFkYXRhQ2FjaGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdldE1ldGFkYXRhIHtcclxuICAgIHN0YXRpYyBpbnN0YW5jZTogR2V0TWV0YWRhdGE7XHJcbiAgICBwcml2YXRlIGFwcCA9IEdsb2JhbC5nZXRJbnN0YW5jZSgpLmFwcDtcclxuICAgIHByaXZhdGUgbG9nZ2VyID0gR2xvYmFsLmdldEluc3RhbmNlKCkubG9nZ2VyO1xyXG4gICAgcHJpdmF0ZSBwbHVnaW4gPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5wbHVnaW47XHJcbiAgICBwcml2YXRlIG1ldGFkYXRhQ2FjaGUgPSBHbG9iYWwuZ2V0SW5zdGFuY2UoKS5tZXRhZGF0YUNhY2hlLkNhY2hlO1xyXG4gICAgcHJvdGVjdGVkIGV2ZW50c1JlZ2lzdGVyZWQgPSBmYWxzZTtcclxuICAgIHByb3RlY3RlZCBiaW5kQ29udGV4dE1lbnUgPSB0aGlzLm9uQ29udGV4dE1lbnUuYmluZCh0aGlzKTtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiSW5pdGlhbGl6aW5nIEdldE1ldGFkYXRhXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudHMoKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogR2V0TWV0YWRhdGEge1xyXG4gICAgICAgIGlmICghR2V0TWV0YWRhdGEuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgR2V0TWV0YWRhdGEuaW5zdGFuY2UgPSBuZXcgR2V0TWV0YWRhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEdldE1ldGFkYXRhLmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVjb25zdHJ1Y3RzIHRoZSAnR2V0TWV0YWRhdGEnIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UgJiYgdGhpcy5pbnN0YW5jZS5ldmVudHNSZWdpc3RlcmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UubG9nZ2VyLnRyYWNlKFwiRGVjb25zdHJ1Y3RpbmcgJ0dldE1ldGFkYXRhJyBldmVudHNcIik7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuYXBwLndvcmtzcGFjZS5vZmYoJ2ZpbGUtbWVudScsIHRoaXMuaW5zdGFuY2UuYmluZENvbnRleHRNZW51KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5ldmVudHNSZWdpc3RlcmVkID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5sb2dnZXIudHJhY2UoXCJObyAnR2V0TWV0YWRhdGEnIGV2ZW50cyB0byBkZWNvbnN0cnVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgdGhlICdHZXRNZXRhZGF0YScgZXZlbnRzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJFdmVudHMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1JlZ2lzdGVyZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJSZWdpc3RlcmluZyAnR2V0TWV0YWRhdGEnIGV2ZW50c1wiKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW1lbnUnLCB0aGlzLmJpbmRDb250ZXh0TWVudSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzUmVnaXN0ZXJlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIHRoZSAnR2V0TWV0YWRhdGEnIGNvbW1hbmRzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIlJlZ2lzdGVyaW5nICdHZXRNZXRhZGF0YScgY29tbWFuZHNcIik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiBcImdldC1tZXRhZGF0YS1maWxlXCIsXHJcbiAgICAgICAgICAgIG5hbWU6IExuZy5ndChcIlNob3dNZXRhZGF0YUZpbGVcIiksXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBHZXRNZXRhZGF0YS5nZXRJbnN0YW5jZSgpLmludm9rZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSAnR2V0TWV0YWRhdGEnIGNvbnRleHQgbWVudSBpdGVtXHJcbiAgICAgKiBAcGFyYW0gbWVudSBUaGUgY29udGV4dCBtZW51XHJcbiAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB0byBhZGQgdGhlIGNvbnRleHQgbWVudSBpdGVtIHRvXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Db250ZXh0TWVudShtZW51OiBNZW51LCBmaWxlOiBUQWJzdHJhY3RGaWxlKSB7XHJcbiAgICAgICAgLy8gQWxsb3cgb25seSBwZGYgZmlsZXNcclxuICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHx8ICFmaWxlLnBhdGguZW5kc1dpdGgoXCIucGRmXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbWV0YWRhdGFGaWxlID0gdGhpcy5nZXRDb3JyZXNwb25kaW5nTWV0YWRhdGFGaWxlKGZpbGUpO1xyXG4gICAgICAgIGlmICghbWV0YWRhdGFGaWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZG9jdW1lbnQgPSBuZXcgRG9jdW1lbnRNb2RlbChtZXRhZGF0YUZpbGUuZmlsZSk7XHJcbiAgICAgICAgaWYgKG1ldGFkYXRhRmlsZSkge1xyXG4gICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoTG5nLmd0KFwiU2hvd01ldGFkYXRhRmlsZVwiKSlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihkb2N1bWVudC5nZXRDb3Jvc3BvbmRpbmdTeW1ib2woKSlcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3Blbk1ldGFkYXRhRmlsZShkb2N1bWVudC5maWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbWV0YWRhdGEgZmlsZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50IChlLmcuIHBkZikgZmlsZVxyXG4gICAgICogQHBhcmFtIGZpbGUgVGhlIGRvY3VtZW50IGZpbGVcclxuICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSBmaWxlIG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRDb3JyZXNwb25kaW5nTWV0YWRhdGFGaWxlKGZpbGU6IFRGaWxlKTogRmlsZU1ldGFkYXRhIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YUNhY2hlLmZpbmQobWV0YWRhdGEgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gbWV0YWRhdGEubWV0YWRhdGEuZnJvbnRtYXR0ZXI/LnR5cGUgYXMgRmlsZVR5cGUgfCB1bmRlZmluZWQgfCBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlTGluayA9IG1ldGFkYXRhLm1ldGFkYXRhLmZyb250bWF0dGVyPy5maWxlIGFzIHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0eXBlICYmIGZpbGVMaW5rICYmIHR5cGUgPT09IFwiTWV0YWRhdGFcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVMaW5rLmNvbnRhaW5zKGZpbGUubmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wZW5zIHRoZSBtZXRhZGF0YSBmaWxlIGZvciB0aGUgYWN0aXZlIChlLmcuIHBkZikgZmlsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgaW52b2tlKCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuYXBwLndvcmtzcGFjZTtcclxuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gd29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUgfHwgIShhY3RpdmVGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHx8ICFhY3RpdmVGaWxlLnBhdGguZW5kc1dpdGgoXCIucGRmXCIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJObyBhY3RpdmUgcGRmIGZpbGUgZm91bmQuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhRmlsZSA9IHRoaXMuZ2V0Q29ycmVzcG9uZGluZ01ldGFkYXRhRmlsZShhY3RpdmVGaWxlKTtcclxuICAgICAgICBpZiAoIW1ldGFkYXRhRmlsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiTm8gbWV0YWRhdGEgZmlsZSB0byB0aGUgYWN0aXZlIHBkZiBmaWxlIGZvdW5kLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkb2N1bWVudCA9IG5ldyBEb2N1bWVudE1vZGVsKG1ldGFkYXRhRmlsZS5maWxlKTtcclxuICAgICAgICBhd2FpdCB0aGlzLm9wZW5NZXRhZGF0YUZpbGUoZG9jdW1lbnQuZmlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBvcGVuTWV0YWRhdGFGaWxlKGZpbGU6IFRGaWxlKSB7XHJcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoYE9wZW5pbmcgbWV0YWRhdGEgZmlsZSBmb3IgJHtmaWxlLm5hbWV9YCk7XHJcbiAgICAgICAgY29uc3Qgd29ya3NwYWNlID0gdGhpcy5hcHAud29ya3NwYWNlO1xyXG4gICAgICAgIGNvbnN0IG5ld0xlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcclxuICAgICAgICBhd2FpdCBuZXdMZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXdMZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG4gICAgICAgIHZpZXcuc3RhdGUubW9kZSA9ICdwcmV2aWV3JztcclxuICAgICAgICBuZXdMZWFmLnNldFZpZXdTdGF0ZSh2aWV3KTtcclxuICAgIH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBLDRDQUFBQSxTQUFBO0FBQUMsS0FBQyxTQUFVLE1BQU0sU0FBUztBQUMxQixVQUFJLE9BQU8sWUFBWSxVQUFVO0FBRWhDLFFBQUFBLFFBQU8sVUFBVSxVQUFVLFFBQVE7QUFBQSxNQUNwQyxXQUNTLE9BQU8sV0FBVyxjQUFjLE9BQU8sS0FBSztBQUVwRCxlQUFPLENBQUMsR0FBRyxPQUFPO0FBQUEsTUFDbkIsT0FDSztBQUVKLGFBQUssV0FBVyxRQUFRO0FBQUEsTUFDekI7QUFBQSxJQUNELEdBQUUsU0FBTSxXQUFZO0FBT25CLFVBQUksV0FBVyxZQUFhLFNBQVVDLE9BQU1DLFlBQVc7QUFFbkQsWUFBSTtBQUdKLFlBQUksT0FBTyxXQUFXLGVBQWUsT0FBTyxRQUFRO0FBQ2hELG1CQUFTLE9BQU87QUFBQSxRQUNwQjtBQUdBLFlBQUksT0FBTyxTQUFTLGVBQWUsS0FBSyxRQUFRO0FBQzVDLG1CQUFTLEtBQUs7QUFBQSxRQUNsQjtBQUdBLFlBQUksT0FBTyxlQUFlLGVBQWUsV0FBVyxRQUFRO0FBQ3hELG1CQUFTLFdBQVc7QUFBQSxRQUN4QjtBQUdBLFlBQUksQ0FBQyxVQUFVLE9BQU8sV0FBVyxlQUFlLE9BQU8sVUFBVTtBQUM3RCxtQkFBUyxPQUFPO0FBQUEsUUFDcEI7QUFHQSxZQUFJLENBQUMsVUFBVSxPQUFPLFdBQVcsZUFBZSxPQUFP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RyxHQUFHLEdBQUcsR0FBRyxhQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLGFBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsYUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBRXpDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxZQUFhLEdBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsR0FBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsYUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxZQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsR0FBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsYUFBYSxHQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxhQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBYSxHQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxhQUFhLEdBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxhQUFhLEdBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsR0FBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxhQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFFekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsR0FBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxhQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLGFBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBYSxHQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxZQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsYUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxhQUFhLEdBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxZQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsR0FBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsYUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxhQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUV6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBYSxHQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxZQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLGFBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxhQUFhLEdBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsYUFBYSxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLGdCQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxZQUFhLElBQUksRUFBRSxFQUFFLENBQUM7QUFDekMsZ0JBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQWEsR0FBSSxFQUFFLEVB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dGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJleGNlcHRpb24iLCAibWFwIiwgInNjaGVtYSIsICJ0eXBlIiwgImV4dGVuZCIsICJzdHIiLCAic3RyaW5nIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAic3RyIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAidHlwZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAidHlwZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInR5cGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJkb2N1bWVudCIsICJzZWxmIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJ0eXBlIiwgImRhdGUiLCAidHlwZSIsICJkb2N1bWVudCIsICJpbXBvcnRfb2JzaWRpYW4iLCAidHlwZSIsICJfYSIsICJ0eXBlIiwgImRvY3VtZW50IiwgImdsb2JhbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImRvY3VtZW50IiwgInR5cGUiXQp9Cg==
